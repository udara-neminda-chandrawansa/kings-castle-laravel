!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).THREE={})}(this,(function(t){function e(){}function i(t,e){this.x=t||0,this.y=e||0}function n(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function r(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function a(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function o(t,e,n,r,s,l,c,h,u,d){Object.defineProperty(this,"id",{value:fa++}),this.uuid=ua.generateUUID(),this.name="",this.image=void 0!==t?t:o.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:o.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==s?s:1006,this.minFilter=void 0!==l?l:1008,this.anisotropy=void 0!==u?u:1,this.format=void 0!==c?c:1023,this.type=void 0!==h?h:1009,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new a,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:3e3,this.version=0,this.onUpdate=null}function s(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function l(t,e,i){this.width=t,this.height=e,this.scissor=new s(0,0,t,e),this.scissorTest=!1,this.viewport=new s(0,0,t,e),i=i||{},this.texture=new o(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function c(t,e,i){l.call(this,t,e,i),this.samples=4}function h(t,e,i){l.call(this,t,e,i)}function u(t,e,i,n,r,a,s,l,c,h,u,d){o.call(this,null,a,s,l,c,h,n,r,u,d),this.image={data:t,width:e,height:i},this.magFilter=void 0!==c?c:1003,this.minFilter=void 0!==h?h:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function d(t,e){this.min=void 0!==t?t:new r(1/0,1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0,-1/0)}function p(t,e){this.center=void 0!==t?t:new r,this.radius=void 0!==e?e:0}function f(t,e){this.normal=void 0!==t?t:new r(1,0,0),this.constant=void 0!==e?e:0}function m(t,e,i,n,r,a){this.planes=[void 0!==t?t:new f,void 0!==e?e:new f,void 0!==i?i:new f,void 0!==n?n:new f,void 0!==r?r:new f,void 0!==a?a:new f]}function g(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function v(t){var e,i={};for(e in t)for(var n in i[e]={},t[e]){var r=t[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?i[e][n]=r.clone():Array.isArray(r)?i[e][n]=r.slice():i[e][n]=r}return i}function y(t){for(var e={},i=0;i<t.length;i++){var n,r=v(t[i]);for(n in r)e[n]=r[n]}return e}function _(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function b(){function t(r,a){!1!==i&&(n(r,a),e.requestAnimationFrame(t))}var e=null,i=!1,n=null;return{start:function(){!0!==i&&null!==n&&(e.requestAnimationFrame(t),i=!0)},stop:function(){i=!1},setAnimationLoop:function(t){n=t},setContext:function(t){e=t}}}function x(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=e.get(i);n&&(t.deleteBuffer(n.buffer),e.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r=e.get(i);if(void 0===r)e.set(i,function(e,i){var n=e.array,r=e.dynamic?35048:35044,a=t.createBuffer();return t.bindBuffer(i,a),t.bufferData(i,n,r),e.onUploadCallback(),i=5126,n instanceof Float32Array?i=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?i=5123:n instanceof Int16Array?i=5122:n instanceof Uint32Array?i=5125:n instanceof Int32Array?i=5124:n instanceof Int8Array?i=5120:n instanceof Uint8Array&&(i=5121),{buffer:a,type:i,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(i,n));else if(r.version<i.version){var a=i,o=a.array,s=a.updateRange;t.bindBuffer(n,r.buffer),!1===a.dynamic?t.bufferData(n,o,35044):-1===s.count?t.bufferSubData(n,0,o):0===s.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),r.version=i.version}}}}function w(t,e,i,n,a,o){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new r,this.vertexNormals=Array.isArray(n)?n:[],this.color=a&&a.isColor?a:new _,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=void 0!==o?o:0}function M(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||M.DefaultOrder}function E(){this.mask=1}function T(){Object.defineProperty(this,"id",{value:ba++}),this.uuid=ua.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=T.DefaultUp.clone();var t=new r,e=new M,i=new n,o=new r(1,1,1);e.onChange((function(){i.setFromEuler(e,!1)})),i.onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new g},normalMatrix:{value:new a}}),this.matrix=new g,this.matrixWorld=new g,this.matrixAutoUpdate=T.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new E,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function S(){Object.defineProperty(this,"id",{value:xa+=2}),this.uuid=ua.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function A(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function C(t,e,i){A.call(this,new Int8Array(t),e,i)}function L(t,e,i){A.call(this,new Uint8Array(t),e,i)}function D(t,e,i){A.call(this,new Uint8ClampedArray(t),e,i)}function P(t,e,i){A.call(this,new Int16Array(t),e,i)}function R(t,e,i){A.call(this,new Uint16Array(t),e,i)}function O(t,e,i){A.call(this,new Int32Array(t),e,i)}function I(t,e,i){A.call(this,new Uint32Array(t),e,i)}function z(t,e,i){A.call(this,new Float32Array(t),e,i)}function N(t,e,i){A.call(this,new Float64Array(t),e,i)}function k(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function F(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}function B(){Object.defineProperty(this,"id",{value:wa+=2}),this.uuid=ua.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function U(t,e,i,n,r,a){S.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new H(t,e,i,n,r,a)),this.mergeVertices()}function H(t,e,i,n,a,o){function s(t,e,i,n,a,o,s,m,g,v,y){var _=o/g,b=s/v,x=o/2,w=s/2,M=m/2;s=g+1;var E,T,S=v+1,A=o=0,C=new r;for(T=0;T<S;T++){var L=T*b-w;for(E=0;E<s;E++)C[t]=(E*_-x)*n,C[e]=L*a,C[i]=M,h.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[i]=0<m?1:-1,u.push(C.x,C.y,C.z),d.push(E/g),d.push(1-T/v),o+=1}for(T=0;T<v;T++)for(E=0;E<g;E++)t=p+E+s*(T+1),e=p+(E+1)+s*(T+1),i=p+(E+1)+s*T,c.push(p+E+s*T,t,i),c.push(t,e,i),A+=6;l.addGroup(f,A,y),f+=A,p+=o}B.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:a,depthSegments:o};var l=this;t=t||1,e=e||1,i=i||1,n=Math.floor(n)||1,a=Math.floor(a)||1,o=Math.floor(o)||1;var c=[],h=[],u=[],d=[],p=0,f=0;s("z","y","x",-1,-1,i,e,t,o,a,0),s("z","y","x",1,-1,i,e,-t,o,a,1),s("x","z","y",1,1,t,i,e,n,o,2),s("x","z","y",1,-1,t,i,-e,n,o,3),s("x","y","z",1,-1,t,e,i,n,a,4),s("x","y","z",-1,-1,t,e,-i,n,a,5),this.setIndex(c),this.addAttribute("position",new z(h,3)),this.addAttribute("normal",new z(u,3)),this.addAttribute("uv",new z(d,2))}function G(t,e,i,n){S.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new j(t,e,i,n)),this.mergeVertices()}function j(t,e,i,n){B.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r=(t=t||1)/2,a=(e=e||1)/2,o=(i=Math.floor(i)||1)+1,s=(n=Math.floor(n)||1)+1,l=t/i,c=e/n,h=[],u=[],d=[],p=[];for(t=0;t<s;t++){var f=t*c-a;for(e=0;e<o;e++)u.push(e*l-r,-f,0),d.push(0,0,1),p.push(e/i),p.push(1-t/n)}for(t=0;t<n;t++)for(e=0;e<i;e++)r=e+o*(t+1),a=e+1+o*(t+1),s=e+1+o*t,h.push(e+o*t,r,s),h.push(r,a,s);this.setIndex(h),this.addAttribute("position",new z(u,3)),this.addAttribute("normal",new z(d,3)),this.addAttribute("uv",new z(p,2))}function V(){Object.defineProperty(this,"id",{value:Ma++}),this.uuid=ua.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.vertexTangents=this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(t){V.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function q(t,e){this.origin=void 0!==t?t:new r,this.direction=void 0!==e?e:new r}function X(t,e,i){this.a=void 0!==t?t:new r,this.b=void 0!==e?e:new r,this.c=void 0!==i?i:new r}function Y(t){V.call(this),this.type="MeshBasicMaterial",this.color=new _(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(t)}function Z(t,e){T.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new Y({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function J(t,e,i,n){function r(t,i){e.buffers.color.setClear(t.r,t.g,t.b,i,n)}var a,o,s=new _(0),l=0,c=null,h=0;return{getClearColor:function(){return s},setClearColor:function(t,e){s.set(t),r(s,l=void 0!==e?e:1)},getClearAlpha:function(){return l},setClearAlpha:function(t){r(s,l=t)},render:function(e,n,u,d){n=n.background,(u=(u=t.vr).getSession&&u.getSession())&&"additive"===u.environmentBlendMode&&(n=null),null===n?(r(s,l),c=null,h=0):n&&n.isColor&&(r(n,1),d=!0,c=null,h=0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),n&&(n.isCubeTexture||n.isWebGLRenderTargetCube)?(void 0===o&&((o=new Z(new H(1,1,1),new W({type:"BackgroundCubeMaterial",uniforms:v(_a.cube.uniforms),vertexShader:_a.cube.vertexShader,fragmentShader:_a.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),i.update(o)),d=n.isWebGLRenderTargetCube?n.texture:n,o.material.uniforms.tCube.value=d,o.material.uniforms.tFlip.value=n.isWebGLRenderTargetCube?1:-1,c===n&&h===d.version||(o.material.needsUpdate=!0,c=n,h=d.version),e.unshift(o,o.geometry,o.material,0,0,null)):n&&n.isTexture&&(void 0===a&&((a=new Z(new j(2,2),new W({type:"BackgroundMaterial",uniforms:v(_a.background.uniforms),vertexShader:_a.background.vertexShader,fragmentShader:_a.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=n,!0===n.matrixAutoUpdate&&n.updateMatrix(),a.material.uniforms.uvTransform.value.copy(n.matrix),c===n&&h===n.version||(a.material.needsUpdate=!0,c=n,h=n.version),e.unshift(a,a.geometry,a.material,0,0,null))}}}function Q(t,e,i,n){var r;this.setMode=function(t){r=t},this.render=function(e,n){t.drawArrays(r,e,n),i.update(n,r)},this.renderInstances=function(a,o,s){if(n.isWebGL2)var l=t;else if(null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,o,s,a.maxInstancedCount),i.update(s,r,a.maxInstancedCount)}}function K(t,e,i){function n(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==i.precision?i.precision:"highp",s=n(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s),i=!0===i.logarithmicDepthBuffer,s=t.getParameter(34930);var l=t.getParameter(35660),c=t.getParameter(3379),h=t.getParameter(34076),u=t.getParameter(34921),d=t.getParameter(36347),p=t.getParameter(36348),f=t.getParameter(36349),m=0<l,g=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var i=e.get("EXT_texture_filter_anisotropic");return r=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:o,logarithmicDepthBuffer:i,maxTextures:s,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:h,maxAttributes:u,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:a?t.getParameter(36183):0}}function $(){function t(){h.value!==n&&(h.value=n,h.needsUpdate=0<r),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=h.value,!0!==r||null===o)for(r=n+4*a,e=e.matrixWorldInverse,c.getNormalMatrix(e),(null===o||o.length<r)&&(o=new Float32Array(r)),r=0;r!==a;++r,n+=4)l.copy(t[r]).applyMatrix4(e,c),l.normal.toArray(o,n),o[n+3]=l.constant;h.value=o,h.needsUpdate=!0}return i.numPlanes=a,o}var i=this,n=null,r=0,o=!1,s=!1,l=new f,c=new a,h={value:null,needsUpdate:!1};this.uniform=h,this.numIntersection=this.numPlanes=0,this.init=function(t,i,a){var s=0!==t.length||i||0!==r||o;return o=i,n=e(t,a,0),r=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(i,a,l,c,u,d){if(!o||null===i||0===i.length||s&&!l)s?e(null):t();else{var p=4*(l=s?0:r),f=u.clippingState||null;for(h.value=f,f=e(i,c,p,d),i=0;i!==p;++i)f[i]=n[i];u.clippingState=f,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=l}}}function tt(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];switch(i){case"WEBGL_depth_texture":var n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n}}}function et(t,e,i){function n(t){var o=t.target;for(var s in null!==(t=r[o.id]).index&&e.remove(t.index),t.attributes)e.remove(t.attributes[s]);o.removeEventListener("dispose",n),delete r[o.id],(s=a[t.id])&&(e.remove(s),delete a[t.id]),i.memory.geometries--}var r={},a={};return{get:function(t,e){var a=r[e.id];return a||(e.addEventListener("dispose",n),e.isBufferGeometry?a=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new B).setFromObject(t)),a=e._bufferGeometry),r[e.id]=a,i.memory.geometries++,a)},update:function(t){var i=t.index,n=t.attributes;for(var r in null!==i&&e.update(i,34963),n)e.update(n[r],34962);for(r in t=t.morphAttributes){n=0;for(var a=(i=t[r]).length;n<a;n++)e.update(i[n],34962)}},getWireframeAttribute:function(t){var i=a[t.id];if(i)return i;i=[];var n=t.index,r=t.attributes;if(null!==n){r=0;for(var o=(n=n.array).length;r<o;r+=3){var s=n[r+0],l=n[r+1],c=n[r+2];i.push(s,l,l,c,c,s)}}else for(n=r.position.array,r=0,o=n.length/3-1;r<o;r+=3)s=r+0,l=r+1,c=r+2,i.push(s,l,l,c,c,s);return i=new(65535<F(i)?I:R)(i,1),e.update(i,34963),a[t.id]=i}}}function it(t,e,i,n){var r,a,o;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,n){t.drawElements(r,n,a,e*o),i.update(n,r)},this.renderInstances=function(s,l,c){if(n.isWebGL2)var h=t;else if(null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,c,a,l*o,s.maxInstancedCount),i.update(c,r,s.maxInstancedCount)}}function nt(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,i,n){switch(n=n||1,e.calls++,i){case 4:e.triangles+=t/3*n;break;case 5:case 6:e.triangles+=n*(t-2);break;case 1:e.lines+=t/2*n;break;case 3:e.lines+=n*(t-1);break;case 2:e.lines+=n*t;break;case 0:e.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function rt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function at(t){var e={},i=new Float32Array(8);return{update:function(n,r,a,o){var s=n.morphTargetInfluences,l=s.length;if(void 0===(n=e[r.id])){n=[];for(var c=0;c<l;c++)n[c]=[c,0];e[r.id]=n}var h=a.morphTargets&&r.morphAttributes.position;for(a=a.morphNormals&&r.morphAttributes.normal,c=0;c<l;c++){var u=n[c];0!==u[1]&&(h&&r.removeAttribute("morphTarget"+c),a&&r.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++)(u=n[c])[0]=c,u[1]=s[c];for(n.sort(rt),c=0;8>c;c++)(u=n[c])&&(s=u[0],l=u[1])?(h&&r.addAttribute("morphTarget"+c,h[s]),a&&r.addAttribute("morphNormal"+c,a[s]),i[c]=l):i[c]=0;o.getUniforms().setValue(t,"morphTargetInfluences",i)}}}function ot(t,e){var i={};return{update:function(n){var r=e.render.frame,a=n.geometry,o=t.get(n,a);return i[o.id]!==r&&(a.isGeometry&&o.updateFromObject(n),t.update(o),i[o.id]=r),o},dispose:function(){i={}}}}function st(t,e,i,n,r,a,s,l,c,h){t=void 0!==t?t:[],o.call(this,t,void 0!==e?e:301,i,n,r,a,void 0!==s?s:1022,l,c,h),this.flipY=!1}function lt(t,e,i,n){o.call(this,null),this.image={data:t,width:e,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function ct(t,e,i,n){o.call(this,null),this.image={data:t,width:e,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function ht(t,e,i){var n=t[0];if(0>=n||0<n)return t;var r=e*i,a=Ca[r];if(void 0===a&&(a=new Float32Array(r),Ca[r]=a),0!==e)for(n.toArray(a,0),n=1,r=0;n!==e;++n)r+=i,t[n].toArray(a,r);return a}function ut(t,e){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function dt(t,e){for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}function pt(t,e){var i=La[e];void 0===i&&(i=new Int32Array(e),La[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function ft(t,e){var i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function mt(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y):ut(i,e)||(t.uniform2fv(this.addr,e),dt(i,e))}function gt(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z):void 0!==e.r?i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b):ut(i,e)||(t.uniform3fv(this.addr,e),dt(i,e))}function vt(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w):ut(i,e)||(t.uniform4fv(this.addr,e),dt(i,e))}function yt(t,e){var i=this.cache,n=e.elements;void 0===n?ut(i,e)||(t.uniformMatrix2fv(this.addr,!1,e),dt(i,e)):ut(i,n)||(Ra.set(n),t.uniformMatrix2fv(this.addr,!1,Ra),dt(i,n))}function _t(t,e){var i=this.cache,n=e.elements;void 0===n?ut(i,e)||(t.uniformMatrix3fv(this.addr,!1,e),dt(i,e)):ut(i,n)||(Pa.set(n),t.uniformMatrix3fv(this.addr,!1,Pa),dt(i,n))}function bt(t,e){var i=this.cache,n=e.elements;void 0===n?ut(i,e)||(t.uniformMatrix4fv(this.addr,!1,e),dt(i,e)):ut(i,n)||(Da.set(n),t.uniformMatrix4fv(this.addr,!1,Da),dt(i,n))}function xt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(e||Ea,r)}function wt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||Ta,r)}function Mt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||Sa,r)}function Et(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(e||Aa,r)}function Tt(t,e){var i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function St(t,e){var i=this.cache;ut(i,e)||(t.uniform2iv(this.addr,e),dt(i,e))}function At(t,e){var i=this.cache;ut(i,e)||(t.uniform3iv(this.addr,e),dt(i,e))}function Ct(t,e){var i=this.cache;ut(i,e)||(t.uniform4iv(this.addr,e),dt(i,e))}function Lt(t,e){t.uniform1fv(this.addr,e)}function Dt(t,e){t.uniform1iv(this.addr,e)}function Pt(t,e){t.uniform2iv(this.addr,e)}function Rt(t,e){t.uniform3iv(this.addr,e)}function Ot(t,e){t.uniform4iv(this.addr,e)}function It(t,e){e=ht(e,this.size,2),t.uniform2fv(this.addr,e)}function zt(t,e){e=ht(e,this.size,3),t.uniform3fv(this.addr,e)}function Nt(t,e){e=ht(e,this.size,4),t.uniform4fv(this.addr,e)}function kt(t,e){e=ht(e,this.size,4),t.uniformMatrix2fv(this.addr,!1,e)}function Ft(t,e){e=ht(e,this.size,9),t.uniformMatrix3fv(this.addr,!1,e)}function Bt(t,e){e=ht(e,this.size,16),t.uniformMatrix4fv(this.addr,!1,e)}function Ut(t,e,i){var n=e.length,r=pt(i,n);for(t.uniform1iv(this.addr,r),t=0;t!==n;++t)i.safeSetTexture2D(e[t]||Ea,r[t])}function Ht(t,e,i){var n=e.length,r=pt(i,n);for(t.uniform1iv(this.addr,r),t=0;t!==n;++t)i.safeSetTextureCube(e[t]||Aa,r[t])}function Gt(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return ft;case 35664:return mt;case 35665:return gt;case 35666:return vt;case 35674:return yt;case 35675:return _t;case 35676:return bt;case 35678:case 36198:return xt;case 35679:return Mt;case 35680:return Et;case 36289:return wt;case 5124:case 35670:return Tt;case 35667:case 35671:return St;case 35668:case 35672:return At;case 35669:case 35673:return Ct}}(e.type)}function jt(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Lt;case 35664:return It;case 35665:return zt;case 35666:return Nt;case 35674:return kt;case 35675:return Ft;case 35676:return Bt;case 35678:return Ut;case 35680:return Ht;case 5124:case 35670:return Dt;case 35667:case 35671:return Pt;case 35668:case 35672:return Rt;case 35669:case 35673:return Ot}}(e.type)}function Vt(t){this.id=t,this.seq=[],this.map={}}function Wt(t,e){this.seq=[],this.map={};for(var i=t.getProgramParameter(e,35718),n=0;n<i;++n){var r=t.getActiveUniform(e,n),a=t.getUniformLocation(e,r.name),o=this,s=r.name,l=s.length;for(Oa.lastIndex=0;;){var c=Oa.exec(s),h=Oa.lastIndex,u=c[1],d=c[3];if("]"===c[2]&&(u|=0),void 0===d||"["===d&&h+2===l){s=o,r=void 0===d?new Gt(u,r,a):new jt(u,r,a),s.seq.push(r),s.map[r.id]=r;break}void 0===(d=o.map[u])&&(d=new Vt(u),u=o,o=d,u.seq.push(o),u.map[o.id]=o),o=d}}}function qt(t,e,i,n){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),!0===n&&(!1===t.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===e?"vertex":"fragment",t.getShaderInfoLog(r),function(t){t=t.split("\n");for(var e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(i))),r}function Xt(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+t)}}function Yt(t,e){return"vec4 "+t+"( vec4 value ) { return "+(e=Xt(e))[0]+"ToLinear"+e[1]+"; }"}function Zt(t,e){return"vec4 "+t+"( vec4 value ) { return LinearTo"+(e=Xt(e))[0]+e[1]+"; }"}function Jt(t,e){switch(e){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="Uncharted2";break;case 4:e="OptimizedCineon";break;case 5:e="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function Qt(t){return""!==t}function Kt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function $t(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function te(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,e){if(void 0===(t=ma[e]))throw Error("Can not resolve #include <"+e+">");return te(t)}))}function ee(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(t,e,i,n){for(t="",e=parseInt(e);e<parseInt(i);e++)t+=n.replace(/\[ i \]/g,"[ "+e+" ]");return t}))}function ie(t,e,i,n,r,a,o,s){var l=t.context,c=n.defines,h=r.vertexShader,u=r.fragmentShader,d="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?d="SHADOWMAP_TYPE_PCF":2===a.shadowMapType&&(d="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case 301:case 302:p="ENVMAP_TYPE_CUBE";break;case 306:case 307:p="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:p="ENVMAP_TYPE_EQUIREC";break;case 305:p="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:f="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:m="ENVMAP_BLENDING_MULTIPLY";break;case 1:m="ENVMAP_BLENDING_MIX";break;case 2:m="ENVMAP_BLENDING_ADD"}}var g,v,y=0<t.gammaFactor?t.gammaFactor:1,_=o.isWebGL2?"":function(t,e,i){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qt).join("\n")}(n.extensions,a,e),b=function(t){var e,i=[];for(e in t){var n=t[e];!1!==n&&i.push("#define "+e+" "+n)}return i.join("\n")}(c),x=l.createProgram();return n.isRawShaderMaterial?(0<(c=[b].filter(Qt).join("\n")).length&&(c+="\n"),0<(e=[_,b].filter(Qt).join("\n")).length&&(e+="\n")):(c=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,b,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qt).join("\n"),e=[_,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,b,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+y,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.envMap?"#define "+f:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?ma.tonemapping_pars_fragment:"",0!==a.toneMapping?Jt("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?ma.encodings_pars_fragment:"",a.mapEncoding?Yt("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?Yt("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?Yt("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Yt("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?Zt("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Qt).join("\n")),h=$t(h=Kt(h=te(h),a),a),u=$t(u=Kt(u=te(u),a),a),h=ee(h),u=ee(u),o.isWebGL2&&!n.isRawShaderMaterial&&(o=!1,d=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==h.match(d)&&null!==u.match(d)&&(o=!0,h=h.replace(d,""),u=u.replace(d,"")),c="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+c,e=["#version 300 es\n\n#define varying in",o?"":"out highp vec4 pc_fragColor;",o?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+e),u=e+u,h=qt(l,35633,c+h,t.debug.checkShaderErrors),u=qt(l,35632,u,t.debug.checkShaderErrors),l.attachShader(x,h),l.attachShader(x,u),void 0!==n.index0AttributeName?l.bindAttribLocation(x,0,n.index0AttributeName):!0===a.morphTargets&&l.bindAttribLocation(x,0,"position"),l.linkProgram(x),t.debug.checkShaderErrors&&(t=l.getProgramInfoLog(x).trim(),a=l.getShaderInfoLog(h).trim(),o=l.getShaderInfoLog(u).trim(),p=d=!0,!1===l.getProgramParameter(x,35714)?(d=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(x,35715),"gl.getProgramInfoLog",t,a,o)):""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==a&&""!==o||(p=!1),p&&(this.diagnostics={runnable:d,material:n,programLog:t,vertexShader:{log:a,prefix:c},fragmentShader:{log:o,prefix:e}})),l.deleteShader(h),l.deleteShader(u),this.getUniforms=function(){return void 0===g&&(g=new Wt(l,x,s)),g},this.getAttributes=function(){if(void 0===v){for(var t={},e=l.getProgramParameter(x,35721),i=0;i<e;i++){var n=l.getActiveAttrib(x,i).name;t[n]=l.getAttribLocation(x,n)}v=t}return v},this.destroy=function(){l.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=Ia++,this.code=i,this.usedTimes=1,this.program=x,this.vertexShader=h,this.fragmentShader=u,this}function ne(t,e,i,n){function r(t,e){if(t)t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding);else var i=3e3;return 3e3===i&&e&&(i=3007),i}var a=[],o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s="precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(e,n,a,s,l,c,h){var u=o[e.type];if(h.isSkinnedMesh){var d=h.skeleton.bones;if(i.floatVertexTextures)d=1024;else{var p=Math.min(Math.floor((i.maxVertexUniforms-20)/4),d.length);p<d.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+d.length+" bones. This GPU supports "+p+"."),d=0):d=p}}else d=0;p=i.precision,null!==e.precision&&((p=i.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead."));var f=t.getRenderTarget();return{shaderID:u,precision:p,supportsVertexTextures:i.vertexTextures,outputEncoding:r(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:r(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:r(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:r(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(306===e.envMap.mapping||307===e.envMap.mapping),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:r(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:1===e.normalMapType,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:e.skinning&&0<d,maxBones:d,useVertexTexture:i.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&0<a.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:2===e.side,flipSided:1===e.side,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(r=0;r<s.length;r++)n.push(i[s[r]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.push(t.gammaFactor),n.join()},this.acquireProgram=function(r,o,s,l){for(var c,h=0,u=a.length;h<u;h++){var d=a[h];if(d.code===l){++(c=d).usedTimes;break}}return void 0===c&&(c=new ie(t,e,l,r,o,s,i,n),a.push(c)),c},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},this.programs=a}function re(){var t=new WeakMap;return{get:function(e){var i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,n){t.get(e)[i]=n},dispose:function(){t=new WeakMap}}}function ae(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function oe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function se(){function t(t,n,r,o,s,l){var c=e[i];return void 0===c?(c={id:t.id,object:t,geometry:n,material:r,program:r.program||a,groupOrder:o,renderOrder:t.renderOrder,z:s,group:l},e[i]=c):(c.id=t.id,c.object=t,c.geometry=n,c.material=r,c.program=r.program||a,c.groupOrder=o,c.renderOrder=t.renderOrder,c.z=s,c.group=l),i++,c}var e=[],i=0,n=[],r=[],a={id:-1};return{opaque:n,transparent:r,init:function(){i=0,n.length=0,r.length=0},push:function(e,i,a,o,s,l){e=t(e,i,a,o,s,l),(!0===a.transparent?r:n).push(e)},unshift:function(e,i,a,o,s,l){e=t(e,i,a,o,s,l),(!0===a.transparent?r:n).unshift(e)},sort:function(){1<n.length&&n.sort(ae),1<r.length&&r.sort(oe)}}}function le(){function t(i){(i=i.target).removeEventListener("dispose",t),delete e[i.id]}var e={};return{get:function(i,n){var r=e[i.id];if(void 0===r){var a=new se;e[i.id]={},e[i.id][n.id]=a,i.addEventListener("dispose",t)}else void 0===(a=r[n.id])&&(a=new se,r[n.id]=a);return a},dispose:function(){e={}}}}function ce(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":var n={direction:new r,color:new _,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new r,direction:new r,color:new _,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new r,color:new _,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new r,skyColor:new _,groundColor:new _};break;case"RectAreaLight":n={color:new _,position:new r,halfWidth:new r,halfHeight:new r}}return t[e.id]=n}}}function he(){for(var t=new ce,e={id:za++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;9>i;i++)e.probe.push(new r);var n=new r,a=new g,o=new g;return{setup:function(i,r,s){for(var l=0,c=0,h=0,u=0;9>u;u++)e.probe[u].set(0,0,0);var d=0,p=0,f=0,m=0,g=0;s=s.matrixWorldInverse,u=0;for(var v=i.length;u<v;u++){var y=i[u],_=y.color,b=y.intensity,x=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)l+=_.r*b,c+=_.g*b,h+=_.b*b;else if(y.isLightProbe)for(w=0;9>w;w++)e.probe[w].addScaledVector(y.sh.coefficients[w],b);else if(y.isDirectionalLight){var M=t.get(y);M.color.copy(y.color).multiplyScalar(y.intensity),M.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(n),M.direction.transformDirection(s),(M.shadow=y.castShadow)&&(b=y.shadow,M.shadowBias=b.bias,M.shadowRadius=b.radius,M.shadowMapSize=b.mapSize),e.directionalShadowMap[d]=w,e.directionalShadowMatrix[d]=y.shadow.matrix,e.directional[d]=M,d++}else y.isSpotLight?((M=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(s),M.color.copy(_).multiplyScalar(b),M.distance=x,M.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(n),M.direction.transformDirection(s),M.coneCos=Math.cos(y.angle),M.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),M.decay=y.decay,(M.shadow=y.castShadow)&&(b=y.shadow,M.shadowBias=b.bias,M.shadowRadius=b.radius,M.shadowMapSize=b.mapSize),e.spotShadowMap[f]=w,e.spotShadowMatrix[f]=y.shadow.matrix,e.spot[f]=M,f++):y.isRectAreaLight?((M=t.get(y)).color.copy(_).multiplyScalar(b),M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(s),o.identity(),a.copy(y.matrixWorld),a.premultiply(s),o.extractRotation(a),M.halfWidth.set(.5*y.width,0,0),M.halfHeight.set(0,.5*y.height,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),e.rectArea[m]=M,m++):y.isPointLight?((M=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(s),M.color.copy(y.color).multiplyScalar(y.intensity),M.distance=y.distance,M.decay=y.decay,(M.shadow=y.castShadow)&&(b=y.shadow,M.shadowBias=b.bias,M.shadowRadius=b.radius,M.shadowMapSize=b.mapSize,M.shadowCameraNear=b.camera.near,M.shadowCameraFar=b.camera.far),e.pointShadowMap[p]=w,e.pointShadowMatrix[p]=y.shadow.matrix,e.point[p]=M,p++):y.isHemisphereLight&&((M=t.get(y)).direction.setFromMatrixPosition(y.matrixWorld),M.direction.transformDirection(s),M.direction.normalize(),M.skyColor.copy(y.color).multiplyScalar(b),M.groundColor.copy(y.groundColor).multiplyScalar(b),e.hemi[g]=M,g++)}e.ambient[0]=l,e.ambient[1]=c,e.ambient[2]=h,e.directional.length=d,e.spot.length=f,e.rectArea.length=m,e.point.length=p,e.hemi.length=g,e.hash.stateID=e.id,e.hash.directionalLength=d,e.hash.pointLength=p,e.hash.spotLength=f,e.hash.rectAreaLength=m,e.hash.hemiLength=g,e.hash.shadowsLength=r.length},state:e}}function ue(){var t=new he,e=[],i=[];return{init:function(){e.length=0,i.length=0},state:{lightsArray:e,shadowsArray:i,lights:t},setupLights:function(n){t.setup(e,i,n)},pushLight:function(t){e.push(t)},pushShadow:function(t){i.push(t)}}}function de(){function t(i){(i=i.target).removeEventListener("dispose",t),delete e[i.id]}var e={};return{get:function(i,n){if(void 0===e[i.id]){var r=new ue;e[i.id]={},e[i.id][n.id]=r,i.addEventListener("dispose",t)}else void 0===e[i.id][n.id]?(r=new ue,e[i.id][n.id]=r):r=e[i.id][n.id];return r},dispose:function(){e={}}}}function pe(t){V.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(t)}function fe(t){V.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new r,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(t)}function me(t,e,n){function a(e,i,n,r,a,o){var s=e.geometry,l=v,c=e.customDepthMaterial;return n&&(l=y,c=e.customDistanceMaterial),c?l=c:(c=!1,i.morphTargets&&(s&&s.isBufferGeometry?c=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(c=s.morphTargets&&0<s.morphTargets.length)),e.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e),s=0,c&&(s|=1),(e=e.isSkinnedMesh&&i.skinning)&&(s|=2),l=l[s]),t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(s=l.uuid,c=i.uuid,void 0===(e=_[s])&&(e={},_[s]=e),void 0===(s=e[c])&&(s=l.clone(),e[c]=s),l=s),l.visible=i.visible,l.wireframe=i.wireframe,l.side=null!=i.shadowSide?i.shadowSide:b[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,n&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=a,l.farDistance=o),l}function o(i,n,r,s){if(!1!==i.visible){if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||c.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,i.matrixWorld);var l=e.update(i),h=i.material;if(Array.isArray(h))for(var u=l.groups,d=0,p=u.length;d<p;d++){var m=u[d],g=h[m.materialIndex];g&&g.visible&&(g=a(i,g,s,f,r.near,r.far),t.renderBufferDirect(r,null,l,g,i,m))}else h.visible&&(g=a(i,h,s,f,r.near,r.far),t.renderBufferDirect(r,null,l,g,i,null))}for(l=0,h=(i=i.children).length;l<h;l++)o(i[l],n,r,s)}}var c=new m,h=new g,u=new i,d=new i(n,n),p=new r,f=new r,v=Array(4),y=Array(4),_={},b={0:1,1:0,2:2},x=[new r(1,0,0),new r(-1,0,0),new r(0,0,1),new r(0,0,-1),new r(0,1,0),new r(0,-1,0)],w=[new r(0,1,0),new r(0,1,0),new r(0,1,0),new r(0,1,0),new r(0,0,1),new r(0,0,-1)],M=[new s,new s,new s,new s,new s,new s];for(n=0;4!==n;++n){var E=0!=(1&n),T=0!=(2&n),S=new pe({depthPacking:3201,morphTargets:E,skinning:T});v[n]=S,E=new fe({morphTargets:E,skinning:T}),y[n]=E}var A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,i,n){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==e.length){var r=t.getRenderTarget(),a=t.getActiveCubeFace(),s=t.getActiveMipMapLevel(),m=t.state;m.setBlending(0),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(var g,v=0,y=e.length;v<y;v++){var _=e[v];g=_.shadow;var b=_&&_.isPointLight;if(void 0===g)console.warn("THREE.WebGLShadowMap:",_,"has no shadow.");else{var E=g.camera;if(u.copy(g.mapSize),u.min(d),b){var T=u.x,S=u.y;M[0].set(2*T,S,T,S),M[1].set(0,S,T,S),M[2].set(3*T,S,T,S),M[3].set(T,S,T,S),M[4].set(3*T,0,T,S),M[5].set(T,0,T,S),u.x*=4,u.y*=2}for(null===g.map&&(g.map=new l(u.x,u.y,{minFilter:1003,magFilter:1003,format:1023}),g.map.texture.name=_.name+".shadowMap",E.updateProjectionMatrix()),g.isSpotLightShadow&&g.update(_),T=g.map,S=g.matrix,f.setFromMatrixPosition(_.matrixWorld),E.position.copy(f),b?(g=6,S.makeTranslation(-f.x,-f.y,-f.z)):(g=1,p.setFromMatrixPosition(_.target.matrixWorld),E.lookAt(p),E.updateMatrixWorld(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(E.projectionMatrix),S.multiply(E.matrixWorldInverse)),t.setRenderTarget(T),t.clear(),_=0;_<g;_++)b&&(p.copy(E.position),p.add(x[_]),E.up.copy(w[_]),E.lookAt(p),E.updateMatrixWorld(),m.viewport(M[_])),h.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),c.setFromMatrix(h),o(i,n,E,b)}}A.needsUpdate=!1,t.setRenderTarget(r,a,s)}}}function ge(t,e,i,n){function r(e,i,n){var r=new Uint8Array(4),a=t.createTexture();for(t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728),e=0;e<n;e++)t.texImage2D(i+e,0,6408,1,1,0,6408,5121,r);return a}function a(i,r){y[i]=1,0===_[i]&&(t.enableVertexAttribArray(i),_[i]=1),b[i]!==r&&((n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),b[i]=r)}function o(e){!0!==x[e]&&(t.enable(e),x[e]=!0)}function l(e){!1!==x[e]&&(t.disable(e),x[e]=!1)}function c(e,n,r,a,s,c,h,u){if(0===e)E&&(l(3042),E=!1);else if(E||(o(3042),E=!0),5!==e){if(e!==T||u!==R){if(100===S&&100===L||(t.blendEquation(32774),L=S=100),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}P=D=C=A=null,T=e,R=u}}else s=s||n,c=c||r,h=h||a,n===S&&s===L||(t.blendEquationSeparate(i.convert(n),i.convert(s)),S=n,L=s),r===A&&a===C&&c===D&&h===P||(t.blendFuncSeparate(i.convert(r),i.convert(a),i.convert(c),i.convert(h)),A=r,C=a,D=c,P=h),T=e,R=null}function h(e){O!==e&&(e?t.frontFace(2304):t.frontFace(2305),O=e)}function u(e){0!==e?(o(2884),e!==I&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):l(2884),I=e}function d(e,i,n){e?(o(32823),(N!==i||k!==n)&&(t.polygonOffset(i,n),N=i,k=n)):l(32823)}function p(e){void 0===e&&(e=33984+F-1),U!==e&&(t.activeTexture(e),U=e)}var f=new function(){var e=!1,i=new s,n=null,r=new s(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,a,o,s){!0===s&&(e*=o,n*=o,a*=o),i.set(e,n,a,o),!1===r.equals(i)&&(t.clearColor(e,n,a,o),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},m=new function(){var e=!1,i=null,n=null,r=null;return{setTest:function(t){t?o(2929):l(2929)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,r=n=i=null}}},g=new function(){var e=!1,i=null,n=null,r=null,a=null,s=null,c=null,h=null,u=null;return{setTest:function(t){t?o(2960):l(2960)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){n===e&&r===i&&a===o||(t.stencilFunc(e,i,o),n=e,r=i,a=o)},setOp:function(e,i,n){s===e&&c===i&&h===n||(t.stencilOp(e,i,n),s=e,c=i,h=n)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,u=h=c=s=a=r=n=i=null}}},v=t.getParameter(34921),y=new Uint8Array(v),_=new Uint8Array(v),b=new Uint8Array(v),x={},w=null,M=null,E=null,T=null,S=null,A=null,C=null,L=null,D=null,P=null,R=!1,O=null,I=null,z=null,N=null,k=null,F=t.getParameter(35661),B=!1;v=0,-1!==(v=t.getParameter(7938)).indexOf("WebGL")?(v=parseFloat(/^WebGL ([0-9])/.exec(v)[1]),B=1<=v):-1!==v.indexOf("OpenGL ES")&&(v=parseFloat(/^OpenGL ES ([0-9])/.exec(v)[1]),B=2<=v);var U=null,H={},G=new s,j=new s,V={};return V[3553]=r(3553,3553,1),V[34067]=r(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),g.setClear(0),o(2929),m.setFunc(3),h(!1),u(1),o(2884),c(0),{buffers:{color:f,depth:m,stencil:g},initAttributes:function(){for(var t=0,e=y.length;t<e;t++)y[t]=0},enableAttribute:function(t){a(t,0)},enableAttributeAndDivisor:a,disableUnusedAttributes:function(){for(var e=0,i=_.length;e!==i;++e)_[e]!==y[e]&&(t.disableVertexAttribArray(e),_[e]=0)},enable:o,disable:l,getCompressedTextureFormats:function(){if(null===w&&(w=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var i=t.getParameter(34467),n=0;n<i.length;n++)w.push(i[n]);return w},useProgram:function(e){return M!==e&&(t.useProgram(e),M=e,!0)},setBlending:c,setMaterial:function(t,e){2===t.side?l(2884):o(2884);var i=1===t.side;e&&(i=!i),h(i),1===t.blending&&!1===t.transparent?c(0):c(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),m.setFunc(t.depthFunc),m.setTest(t.depthTest),m.setMask(t.depthWrite),f.setMask(t.colorWrite),d(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:h,setCullFace:u,setLineWidth:function(e){e!==z&&(B&&t.lineWidth(e),z=e)},setPolygonOffset:d,setScissorTest:function(t){t?o(3089):l(3089)},activeTexture:p,bindTexture:function(e,i){null===U&&p();var n=H[U];void 0===n&&(n={type:void 0,texture:void 0},H[U]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||V[e]),n.type=e,n.texture=i)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===G.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),G.copy(e))},viewport:function(e){!1===j.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),j.copy(e))},reset:function(){for(var e=0;e<_.length;e++)1===_[e]&&(t.disableVertexAttribArray(e),_[e]=0);x={},U=w=null,H={},I=O=T=M=null,f.reset(),m.reset(),g.reset()}}}function ve(t,e,i,n,r,a,o){function s(t,e){return A?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function l(t,e,i,n){var r=1;if((t.width>n||t.height>n)&&(r=n/Math.max(t.width,t.height)),1>r||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)return e=(n=e?ua.floorPowerOfTwo:Math.floor)(r*t.width),r=n(r*t.height),void 0===T&&(T=s(e,r)),(i=i?s(e,r):T).width=e,i.height=r,i.getContext("2d").drawImage(t,0,0,e,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+e+"x"+r+")."),i;"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+").")}return t}function c(t){return ua.isPowerOfTwo(t.width)&&ua.isPowerOfTwo(t.height)}function h(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function u(e,i,r,a){t.generateMipmap(e),n.get(i).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function d(t,i){if(!r.isWebGL2)return t;var n=t;return 6403===t&&(5126===i&&(n=33326),5131===i&&(n=33325),5121===i&&(n=33321)),6407===t&&(5126===i&&(n=34837),5131===i&&(n=34843),5121===i&&(n=32849)),6408===t&&(5126===i&&(n=34836),5131===i&&(n=34842),5121===i&&(n=32856)),33325===n||33326===n||34842===n||34836===n?e.get("EXT_color_buffer_float"):(34843===n||34837===n)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),n}function p(t){return 1003===t||1004===t||1005===t?9728:9729}function f(e){(e=e.target).removeEventListener("dispose",f);var i=n.get(e);void 0!==i.__webglInit&&(t.deleteTexture(i.__webglTexture),n.remove(e)),e.isVideoTexture&&delete S[e.id],o.memory.textures--}function m(e){(e=e.target).removeEventListener("dispose",m);var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(r=0;6>r;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}o.memory.textures--}function g(t,e){var r=n.get(t);if(t.isVideoTexture){var a=t.id,s=o.render.frame;S[a]!==s&&(S[a]=s,t.update())}if(0<t.version&&r.__version!==t.version)if(void 0===(a=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void x(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}i.activeTexture(33984+e),i.bindTexture(3553,r.__webglTexture)}function v(e,o){var s=n.get(e);if(6===e.image.length)if(0<e.version&&s.__version!==e.version){b(s,e),i.activeTexture(33984+o),i.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY),o=e&&e.isCompressedTexture;for(var p=e.image[0]&&e.image[0].isDataTexture,f=[],m=0;6>m;m++)f[m]=o||p?p?e.image[m].image:e.image[m]:l(e.image[m],!1,!0,r.maxCubemapSize);var g=f[0],v=c(g)||r.isWebGL2,y=a.convert(e.format),x=a.convert(e.type),w=d(y,x);for(_(34067,e,v),m=0;6>m;m++)if(o)for(var M,E=f[m].mipmaps,T=0,S=E.length;T<S;T++)M=E[T],1023!==e.format&&1022!==e.format?-1<i.getCompressedTextureFormats().indexOf(y)?i.compressedTexImage2D(34069+m,T,w,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+m,T,w,M.width,M.height,0,y,x,M.data);else p?i.texImage2D(34069+m,0,w,f[m].width,f[m].height,0,y,x,f[m].data):i.texImage2D(34069+m,0,w,y,x,f[m]);s.__maxMipLevel=o?E.length-1:0,h(e,v)&&u(34067,e,g.width,g.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(33984+o),i.bindTexture(34067,s.__webglTexture)}function y(t,e){i.activeTexture(33984+e),i.bindTexture(34067,n.get(t).__webglTexture)}function _(i,o,s){s?(t.texParameteri(i,10242,a.convert(o.wrapS)),t.texParameteri(i,10243,a.convert(o.wrapT)),32879!==i&&35866!==i||t.texParameteri(i,32882,a.convert(o.wrapR)),t.texParameteri(i,10240,a.convert(o.magFilter)),t.texParameteri(i,10241,a.convert(o.minFilter))):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),32879!==i&&35866!==i||t.texParameteri(i,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,10240,p(o.magFilter)),t.texParameteri(i,10241,p(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(s=e.get("EXT_texture_filter_anisotropic"))||1015===o.type&&null===e.get("OES_texture_float_linear")||1016===o.type&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear"))||!(1<o.anisotropy||n.get(o).__currentAnisotropy)||(t.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}function b(e,i){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),o.memory.textures++)}function x(e,n,o){var s=3553;n.isDataTexture2DArray&&(s=35866),n.isDataTexture3D&&(s=32879),b(e,n),i.activeTexture(33984+o),i.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment),o=(o=!r.isWebGL2&&(1001!==n.wrapS||1001!==n.wrapT||1003!==n.minFilter&&1006!==n.minFilter))&&!1===c(n.image);var p=c(o=l(n.image,o,!1,r.maxTextureSize))||r.isWebGL2,f=a.convert(n.format),m=a.convert(n.type),g=d(f,m);_(s,n,p);var v=n.mipmaps;if(n.isDepthTexture){if(g=6402,1015===n.type){if(!r.isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");g=36012}else r.isWebGL2&&(g=33189);1026===n.format&&6402===g&&1012!==n.type&&1014!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=1012,m=a.convert(n.type)),1027===n.format&&(g=34041,1020!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=1020,m=a.convert(n.type))),i.texImage2D(3553,0,g,o.width,o.height,0,f,m,null)}else if(n.isDataTexture)if(0<v.length&&p){for(var y=0,x=v.length;y<x;y++)s=v[y],i.texImage2D(3553,y,g,s.width,s.height,0,f,m,s.data);n.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else i.texImage2D(3553,0,g,o.width,o.height,0,f,m,o.data),e.__maxMipLevel=0;else if(n.isCompressedTexture){for(y=0,x=v.length;y<x;y++)s=v[y],1023!==n.format&&1022!==n.format?-1<i.getCompressedTextureFormats().indexOf(f)?i.compressedTexImage2D(3553,y,g,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,y,g,s.width,s.height,0,f,m,s.data);e.__maxMipLevel=v.length-1}else if(n.isDataTexture2DArray)i.texImage3D(35866,0,g,o.width,o.height,o.depth,0,f,m,o.data),e.__maxMipLevel=0;else if(n.isDataTexture3D)i.texImage3D(32879,0,g,o.width,o.height,o.depth,0,f,m,o.data),e.__maxMipLevel=0;else if(0<v.length&&p){for(y=0,x=v.length;y<x;y++)s=v[y],i.texImage2D(3553,y,g,f,m,s);n.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else i.texImage2D(3553,0,g,f,m,o),e.__maxMipLevel=0;h(n,p)&&u(3553,n,o.width,o.height),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function w(e,r,o,s){var l=a.convert(r.texture.format),c=a.convert(r.texture.type),h=d(l,c);i.texImage2D(s,0,h,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function M(e,i,n){if(t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer)n?(n=E(i),t.renderbufferStorageMultisample(36161,n,33189,i.width,i.height)):t.renderbufferStorage(36161,33189,i.width,i.height),t.framebufferRenderbuffer(36160,36096,36161,e);else if(i.depthBuffer&&i.stencilBuffer)n?(n=E(i),t.renderbufferStorageMultisample(36161,n,34041,i.width,i.height)):t.renderbufferStorage(36161,34041,i.width,i.height),t.framebufferRenderbuffer(36160,33306,36161,e);else{e=d(e=a.convert(i.texture.format),a.convert(i.texture.type)),n?(n=E(i),t.renderbufferStorageMultisample(36161,n,e,i.width,i.height)):t.renderbufferStorage(36161,e,i.width,i.height)}t.bindRenderbuffer(36161,null)}function E(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}var T,S={},A="undefined"!=typeof OffscreenCanvas,C=0,L=!1,D=!1;this.allocateTextureUnit=function(){var t=C;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),C+=1,t},this.resetTextureUnits=function(){C=0},this.setTexture2D=g,this.setTexture2DArray=function(t,e){var r=n.get(t);0<t.version&&r.__version!==t.version?x(r,t,e):(i.activeTexture(33984+e),i.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=n.get(t);0<t.version&&r.__version!==t.version?x(r,t,e):(i.activeTexture(33984+e),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=v,this.setTextureCubeDynamic=y,this.setupRenderTarget=function(e){var s=n.get(e),l=n.get(e.texture);e.addEventListener("dispose",m),l.__webglTexture=t.createTexture(),o.memory.textures++;var p=!0===e.isWebGLRenderTargetCube,f=!0===e.isWebGLMultisampleRenderTarget,v=c(e)||r.isWebGL2;if(p)for(s.__webglFramebuffer=[],f=0;6>f;f++)s.__webglFramebuffer[f]=t.createFramebuffer();else if(s.__webglFramebuffer=t.createFramebuffer(),f)if(r.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer),f=a.convert(e.texture.format);var y=a.convert(e.texture.type);f=d(f,y),y=E(e),t.renderbufferStorageMultisample(36161,y,f,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),M(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(p){for(i.bindTexture(34067,l.__webglTexture),_(34067,e.texture,v),f=0;6>f;f++)w(s.__webglFramebuffer[f],e,36064,34069+f);h(e.texture,v)&&u(34067,e.texture,e.width,e.height),i.bindTexture(34067,null)}else i.bindTexture(3553,l.__webglTexture),_(3553,e.texture,v),w(s.__webglFramebuffer,e,36064,3553),h(e.texture,v)&&u(3553,e.texture,e.width,e.height),i.bindTexture(3553,null);if(e.depthBuffer){if(s=n.get(e),l=!0===e.isWebGLRenderTargetCube,e.depthTexture){if(l)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,s.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(n.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),g(e.depthTexture,0),s=n.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,s,0);else{if(1027!==e.depthTexture.format)throw Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,s,0)}}else if(l)for(s.__webglDepthbuffer=[],l=0;6>l;l++)t.bindFramebuffer(36160,s.__webglFramebuffer[l]),s.__webglDepthbuffer[l]=t.createRenderbuffer(),M(s.__webglDepthbuffer[l],e);else t.bindFramebuffer(36160,s.__webglFramebuffer),s.__webglDepthbuffer=t.createRenderbuffer(),M(s.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(t){var e=t.texture,a=c(t)||r.isWebGL2;if(h(e,a)){a=t.isWebGLRenderTargetCube?34067:3553;var o=n.get(e).__webglTexture;i.bindTexture(a,o),u(a,e,t.width,t.height),i.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var i=n.get(e);t.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,i.__webglFramebuffer),i=e.width;var a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),t=t.texture),g(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),D=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?v(t,e):y(t,e)}}function ye(t,e,i){return{convert:function(t){if(1e3===t)return 10497;if(1001===t)return 33071;if(1002===t)return 33648;if(1003===t)return 9728;if(1004===t)return 9984;if(1005===t)return 9986;if(1006===t)return 9729;if(1007===t)return 9985;if(1008===t)return 9987;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t){if(i.isWebGL2)return 5131;var n=e.get("OES_texture_half_float");if(null!==n)return n.HALF_FLOAT_OES}if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(100===t)return 32774;if(101===t)return 32778;if(102===t)return 32779;if(200===t)return 0;if(201===t)return 1;if(202===t)return 768;if(203===t)return 769;if(204===t)return 770;if(205===t)return 771;if(206===t)return 772;if(207===t)return 773;if(208===t)return 774;if(209===t)return 775;if(210===t)return 776;if((33776===t||33777===t||33778===t||33779===t)&&null!==(n=e.get("WEBGL_compressed_texture_s3tc"))){if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===t||35841===t||35842===t||35843===t)&&null!==(n=e.get("WEBGL_compressed_texture_pvrtc"))){if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t&&null!==(n=e.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t)&&null!==(n=e.get("WEBGL_compressed_texture_astc")))return t;if(103===t||104===t){if(i.isWebGL2){if(103===t)return 32775;if(104===t)return 32776}if(null!==(n=e.get("EXT_blend_minmax"))){if(103===t)return n.MIN_EXT;if(104===t)return n.MAX_EXT}}if(1020===t){if(i.isWebGL2)return 34042;if(null!==(n=e.get("WEBGL_depth_texture")))return n.UNSIGNED_INT_24_8_WEBGL}return 0}}}function _e(){T.call(this),this.type="Group"}function be(){T.call(this),this.type="Camera",this.matrixWorldInverse=new g,this.projectionMatrix=new g,this.projectionMatrixInverse=new g}function xe(t,e,i,n){be.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function we(t){xe.call(this),this.cameras=t||[]}function Me(t,e,i){ka.setFromMatrixPosition(e.matrixWorld),Fa.setFromMatrixPosition(i.matrixWorld);var n=ka.distanceTo(Fa),r=e.projectionMatrix.elements,a=i.projectionMatrix.elements,o=r[14]/(r[10]-1);i=r[14]/(r[10]+1);var s=(r[9]+1)/r[5],l=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0];r=o*c,a=o*h,c=(h=n/(-c+h))*-c,e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(c),t.translateZ(h),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld),e=o+h,o=i+h,t.projectionMatrix.makePerspective(r-c,a+(n-c),s*i/o*e,l*i/o*e,e,o)}function Ee(t){function e(){return null!==u&&!0===u.isPresenting}function a(){if(e()){var i=u.getEyeParameters("left");l=2*i.renderWidth*y,c=i.renderHeight*y,A=t.getPixelRatio(),t.getSize(C),t.setDrawingBufferSize(l,c,1),E.viewport.set(0,0,l/2,c),T.viewport.set(l/2,0,l/2,c),D.start()}else h.enabled&&t.setDrawingBufferSize(C.width,C.height,A),D.stop()}function o(t,e){null!==e&&4===e.length&&t.set(e[0]*l,e[1]*c,e[2]*l,e[3]*c)}var l,c,h=this,u=null,d=null,p=null,f=[],m=new g,v=new g,y=1,_="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(d=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",a,!1));var x=new g,w=new n,M=new r,E=new xe;E.viewport=new s,E.layers.enable(1);var T=new xe;T.viewport=new s,T.layers.enable(2);var S=new we([E,T]);S.layers.enable(1),S.layers.enable(2);var A,C=new i,L=[];this.enabled=!1,this.getController=function(t){var e=f[t];return void 0===e&&((e=new _e).matrixAutoUpdate=!1,e.visible=!1,f[t]=e),e},this.getDevice=function(){return u},this.setDevice=function(t){void 0!==t&&(u=t),D.setContext(t)},this.setFramebufferScaleFactor=function(t){y=t},this.setReferenceSpaceType=function(t){_=t},this.setPoseTarget=function(t){void 0!==t&&(p=t)},this.getCamera=function(t){var i="local-floor"===_?1.6:0;if(!1===e())return t.position.set(0,i,0),t.rotation.set(0,0,0),t;if(u.depthNear=t.near,u.depthFar=t.far,u.getFrameData(d),"local-floor"===_){var n=u.stageParameters;n?m.fromArray(n.sittingToStandingTransform):m.makeTranslation(0,i,0)}i=d.pose,(n=null!==p?p:t).matrix.copy(m),n.matrix.decompose(n.position,n.quaternion,n.scale),null!==i.orientation&&(w.fromArray(i.orientation),n.quaternion.multiply(w)),null!==i.position&&(w.setFromRotationMatrix(m),M.fromArray(i.position),M.applyQuaternion(w),n.position.add(M)),n.updateMatrixWorld(),E.near=t.near,T.near=t.near,E.far=t.far,T.far=t.far,E.matrixWorldInverse.fromArray(d.leftViewMatrix),T.matrixWorldInverse.fromArray(d.rightViewMatrix),v.getInverse(m),"local-floor"===_&&(E.matrixWorldInverse.multiply(v),T.matrixWorldInverse.multiply(v)),null!==(t=n.parent)&&(x.getInverse(t.matrixWorld),E.matrixWorldInverse.multiply(x),T.matrixWorldInverse.multiply(x)),E.matrixWorld.getInverse(E.matrixWorldInverse),T.matrixWorld.getInverse(T.matrixWorldInverse),E.projectionMatrix.fromArray(d.leftProjectionMatrix),T.projectionMatrix.fromArray(d.rightProjectionMatrix),Me(S,E,T),(t=u.getLayers()).length&&(t=t[0],o(E.viewport,t.leftBounds),o(T.viewport,t.rightBounds));t:for(t=0;t<f.length;t++){i=f[t];e:{n=t;for(var r=navigator.getGamepads&&navigator.getGamepads(),a=0,s=0,l=r.length;a<l;a++){var c=r[a];if(c&&("Daydream Controller"===c.id||"Gear VR Controller"===c.id||"Oculus Go Controller"===c.id||"OpenVR Gamepad"===c.id||c.id.startsWith("Oculus Touch")||c.id.startsWith("Spatial Controller"))){if(s===n){n=c;break e}s++}}n=void 0}if(void 0!==n&&void 0!==n.pose){if(null===n.pose)break t;!1===(r=n.pose).hasPosition&&i.position.set(.2,-.6,-.05),null!==r.position&&i.position.fromArray(r.position),null!==r.orientation&&i.quaternion.fromArray(r.orientation),i.matrix.compose(i.position,i.quaternion,i.scale),i.matrix.premultiply(m),i.matrix.decompose(i.position,i.quaternion,i.scale),i.matrixWorldNeedsUpdate=!0,i.visible=!0,r="Daydream Controller"===n.id?0:1,void 0===L[t]&&(L[t]=!1),L[t]!==n.buttons[r].pressed&&(L[t]=n.buttons[r].pressed,!0===L[t]?i.dispatchEvent({type:"selectstart"}):(i.dispatchEvent({type:"selectend"}),i.dispatchEvent({type:"select"})))}else i.visible=!1}return S},this.getStandingMatrix=function(){return m},this.isPresenting=e;var D=new b;this.setAnimationLoop=function(t){D.setAnimationLoop(t),e()&&D.start()},this.submitFrame=function(){e()&&u.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",a)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Te(t){function e(){return null!==l&&null!==c}function i(t){for(var e=0;e<d.length;e++)p[e]===t.inputSource&&d[e].dispatchEvent({type:t.type})}function n(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),_.stop()}function r(t){c=t,_.setContext(l),_.start()}function a(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}var o=t.context,l=null,c=null,h="local-floor",u=null,d=[],p=[],f=new xe;f.layers.enable(1),f.viewport=new s;var m=new xe;m.layers.enable(2),m.viewport=new s;var v=new we([f,m]);v.layers.enable(1),v.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=d[t];return void 0===e&&((e=new _e).matrixAutoUpdate=!1,e.visible=!1,d[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){h=t},this.setSession=function(t){null!==(l=t)&&(l.addEventListener("select",i),l.addEventListener("selectstart",i),l.addEventListener("selectend",i),l.addEventListener("end",n),l.updateRenderState({baseLayer:new XRWebGLLayer(l,o)}),l.requestReferenceSpace(h).then(r),p=l.inputSources,l.addEventListener("inputsourceschange",(function(){p=l.inputSources,console.log(p);for(var t=0;t<d.length;t++)d[t].userData.inputSource=p[t]})))},this.getCamera=function(t){if(e()){var i=t.parent,n=v.cameras;a(v,i);for(var r=0;r<n.length;r++)a(n[r],i);for(t.matrixWorld.copy(v.matrixWorld),r=0,i=(t=t.children).length;r<i;r++)t[r].updateMatrixWorld(!0);return Me(v,f,m),v}return t},this.isPresenting=e;var y=null,_=new b;_.setAnimationLoop((function(e,i){if(null!==(u=i.getViewerPose(c))){var n=u.views,r=l.renderState.baseLayer;t.setFramebuffer(r.framebuffer);for(var a=0;a<n.length;a++){var o=n[a],s=r.getViewport(o),h=v.cameras[a];h.matrix.fromArray(o.transform.inverse.matrix).getInverse(h.matrix),h.projectionMatrix.fromArray(o.projectionMatrix),h.viewport.set(s.x,s.y,s.width,s.height),0===a&&v.matrix.copy(h.matrix)}}for(a=0;a<d.length;a++)n=d[a],(r=p[a])&&null!==(r=i.getPose(r.targetRaySpace,c))?(n.matrix.fromArray(r.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.visible=!0):n.visible=!1;y&&y(e)})),this.setAnimationLoop=function(t){y=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new g},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Se(t){var e;function n(){z=new tt(zt),(N=new K(zt,z,t)).isWebGL2||(z.get("WEBGL_depth_texture"),z.get("OES_texture_float"),z.get("OES_texture_half_float"),z.get("OES_texture_half_float_linear"),z.get("OES_standard_derivatives"),z.get("OES_element_index_uint"),z.get("ANGLE_instanced_arrays")),z.get("OES_texture_float_linear"),st=new ye(zt,z,N),(k=new ge(zt,z,st,N)).scissor(xt.copy(At).multiplyScalar(Tt)),k.viewport(bt.copy(St).multiplyScalar(Tt)),F=new nt(zt),B=new re,U=new ve(zt,z,k,B,N,st,F),H=new x(zt),G=new et(zt,H,F),j=new ot(G,F),Y=new at(zt),V=new ne(lt,z,N,U),W=new le,q=new de,X=new J(lt,k,j,L),Z=new Q(zt,z,F,N),rt=new it(zt,z,F,N),F.programs=V.programs,lt.context=zt,lt.capabilities=N,lt.extensions=z,lt.properties=B,lt.renderLists=W,lt.state=k,lt.info=F}function a(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ct=!0}function o(){console.log("THREE.WebGLRenderer: Context Restored."),ct=!1,n()}function l(t){(t=t.target).removeEventListener("dispose",l),c(t),B.remove(t)}function c(t){var e=B.get(t).program;t.program=void 0,void 0!==e&&V.releaseProgram(e)}function h(t,e,i,n){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,l=o.geometry,c=void 0===n?o.material:n;if(o=o.group,i.isArrayCamera){_t=i;for(var h=i.cameras,u=0,p=h.length;u<p;u++){var f=h[u];s.layers.test(f.layers)&&(k.viewport(bt.copy(f.viewport)),I.setupLights(f),d(s,e,f,l,c,o))}}else _t=null,d(s,e,i,l,c,o)}}function d(t,i,n,r,a,o){if(t.onBeforeRender(lt,i,n,r,a,o),I=q.get(i,_t||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){k.setMaterial(a);var s=f(n,i.fog,a,t);gt=e=null,vt=!1,function(t,e){t.render((function(t){lt.renderBufferImmediate(t,e)}))}(t,s)}else lt.renderBufferDirect(n,i.fog,r,a,t,o);t.onAfterRender(lt,i,n,r,a,o),I=q.get(i,_t||n)}function p(t,e,i){var n=B.get(t),r=I.state.lights,a=n.lightsHash,o=r.state.hash;i=V.getParameters(t,r.state,I.state.shadowsArray,e,Dt.numPlanes,Dt.numIntersection,i);var s=V.getProgramCode(t,i),h=n.program,u=!0;if(void 0===h)t.addEventListener("dispose",l);else if(h.code!==s)c(t);else{if(a.stateID!==o.stateID||a.directionalLength!==o.directionalLength||a.pointLength!==o.pointLength||a.spotLength!==o.spotLength||a.rectAreaLength!==o.rectAreaLength||a.hemiLength!==o.hemiLength||a.shadowsLength!==o.shadowsLength)a.stateID=o.stateID,a.directionalLength=o.directionalLength,a.pointLength=o.pointLength,a.spotLength=o.spotLength,a.rectAreaLength=o.rectAreaLength,a.hemiLength=o.hemiLength,a.shadowsLength=o.shadowsLength;else if(void 0!==i.shaderID)return;u=!1}if(u&&(i.shaderID?(s=_a[i.shaderID],n.shader={name:t.type,uniforms:v(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}):n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader},t.onBeforeCompile(n.shader,lt),s=V.getProgramCode(t,i),h=V.acquireProgram(t,n.shader,i,s),n.program=h,t.program=h),i=h.getAttributes(),t.morphTargets)for(s=t.numSupportedMorphTargets=0;s<lt.maxMorphTargets;s++)0<=i["morphTarget"+s]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(s=t.numSupportedMorphNormals=0;s<lt.maxMorphNormals;s++)0<=i["morphNormal"+s]&&t.numSupportedMorphNormals++;i=n.shader.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Dt.numPlanes,n.numIntersection=Dt.numIntersection,i.clippingPlanes=Dt.uniform),n.fog=e,void 0===a&&(n.lightsHash=a={}),a.stateID=o.stateID,a.directionalLength=o.directionalLength,a.pointLength=o.pointLength,a.spotLength=o.spotLength,a.rectAreaLength=o.rectAreaLength,a.hemiLength=o.hemiLength,a.shadowsLength=o.shadowsLength,t.lights&&(i.ambientLightColor.value=r.state.ambient,i.lightProbe.value=r.state.probe,i.directionalLights.value=r.state.directional,i.spotLights.value=r.state.spot,i.rectAreaLights.value=r.state.rectArea,i.pointLights.value=r.state.point,i.hemisphereLights.value=r.state.hemi,i.directionalShadowMap.value=r.state.directionalShadowMap,i.directionalShadowMatrix.value=r.state.directionalShadowMatrix,i.spotShadowMap.value=r.state.spotShadowMap,i.spotShadowMatrix.value=r.state.spotShadowMatrix,i.pointShadowMap.value=r.state.pointShadowMap,i.pointShadowMatrix.value=r.state.pointShadowMatrix),t=n.program.getUniforms(),t=Wt.seqWithValue(t.seq,i),n.uniformsList=t}function f(t,e,i,n){U.resetTextureUnits();var r=B.get(i),a=r.lightsHash,o=I.state.lights.state.hash;Pt&&(Rt||t!==yt)&&Dt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,t===yt&&i.id===mt),!1===i.needsUpdate&&(void 0===r.program||i.fog&&r.fog!==e?i.needsUpdate=!0:(!i.lights||a.stateID===o.stateID&&a.directionalLength===o.directionalLength&&a.pointLength===o.pointLength&&a.spotLength===o.spotLength&&a.rectAreaLength===o.rectAreaLength&&a.hemiLength===o.hemiLength&&a.shadowsLength===o.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===Dt.numPlanes&&r.numIntersection===Dt.numIntersection)||(i.needsUpdate=!0)),i.needsUpdate&&(p(i,e,n),i.needsUpdate=!1);var s=!1,l=!1,c=!1;o=(a=r.program).getUniforms();var h=r.shader.uniforms;if(k.useProgram(a.program)&&(c=l=s=!0),i.id!==mt&&(mt=i.id,l=!0),(s||yt!==t)&&(o.setValue(zt,"projectionMatrix",t.projectionMatrix),N.logarithmicDepthBuffer&&o.setValue(zt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),yt!==t&&(yt=t,c=l=!0),(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap)&&(void 0!==(s=o.map.cameraPosition)&&s.setValue(zt,It.setFromMatrixPosition(t.matrixWorld))),(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&o.setValue(zt,"viewMatrix",t.matrixWorldInverse)),i.skinning&&(o.setOptional(zt,n,"bindMatrix"),o.setOptional(zt,n,"bindMatrixInverse"),t=n.skeleton))if(s=t.bones,N.floatVertexTextures){if(void 0===t.boneTexture){s=Math.sqrt(4*s.length),s=ua.ceilPowerOfTwo(s),s=Math.max(s,4);var d=new Float32Array(s*s*4);d.set(t.boneMatrices);var f=new u(d,s,s,1023,1015);f.needsUpdate=!0,t.boneMatrices=d,t.boneTexture=f,t.boneTextureSize=s}o.setValue(zt,"boneTexture",t.boneTexture,U),o.setValue(zt,"boneTextureSize",t.boneTextureSize)}else o.setOptional(zt,t,"boneMatrices");return l&&(o.setValue(zt,"toneMappingExposure",lt.toneMappingExposure),o.setValue(zt,"toneMappingWhitePoint",lt.toneMappingWhitePoint),i.lights&&(l=c,h.ambientLightColor.needsUpdate=l,h.lightProbe.needsUpdate=l,h.directionalLights.needsUpdate=l,h.pointLights.needsUpdate=l,h.spotLights.needsUpdate=l,h.rectAreaLights.needsUpdate=l,h.hemisphereLights.needsUpdate=l),e&&i.fog&&(h.fogColor.value.copy(e.color),e.isFog?(h.fogNear.value=e.near,h.fogFar.value=e.far):e.isFogExp2&&(h.fogDensity.value=e.density)),i.isMeshBasicMaterial?y(h,i):i.isMeshLambertMaterial?(y(h,i),i.emissiveMap&&(h.emissiveMap.value=i.emissiveMap)):i.isMeshPhongMaterial?(y(h,i),i.isMeshToonMaterial?(_(h,i),i.gradientMap&&(h.gradientMap.value=i.gradientMap)):_(h,i)):i.isMeshStandardMaterial?(y(h,i),i.isMeshPhysicalMaterial?(w(h,i),h.reflectivity.value=i.reflectivity,h.clearCoat.value=i.clearCoat,h.clearCoatRoughness.value=i.clearCoatRoughness):w(h,i)):i.isMeshMatcapMaterial?(y(h,i),i.matcap&&(h.matcap.value=i.matcap),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDepthMaterial?(y(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDistanceMaterial?(y(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias),h.referencePosition.value.copy(i.referencePosition),h.nearDistance.value=i.nearDistance,h.farDistance.value=i.farDistance):i.isMeshNormalMaterial?(y(h,i),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isLineBasicMaterial?(h.diffuse.value.copy(i.color),h.opacity.value=i.opacity,i.isLineDashedMaterial&&(h.dashSize.value=i.dashSize,h.totalSize.value=i.dashSize+i.gapSize,h.scale.value=i.scale)):i.isPointsMaterial?(h.diffuse.value.copy(i.color),h.opacity.value=i.opacity,h.size.value=i.size*Tt,h.scale.value=.5*Et,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isSpriteMaterial?(h.diffuse.value.copy(i.color),h.opacity.value=i.opacity,h.rotation.value=i.rotation,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isShadowMaterial&&(h.color.value.copy(i.color),h.opacity.value=i.opacity),void 0!==h.ltc_1&&(h.ltc_1.value=ya.LTC_1),void 0!==h.ltc_2&&(h.ltc_2.value=ya.LTC_2),Wt.upload(zt,r.uniformsList,h,U)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Wt.upload(zt,r.uniformsList,h,U),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&o.setValue(zt,"center",n.center),o.setValue(zt,"modelViewMatrix",n.modelViewMatrix),o.setValue(zt,"normalMatrix",n.normalMatrix),o.setValue(zt,"modelMatrix",n.matrixWorld),a}function y(t,e){if(t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=B.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map)var i=e.map;else e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap);void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function _(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function w(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}console.log("THREE.WebGLRenderer","105");var M=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),E=void 0!==t.context?t.context:null,T=void 0!==t.alpha&&t.alpha,S=void 0===t.depth||t.depth,A=void 0===t.stencil||t.stencil,C=void 0!==t.antialias&&t.antialias,L=void 0===t.premultipliedAlpha||t.premultipliedAlpha,D=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,P=void 0!==t.powerPreference?t.powerPreference:"default",R=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,O=null,I=null;this.domElement=M,this.context=null,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var z,N,k,F,B,U,H,G,j,V,W,q,X,Y,Z,rt,st,lt=this,ct=!1,ht=null,ut=0,dt=0,pt=null,ft=null,mt=-1,gt=e=null,vt=!1,yt=null,_t=null,bt=new s,xt=new s,wt=null,Mt=M.width,Et=M.height,Tt=1,St=new s(0,0,Mt,Et),At=new s(0,0,Mt,Et),Ct=!1,Lt=new m,Dt=new $,Pt=!1,Rt=!1,Ot=new g,It=new r;try{T={alpha:T,depth:S,stencil:A,antialias:C,premultipliedAlpha:L,preserveDrawingBuffer:D,powerPreference:P,failIfMajorPerformanceCaveat:R,xrCompatible:!0},M.addEventListener("webglcontextlost",a,!1),M.addEventListener("webglcontextrestored",o,!1);var zt=E||M.getContext("webgl",T)||M.getContext("experimental-webgl",T);if(null===zt){if(null!==M.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===zt.getShaderPrecisionFormat&&(zt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}n();var Nt="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new Te(lt):new Ee(lt);this.vr=Nt;var kt=new me(lt,j,N.maxTextureSize);this.shadowMap=kt,this.getContext=function(){return zt},this.getContextAttributes=function(){return zt.getContextAttributes()},this.forceContextLoss=function(){var t=z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Tt},this.setPixelRatio=function(t){void 0!==t&&(Tt=t,this.setSize(Mt,Et,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new i),t.set(Mt,Et)},this.setSize=function(t,e,i){Nt.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Mt=t,Et=e,M.width=t*Tt,M.height=e*Tt,!1!==i&&(M.style.width=t+"px",M.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new i),t.set(Mt*Tt,Et*Tt)},this.setDrawingBufferSize=function(t,e,i){Mt=t,Et=e,Tt=i,M.width=t*i,M.height=e*i,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new s),t.copy(bt)},this.getViewport=function(t){return t.copy(St)},this.setViewport=function(t,e,i,n){t.isVector4?St.set(t.x,t.y,t.z,t.w):St.set(t,e,i,n),k.viewport(bt.copy(St).multiplyScalar(Tt))},this.getScissor=function(t){return t.copy(At)},this.setScissor=function(t,e,i,n){t.isVector4?At.set(t.x,t.y,t.z,t.w):At.set(t,e,i,n),k.scissor(xt.copy(At).multiplyScalar(Tt))},this.getScissorTest=function(){return Ct},this.setScissorTest=function(t){k.setScissorTest(Ct=t)},this.getClearColor=function(){return X.getClearColor()},this.setClearColor=function(){X.setClearColor.apply(X,arguments)},this.getClearAlpha=function(){return X.getClearAlpha()},this.setClearAlpha=function(){X.setClearAlpha.apply(X,arguments)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=16384),(void 0===e||e)&&(n|=256),(void 0===i||i)&&(n|=1024),zt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){M.removeEventListener("webglcontextlost",a,!1),M.removeEventListener("webglcontextrestored",o,!1),W.dispose(),q.dispose(),B.dispose(),j.dispose(),Nt.dispose(),Bt.stop()},this.renderBufferImmediate=function(t,e){k.initAttributes();var i=B.get(t);t.hasPositions&&!i.position&&(i.position=zt.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=zt.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=zt.createBuffer()),t.hasColors&&!i.color&&(i.color=zt.createBuffer()),e=e.getAttributes(),t.hasPositions&&(zt.bindBuffer(34962,i.position),zt.bufferData(34962,t.positionArray,35048),k.enableAttribute(e.position),zt.vertexAttribPointer(e.position,3,5126,!1,0,0)),t.hasNormals&&(zt.bindBuffer(34962,i.normal),zt.bufferData(34962,t.normalArray,35048),k.enableAttribute(e.normal),zt.vertexAttribPointer(e.normal,3,5126,!1,0,0)),t.hasUvs&&(zt.bindBuffer(34962,i.uv),zt.bufferData(34962,t.uvArray,35048),k.enableAttribute(e.uv),zt.vertexAttribPointer(e.uv,2,5126,!1,0,0)),t.hasColors&&(zt.bindBuffer(34962,i.color),zt.bufferData(34962,t.colorArray,35048),k.enableAttribute(e.color),zt.vertexAttribPointer(e.color,3,5126,!1,0,0)),k.disableUnusedAttributes(),zt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,i,n,r,a,o){var s=a.isMesh&&0>a.matrixWorld.determinant();k.setMaterial(r,s);var l=f(t,i,r,a),c=!1;e===n.id&&gt===l.id&&vt===(!0===r.wireframe)||(e=n.id,gt=l.id,vt=!0===r.wireframe,c=!0),a.morphTargetInfluences&&(Y.update(a,n,r,l),c=!0),s=n.index;var h=n.attributes.position;if(i=1,!0===r.wireframe&&(s=G.getWireframeAttribute(n),i=2),t=Z,null!==s){var u=H.get(s);(t=rt).setIndex(u)}if(c){if(n&&n.isInstancedBufferGeometry&&!N.isWebGL2&&null===z.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{k.initAttributes(),c=n.attributes,l=l.getAttributes();var d=r.defaultAttributeValues;for(M in l){var p=l[M];if(0<=p){var m=c[M];if(void 0!==m){var g=m.normalized,v=m.itemSize,y=H.get(m);if(void 0!==y){var _=y.buffer,b=y.type;if(y=y.bytesPerElement,m.isInterleavedBufferAttribute){var x=m.data,w=x.stride;m=m.offset,x&&x.isInstancedInterleavedBuffer?(k.enableAttributeAndDivisor(p,x.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=x.meshPerAttribute*x.count)):k.enableAttribute(p),zt.bindBuffer(34962,_),zt.vertexAttribPointer(p,v,b,g,w*y,m*y)}else m.isInstancedBufferAttribute?(k.enableAttributeAndDivisor(p,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):k.enableAttribute(p),zt.bindBuffer(34962,_),zt.vertexAttribPointer(p,v,b,g,0,0)}}else if(void 0!==d&&void 0!==(g=d[M]))switch(g.length){case 2:zt.vertexAttrib2fv(p,g);break;case 3:zt.vertexAttrib3fv(p,g);break;case 4:zt.vertexAttrib4fv(p,g);break;default:zt.vertexAttrib1fv(p,g)}}}k.disableUnusedAttributes()}null!==s&&zt.bindBuffer(34963,u.buffer)}u=1/0,null!==s?u=s.count:void 0!==h&&(u=h.count),s=n.drawRange.start*i,h=null!==o?o.start*i:0;var M=Math.max(s,h);if(0!==(o=Math.max(0,Math.min(u,s+n.drawRange.count*i,h+(null!==o?o.count*i:1/0))-1-M+1))){if(a.isMesh)if(!0===r.wireframe)k.setLineWidth(r.wireframeLinewidth*(null===pt?Tt:1)),t.setMode(1);else switch(a.drawMode){case 0:t.setMode(4);break;case 1:t.setMode(5);break;case 2:t.setMode(6)}else a.isLine?(void 0===(r=r.linewidth)&&(r=1),k.setLineWidth(r*(null===pt?Tt:1)),a.isLineSegments?t.setMode(1):a.isLineLoop?t.setMode(2):t.setMode(3)):a.isPoints?t.setMode(0):a.isSprite&&t.setMode(4);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&t.renderInstances(n,M,o):t.render(M,o)}},this.compile=function(t,e){(I=q.get(t,e)).init(),t.traverse((function(t){t.isLight&&(I.pushLight(t),t.castShadow&&I.pushShadow(t))})),I.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var i=0;i<e.material.length;i++)p(e.material[i],t.fog,e);else p(e.material,t.fog,e)}))};var Ft=null,Bt=new b;Bt.setAnimationLoop((function(t){Nt.isPresenting()||Ft&&Ft(t)})),"undefined"!=typeof window&&Bt.setContext(window),this.setAnimationLoop=function(t){Ft=t,Nt.setAnimationLoop(t),Bt.start()},this.render=function(t,i,n,r){if(void 0!==n){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var a=n}if(void 0!==r){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var o=r}i&&i.isCamera?ct||(gt=e=null,vt=!1,mt=-1,yt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===i.parent&&i.updateMatrixWorld(),Nt.enabled&&(i=Nt.getCamera(i)),(I=q.get(t,i)).init(),t.onBeforeRender(lt,t,i,a||pt),Ot.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Lt.setFromMatrix(Ot),Rt=this.localClippingEnabled,Pt=Dt.init(this.clippingPlanes,Rt,i),(O=W.get(t,i)).init(),function t(e,i,n,r){if(!1!==e.visible){if(e.layers.test(i.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLight)I.pushLight(e),e.castShadow&&I.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Lt.intersectsSprite(e)){r&&It.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ot);var a=j.update(e),o=e.material;o.visible&&O.push(e,a,o,n,It.z,null)}}else if(e.isImmediateRenderObject)r&&It.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ot),O.push(e,null,e.material,n,It.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Lt.intersectsObject(e)))if(r&&It.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ot),a=j.update(e),o=e.material,Array.isArray(o))for(var s=a.groups,l=0,c=s.length;l<c;l++){var h=s[l],u=o[h.materialIndex];u&&u.visible&&O.push(e,a,u,n,It.z,h)}else o.visible&&O.push(e,a,o,n,It.z,null);for(l=0,c=(e=e.children).length;l<c;l++)t(e[l],i,n,r)}}(t,i,0,lt.sortObjects),!0===lt.sortObjects&&O.sort(),Pt&&Dt.beginShadows(),kt.render(I.state.shadowsArray,t,i),I.setupLights(i),Pt&&Dt.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==a&&this.setRenderTarget(a),X.render(O,t,i,o),n=O.opaque,r=O.transparent,t.overrideMaterial?(a=t.overrideMaterial,n.length&&h(n,t,i,a),r.length&&h(r,t,i,a)):(n.length&&h(n,t,i),r.length&&h(r,t,i)),t.onAfterRender(lt,t,i),null!==pt&&(U.updateRenderTargetMipmap(pt),U.updateMultisampleRenderTarget(pt)),k.buffers.depth.setTest(!0),k.buffers.depth.setMask(!0),k.buffers.color.setMask(!0),k.setPolygonOffset(!1),Nt.enabled&&Nt.submitFrame(),I=O=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){ht!==t&&zt.bindFramebuffer(36160,t),ht=t},this.getActiveCubeFace=function(){return ut},this.getActiveMipMapLevel=function(){return dt},this.getRenderTarget=function(){return pt},this.setRenderTarget=function(t,e,i){pt=t,ut=e,dt=i,t&&void 0===B.get(t).__webglFramebuffer&&U.setupRenderTarget(t);var n=ht,r=!1;t?(n=B.get(t).__webglFramebuffer,t.isWebGLRenderTargetCube?(n=n[e||0],r=!0):n=t.isWebGLMultisampleRenderTarget?B.get(t).__webglMultisampledFramebuffer:n,bt.copy(t.viewport),xt.copy(t.scissor),wt=t.scissorTest):(bt.copy(St).multiplyScalar(Tt),xt.copy(At).multiplyScalar(Tt),wt=Ct),ft!==n&&(zt.bindFramebuffer(36160,n),ft=n),k.viewport(bt),k.scissor(xt),k.setScissorTest(wt),r&&(t=B.get(t.texture),zt.framebufferTexture2D(36160,36064,34069+(e||0),t.__webglTexture,i||0))},this.readRenderTargetPixels=function(t,e,i,n,r,a,o){if(t&&t.isWebGLRenderTarget){var s=B.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){o=!1,s!==ft&&(zt.bindFramebuffer(36160,s),o=!0);try{var l=t.texture,c=l.format,h=l.type;1023!==c&&st.convert(c)!==zt.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===h||st.convert(h)===zt.getParameter(35738)||1015===h&&(N.isWebGL2||z.get("OES_texture_float")||z.get("WEBGL_color_buffer_float"))||1016===h&&(N.isWebGL2?z.get("EXT_color_buffer_float"):z.get("EXT_color_buffer_half_float"))?36053===zt.checkFramebufferStatus(36160)?0<=e&&e<=t.width-n&&0<=i&&i<=t.height-r&&zt.readPixels(e,i,n,r,st.convert(c),st.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&zt.bindFramebuffer(36160,ft)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,i){var n=e.image.width,r=e.image.height,a=st.convert(e.format);U.setTexture2D(e,0),zt.copyTexImage2D(3553,i||0,a,t.x,t.y,n,r,0)},this.copyTextureToTexture=function(t,e,i,n){var r=e.image.width,a=e.image.height,o=st.convert(i.format),s=st.convert(i.type);U.setTexture2D(i,0),e.isDataTexture?zt.texSubImage2D(3553,n||0,t.x,t.y,r,a,o,s,e.image.data):zt.texSubImage2D(3553,n||0,t.x,t.y,o,s,e.image)}}function Ae(t,e){this.name="",this.color=new _(t),this.density=void 0!==e?e:25e-5}function Ce(t,e,i){this.name="",this.color=new _(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function Le(){T.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function De(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Pe(t,e,i,n){this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function Re(t){V.call(this),this.type="SpriteMaterial",this.color=new _(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function Oe(t){if(T.call(this),this.type="Sprite",void 0===Na){Na=new B;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);e=new De(e,5),Na.setIndex([0,1,2,0,2,3]),Na.addAttribute("position",new Pe(e,3,0,!1)),Na.addAttribute("uv",new Pe(e,2,3,!1))}this.geometry=Na,this.material=void 0!==t?t:new Re,this.center=new i(.5,.5)}function Ie(){T.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ze(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Z.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new g,this.bindMatrixInverse=new g}function Ne(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new g)}function ke(){T.call(this),this.type="Bone"}function Fe(t){V.call(this),this.type="LineBasicMaterial",this.color=new _(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(t)}function Be(t,e,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),T.call(this),this.type="Line",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new Fe({color:16777215*Math.random()})}function Ue(t,e){Be.call(this,t,e),this.type="LineSegments"}function He(t,e){Be.call(this,t,e),this.type="LineLoop"}function Ge(t){V.call(this),this.type="PointsMaterial",this.color=new _(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=this.morphTargets=!1,this.setValues(t)}function je(t,e){T.call(this),this.type="Points",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new Ge({color:16777215*Math.random()})}function Ve(t,e,i,n,r,a,s,l,c){o.call(this,t,e,i,n,r,a,s,l,c),this.format=void 0!==s?s:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1}function We(t,e,i,n,r,a,s,l,c,h,u,d){o.call(this,null,a,s,l,c,h,n,r,u,d),this.image={width:e,height:i},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function qe(t,e,i,n,r,a,s,l,c){o.call(this,t,e,i,n,r,a,s,l,c),this.needsUpdate=!0}function Xe(t,e,i,n,r,a,s,l,c,h){if(1026!==(h=void 0!==h?h:1026)&&1027!==h)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===h&&(i=1012),void 0===i&&1027===h&&(i=1020),o.call(this,null,n,r,a,s,l,h,i,c),this.image={width:t,height:e},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==l?l:1003,this.generateMipmaps=this.flipY=!1}function Ye(t){B.call(this),this.type="WireframeGeometry";var e,i,n,a=[],o=[0,0],s={},l=["a","b","c"];if(t&&t.isGeometry){var c=t.faces,h=0;for(i=c.length;h<i;h++){var u=c[h];for(e=0;3>e;e++){var d=u[l[e]],p=u[l[(e+1)%3]];o[0]=Math.min(d,p),o[1]=Math.max(d,p),void 0===s[d=o[0]+","+o[1]]&&(s[d]={index1:o[0],index2:o[1]})}}for(d in s)h=s[d],l=t.vertices[h.index1],a.push(l.x,l.y,l.z),l=t.vertices[h.index2],a.push(l.x,l.y,l.z)}else if(t&&t.isBufferGeometry)if(l=new r,null!==t.index){c=t.attributes.position,u=t.index;var f=t.groups;for(0===f.length&&(f=[{start:0,count:u.count,materialIndex:0}]),t=0,n=f.length;t<n;++t)for(e=(h=f[t]).start,i=h.count,h=e,i=e+i;h<i;h+=3)for(e=0;3>e;e++)d=u.getX(h+e),p=u.getX(h+(e+1)%3),o[0]=Math.min(d,p),o[1]=Math.max(d,p),void 0===s[d=o[0]+","+o[1]]&&(s[d]={index1:o[0],index2:o[1]});for(d in s)h=s[d],l.fromBufferAttribute(c,h.index1),a.push(l.x,l.y,l.z),l.fromBufferAttribute(c,h.index2),a.push(l.x,l.y,l.z)}else for(h=0,i=(c=t.attributes.position).count/3;h<i;h++)for(e=0;3>e;e++)s=3*h+e,l.fromBufferAttribute(c,s),a.push(l.x,l.y,l.z),s=3*h+(e+1)%3,l.fromBufferAttribute(c,s),a.push(l.x,l.y,l.z);this.addAttribute("position",new z(a,3))}function Ze(t,e,i){S.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new Je(t,e,i)),this.mergeVertices()}function Je(t,e,i){B.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,a,o=[],s=[],l=[],c=[],h=new r,u=new r,d=new r,p=new r,f=new r;3>t.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(n=0;n<=i;n++){var g=n/i;for(a=0;a<=e;a++){var v=a/e;t(v,g,u),s.push(u.x,u.y,u.z),0<=v-1e-5?(t(v-1e-5,g,d),p.subVectors(u,d)):(t(v+1e-5,g,d),p.subVectors(d,u)),0<=g-1e-5?(t(v,g-1e-5,d),f.subVectors(u,d)):(t(v,g+1e-5,d),f.subVectors(d,u)),h.crossVectors(p,f).normalize(),l.push(h.x,h.y,h.z),c.push(v,g)}}for(n=0;n<i;n++)for(a=0;a<e;a++)t=n*m+a+1,h=(n+1)*m+a+1,u=(n+1)*m+a,o.push(n*m+a,t,u),o.push(t,h,u);this.setIndex(o),this.addAttribute("position",new z(s,3)),this.addAttribute("normal",new z(l,3)),this.addAttribute("uv",new z(c,2))}function Qe(t,e,i,n){S.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new Ke(t,e,i,n)),this.mergeVertices()}function Ke(t,e,n,a){function o(t){c.push(t.x,t.y,t.z)}function s(e,i){e*=3,i.x=t[e+0],i.y=t[e+1],i.z=t[e+2]}function l(t,e,i,n){0>n&&1===t.x&&(h[e]=t.x-1),0===i.x&&0===i.z&&(h[e]=n/2/Math.PI+.5)}B.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:a},n=n||1;var c=[],h=[];!function(t){for(var i=new r,n=new r,a=new r,l=0;l<e.length;l+=3){s(e[l+0],i),s(e[l+1],n),s(e[l+2],a);var c,h,u=i,d=n,p=a,f=Math.pow(2,t),m=[];for(h=0;h<=f;h++){m[h]=[];var g=u.clone().lerp(p,h/f),v=d.clone().lerp(p,h/f),y=f-h;for(c=0;c<=y;c++)m[h][c]=0===c&&h===f?g:g.clone().lerp(v,c/y)}for(h=0;h<f;h++)for(c=0;c<2*(f-h)-1;c++)u=Math.floor(c/2),0==c%2?(o(m[h][u+1]),o(m[h+1][u]),o(m[h][u])):(o(m[h][u+1]),o(m[h+1][u+1]),o(m[h+1][u]))}}(a=a||0),function(t){for(var e=new r,i=0;i<c.length;i+=3)e.x=c[i+0],e.y=c[i+1],e.z=c[i+2],e.normalize().multiplyScalar(t),c[i+0]=e.x,c[i+1]=e.y,c[i+2]=e.z}(n),function(){for(var t=new r,e=0;e<c.length;e+=3)t.x=c[e+0],t.y=c[e+1],t.z=c[e+2],h.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new r,e=new r;for(var n=new r,a=new r,o=new i,s=new i,u=new i,d=0,p=0;d<c.length;d+=9,p+=6){t.set(c[d+0],c[d+1],c[d+2]),e.set(c[d+3],c[d+4],c[d+5]),n.set(c[d+6],c[d+7],c[d+8]),o.set(h[p+0],h[p+1]),s.set(h[p+2],h[p+3]),u.set(h[p+4],h[p+5]),a.copy(t).add(e).add(n).divideScalar(3);var f=Math.atan2(a.z,-a.x);l(o,p+0,t,f),l(s,p+2,e,f),l(u,p+4,n,f)}for(t=0;t<h.length;t+=6)e=h[t+0],n=h[t+2],a=h[t+4],o=Math.min(e,n,a),.9<Math.max(e,n,a)&&.1>o&&(.2>e&&(h[t+0]+=1),.2>n&&(h[t+2]+=1),.2>a&&(h[t+4]+=1))}(),this.addAttribute("position",new z(c,3)),this.addAttribute("normal",new z(c.slice(),3)),this.addAttribute("uv",new z(h,2)),0===a?this.computeVertexNormals():this.normalizeNormals()}function $e(t,e){S.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ti(t,e)),this.mergeVertices()}function ti(t,e){Ke.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ei(t,e){S.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ii(t,e)),this.mergeVertices()}function ii(t,e){Ke.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ni(t,e){S.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ri(t,e)),this.mergeVertices()}function ri(t,e){var i=(1+Math.sqrt(5))/2;Ke.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ai(t,e){S.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new oi(t,e)),this.mergeVertices()}function oi(t,e){var i=(1+Math.sqrt(5))/2,n=1/i;Ke.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function si(t,e,i,n,r,a){S.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new li(t,e,i,n,r),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function li(t,e,n,a,o){function s(i){f=t.getPointAt(i/e,f);var r=l.normals[i];for(i=l.binormals[i],h=0;h<=a;h++){var o=h/a*Math.PI*2,s=Math.sin(o);o=-Math.cos(o),d.x=o*r.x+s*i.x,d.y=o*r.y+s*i.y,d.z=o*r.z+s*i.z,d.normalize(),g.push(d.x,d.y,d.z),u.x=f.x+n*d.x,u.y=f.y+n*d.y,u.z=f.z+n*d.z,m.push(u.x,u.y,u.z)}}B.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:a,closed:o},e=e||64,n=n||1,a=a||8,o=o||!1;var l=t.computeFrenetFrames(e,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var c,h,u=new r,d=new r,p=new i,f=new r,m=[],g=[],v=[],y=[];for(c=0;c<e;c++)s(c);for(s(!1===o?e:0),c=0;c<=e;c++)for(h=0;h<=a;h++)p.x=c/e,p.y=h/a,v.push(p.x,p.y);!function(){for(h=1;h<=e;h++)for(c=1;c<=a;c++){var t=(a+1)*h+(c-1),i=(a+1)*h+c,n=(a+1)*(h-1)+c;y.push((a+1)*(h-1)+(c-1),t,n),y.push(t,i,n)}}(),this.setIndex(y),this.addAttribute("position",new z(m,3)),this.addAttribute("normal",new z(g,3)),this.addAttribute("uv",new z(v,2))}function ci(t,e,i,n,r,a,o){S.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new hi(t,e,i,n,r,a)),this.mergeVertices()}function hi(t,e,i,n,a,o){function s(t,e,i,n,r){var a=Math.sin(t);e=i/e*t,i=Math.cos(e),r.x=n*(2+i)*.5*Math.cos(t),r.y=n*(2+i)*a*.5,r.z=n*Math.sin(e)*.5}B.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:a,q:o},t=t||1,e=e||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,a=a||2,o=o||3;var l,c=[],h=[],u=[],d=[],p=new r,f=new r,m=new r,g=new r,v=new r,y=new r,_=new r;for(l=0;l<=i;++l){var b=l/i*a*Math.PI*2;for(s(b,a,o,t,m),s(b+.01,a,o,t,g),y.subVectors(g,m),_.addVectors(g,m),v.crossVectors(y,_),_.crossVectors(v,y),v.normalize(),_.normalize(),b=0;b<=n;++b){var x=b/n*Math.PI*2,w=-e*Math.cos(x);x=e*Math.sin(x),p.x=m.x+(w*_.x+x*v.x),p.y=m.y+(w*_.y+x*v.y),p.z=m.z+(w*_.z+x*v.z),h.push(p.x,p.y,p.z),f.subVectors(p,m).normalize(),u.push(f.x,f.y,f.z),d.push(l/i),d.push(b/n)}}for(b=1;b<=i;b++)for(l=1;l<=n;l++)t=(n+1)*b+(l-1),e=(n+1)*b+l,a=(n+1)*(b-1)+l,c.push((n+1)*(b-1)+(l-1),t,a),c.push(t,e,a);this.setIndex(c),this.addAttribute("position",new z(h,3)),this.addAttribute("normal",new z(u,3)),this.addAttribute("uv",new z(d,2))}function ui(t,e,i,n,r){S.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new di(t,e,i,n,r)),this.mergeVertices()}function di(t,e,i,n,a){B.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:a},t=t||1,e=e||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,a=a||2*Math.PI;var o,s,l=[],c=[],h=[],u=[],d=new r,p=new r,f=new r;for(o=0;o<=i;o++)for(s=0;s<=n;s++){var m=s/n*a,g=o/i*Math.PI*2;p.x=(t+e*Math.cos(g))*Math.cos(m),p.y=(t+e*Math.cos(g))*Math.sin(m),p.z=e*Math.sin(g),c.push(p.x,p.y,p.z),d.x=t*Math.cos(m),d.y=t*Math.sin(m),f.subVectors(p,d).normalize(),h.push(f.x,f.y,f.z),u.push(s/n),u.push(o/i)}for(o=1;o<=i;o++)for(s=1;s<=n;s++)t=(n+1)*(o-1)+s-1,e=(n+1)*(o-1)+s,a=(n+1)*o+s,l.push((n+1)*o+s-1,t,a),l.push(t,e,a);this.setIndex(l),this.addAttribute("position",new z(c,3)),this.addAttribute("normal",new z(h,3)),this.addAttribute("uv",new z(u,2))}function pi(t,e,i,n,r){for(var a,o=0,s=e,l=i-n;s<i;s+=n)o+=(t[l]-t[s])*(t[s+1]+t[l+1]),l=s;if(r===0<o)for(r=e;r<i;r+=n)a=Ti(r,t[r],t[r+1],a);else for(r=i-n;r>=e;r-=n)a=Ti(r,t[r],t[r+1],a);return a&&xi(a,a.next)&&(Si(a),a=a.next),a}function fi(t,e){if(!t)return t;e||(e=t);do{var i=!1;if(t.steiner||!xi(t,t.next)&&0!==bi(t.prev,t,t.next))t=t.next;else{if(Si(t),(t=e=t.prev)===t.next)break;i=!0}}while(i||t!==e);return e}function mi(t,e){return t.x-e.x}function gi(t,e){var i=e,n=t.x,r=t.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var o=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=n&&o>a){if(a=o,o===n){if(r===i.y)return i;if(r===i.next.y)return i.next}var s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!s)return null;if(n===a)return s.prev;e=s,o=s.x;var l=s.y,c=1/0;for(i=s.next;i!==e;){if(n>=i.x&&i.x>=o&&n!==i.x&&_i(r<l?n:a,r,o,l,r<l?a:n,r,i.x,i.y)){var h=Math.abs(r-i.y)/(n-i.x);(h<c||h===c&&i.x>s.x)&&Mi(i,t)&&(s=i,c=h)}i=i.next}return s}function vi(t,e,i,n,r){return 1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1)|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function yi(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function _i(t,e,i,n,r,a,o,s){return 0<=(r-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(n-s)-(i-o)*(e-s)&&0<=(i-o)*(a-s)-(r-o)*(n-s)}function bi(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function xi(t,e){return t.x===e.x&&t.y===e.y}function wi(t,e,i,n){return!!(xi(t,e)&&xi(i,n)||xi(t,n)&&xi(i,e))||0<bi(t,e,i)!=0<bi(t,e,n)&&0<bi(i,n,t)!=0<bi(i,n,e)}function Mi(t,e){return 0>bi(t.prev,t,t.next)?0<=bi(t,e,t.next)&&0<=bi(t,t.prev,e):0>bi(t,e,t.prev)||0>bi(t,t.next,e)}function Ei(t,e){var i=new Ai(t.i,t.x,t.y),n=new Ai(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function Ti(t,e,i,n){return t=new Ai(t,e,i),n?(t.next=n.next,t.prev=n,n.next.prev=t,n.next=t):(t.prev=t,t.next=t),t}function Si(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ai(t,e,i){this.i=t,this.x=e,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Ci(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function Li(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function Di(t,e){S.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Pi(t,e)),this.mergeVertices()}function Pi(t,e){function n(t){function n(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function l(t,e,n){var r=t.x-e.x,a=t.y-e.y,o=n.x-t.x,s=n.y-t.y,l=r*r+a*a;if(Math.abs(r*s-a*o)>Number.EPSILON){var c=Math.sqrt(l),h=Math.sqrt(o*o+s*s);if(l=e.x-a/c,e=e.y+r/c,2>=(a=(o=l+r*(s=((n.x-s/h-l)*s-(n.y+o/h-e)*o)/(r*s-a*o))-t.x)*o+(r=e+a*s-t.y)*r))return new i(o,r);a=Math.sqrt(a/2)}else t=!1,r>Number.EPSILON?o>Number.EPSILON&&(t=!0):r<-Number.EPSILON?o<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(s)&&(t=!0),t?(o=-a,a=Math.sqrt(l)):(o=r,r=a,a=Math.sqrt(l/2));return new i(o/a,r/a)}function c(t,e){for(H=t.length;0<=--H;){var i=H,n=H-1;0>n&&(n=t.length-1);var r,s=g+2*w;for(r=0;r<s;r++){var l=B*r,c=B*(r+1),h=e+n+l,u=e+n+c;c=e+i+c,d(e+i+l),d(h),d(c),d(h),d(u),d(c),l=o.length/3,p((l=E.generateSideWallUV(a,o,l-6,l-3,l-2,l-1))[0]),p(l[1]),p(l[3]),p(l[1]),p(l[2]),p(l[3])}}}function h(t,e,i){f.push(t),f.push(e),f.push(i)}function u(t,e,i){d(t),d(e),d(i),t=o.length/3,p((t=E.generateTopUV(a,o,t-3,t-2,t-1))[0]),p(t[1]),p(t[2])}function d(t){o.push(f[3*t]),o.push(f[3*t+1]),o.push(f[3*t+2])}function p(t){s.push(t.x),s.push(t.y)}var f=[],m=void 0!==e.curveSegments?e.curveSegments:12,g=void 0!==e.steps?e.steps:1,v=void 0!==e.depth?e.depth:100,y=void 0===e.bevelEnabled||e.bevelEnabled,_=void 0!==e.bevelThickness?e.bevelThickness:6,b=void 0!==e.bevelSize?e.bevelSize:_-2,x=void 0!==e.bevelOffset?e.bevelOffset:0,w=void 0!==e.bevelSegments?e.bevelSegments:3,M=e.extrudePath,E=void 0!==e.UVGenerator?e.UVGenerator:Ha;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=e.amount);var T,S=!1;if(M){var A=M.getSpacedPoints(g);S=!0,y=!1;var C=M.computeFrenetFrames(g,!1),L=new r,D=new r,P=new r}y||(x=b=_=w=0),m=t.extractPoints(m),t=m.shape;var R=m.holes;if(!Ua.isClockWise(t)){t=t.reverse();var O=0;for(T=R.length;O<T;O++){var I=R[O];Ua.isClockWise(I)&&(R[O]=I.reverse())}}var z=Ua.triangulateShape(t,R),N=t;for(O=0,T=R.length;O<T;O++)I=R[O],t=t.concat(I);var k,F,B=t.length,U=z.length;m=[];var H=0,G=N.length,j=G-1;for(k=H+1;H<G;H++,j++,k++)j===G&&(j=0),k===G&&(k=0),m[H]=l(N[H],N[j],N[k]);M=[];var V=m.concat();for(O=0,T=R.length;O<T;O++){I=R[O];var W=[];for(H=0,j=(G=I.length)-1,k=H+1;H<G;H++,j++,k++)j===G&&(j=0),k===G&&(k=0),W[H]=l(I[H],I[j],I[k]);M.push(W),V=V.concat(W)}for(j=0;j<w;j++){G=j/w;var q=_*Math.cos(G*Math.PI/2);for(k=b*Math.sin(G*Math.PI/2)+x,H=0,G=N.length;H<G;H++){var X=n(N[H],m[H],k);h(X.x,X.y,-q)}for(O=0,T=R.length;O<T;O++)for(I=R[O],W=M[O],H=0,G=I.length;H<G;H++)h((X=n(I[H],W[H],k)).x,X.y,-q)}for(k=b+x,H=0;H<B;H++)X=y?n(t[H],V[H],k):t[H],S?(D.copy(C.normals[0]).multiplyScalar(X.x),L.copy(C.binormals[0]).multiplyScalar(X.y),P.copy(A[0]).add(D).add(L),h(P.x,P.y,P.z)):h(X.x,X.y,0);for(G=1;G<=g;G++)for(H=0;H<B;H++)X=y?n(t[H],V[H],k):t[H],S?(D.copy(C.normals[G]).multiplyScalar(X.x),L.copy(C.binormals[G]).multiplyScalar(X.y),P.copy(A[G]).add(D).add(L),h(P.x,P.y,P.z)):h(X.x,X.y,v/g*G);for(j=w-1;0<=j;j--){for(G=j/w,q=_*Math.cos(G*Math.PI/2),k=b*Math.sin(G*Math.PI/2)+x,H=0,G=N.length;H<G;H++)h((X=n(N[H],m[H],k)).x,X.y,v+q);for(O=0,T=R.length;O<T;O++)for(I=R[O],W=M[O],H=0,G=I.length;H<G;H++)X=n(I[H],W[H],k),S?h(X.x,X.y+A[g-1].y,A[g-1].x+q):h(X.x,X.y,v+q)}!function(){var t=o.length/3;if(y){var e=0*B;for(H=0;H<U;H++)u((F=z[H])[2]+e,F[1]+e,F[0]+e);for(e=B*(g+2*w),H=0;H<U;H++)u((F=z[H])[0]+e,F[1]+e,F[2]+e)}else{for(H=0;H<U;H++)u((F=z[H])[2],F[1],F[0]);for(H=0;H<U;H++)u((F=z[H])[0]+B*g,F[1]+B*g,F[2]+B*g)}a.addGroup(t,o.length/3-t,0)}(),function(){var t=o.length/3,e=0;for(c(N,e),e+=N.length,O=0,T=R.length;O<T;O++)c(I=R[O],e),e+=I.length;a.addGroup(t,o.length/3-t,1)}()}B.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var a=this,o=[],s=[],l=0,c=t.length;l<c;l++)n(t[l]);this.addAttribute("position",new z(o,3)),this.addAttribute("uv",new z(s,2)),this.computeVertexNormals()}function Ri(t,e,i){if(i.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i.shapes.push(t[n].uuid);else i.shapes.push(t.uuid);return void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}function Oi(t,e){S.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Ii(t,e)),this.mergeVertices()}function Ii(t,e){var i=(e=e||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S;t=i.generateShapes(t,e.size),e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Pi.call(this,t,e),this.type="TextBufferGeometry"}function zi(t,e,i,n,r,a,o){S.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Ni(t,e,i,n,r,a,o)),this.mergeVertices()}function Ni(t,e,i,n,a,o,s){B.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:a,thetaStart:o,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var l,c,h=Math.min(o+s,Math.PI),u=0,d=[],p=new r,f=new r,m=[],g=[],v=[],y=[];for(c=0;c<=i;c++){var _=[],b=c/i,x=0;for(0==c&&0==o?x=.5/e:c==i&&h==Math.PI&&(x=-.5/e),l=0;l<=e;l++){var w=l/e;p.x=-t*Math.cos(n+w*a)*Math.sin(o+b*s),p.y=t*Math.cos(o+b*s),p.z=t*Math.sin(n+w*a)*Math.sin(o+b*s),g.push(p.x,p.y,p.z),f.copy(p).normalize(),v.push(f.x,f.y,f.z),y.push(w+x,1-b),_.push(u++)}d.push(_)}for(c=0;c<i;c++)for(l=0;l<e;l++)t=d[c][l+1],n=d[c][l],a=d[c+1][l],s=d[c+1][l+1],(0!==c||0<o)&&m.push(t,n,s),(c!==i-1||h<Math.PI)&&m.push(n,a,s);this.setIndex(m),this.addAttribute("position",new z(g,3)),this.addAttribute("normal",new z(v,3)),this.addAttribute("uv",new z(y,2))}function ki(t,e,i,n,r,a){S.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Fi(t,e,i,n,r,a)),this.mergeVertices()}function Fi(t,e,n,a,o,s){B.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:a,thetaStart:o,thetaLength:s},t=t||.5,e=e||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var l,c,h=[],u=[],d=[],p=[],f=t,m=(e-t)/(a=void 0!==a?Math.max(1,a):1),g=new r,v=new i;for(l=0;l<=a;l++){for(c=0;c<=n;c++)t=o+c/n*s,g.x=f*Math.cos(t),g.y=f*Math.sin(t),u.push(g.x,g.y,g.z),d.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,p.push(v.x,v.y);f+=m}for(l=0;l<a;l++)for(e=l*(n+1),c=0;c<n;c++)o=(t=c+e)+n+1,s=t+n+2,f=t+1,h.push(t,o,f),h.push(o,s,f);this.setIndex(h),this.addAttribute("position",new z(u,3)),this.addAttribute("normal",new z(d,3)),this.addAttribute("uv",new z(p,2))}function Bi(t,e,i,n){S.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new Ui(t,e,i,n)),this.mergeVertices()}function Ui(t,e,n,a){B.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:a},e=Math.floor(e)||12,n=n||0,a=a||2*Math.PI,a=ua.clamp(a,0,2*Math.PI);var o,s=[],l=[],c=[],h=1/e,u=new r,d=new i;for(o=0;o<=e;o++){var p=n+o*h*a,f=Math.sin(p),m=Math.cos(p);for(p=0;p<=t.length-1;p++)u.x=t[p].x*f,u.y=t[p].y,u.z=t[p].x*m,l.push(u.x,u.y,u.z),d.x=o/e,d.y=p/(t.length-1),c.push(d.x,d.y)}for(o=0;o<e;o++)for(p=0;p<t.length-1;p++)h=(n=p+o*t.length)+t.length,u=n+t.length+1,d=n+1,s.push(n,h,d),s.push(h,u,d);if(this.setIndex(s),this.addAttribute("position",new z(l,3)),this.addAttribute("uv",new z(c,2)),this.computeVertexNormals(),a===2*Math.PI)for(a=this.attributes.normal.array,s=new r,l=new r,c=new r,n=e*t.length*3,p=o=0;o<t.length;o++,p+=3)s.x=a[p+0],s.y=a[p+1],s.z=a[p+2],l.x=a[n+p+0],l.y=a[n+p+1],l.z=a[n+p+2],c.addVectors(s,l).normalize(),a[p+0]=a[n+p+0]=c.x,a[p+1]=a[n+p+1]=c.y,a[p+2]=a[n+p+2]=c.z}function Hi(t,e){S.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Gi(t,e)),this.mergeVertices()}function Gi(t,e){function i(t){var i,s=r.length/3,c=(t=t.extractPoints(e)).shape,h=t.holes;for(!1===Ua.isClockWise(c)&&(c=c.reverse()),t=0,i=h.length;t<i;t++){var u=h[t];!0===Ua.isClockWise(u)&&(h[t]=u.reverse())}var d=Ua.triangulateShape(c,h);for(t=0,i=h.length;t<i;t++)u=h[t],c=c.concat(u);for(t=0,i=c.length;t<i;t++)u=c[t],r.push(u.x,u.y,0),a.push(0,0,1),o.push(u.x,u.y);for(t=0,i=d.length;t<i;t++)c=d[t],n.push(c[0]+s,c[1]+s,c[2]+s),l+=3}B.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],a=[],o=[],s=0,l=0;if(!1===Array.isArray(t))i(t);else for(var c=0;c<t.length;c++)i(t[c]),this.addGroup(s,l,c),s+=l,l=0;this.setIndex(n),this.addAttribute("position",new z(r,3)),this.addAttribute("normal",new z(a,3)),this.addAttribute("uv",new z(o,2))}function ji(t,e){if(e.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++)e.shapes.push(t[i].uuid);else e.shapes.push(t.uuid);return e}function Vi(t,e){B.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var i=[];e=Math.cos(ua.DEG2RAD*(void 0!==e?e:1));var n=[0,0],r={},a=["a","b","c"];if(t.isBufferGeometry){var o=new S;o.fromBufferGeometry(t)}else o=t.clone();o.mergeVertices(),o.computeFaceNormals(),t=o.vertices;for(var s=0,l=(o=o.faces).length;s<l;s++)for(var c=o[s],h=0;3>h;h++){var u=c[a[h]],d=c[a[(h+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d),void 0===r[u=n[0]+","+n[1]]?r[u]={index1:n[0],index2:n[1],face1:s,face2:void 0}:r[u].face2=s}for(u in r)(void 0===(n=r[u]).face2||o[n.face1].normal.dot(o[n.face2].normal)<=e)&&(a=t[n.index1],i.push(a.x,a.y,a.z),a=t[n.index2],i.push(a.x,a.y,a.z));this.addAttribute("position",new z(i,3))}function Wi(t,e,i,n,r,a,o,s){S.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new qi(t,e,i,n,r,a,o,s)),this.mergeVertices()}function qi(t,e,n,a,o,s,l,c){function h(n){var o,s=new i,h=new r,v=0,b=!0===n?t:e,x=!0===n?1:-1,w=g;for(o=1;o<=a;o++)p.push(0,y*x,0),f.push(0,x,0),m.push(.5,.5),g++;var M=g;for(o=0;o<=a;o++){var E=o/a*c+l,T=Math.cos(E);E=Math.sin(E),h.x=b*E,h.y=y*x,h.z=b*T,p.push(h.x,h.y,h.z),f.push(0,x,0),s.x=.5*T+.5,s.y=.5*E*x+.5,m.push(s.x,s.y),g++}for(o=0;o<a;o++)s=w+o,h=M+o,!0===n?d.push(h,h+1,s):d.push(h+1,h,s),v+=3;u.addGroup(_,v,!0===n?1:2),_+=v}B.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:c};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,a=Math.floor(a)||8,o=Math.floor(o)||1,s=void 0!==s&&s,l=void 0!==l?l:0,c=void 0!==c?c:2*Math.PI;var d=[],p=[],f=[],m=[],g=0,v=[],y=n/2,_=0;!function(){var i,s,h=new r,b=new r,x=0,w=(e-t)/n;for(s=0;s<=o;s++){var M=[],E=s/o,T=E*(e-t)+t;for(i=0;i<=a;i++){var S=i/a,A=S*c+l,C=Math.sin(A);A=Math.cos(A),b.x=T*C,b.y=-E*n+y,b.z=T*A,p.push(b.x,b.y,b.z),h.set(C,w,A).normalize(),f.push(h.x,h.y,h.z),m.push(S,1-E),M.push(g++)}v.push(M)}for(i=0;i<a;i++)for(s=0;s<o;s++)h=v[s+1][i],b=v[s+1][i+1],w=v[s][i+1],d.push(v[s][i],h,w),d.push(h,b,w),x+=6;u.addGroup(_,x,0),_+=x}(),!1===s&&(0<t&&h(!0),0<e&&h(!1)),this.setIndex(d),this.addAttribute("position",new z(p,3)),this.addAttribute("normal",new z(f,3)),this.addAttribute("uv",new z(m,2))}function Xi(t,e,i,n,r,a,o){Wi.call(this,0,t,e,i,n,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:o}}function Yi(t,e,i,n,r,a,o){qi.call(this,0,t,e,i,n,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:o}}function Zi(t,e,i,n){S.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new Ji(t,e,i,n)),this.mergeVertices()}function Ji(t,e,n,a){B.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:a},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI;var o,s=[],l=[],c=[],h=[],u=new r,d=new i;l.push(0,0,0),c.push(0,0,1),h.push(.5,.5);var p=0;for(o=3;p<=e;p++,o+=3){var f=n+p/e*a;u.x=t*Math.cos(f),u.y=t*Math.sin(f),l.push(u.x,u.y,u.z),c.push(0,0,1),d.x=(l[o]/t+1)/2,d.y=(l[o+1]/t+1)/2,h.push(d.x,d.y)}for(o=1;o<=e;o++)s.push(o,o+1,0);this.setIndex(s),this.addAttribute("position",new z(l,3)),this.addAttribute("normal",new z(c,3)),this.addAttribute("uv",new z(h,2))}function Qi(t){V.call(this),this.type="ShadowMaterial",this.color=new _(0),this.transparent=!0,this.setValues(t)}function Ki(t){W.call(this,t),this.type="RawShaderMaterial"}function $i(t){V.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function tn(t){$i.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(t)}function en(t){V.call(this),this.type="MeshPhongMaterial",this.color=new _(16777215),this.specular=new _(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function nn(t){en.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function rn(t){V.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(t)}function an(t){V.call(this),this.type="MeshLambertMaterial",this.color=new _(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function on(t){V.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.lights=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function sn(t){Fe.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function ln(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function cn(t,e,i,n){ln.call(this,t,e,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function hn(t,e,i,n){ln.call(this,t,e,i,n)}function un(t,e,i,n){ln.call(this,t,e,i,n)}function dn(t,e,i,n){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Va.convertArray(e,this.TimeBufferType),this.values=Va.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function pn(t,e,i){dn.call(this,t,e,i)}function fn(t,e,i,n){dn.call(this,t,e,i,n)}function mn(t,e,i,n){dn.call(this,t,e,i,n)}function gn(t,e,i,n){ln.call(this,t,e,i,n)}function vn(t,e,i,n){dn.call(this,t,e,i,n)}function yn(t,e,i,n){dn.call(this,t,e,i,n)}function _n(t,e,i,n){dn.call(this,t,e,i,n)}function bn(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=ua.generateUUID(),0>this.duration&&this.resetDuration()}function xn(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return mn;case"vector":case"vector2":case"vector3":case"vector4":return _n;case"color":return fn;case"quaternion":return vn;case"bool":case"boolean":return pn;case"string":return yn}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var i=[],n=[];Va.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function wn(t,e,i){var n=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===r&&void 0!==n.onStart&&n.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(r=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}function Mn(t){this.manager=void 0!==t?t:qa}function En(t){this.manager=void 0!==t?t:qa}function Tn(t){this.manager=void 0!==t?t:qa,this._parser=null}function Sn(t){this.manager=void 0!==t?t:qa,this._parser=null}function An(t){this.manager=void 0!==t?t:qa}function Cn(t){this.manager=void 0!==t?t:qa}function Ln(t){this.manager=void 0!==t?t:qa}function Dn(){this.type="Curve",this.arcLengthDivisions=200}function Pn(t,e,i,n,r,a,o,s){Dn.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Rn(t,e,i,n,r,a){Pn.call(this,t,e,i,i,n,r,a),this.type="ArcCurve"}function On(){var t=0,e=0,i=0,n=0;return{initCatmullRom:function(r,a,o,s,l){t=a,e=r=l*(o-r),i=-3*a+3*o-2*r-(s=l*(s-a)),n=2*a-2*o+r+s},initNonuniformCatmullRom:function(r,a,o,s,l,c,h){t=a,e=r=((a-r)/l-(o-r)/(l+c)+(o-a)/c)*c,i=-3*a+3*o-2*r-(s=((o-a)/c-(s-a)/(c+h)+(s-o)/h)*c),n=2*a-2*o+r+s},calc:function(r){var a=r*r;return t+e*r+i*a+n*a*r}}}function In(t,e,i,n){Dn.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=n||.5}function zn(t,e,i,n,r){var a=t*t;return(2*i-2*n+(e=.5*(n-e))+(r=.5*(r-i)))*t*a+(-3*i+3*n-2*e-r)*a+e*t+i}function Nn(t,e,i,n){var r=1-t;return r*r*e+2*(1-t)*t*i+t*t*n}function kn(t,e,i,n,r){var a=1-t,o=1-t;return a*a*a*e+3*o*o*t*i+3*(1-t)*t*t*n+t*t*t*r}function Fn(t,e,n,r){Dn.call(this),this.type="CubicBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i,this.v3=r||new i}function Bn(t,e,i,n){Dn.call(this),this.type="CubicBezierCurve3",this.v0=t||new r,this.v1=e||new r,this.v2=i||new r,this.v3=n||new r}function Un(t,e){Dn.call(this),this.type="LineCurve",this.v1=t||new i,this.v2=e||new i}function Hn(t,e){Dn.call(this),this.type="LineCurve3",this.v1=t||new r,this.v2=e||new r}function Gn(t,e,n){Dn.call(this),this.type="QuadraticBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i}function jn(t,e,i){Dn.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new r,this.v1=e||new r,this.v2=i||new r}function Vn(t){Dn.call(this),this.type="SplineCurve",this.points=t||[]}function Wn(){Dn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function qn(t){Wn.call(this),this.type="Path",this.currentPoint=new i,t&&this.setFromPoints(t)}function Xn(t){qn.call(this,t),this.uuid=ua.generateUUID(),this.type="Shape",this.holes=[]}function Yn(t,e){T.call(this),this.type="Light",this.color=new _(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Zn(t,e,i){Yn.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(T.DefaultUp),this.updateMatrix(),this.groundColor=new _(e)}function Jn(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new g}function Qn(){Jn.call(this,new xe(50,1,.5,500))}function Kn(t,e,i,n,r,a){Yn.call(this,t,e),this.type="SpotLight",this.position.copy(T.DefaultUp),this.updateMatrix(),this.target=new T,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Qn}function $n(t,e,i,n){Yn.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Jn(new xe(90,1,.5,500))}function tr(t,e,i,n,r,a){be.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function er(){Jn.call(this,new tr(-5,5,5,-5,.5,500))}function ir(t,e){Yn.call(this,t,e),this.type="DirectionalLight",this.position.copy(T.DefaultUp),this.updateMatrix(),this.target=new T,this.shadow=new er}function nr(t,e){Yn.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function rr(t,e,i,n){Yn.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function ar(t){this.manager=void 0!==t?t:qa,this.textures={}}function or(){B.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function sr(t,e,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),A.call(this,t,e,i),this.meshPerAttribute=n||1}function lr(t){this.manager=void 0!==t?t:qa}function cr(t){this.manager=void 0!==t?t:qa,this.resourcePath=""}function hr(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:qa,this.options=void 0}function ur(){this.type="ShapePath",this.color=new _,this.subPaths=[],this.currentPath=null}function dr(t){this.type="Font",this.data=t}function pr(t){this.manager=void 0!==t?t:qa}function fr(){}function mr(t){this.manager=void 0!==t?t:qa}function gr(){this.coefficients=[];for(var t=0;9>t;t++)this.coefficients.push(new r)}function vr(t,e){Yn.call(this,void 0,e),this.sh=void 0!==t?t:new gr}function yr(t,e,i){vr.call(this,void 0,i),t=(new _).set(t),i=(new _).set(e),e=new r(t.r,t.g,t.b),t=new r(i.r,i.g,i.b);var n=(i=Math.sqrt(Math.PI))*Math.sqrt(.75);this.sh.coefficients[0].copy(e).add(t).multiplyScalar(i),this.sh.coefficients[1].copy(e).sub(t).multiplyScalar(n)}function _r(t,e){vr.call(this,void 0,e),t=(new _).set(t),this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}function br(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function xr(t,e,i,n){T.call(this),this.type="CubeCamera";var a=new xe(90,1,t,e);a.up.set(0,-1,0),a.lookAt(new r(1,0,0)),this.add(a);var o=new xe(90,1,t,e);o.up.set(0,-1,0),o.lookAt(new r(-1,0,0)),this.add(o);var s=new xe(90,1,t,e);s.up.set(0,0,1),s.lookAt(new r(0,1,0)),this.add(s);var l=new xe(90,1,t,e);l.up.set(0,0,-1),l.lookAt(new r(0,-1,0)),this.add(l);var c=new xe(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new r(0,0,1)),this.add(c);var u=new xe(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new r(0,0,-1)),this.add(u),n=n||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new h(i,i,n),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=t.getRenderTarget(),n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,a),t.setRenderTarget(n,1),t.render(e,o),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,c),n.texture.generateMipmaps=r,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(i)},this.clear=function(t,e,i,n){for(var r=t.getRenderTarget(),a=this.renderTarget,o=0;6>o;o++)t.setRenderTarget(a,o),t.clear(e,i,n);t.setRenderTarget(r)}}function wr(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Mr(){T.call(this),this.type="AudioListener",this.context=so.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Er(t){T.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Tr(t){Er.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Sr(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Ar(t,e,i){switch(this.binding=t,this.valueSize=i,t=Float64Array,e){case"quaternion":e=this._slerp;break;case"string":case"bool":t=Array,e=this._select;break;default:e=this._lerp}this.buffer=new t(4*i),this._mixBufferRegion=e,this.referenceCount=this.useCount=this.cumulativeWeight=0}function Cr(t,e,i){i=i||Lr.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Lr(t,e,i){this.path=e,this.parsedPath=i||Lr.parseTrackName(e),this.node=Lr.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Dr(){this.uuid=ua.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Pr(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null,e=(t=e.tracks).length,i=Array(e);for(var n={endingStart:2400,endingEnd:2400},r=0;r!==e;++r){var a=t[r].createInterpolant(null);i[r]=a,a.settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Rr(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function Or(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t}function Ir(t,e,i){De.call(this,t,e),this.meshPerAttribute=i||1}function zr(t,e,i,n){this.ray=new q(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Nr(t,e){return t.distance-e.distance}function kr(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n)){n=0;for(var r=(t=t.children).length;n<r;n++)kr(t[n],e,i,!0)}}function Fr(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function Br(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}function Ur(t,e){this.min=void 0!==t?t:new i(1/0,1/0),this.max=void 0!==e?e:new i(-1/0,-1/0)}function Hr(t,e){this.start=void 0!==t?t:new r,this.end=void 0!==e?e:new r}function Gr(t){T.call(this),this.material=t,this.render=function(){}}function jr(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16711680,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=3*i.faces.length:i&&i.isBufferGeometry&&(e=i.attributes.normal.count),i=new B,e=new z(6*e,3),i.addAttribute("position",e),Ue.call(this,i,new Fe({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function Vr(t,e){T.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new B,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,n=1;32>i;i++,n++){var r=i/32*Math.PI*2,a=n/32*Math.PI*2;e.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}t.addAttribute("position",new z(e,3)),e=new Fe({fog:!1}),this.cone=new Ue(t,e),this.add(this.cone),this.update()}function Wr(t){for(var e=function t(e){var i=[];e&&e.isBone&&i.push(e);for(var n=0;n<e.children.length;n++)i.push.apply(i,t(e.children[n]));return i}(t),i=new B,n=[],r=[],a=new _(0,0,1),o=new _(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}i.addAttribute("position",new z(n,3)),i.addAttribute("color",new z(r,3)),n=new Fe({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),Ue.call(this,i,n),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function qr(t,e,i){this.light=t,this.light.updateMatrixWorld(),this.color=i,t=new Ni(e,4,2),e=new Y({wireframe:!0,fog:!1}),Z.call(this,t,e),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Xr(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e,(t=new B).addAttribute("position",new z([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),t.computeBoundingSphere(),e=new Fe({fog:!1}),Be.call(this,t,e),(t=new B).addAttribute("position",new z([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),t.computeBoundingSphere(),this.add(new Z(t,new Y({side:1,fog:!1}))),this.update()}function Yr(t,e,i){T.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(t=new ii(e)).rotateY(.5*Math.PI),this.material=new Y({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),e=t.getAttribute("position"),e=new Float32Array(3*e.count),t.addAttribute("color",new A(e,3)),this.add(new Z(t,this.material)),this.update()}function Zr(t,e){this.lightProbe=t,this.size=e,t=new W({defines:{GAMMA_OUTPUT:""},uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:"varying vec3 vNormal;\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#define RECIPROCAL_PI 0.318309886\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\t// matrix is assumed to be orthogonal\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 linearToOutput( in vec3 a ) {\n\t#ifdef GAMMA_OUTPUT\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\t#else\n\t\treturn a;\n\t#endif\n}\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\t// normal is assumed to have unit length\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nuniform vec3 sh[ 9 ]; // sh coefficients\nuniform float intensity; // light probe intensity\nvarying vec3 vNormal;\nvoid main() {\n\tvec3 normal = normalize( vNormal );\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );\n\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;\n\toutgoingLight = linearToOutput( outgoingLight );\n\tgl_FragColor = vec4( outgoingLight, 1.0 );\n}"}),e=new Ni(1,32,16),Z.call(this,e,t),this.onBeforeRender()}function Jr(t,e,i,n){t=t||10,e=e||10,i=new _(void 0!==i?i:4473924),n=new _(void 0!==n?n:8947848);var r=e/2,a=t/e,o=t/2;t=[];for(var s=[],l=0,c=0,h=-o;l<=e;l++,h+=a){t.push(-o,0,h,o,0,h),t.push(h,0,-o,h,0,o);var u=l===r?i:n;u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3}(e=new B).addAttribute("position",new z(t,3)),e.addAttribute("color",new z(s,3)),i=new Fe({vertexColors:2}),Ue.call(this,e,i)}function Qr(t,e,i,n,r,a){t=t||10,e=e||16,i=i||8,n=n||64,r=new _(void 0!==r?r:4473924),a=new _(void 0!==a?a:8947848);var o,s=[],l=[];for(o=0;o<=e;o++){var c=o/e*2*Math.PI,h=Math.sin(c)*t;c=Math.cos(c)*t,s.push(0,0,0),s.push(h,0,c);var u=1&o?r:a;l.push(u.r,u.g,u.b),l.push(u.r,u.g,u.b)}for(o=0;o<=i;o++){u=1&o?r:a;var d=t-t/i*o;for(e=0;e<n;e++)c=e/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,s.push(h,0,c),l.push(u.r,u.g,u.b),c=(e+1)/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,s.push(h,0,c),l.push(u.r,u.g,u.b)}(t=new B).addAttribute("position",new z(s,3)),t.addAttribute("color",new z(l,3)),s=new Fe({vertexColors:2}),Ue.call(this,t,s)}function Kr(t,e,i,n){this.audio=t,this.range=e||1,this.divisionsInnerAngle=i||16,this.divisionsOuterAngle=n||2,t=new B,e=new Float32Array(3*(3*(this.divisionsInnerAngle+2*this.divisionsOuterAngle)+3)),t.addAttribute("position",new A(e,3)),e=new Fe({color:65280}),i=new Fe({color:16776960}),Be.call(this,t,[i,e]),this.update()}function $r(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16776960,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=i.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),i=new B,e=new z(6*e,3),i.addAttribute("position",e),Ue.call(this,i,new Fe({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function ta(t,e,i){T.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1),(t=new B).addAttribute("position",new z([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new Fe({fog:!1}),this.lightPlane=new Be(t,e),this.add(this.lightPlane),(t=new B).addAttribute("position",new z([0,0,0,0,0,1],3)),this.targetLine=new Be(t,e),this.add(this.targetLine),this.update()}function ea(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){a.push(0,0,0),o.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(a.length/3-1)}var n=new B,r=new Fe({color:16777215,vertexColors:1}),a=[],o=[],s={},l=new _(16755200),c=new _(16711680),h=new _(43775),u=new _(16777215),d=new _(3355443);e("n1","n2",l),e("n2","n4",l),e("n4","n3",l),e("n3","n1",l),e("f1","f2",l),e("f2","f4",l),e("f4","f3",l),e("f3","f1",l),e("n1","f1",l),e("n2","f2",l),e("n3","f3",l),e("n4","f4",l),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",h),e("u2","u3",h),e("u3","u1",h),e("c","t",u),e("p","c",d),e("cn1","cn2",d),e("cn3","cn4",d),e("cf1","cf2",d),e("cf3","cf4",d),n.addAttribute("position",new z(a,3)),n.addAttribute("color",new z(o,3)),Ue.call(this,n,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function ia(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new B;n.setIndex(new A(t,1)),n.addAttribute("position",new A(i,3)),Ue.call(this,n,new Fe({color:e})),this.matrixAutoUpdate=!1,this.update()}function na(t,e){this.type="Box3Helper",this.box=t,t=void 0!==e?e:16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new B;i.setIndex(new A(e,1)),i.addAttribute("position",new z([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ue.call(this,i,new Fe({color:t})),this.geometry.computeBoundingSphere()}function ra(t,e,i){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e,t=void 0!==i?i:16776960,(e=new B).addAttribute("position",new z([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),Be.call(this,e,new Fe({color:t})),(e=new B).addAttribute("position",new z([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new Z(e,new Y({color:t,opacity:.2,transparent:!0,depthWrite:!1})))}function aa(t,e,i,n,a,o){T.call(this),void 0===t&&(t=new r(0,0,1)),void 0===e&&(e=new r(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===a&&(a=.2*i),void 0===o&&(o=.2*a),void 0===ao&&((ao=new B).addAttribute("position",new z([0,0,0,0,1,0],3)),(oo=new qi(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Be(ao,new Fe({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Z(oo,new Y({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,a,o)}function oa(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new B).addAttribute("position",new z(e,3)),t.addAttribute("color",new z([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new Fe({vertexColors:2}),Ue.call(this,t,e)}function sa(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),In.call(this,t),this.type="catmullrom",this.closed=!0}function la(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),In.call(this,t),this.type="catmullrom"}function ca(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),In.call(this,t),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&(void 0!==(t=this._listeners[t])&&(-1!==(e=t.indexOf(e))&&t.splice(e,1)))},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=0,n=(e=e.slice(0)).length;i<n;i++)e[i].call(this,t)}}}});var ha,ua={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;256>e;e++)t[e]=(16>e?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ua.DEG2RAD},radToDeg:function(t){return t*ua.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(i.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=this.x-t.x,r=this.y-t.y;return this.x=n*i-r*e+t.x,this.y=n*e+r*i+t.y,this}}),Object.assign(n,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,a,o){var s=i[n+0],l=i[n+1],c=i[n+2];i=i[n+3],n=r[a+0];var h=r[a+1],u=r[a+2];if(i!==(r=r[a+3])||s!==n||l!==h||c!==u){a=1-o;var d=s*n+l*h+c*u+i*r,p=0<=d?1:-1,f=1-d*d;f>Number.EPSILON&&(f=Math.sqrt(f),d=Math.atan2(f,d*p),a=Math.sin(a*d)/f,o=Math.sin(o*d)/f),s=s*a+n*(p*=o),l=l*a+h*p,c=c*a+u*p,i=i*a+r*p,a===1-o&&(s*=o=1/Math.sqrt(s*s+l*l+c*c+i*i),l*=o,c*=o,i*=o)}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=i}}),Object.defineProperties(n.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(n.prototype,{isQuaternion:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,r=t._z;t=t.order;var a=Math.cos,o=Math.sin,s=a(i/2),l=a(n/2);return a=a(r/2),i=o(i/2),n=o(n/2),r=o(r/2),"XYZ"===t?(this._x=i*l*a+s*n*r,this._y=s*n*a-i*l*r,this._z=s*l*r+i*n*a,this._w=s*l*a-i*n*r):"YXZ"===t?(this._x=i*l*a+s*n*r,this._y=s*n*a-i*l*r,this._z=s*l*r-i*n*a,this._w=s*l*a+i*n*r):"ZXY"===t?(this._x=i*l*a-s*n*r,this._y=s*n*a+i*l*r,this._z=s*l*r+i*n*a,this._w=s*l*a-i*n*r):"ZYX"===t?(this._x=i*l*a-s*n*r,this._y=s*n*a+i*l*r,this._z=s*l*r-i*n*a,this._w=s*l*a+i*n*r):"YZX"===t?(this._x=i*l*a+s*n*r,this._y=s*n*a+i*l*r,this._z=s*l*r-i*n*a,this._w=s*l*a-i*n*r):"XZY"===t&&(this._x=i*l*a-s*n*r,this._y=s*n*a-i*l*r,this._z=s*l*r+i*n*a,this._w=s*l*a+i*n*r),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){e/=2;var i=Math.sin(e);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,i=e[0];t=e[4];var n=e[8],r=e[1],a=e[5],o=e[9],s=e[2],l=e[6],c=i+a+(e=e[10]);return 0<c?(i=.5/Math.sqrt(c+1),this._w=.25/i,this._x=(l-o)*i,this._y=(n-s)*i,this._z=(r-t)*i):i>a&&i>e?(i=2*Math.sqrt(1+i-a-e),this._w=(l-o)/i,this._x=.25*i,this._y=(t+r)/i,this._z=(n+s)/i):a>e?(i=2*Math.sqrt(1+a-i-e),this._w=(n-s)/i,this._x=(t+r)/i,this._y=.25*i,this._z=(o+l)/i):(i=2*Math.sqrt(1+e-i-a),this._w=(r-t)/i,this._x=(n+s)/i,this._y=(o+l)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return 1e-6>i?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(ua.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);return 0===i||this.slerp(t,Math.min(1,e/i)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z;t=t._w;var a=e._x,o=e._y,s=e._z;return e=e._w,this._x=i*e+t*a+n*s-r*o,this._y=n*e+t*o+r*a-i*s,this._z=r*e+t*s+i*o-n*a,this._w=t*e-i*a-n*o-r*s,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,a=this._w,o=a*t._w+i*t._x+n*t._y+r*t._z;if(0>o?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=i,this._y=n,this._z=r,this;if((t=1-o*o)<=Number.EPSILON)return o=1-e,this._w=o*a+e*this._w,this._x=o*i+e*this._x,this._y=o*n+e*this._y,this._z=o*r+e*this._z,this.normalize();t=Math.sqrt(t);var s=Math.atan2(t,o);return o=Math.sin((1-e)*s)/t,e=Math.sin(e*s)/t,this._w=a*o+this._w*e,this._x=i*o+this._x*e,this._y=n*o+this._y*e,this._z=r*o+this._z*e,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(r.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(ha=new n,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ha.setFromEuler(t))}),applyAxisAngle:function(){var t=new n;return function(e,i){return this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6]*n,this.y=t[1]*e+t[4]*i+t[7]*n,this.z=t[2]*e+t[5]*i+t[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=1/((t=t.elements)[3]*e+t[7]*i+t[11]*n+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*n+t[12])*r,this.y=(t[1]*e+t[5]*i+t[9]*n+t[13])*r,this.z=(t[2]*e+t[6]*i+t[10]*n+t[14])*r,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,a=t.y,o=t.z,s=(t=t.w)*e+a*n-o*i,l=t*i+o*e-r*n,c=t*n+r*i-a*e;return e=-r*e-a*i-o*n,this.x=s*t+e*-r+l*-o-c*-a,this.y=l*t+e*-a+c*-r-s*-o,this.z=c*t+e*-o+s*-a-l*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n,this.y=t[1]*e+t[5]*i+t[9]*n,this.z=t[2]*e+t[6]*i+t[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,n=t.y;t=t.z;var r=e.x,a=e.y;return e=e.z,this.x=n*e-t*a,this.y=t*r-i*e,this.z=i*a-n*r,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new r;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new r;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq()),Math.acos(ua.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(a.prototype,{isMatrix3:!0,set:function(t,e,i,n,r,a,o,s,l){var c=this.elements;return c[0]=t,c[1]=n,c[2]=o,c[3]=e,c[4]=r,c[5]=s,c[6]=i,c[7]=a,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var t=new r;return function(e){for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix3(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[3],a=i[6],o=i[1],s=i[4],l=i[7],c=i[2],h=i[5];i=i[8];var u=n[0],d=n[3],p=n[6],f=n[1],m=n[4],g=n[7],v=n[2],y=n[5];return n=n[8],e[0]=t*u+r*f+a*v,e[3]=t*d+r*m+a*y,e[6]=t*p+r*g+a*n,e[1]=o*u+s*f+l*v,e[4]=o*d+s*m+l*y,e[7]=o*p+s*g+l*n,e[2]=c*u+h*f+i*v,e[5]=c*d+h*m+i*y,e[8]=c*p+h*g+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7];return e*a*(t=t[8])-e*o*l-i*r*t+i*o*s+n*r*l-n*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements;t=this.elements;var n=i[0],r=i[1],a=i[2],o=i[3],s=i[4],l=i[5],c=i[6],h=i[7],u=(i=i[8])*s-l*h,d=l*c-i*o,p=h*o-s*c,f=n*u+r*d+a*p;if(0===f){if(!0===e)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/f,t[0]=u*e,t[1]=(a*h-i*r)*e,t[2]=(l*r-a*s)*e,t[3]=d*e,t[4]=(i*n-a*c)*e,t[5]=(a*o-l*n)*e,t[6]=p*e,t[7]=(r*c-h*n)*e,t[8]=(s*n-r*o)*e,this},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,n,r,a,o){var s=Math.cos(r);r=Math.sin(r),this.set(i*s,i*r,-i*(s*a+r*o)+a+t,-n*r,n*s,-n*(-r*a+s*o)+o+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var i=this.elements,n=i[0],r=i[3],a=i[6],o=i[1],s=i[4],l=i[7];return i[0]=e*n+t*o,i[3]=e*r+t*s,i[6]=e*a+t*l,i[1]=-t*n+e*o,i[4]=-t*r+e*s,i[7]=-t*a+e*l,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;9>i;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;9>i;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var da,pa={getDataURL:function(t){if("undefined"==typeof HTMLCanvasElement)return t.src;if(!(t instanceof HTMLCanvasElement)){void 0===da&&(da=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),da.width=t.width,da.height=t.height;var e=da.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),t=da}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},fa=0;o.DEFAULT_IMAGE=void 0,o.DEFAULT_MAPPING=300,o.prototype=Object.assign(Object.create(e.prototype),{constructor:o,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=ua.generateUUID()),!e&&void 0===t.images[n.uuid]){if(Array.isArray(n))for(var r=[],a=0,o=n.length;a<o;a++)r.push(pa.getDataURL(n[a]));else r=pa.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(o.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(s.prototype,{isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n+t[12]*r,this.y=t[1]*e+t[5]*i+t[9]*n+t[13]*r,this.z=t[2]*e+t[6]*i+t[10]*n+t[14]*r,this.w=t[3]*e+t[7]*i+t[11]*n+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],i=t[4],n=t[8],r=t[1],a=t[5],o=t[9],s=t[2],l=t[6],c=t[10];return.01>Math.abs(i-r)&&.01>Math.abs(n-s)&&.01>Math.abs(o-l)?.1>Math.abs(i+r)&&.1>Math.abs(n+s)&&.1>Math.abs(o+l)&&.1>Math.abs(e+a+c-3)?(this.set(1,0,0,0),this):(t=Math.PI,c=(c+1)/2,i=(i+r)/4,n=(n+s)/4,o=(o+l)/4,(e=(e+1)/2)>(a=(a+1)/2)&&e>c?.01>e?(l=0,i=s=.707106781):(s=i/(l=Math.sqrt(e)),i=n/l):a>c?.01>a?(l=.707106781,s=0,i=.707106781):(l=i/(s=Math.sqrt(a)),i=o/s):.01>c?(s=l=.707106781,i=0):(l=n/(i=Math.sqrt(c)),s=o/i),this.set(l,s,i,t),this):(t=Math.sqrt((l-o)*(l-o)+(n-s)*(n-s)+(r-i)*(r-i)),.001>Math.abs(t)&&(t=1),this.x=(l-o)/t,this.y=(n-s)/t,this.z=(r-i)/t,this.w=Math.acos((e+a+c-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new s,e=new s),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),l.prototype=Object.assign(Object.create(e.prototype),{constructor:l,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),c.prototype=Object.assign(Object.create(l.prototype),{constructor:c,isWebGLMultisampleRenderTarget:!0,copy:function(t){return l.prototype.copy.call(this,t),this.samples=t.samples,this}}),h.prototype=Object.create(l.prototype),h.prototype.constructor=h,h.prototype.isWebGLRenderTargetCube=!0,u.prototype=Object.create(o.prototype),u.prototype.constructor=u,u.prototype.isDataTexture=!0,Object.assign(d.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var c=t[s],h=t[s+1],u=t[s+2];c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),c>r&&(r=c),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.count;s<l;s++){var c=t.getX(s),h=t.getY(s),u=t.getZ(s);c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),c>r&&(r=c),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new r;return function(e,i){return i=t.copy(i).multiplyScalar(.5),this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new r),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new r),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var r=t.geometry;if(void 0!==r)if(r.isGeometry)for(r=r.vertices,i=0,n=r.length;i<n;i++)a.copy(r[i]),a.applyMatrix4(t.matrixWorld),e.expandByPoint(a);else if(r.isBufferGeometry&&void 0!==(r=r.attributes.position))for(i=0,n=r.count;i<n;i++)a.fromBufferAttribute(r,i).applyMatrix4(t.matrixWorld),e.expandByPoint(a)}var e,i,n,a=new r;return function(i){return e=this,i.updateMatrixWorld(!0),i.traverse(t),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new r),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new r;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){if(0<t.normal.x)var e=t.normal.x*this.min.x,i=t.normal.x*this.max.x;else e=t.normal.x*this.max.x,i=t.normal.x*this.min.x;return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(){function t(t){var r,a=0;for(r=t.length-3;a<=r;a+=3){l.fromArray(t,a);var o=h.x*Math.abs(l.x)+h.y*Math.abs(l.y)+h.z*Math.abs(l.z),s=e.dot(l),c=i.dot(l),u=n.dot(l);if(Math.max(-Math.max(s,c,u),Math.min(s,c,u))>o)return!1}return!0}var e=new r,i=new r,n=new r,a=new r,o=new r,s=new r,l=new r,c=new r,h=new r,u=new r;return function(r){return!this.isEmpty()&&(this.getCenter(c),h.subVectors(this.max,c),e.subVectors(r.a,c),i.subVectors(r.b,c),n.subVectors(r.c,c),a.subVectors(i,e),o.subVectors(n,i),s.subVectors(e,n),!!t(r=[0,-a.z,a.y,0,-o.z,o.y,0,-s.z,s.y,a.z,0,-a.x,o.z,0,-o.x,s.z,0,-s.x,-a.y,a.x,0,-o.y,o.x,0,-s.y,s.x,0])&&(!!t(r=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(a,o),t(r=[u.x,u.y,u.z]))))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new r),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new r;return function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new r,new r,new r,new r,new r,new r,new r,new r];return function(e){return this.isEmpty()||(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t)),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(p.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new d;return function(e,i){var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).getCenter(n);for(var r=i=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new r),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new d),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(f.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new r,e=new r;return function(i,n,r){return n=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize(),this.setFromNormalAndCoplanarPoint(n,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new r),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new r;return function(e,i){void 0===i&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new r);var n=e.delta(t),a=this.normal.dot(n);if(0===a){if(0===this.distanceToPoint(e.start))return i.copy(e.start)}else if(!(0>(a=-(e.start.dot(this.normal)+this.constant)/a)||1<a))return i.copy(n).multiplyScalar(a).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new r),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new r,e=new a;return function(i,n){return n=n||e.getNormalMatrix(i),i=this.coplanarPoint(t).applyMatrix4(i),n=this.normal.applyMatrix3(n).normalize(),this.constant=-i.dot(n),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(m.prototype,{set:function(t,e,i,n,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;6>i;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements;t=i[0];var n=i[1],r=i[2],a=i[3],o=i[4],s=i[5],l=i[6],c=i[7],h=i[8],u=i[9],d=i[10],p=i[11],f=i[12],m=i[13],g=i[14];return i=i[15],e[0].setComponents(a-t,c-o,p-h,i-f).normalize(),e[1].setComponents(a+t,c+o,p+h,i+f).normalize(),e[2].setComponents(a+n,c+s,p+u,i+m).normalize(),e[3].setComponents(a-n,c-s,p-u,i-m).normalize(),e[4].setComponents(a-r,c-l,p-d,i-g).normalize(),e[5].setComponents(a+r,c+l,p+d,i+g).normalize(),this},intersectsObject:function(){var t=new p;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new p;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes,i=t.center;t=-t.radius;for(var n=0;6>n;n++)if(e[n].distanceToPoint(i)<t)return!1;return!0},intersectsBox:function(){var t=new r;return function(e){for(var i=this.planes,n=0;6>n;n++){var r=i[n];if(t.x=0<r.normal.x?e.max.x:e.min.x,t.y=0<r.normal.y?e.max.y:e.min.y,t.z=0<r.normal.z?e.max.z:e.min.z,0>r.distanceToPoint(t))return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;6>i;i++)if(0>e[i].distanceToPoint(t))return!1;return!0}}),Object.assign(g.prototype,{isMatrix4:!0,set:function(t,e,i,n,r,a,o,s,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new g).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t=new r;return function(e){var i=this.elements,n=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length();return e=1/t.setFromMatrixColumn(e,2).length(),i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[3]=0,i[4]=n[4]*a,i[5]=n[5]*a,i[6]=n[6]*a,i[7]=0,i[8]=n[8]*e,i[9]=n[9]*e,i[10]=n[10]*e,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i);i=Math.sin(i);var o=Math.cos(n);n=Math.sin(n);var s=Math.cos(r);if(r=Math.sin(r),"XYZ"===t.order){t=a*s;var l=a*r,c=i*s,h=i*r;e[0]=o*s,e[4]=-o*r,e[8]=n,e[1]=l+c*n,e[5]=t-h*n,e[9]=-i*o,e[2]=h-t*n,e[6]=c+l*n,e[10]=a*o}else"YXZ"===t.order?(t=o*s,l=o*r,c=n*s,h=n*r,e[0]=t+h*i,e[4]=c*i-l,e[8]=a*n,e[1]=a*r,e[5]=a*s,e[9]=-i,e[2]=l*i-c,e[6]=h+t*i,e[10]=a*o):"ZXY"===t.order?(t=o*s,l=o*r,c=n*s,h=n*r,e[0]=t-h*i,e[4]=-a*r,e[8]=c+l*i,e[1]=l+c*i,e[5]=a*s,e[9]=h-t*i,e[2]=-a*n,e[6]=i,e[10]=a*o):"ZYX"===t.order?(t=a*s,l=a*r,c=i*s,h=i*r,e[0]=o*s,e[4]=c*n-l,e[8]=t*n+h,e[1]=o*r,e[5]=h*n+t,e[9]=l*n-c,e[2]=-n,e[6]=i*o,e[10]=a*o):"YZX"===t.order?(t=a*o,l=a*n,c=i*o,h=i*n,e[0]=o*s,e[4]=h-t*r,e[8]=c*r+l,e[1]=r,e[5]=a*s,e[9]=-i*s,e[2]=-n*s,e[6]=l*r+c,e[10]=t-h*r):"XZY"===t.order&&(t=a*o,l=a*n,c=i*o,h=i*n,e[0]=o*s,e[4]=-r,e[8]=n*s,e[1]=t*r+h,e[5]=a*s,e[9]=l*r-c,e[2]=c*r-l,e[6]=i*s,e[10]=h*r+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var t=new r(0,0,0),e=new r(1,1,1);return function(i){return this.compose(t,i,e)}}(),lookAt:function(){var t=new r,e=new r,i=new r;return function(n,r,a){var o=this.elements;return i.subVectors(n,r),0===i.lengthSq()&&(i.z=1),i.normalize(),t.crossVectors(a,i),0===t.lengthSq()&&(1===Math.abs(a.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),t.crossVectors(a,i)),t.normalize(),e.crossVectors(i,t),o[0]=t.x,o[4]=e.x,o[8]=i.x,o[1]=t.y,o[5]=e.y,o[9]=i.y,o[2]=t.z,o[6]=e.z,o[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[4],a=i[8],o=i[12],s=i[1],l=i[5],c=i[9],h=i[13],u=i[2],d=i[6],p=i[10],f=i[14],m=i[3],g=i[7],v=i[11];i=i[15];var y=n[0],_=n[4],b=n[8],x=n[12],w=n[1],M=n[5],E=n[9],T=n[13],S=n[2],A=n[6],C=n[10],L=n[14],D=n[3],P=n[7],R=n[11];return n=n[15],e[0]=t*y+r*w+a*S+o*D,e[4]=t*_+r*M+a*A+o*P,e[8]=t*b+r*E+a*C+o*R,e[12]=t*x+r*T+a*L+o*n,e[1]=s*y+l*w+c*S+h*D,e[5]=s*_+l*M+c*A+h*P,e[9]=s*b+l*E+c*C+h*R,e[13]=s*x+l*T+c*L+h*n,e[2]=u*y+d*w+p*S+f*D,e[6]=u*_+d*M+p*A+f*P,e[10]=u*b+d*E+p*C+f*R,e[14]=u*x+d*T+p*L+f*n,e[3]=m*y+g*w+v*S+i*D,e[7]=m*_+g*M+v*A+i*P,e[11]=m*b+g*E+v*C+i*R,e[15]=m*x+g*T+v*L+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new r;return function(e){for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix4(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],a=t[1],o=t[5],s=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*s*h-n*l*h-r*o*u+i*l*u+n*o*d-i*s*d)+t[7]*(+e*s*d-e*l*u+r*a*u-n*a*d+n*l*c-r*s*c)+t[11]*(+e*l*h-e*o*d-r*a*h+i*a*d+r*o*c-i*l*c)+t[15]*(-n*o*c-e*s*h+e*o*u+n*a*h-i*a*u+i*s*c)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,i){var n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this},getInverse:function(t,e){var i=this.elements,n=t.elements;t=n[0];var r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=d*v*h-g*p*h+g*c*f-l*v*f-d*c*(n=n[15])+l*p*n,_=m*p*h-u*v*h-m*c*f+s*v*f+u*c*n-s*p*n,b=u*g*h-m*d*h+m*l*f-s*g*f-u*l*n+s*d*n,x=m*d*c-u*g*c-m*l*p+s*g*p+u*l*v-s*d*v,w=t*y+r*_+a*b+o*x;if(0===w){if(!0===e)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/w,i[0]=y*e,i[1]=(g*p*o-d*v*o-g*a*f+r*v*f+d*a*n-r*p*n)*e,i[2]=(l*v*o-g*c*o+g*a*h-r*v*h-l*a*n+r*c*n)*e,i[3]=(d*c*o-l*p*o-d*a*h+r*p*h+l*a*f-r*c*f)*e,i[4]=_*e,i[5]=(u*v*o-m*p*o+m*a*f-t*v*f-u*a*n+t*p*n)*e,i[6]=(m*c*o-s*v*o-m*a*h+t*v*h+s*a*n-t*c*n)*e,i[7]=(s*p*o-u*c*o+u*a*h-t*p*h-s*a*f+t*c*f)*e,i[8]=b*e,i[9]=(m*d*o-u*g*o-m*r*f+t*g*f+u*r*n-t*d*n)*e,i[10]=(s*g*o-m*l*o+m*r*h-t*g*h-s*r*n+t*l*n)*e,i[11]=(u*l*o-s*d*o-u*r*h+t*d*h+s*r*f-t*l*f)*e,i[12]=x*e,i[13]=(u*g*a-m*d*a+m*r*p-t*g*p-u*r*v+t*d*v)*e,i[14]=(m*l*a-s*g*a-m*r*c+t*g*c+s*r*v-t*l*v)*e,i[15]=(s*d*a-u*l*a+u*r*c-t*d*c-s*r*p+t*l*p)*e,this},scale:function(t){var e=this.elements,i=t.x,n=t.y;return t=t.z,e[0]*=i,e[4]*=n,e[8]*=t,e[1]*=i,e[5]*=n,e[9]*=t,e[2]*=i,e[6]*=n,e[10]*=t,e[3]*=i,e[7]*=n,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=1-i,r=t.x,a=t.y;t=t.z;var o=n*r,s=n*a;return this.set(o*r+i,o*a-e*t,o*t+e*a,0,o*a+e*t,s*a+i,s*t-e*r,0,o*t-e*a,s*t+e*r,n*t*t+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var n=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,l=r+r,c=a+a,h=o+o;e=r*l;var u=r*c;r*=h;var d=a*c;a*=h,o*=h,l*=s,c*=s,s*=h,h=i.x;var p=i.y;return i=i.z,n[0]=(1-(d+o))*h,n[1]=(u+s)*h,n[2]=(r-c)*h,n[3]=0,n[4]=(u-s)*p,n[5]=(1-(e+o))*p,n[6]=(a+l)*p,n[7]=0,n[8]=(r+c)*i,n[9]=(a-l)*i,n[10]=(1-(e+d))*i,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this},decompose:function(){var t=new r,e=new g;return function(i,n,r){var a=this.elements,o=t.set(a[0],a[1],a[2]).length(),s=t.set(a[4],a[5],a[6]).length(),l=t.set(a[8],a[9],a[10]).length();0>this.determinant()&&(o=-o),i.x=a[12],i.y=a[13],i.z=a[14],e.copy(this),i=1/o,a=1/s;var c=1/l;return e.elements[0]*=i,e.elements[1]*=i,e.elements[2]*=i,e.elements[4]*=a,e.elements[5]*=a,e.elements[6]*=a,e.elements[8]*=c,e.elements[9]*=c,e.elements[10]*=c,n.setFromRotationMatrix(e),r.x=o,r.y=s,r.z=l,this}}(),makePerspective:function(t,e,i,n,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements;return o[0]=2*r/(e-t),o[4]=0,o[8]=(e+t)/(e-t),o[12]=0,o[1]=0,o[5]=2*r/(i-n),o[9]=(i+n)/(i-n),o[13]=0,o[2]=0,o[6]=0,o[10]=-(a+r)/(a-r),o[14]=-2*a*r/(a-r),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,i,n,r,a){var o=this.elements,s=1/(e-t),l=1/(i-n),c=1/(a-r);return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-(e+t)*s,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-(i+n)*l,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-(a+r)*c,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;16>i;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;16>i;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}});var ma={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},ga={clone:v,merge:y},va={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(_.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return 0>i&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:.5>i?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){return e=ua.euclideanModulo(e,1),i=ua.clamp(i,0,1),n=ua.clamp(n,0,1),0===i?this.r=this.g=this.b=n:(n=2*n-(i=.5>=n?n*(1+i):n+i-n*i),this.r=t(n,i,e+1/3),this.g=t(n,i,e),this.b=t(n,i,e-1/3)),this}}(),setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(i[1])/360;var r=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(n,r,a)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(t)){if(3===(n=(i=i[1]).length))return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return t&&0<t.length&&(void 0!==(i=va[t])?this.setHex(i):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return void 0===e&&(e=2),e=0<e?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return.04045>t?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return.0031308>t?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i=this.r,n=this.g,r=this.b,a=Math.max(i,n,r),o=Math.min(i,n,r),s=(o+a)/2;if(o===a)o=e=0;else{var l=a-o;switch(o=.5>=s?l/(a+o):l/(2-a-o),a){case i:e=(n-r)/l+(n<r?6:0);break;case n:e=(r-i)/l+2;break;case r:e=(i-n)/l+4}e/=6}return t.h=e,t.s=o,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,i,n){return this.getHSL(t),t.h+=e,t.s+=i,t.l+=n,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(){var t={h:0,s:0,l:0},e={h:0,s:0,l:0};return function(i,n){this.getHSL(t),i.getHSL(e),i=ua.lerp(t.h,e.h,n);var r=ua.lerp(t.s,e.s,n);return n=ua.lerp(t.l,e.l,n),this.setHSL(i,r,n),this}}(),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var ya={common:{diffuse:{value:new _(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new a},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new _(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new a}},sprite:{diffuse:{value:new _(15658734)},opacity:{value:1},center:{value:new i(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new a}}},_a={basic:{uniforms:y([ya.common,ya.specularmap,ya.envmap,ya.aomap,ya.lightmap,ya.fog]),vertexShader:ma.meshbasic_vert,fragmentShader:ma.meshbasic_frag},lambert:{uniforms:y([ya.common,ya.specularmap,ya.envmap,ya.aomap,ya.lightmap,ya.emissivemap,ya.fog,ya.lights,{emissive:{value:new _(0)}}]),vertexShader:ma.meshlambert_vert,fragmentShader:ma.meshlambert_frag},phong:{uniforms:y([ya.common,ya.specularmap,ya.envmap,ya.aomap,ya.lightmap,ya.emissivemap,ya.bumpmap,ya.normalmap,ya.displacementmap,ya.gradientmap,ya.fog,ya.lights,{emissive:{value:new _(0)},specular:{value:new _(1118481)},shininess:{value:30}}]),vertexShader:ma.meshphong_vert,fragmentShader:ma.meshphong_frag},standard:{uniforms:y([ya.common,ya.envmap,ya.aomap,ya.lightmap,ya.emissivemap,ya.bumpmap,ya.normalmap,ya.displacementmap,ya.roughnessmap,ya.metalnessmap,ya.fog,ya.lights,{emissive:{value:new _(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ma.meshphysical_vert,fragmentShader:ma.meshphysical_frag},matcap:{uniforms:y([ya.common,ya.bumpmap,ya.normalmap,ya.displacementmap,ya.fog,{matcap:{value:null}}]),vertexShader:ma.meshmatcap_vert,fragmentShader:ma.meshmatcap_frag},points:{uniforms:y([ya.points,ya.fog]),vertexShader:ma.points_vert,fragmentShader:ma.points_frag},dashed:{uniforms:y([ya.common,ya.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ma.linedashed_vert,fragmentShader:ma.linedashed_frag},depth:{uniforms:y([ya.common,ya.displacementmap]),vertexShader:ma.depth_vert,fragmentShader:ma.depth_frag},normal:{uniforms:y([ya.common,ya.bumpmap,ya.normalmap,ya.displacementmap,{opacity:{value:1}}]),vertexShader:ma.normal_vert,fragmentShader:ma.normal_frag},sprite:{uniforms:y([ya.sprite,ya.fog]),vertexShader:ma.sprite_vert,fragmentShader:ma.sprite_frag},background:{uniforms:{uvTransform:{value:new a},t2D:{value:null}},vertexShader:ma.background_vert,fragmentShader:ma.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ma.cube_vert,fragmentShader:ma.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ma.equirect_vert,fragmentShader:ma.equirect_frag},distanceRGBA:{uniforms:y([ya.common,ya.displacementmap,{referencePosition:{value:new r},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ma.distanceRGBA_vert,fragmentShader:ma.distanceRGBA_frag},shadow:{uniforms:y([ya.lights,ya.fog,{color:{value:new _(0)},opacity:{value:1}}]),vertexShader:ma.shadow_vert,fragmentShader:ma.shadow_frag}};_a.physical={uniforms:y([_a.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ma.meshphysical_vert,fragmentShader:ma.meshphysical_frag},Object.assign(w.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),M.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),M.DefaultOrder="XYZ",Object.defineProperties(M.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(M.prototype,{isEuler:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=ua.clamp,r=t.elements;t=r[0];var a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],h=r[2],u=r[6];return r=r[10],"XYZ"===(e=e||this._order)?(this._y=Math.asin(n(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(-c,r),this._z=Math.atan2(-a,t)):(this._x=Math.atan2(u,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),.99999>Math.abs(c)?(this._y=Math.atan2(o,r),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-h,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(-h,r),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,t))):"ZYX"===e?(this._y=Math.asin(-n(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(u,r),this._z=Math.atan2(s,t)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(n(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,t)):(this._x=0,this._y=Math.atan2(o,r))):"XZY"===e?(this._z=Math.asin(-n(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,t)):(this._x=Math.atan2(-c,r),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new g;return function(e,i,n){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new n;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new r(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(E.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var ba=0;T.DefaultUp=new r(0,1,0),T.DefaultMatrixAutoUpdate=!0,T.prototype=Object.assign(Object.create(e.prototype),{constructor:T,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new n;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new n;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new r(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new r(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new r(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new r;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new r(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new r(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new r(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new g;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new n,e=new g,i=new r,a=new r;return function(n,r,o){n.isVector3?i.copy(n):i.set(n,r,o),n=this.parent,this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(a,i,this.up):e.lookAt(i,a,this.up),this.quaternion.setFromRotationMatrix(e),n&&(e.extractRotation(n.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return-1!==(e=this.children.indexOf(t))&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(e,1)),this},attach:function(){var t=new g;return function(e){return this.updateWorldMatrix(!0,!1),t.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),t.multiply(e.parent.matrixWorld)),e.applyMatrix(t),e.updateWorldMatrix(!1,!1),this.add(e),this}}(),getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new r),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new r,e=new r;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),i=new n),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,i,e),i}}(),getWorldScale:function(){var t=new r,e=new n;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new r),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,i),i}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new r),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(e=0,i=(t=this.children).length;e<i;e++)t[e].updateWorldMatrix(!1,!0)},toJSON:function(t){function e(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}function i(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(a.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){a.geometry=e(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes)if(o=o.shapes,Array.isArray(o))for(var s=0,l=o.length;s<l;s++)e(t.shapes,o[s]);else e(t.shapes,o)}if(void 0!==this.material)if(Array.isArray(this.material)){for(o=[],s=0,l=this.material.length;s<l;s++)o.push(e(t.materials,this.material[s]));a.material=o}else a.material=e(t.materials,this.material);if(0<this.children.length)for(a.children=[],s=0;s<this.children.length;s++)a.children.push(this.children[s].toJSON(t).object);if(n){n=i(t.geometries),s=i(t.materials),l=i(t.textures);var c=i(t.images);o=i(t.shapes),0<n.length&&(r.geometries=n),0<s.length&&(r.materials=s),0<l.length&&(r.textures=l),0<c.length&&(r.images=c),0<o.length&&(r.shapes=o)}return r.object=a,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}});var xa=0;S.prototype=Object.assign(Object.create(e.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(t){for(var e=(new a).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(t);for(i=0,n=this.faces.length;i<n;i++){(t=this.faces[i]).normal.applyMatrix3(e).normalize();for(var r=0,o=t.vertexNormals.length;r<o;r++)t.vertexNormals[r].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var t=new g;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new g;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new g;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new g;return function(e,i,n){return t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t=new g;return function(e,i,n){return t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new T;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,a,o){var s=void 0===c?[]:[n.colors[t].clone(),n.colors[e].clone(),n.colors[a].clone()];o=new w(t,e,a,void 0===l?[]:[(new r).fromArray(l,3*t),(new r).fromArray(l,3*e),(new r).fromArray(l,3*a)],s,o),n.faces.push(o),void 0!==h&&n.faceVertexUvs[0].push([(new i).fromArray(h,2*t),(new i).fromArray(h,2*e),(new i).fromArray(h,2*a)]),void 0!==u&&n.faceVertexUvs[1].push([(new i).fromArray(u,2*t),(new i).fromArray(u,2*e),(new i).fromArray(u,2*a)])}var n=this,a=null!==t.index?t.index.array:void 0,o=t.attributes,s=o.position.array,l=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,h=void 0!==o.uv?o.uv.array:void 0,u=void 0!==o.uv2?o.uv2.array:void 0;for(void 0!==u&&(this.faceVertexUvs[1]=[]),o=0;o<s.length;o+=3)n.vertices.push((new r).fromArray(s,o)),void 0!==c&&n.colors.push((new _).fromArray(c,o));var d=t.groups;if(0<d.length)for(o=0;o<d.length;o++){var p=(s=d[o]).start,f=p;for(p+=s.count;f<p;f+=3)void 0!==a?e(a[f],a[f+1],a[f+2],s.materialIndex):e(f,f+1,f+2,s.materialIndex)}else if(void 0!==a)for(o=0;o<a.length;o+=3)e(a[o],a[o+1],a[o+2]);else for(o=0;o<s.length/3;o+=3)e(o,o+1,o+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new r;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius;e=0===e?1:1/e;var i=new g;return i.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new r,e=new r,i=0,n=this.faces.length;i<n;i++){var a=this.faces[i],o=this.vertices[a.a],s=this.vertices[a.b];t.subVectors(this.vertices[a.c],s),e.subVectors(o,s),t.cross(e),t.normalize(),a.normal.copy(t)}},computeVertexNormals:function(t){var e;void 0===t&&(t=!0);var i=Array(this.vertices.length),n=0;for(e=this.vertices.length;n<e;n++)i[n]=new r;if(t){var a=new r,o=new r;for(t=0,n=this.faces.length;t<n;t++){e=this.faces[t];var s=this.vertices[e.a],l=this.vertices[e.b],c=this.vertices[e.c];a.subVectors(c,l),o.subVectors(s,l),a.cross(o),i[e.a].add(a),i[e.b].add(a),i[e.c].add(a)}}else for(this.computeFaceNormals(),t=0,n=this.faces.length;t<n;t++)i[(e=this.faces[t]).a].add(e.normal),i[e.b].add(e.normal),i[e.c].add(e.normal);for(n=0,e=this.vertices.length;n<e;n++)i[n].normalize();for(t=0,n=this.faces.length;t<n;t++)3===(s=(e=this.faces[t]).vertexNormals).length?(s[0].copy(i[e.a]),s[1].copy(i[e.b]),s[2].copy(i[e.c])):(s[0]=i[e.a].clone(),s[1]=i[e.b].clone(),s[2]=i[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t;this.computeFaceNormals();var e=0;for(t=this.faces.length;e<t;e++){var i=this.faces[e],n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i=0;for(e=this.faces.length;i<e;i++){var n=this.faces[i];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var a=0;for(t=n.vertexNormals.length;a<t;a++)n.__originalVertexNormals[a]?n.__originalVertexNormals[a].copy(n.vertexNormals[a]):n.__originalVertexNormals[a]=n.vertexNormals[a].clone()}var o=new S;for(o.faces=this.faces,a=0,t=this.morphTargets.length;a<t;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[],n=this.morphNormals[a].faceNormals;var s=this.morphNormals[a].vertexNormals;for(i=0,e=this.faces.length;i<e;i++){var l=new r,c={a:new r,b:new r,c:new r};n.push(l),s.push(c)}}for(s=this.morphNormals[a],o.vertices=this.morphTargets[a].vertices,o.computeFaceNormals(),o.computeVertexNormals(),i=0,e=this.faces.length;i<e;i++)n=this.faces[i],l=s.faceNormals[i],c=s.vertexNormals[i],l.copy(n.normal),c.a.copy(n.vertexNormals[0]),c.b.copy(n.vertexNormals[1]),c.c.copy(n.vertexNormals[2])}for(i=0,e=this.faces.length;i<e;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new d),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new p),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var n,r=this.vertices.length,o=this.vertices,s=t.vertices,l=this.faces,c=t.faces,h=this.faceVertexUvs[0],u=t.faceVertexUvs[0],d=this.colors,p=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new a).getNormalMatrix(e)),t=0;for(var f=s.length;t<f;t++){var m=s[t].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(t=0,f=p.length;t<f;t++)d.push(p[t].clone());for(t=0,f=c.length;t<f;t++){var g=(s=c[t]).vertexNormals;for(p=s.vertexColors,(d=new w(s.a+r,s.b+r,s.c+r)).normal.copy(s.normal),void 0!==n&&d.normal.applyMatrix3(n).normalize(),e=0,o=g.length;e<o;e++)m=g[e].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),d.vertexNormals.push(m);for(d.color.copy(s.color),e=0,o=p.length;e<o;e++)m=p[e],d.vertexColors.push(m.clone());d.materialIndex=s.materialIndex+i,l.push(d)}for(t=0,f=u.length;t<f;t++)if(n=[],void 0!==(i=u[t])){for(e=0,o=i.length;e<o;e++)n.push(i[e].clone());h.push(n)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e={},i=[],n=[],r=Math.pow(10,4),a=0;for(t=this.vertices.length;a<t;a++){var o=this.vertices[a];void 0===e[o=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r)]?(e[o]=a,i.push(this.vertices[a]),n[a]=i.length-1):n[a]=n[e[o]]}for(e=[],a=0,t=this.faces.length;a<t;a++)for((r=this.faces[a]).a=n[r.a],r.b=n[r.b],r.c=n[r.c],r=[r.a,r.b,r.c],o=0;3>o;o++)if(r[o]===r[(o+1)%3]){e.push(a);break}for(a=e.length-1;0<=a;a--)for(r=e[a],this.faces.splice(r,1),n=0,t=this.faceVertexUvs.length;n<t;n++)this.faceVertexUvs[n].splice(r,1);return a=this.vertices.length-i.length,this.vertices=i,a},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];this.vertices.push(new r(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var n,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(a&&a.length===e&&(n=[]),o&&o.length===e&&(r=[]),i=0;i<e;i++){var s=t[i]._id;n&&n.push(a[s]),r&&r.push(o[s])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]||(c[e]=l.length/3,l.push(t.x,t.y,t.z)),c[e]}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]||(u[e]=h.length,h.push(t.getHex())),u[e]}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]||(p[e]=d.length/2,d.push(t.x,t.y)),p[e]}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a,o=this.parameters;for(a in o)void 0!==o[a]&&(r[a]=o[a]);return r}for(o=[],a=0;a<this.vertices.length;a++){var s=this.vertices[a];o.push(s.x,s.y,s.z)}s=[];var l=[],c={},h=[],u={},d=[],p={};for(a=0;a<this.faces.length;a++){var f=this.faces[a],m=void 0!==this.faceVertexUvs[0][a],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,_=0<f.vertexColors.length,b=0;b=t(b,0,0),b=t(b,1,!0),b=t(b,2,!1),b=t(b,3,m),b=t(b,4,g),b=t(b,5,v),b=t(b,6,y),b=t(b,7,_),s.push(b),s.push(f.a,f.b,f.c),s.push(f.materialIndex),m&&(m=this.faceVertexUvs[0][a],s.push(n(m[0]),n(m[1]),n(m[2]))),g&&s.push(e(f.normal)),v&&(g=f.vertexNormals,s.push(e(g[0]),e(g[1]),e(g[2]))),y&&s.push(i(f.color)),_&&(f=f.vertexColors,s.push(i(f[0]),i(f[1]),i(f[2])))}return r.data={},r.data.vertices=o,r.data.normals=l,0<h.length&&(r.data.colors=h),0<d.length&&(r.data.uvs=[d]),r.data.faces=s,r},clone:function(){return(new S).copy(this)},copy:function(t){var e,i,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var r=t.vertices,a=0;for(e=r.length;a<e;a++)this.vertices.push(r[a].clone());for(a=0,e=(r=t.colors).length;a<e;a++)this.colors.push(r[a].clone());for(a=0,e=(r=t.faces).length;a<e;a++)this.faces.push(r[a].clone());for(a=0,e=t.faceVertexUvs.length;a<e;a++){var o=t.faceVertexUvs[a];for(void 0===this.faceVertexUvs[a]&&(this.faceVertexUvs[a]=[]),r=0,i=o.length;r<i;r++){var s=o[r],l=[],c=0;for(n=s.length;c<n;c++)l.push(s[c].clone());this.faceVertexUvs[a].push(l)}}for(a=0,e=(c=t.morphTargets).length;a<e;a++){if((n={}).name=c[a].name,void 0!==c[a].vertices)for(n.vertices=[],r=0,i=c[a].vertices.length;r<i;r++)n.vertices.push(c[a].vertices[r].clone());if(void 0!==c[a].normals)for(n.normals=[],r=0,i=c[a].normals.length;r<i;r++)n.normals.push(c[a].normals[r].clone());this.morphTargets.push(n)}for(a=0,e=(c=t.morphNormals).length;a<e;a++){if(n={},void 0!==c[a].vertexNormals)for(n.vertexNormals=[],r=0,i=c[a].vertexNormals.length;r<i;r++)o=c[a].vertexNormals[r],(s={}).a=o.a.clone(),s.b=o.b.clone(),s.c=o.c.clone(),n.vertexNormals.push(s);if(void 0!==c[a].faceNormals)for(n.faceNormals=[],r=0,i=c[a].faceNormals.length;r<i;r++)n.faceNormals.push(c[a].faceNormals[r].clone());this.morphNormals.push(n)}for(a=0,e=(r=t.skinWeights).length;a<e;a++)this.skinWeights.push(r[a].clone());for(a=0,e=(r=t.skinIndices).length;a<e;a++)this.skinIndices.push(r[a].clone());for(a=0,e=(r=t.lineDistances).length;a<e;a++)this.lineDistances.push(r[a]);return null!==(a=t.boundingBox)&&(this.boundingBox=a.clone()),null!==(a=t.boundingSphere)&&(this.boundingSphere=a.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(A.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(A.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new _),e[i++]=a.r,e[i++]=a.g,e[i++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new i),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,a=t.length;n<a;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new r),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new s),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z,e[i++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),C.prototype=Object.create(A.prototype),C.prototype.constructor=C,L.prototype=Object.create(A.prototype),L.prototype.constructor=L,D.prototype=Object.create(A.prototype),D.prototype.constructor=D,P.prototype=Object.create(A.prototype),P.prototype.constructor=P,R.prototype=Object.create(A.prototype),R.prototype.constructor=R,O.prototype=Object.create(A.prototype),O.prototype.constructor=O,I.prototype=Object.create(A.prototype),I.prototype.constructor=I,z.prototype=Object.create(A.prototype),z.prototype.constructor=z,N.prototype=Object.create(A.prototype),N.prototype.constructor=N,Object.assign(k.prototype,{computeGroups:function(t){var e=[],i=void 0;t=t.faces;for(var n=0;n<t.length;n++){var r=t[n];if(r.materialIndex!==i){i=r.materialIndex,void 0!==a&&(a.count=3*n-a.start,e.push(a));var a={start:3*n,materialIndex:i}}}void 0!==a&&(a.count=3*n-a.start,e.push(a)),this.groups=e},fromGeometry:function(t){var e=t.faces,n=t.vertices,r=t.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,l=s.length;if(0<l){for(var c=[],h=0;h<l;h++)c[h]={name:s[h].name,data:[]};this.morphTargets.position=c}var u=t.morphNormals,d=u.length;if(0<d){var p=[];for(h=0;h<d;h++)p[h]={name:u[h].name,data:[]};this.morphTargets.normal=p}var f=t.skinIndices,m=t.skinWeights,g=f.length===n.length,v=m.length===n.length;for(0<n.length&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),h=0;h<e.length;h++){var y=e[h];this.vertices.push(n[y.a],n[y.b],n[y.c]);var _=y.vertexNormals;for(3===_.length?this.normals.push(_[0],_[1],_[2]):(_=y.normal,this.normals.push(_,_,_)),3===(_=y.vertexColors).length?this.colors.push(_[0],_[1],_[2]):(_=y.color,this.colors.push(_,_,_)),!0===a&&(void 0!==(_=r[0][h])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new i,new i,new i))),!0===o&&(void 0!==(_=r[1][h])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new i,new i,new i))),_=0;_<l;_++){var b=s[_].vertices;c[_].data.push(b[y.a],b[y.b],b[y.c])}for(_=0;_<d;_++)b=u[_].vertexNormals[h],p[_].data.push(b.a,b.b,b.c);g&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var wa=1;B.prototype=Object.assign(Object.create(e.prototype),{constructor:B,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<F(t)?I:R)(t,1):this.index=t},addAttribute:function(t,e,i){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new A(e,i)))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;return void 0!==i&&((e=(new a).getNormalMatrix(t)).applyToBufferAttribute(i),i.needsUpdate=!0),void 0!==(i=this.attributes.tangent)&&((e=(new a).getNormalMatrix(t)).applyToBufferAttribute(i),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new g;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new g;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new g;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new g;return function(e,i,n){return t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t=new g;return function(e,i,n){return t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new T;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new r;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new z(3*e.vertices.length,3);var i=new z(3*e.colors.length,3);this.addAttribute("position",t.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new z(e.lineDistances.length,1),this.addAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new z(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}return!0===e.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(i=this.attributes.normal)&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new k).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var i in this.addAttribute("position",new A(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.addAttribute("normal",new A(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.addAttribute("color",new A(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.addAttribute("uv",new A(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.addAttribute("uv2",new A(e,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){e=[];for(var n=t.morphTargets[i],r=0,a=n.length;r<a;r++){var o=n[r],s=new z(3*o.data.length,3);s.name=o.name,e.push(s.copyVector3sArray(o.data))}this.morphAttributes[i]=e}return 0<t.skinIndices.length&&(i=new z(4*t.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(i=new z(4*t.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){var t=new d;return function(){null===this.boundingBox&&(this.boundingBox=new d);var e=this.attributes.position,i=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),i){e=0;for(var n=i.length;e<n;e++)t.setFromBufferAttribute(i[e]),this.boundingBox.expandByPoint(t.min),this.boundingBox.expandByPoint(t.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new d,e=new d,i=new r;return function(){null===this.boundingSphere&&(this.boundingSphere=new p);var n=this.attributes.position,r=this.morphAttributes.position;if(n){var a=this.boundingSphere.center;if(t.setFromBufferAttribute(n),r)for(var o=0,s=r.length;o<s;o++){var l=r[o];e.setFromBufferAttribute(l),t.expandByPoint(e.min),t.expandByPoint(e.max)}t.getCenter(a);var c=0;for(o=0,s=n.count;o<s;o++)i.fromBufferAttribute(n,o),c=Math.max(c,a.distanceToSquared(i));if(r)for(o=0,s=r.length;o<s;o++){n=0;for(var h=(l=r[o]).count;n<h;n++)i.fromBufferAttribute(l,n),c=Math.max(c,a.distanceToSquared(i))}this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new A(new Float32Array(i.length),3));else for(var n=e.normal.array,a=0,o=n.length;a<o;a++)n[a]=0;n=e.normal.array;var s=new r,l=new r,c=new r,h=new r,u=new r;if(t){var d=t.array;for(a=0,o=t.count;a<o;a+=3){t=3*d[a+0];var p=3*d[a+1],f=3*d[a+2];s.fromArray(i,t),l.fromArray(i,p),c.fromArray(i,f),h.subVectors(c,l),u.subVectors(s,l),h.cross(u),n[t]+=h.x,n[t+1]+=h.y,n[t+2]+=h.z,n[p]+=h.x,n[p+1]+=h.y,n[p+2]+=h.z,n[f]+=h.x,n[f+1]+=h.y,n[f+2]+=h.z}}else for(a=0,o=i.length;a<o;a+=9)s.fromArray(i,a),l.fromArray(i,a+3),c.fromArray(i,a+6),h.subVectors(c,l),u.subVectors(s,l),h.cross(u),n[a]=h.x,n[a+1]=h.y,n[a+2]=h.z,n[a+3]=h.x,n[a+4]=h.y,n[a+5]=h.z,n[a+6]=h.x,n[a+7]=h.y,n[a+8]=h.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i,n=this.attributes;for(i in n)if(void 0!==t.attributes[i]){var r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e;a=Math.min(o.length,r.length-s);for(var l=0;l<a;l++,s++)r[s]=o[l]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new r;return function(){for(var e=this.attributes.normal,i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.normalize(),e.setXYZ(i,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){var i=t.array;t=t.itemSize;for(var n,r=new i.constructor(e.length*t),a=0,o=0,s=e.length;o<s;o++){n=e[o]*t;for(var l=0;l<t;l++)r[a++]=i[n++]}return new A(r,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e,i=new B,n=this.index.array,r=this.attributes;for(e in r){var a=r[e];a=t(a,n),i.addAttribute(e,a)}var o=this.morphAttributes;for(e in o){var s=[],l=o[e];r=0;for(var c=l.length;r<c;r++)a=t(a=l[r],n),s.push(a);i.morphAttributes[e]=s}for(r=0,e=(n=this.groups).length;r<e;r++)a=n[r],i.addGroup(a.start,a.count,a.materialIndex);return i},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(c in e)void 0!==e[c]&&(t[c]=e[c]);return t}t.data={attributes:{}},null!==(e=this.index)&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});var i=this.attributes;for(c in i){var n=(e=i[c]).toJSON();""!==e.name&&(n.name=e.name),t.data.attributes[c]=n}i={};var r=!1;for(c in this.morphAttributes){for(var a=this.morphAttributes[c],o=[],s=0,l=a.length;s<l;s++)n=(e=a[s]).toJSON(),""!==e.name&&(n.name=e.name),o.push(n);0<o.length&&(i[c]=o,r=!0)}r&&(t.data.morphAttributes=i);var c=this.groups;return 0<c.length&&(t.data.groups=JSON.parse(JSON.stringify(c))),null!==(c=this.boundingSphere)&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new B).copy(this)},copy:function(t){var e;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var i=t.index;for(o in null!==i&&this.setIndex(i.clone()),i=t.attributes)this.addAttribute(o,i[o].clone());var n=t.morphAttributes;for(o in n){var r=[],a=n[o];for(i=0,e=a.length;i<e;i++)r.push(a[i].clone());this.morphAttributes[o]=r}var o=t.groups;for(i=0,e=o.length;i<e;i++)n=o[i],this.addGroup(n.start,n.count,n.materialIndex);return null!==(o=t.boundingBox)&&(this.boundingBox=o.clone()),null!==(o=t.boundingSphere)&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),U.prototype=Object.create(S.prototype),U.prototype.constructor=U,H.prototype=Object.create(B.prototype),H.prototype.constructor=H,G.prototype=Object.create(S.prototype),G.prototype.constructor=G,j.prototype=Object.create(B.prototype),j.prototype.constructor=j;var Ma=0;V.prototype=Object.assign(Object.create(e.prototype),{constructor:V,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0===i)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if("shading"===e)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else{var n=this[e];void 0===n?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i}}},toJSON:function(t){function e(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var i=void 0===t||"string"==typeof t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),i&&(i=e(t.textures),t=e(t.images),0<i.length&&(n.textures=i),0<t.length&&(n.images=t)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),W.prototype=Object.create(V.prototype),W.prototype.constructor=W,W.prototype.isShaderMaterial=!0,W.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=v(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},W.prototype.toJSON=function(t){var e=V.prototype.toJSON.call(this,t);for(var i in e.uniforms={},this.uniforms){var n=this.uniforms[i].value;e.uniforms[i]=n&&n.isTexture?{type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}for(var r in 0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,t={},this.extensions)!0===this.extensions[r]&&(t[r]=!0);return 0<Object.keys(t).length&&(e.extensions=t),e},Object.assign(q.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new r),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new r;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new r),e.subVectors(t,this.origin),0>(t=e.dot(this.direction))?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new r;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return 0>i?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new r,e=new r,i=new r;return function(n,r,a,o){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var s=.5*n.distanceTo(r),l=-this.direction.dot(e),c=i.dot(this.direction),h=-i.dot(e),u=i.lengthSq(),d=Math.abs(1-l*l);if(0<d){r=l*c-h;var p=s*d;0<=(n=l*h-c)?r>=-p?r<=p?l=(n*=s=1/d)*(n+l*(r*=s)+2*c)+r*(l*n+r+2*h)+u:(r=s,l=-(n=Math.max(0,-(l*r+c)))*n+r*(r+2*h)+u):(r=-s,l=-(n=Math.max(0,-(l*r+c)))*n+r*(r+2*h)+u):r<=-p?l=-(n=Math.max(0,-(-l*s+c)))*n+(r=0<n?-s:Math.min(Math.max(-s,-h),s))*(r+2*h)+u:r<=p?(n=0,l=(r=Math.min(Math.max(-s,-h),s))*(r+2*h)+u):l=-(n=Math.max(0,-(l*s+c)))*n+(r=0<n?s:Math.min(Math.max(-s,-h),s))*(r+2*h)+u}else r=0<l?-s:s,l=-(n=Math.max(0,-(l*r+c)))*n+r*(r+2*h)+u;return a&&a.copy(this.direction).multiplyScalar(n).add(this.origin),o&&o.copy(e).multiplyScalar(r).add(t),l}}(),intersectSphere:function(){var t=new r;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n;return r>(e=e.radius*e.radius)?null:(r=n-(e=Math.sqrt(e-r)),n+=e,0>r&&0>n?null:0>r?this.at(n,i):this.at(r,i))}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e},intersectBox:function(t,e){var i=1/this.direction.x,n=1/this.direction.y,r=1/this.direction.z,a=this.origin;if(0<=i){var o=(t.min.x-a.x)*i;i*=t.max.x-a.x}else o=(t.max.x-a.x)*i,i*=t.min.x-a.x;if(0<=n){var s=(t.min.y-a.y)*n;n*=t.max.y-a.y}else s=(t.max.y-a.y)*n,n*=t.min.y-a.y;return o>n||s>i?null:((s>o||o!=o)&&(o=s),(n<i||i!=i)&&(i=n),0<=r?(s=(t.min.z-a.z)*r,t=(t.max.z-a.z)*r):(s=(t.max.z-a.z)*r,t=(t.min.z-a.z)*r),o>t||s>i?null:((s>o||o!=o)&&(o=s),(t<i||i!=i)&&(i=t),0>i?null:this.at(0<=o?o:i,e)))},intersectsBox:function(){var t=new r;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new r,e=new r,i=new r,n=new r;return function(r,a,o,s,l){if(e.subVectors(a,r),i.subVectors(o,r),n.crossVectors(e,i),0<(a=this.direction.dot(n))){if(s)return null;s=1}else{if(!(0>a))return null;s=-1,a=-a}return t.subVectors(this.origin,r),0>(r=s*this.direction.dot(i.crossVectors(t,i)))||0>(o=s*this.direction.dot(e.cross(t)))||r+o>a||0>(r=-s*t.dot(n))?null:this.at(r/a,l)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(X,{getNormal:function(){var t=new r;return function(e,i,n,a){return void 0===a&&(console.warn("THREE.Triangle: .getNormal() target is now required"),a=new r),a.subVectors(n,i),t.subVectors(e,i),a.cross(t),0<(e=a.lengthSq())?a.multiplyScalar(1/Math.sqrt(e)):a.set(0,0,0)}}(),getBarycoord:function(){var t=new r,e=new r,i=new r;return function(n,a,o,s,l){t.subVectors(s,a),e.subVectors(o,a),i.subVectors(n,a),n=t.dot(t),a=t.dot(e),o=t.dot(i);var c=e.dot(e);s=e.dot(i);var h=n*c-a*a;return void 0===l&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),l=new r),0===h?l.set(-2,-1,-1):(c=(c*o-a*s)*(h=1/h),n=(n*s-a*o)*h,l.set(1-c-n,n,c))}}(),containsPoint:function(){var t=new r;return function(e,i,n,r){return X.getBarycoord(e,i,n,r,t),0<=t.x&&0<=t.y&&1>=t.x+t.y}}(),getUV:function(){var t=new r;return function(e,i,n,r,a,o,s,l){return this.getBarycoord(e,i,n,r,t),l.set(0,0),l.addScaledVector(a,t.x),l.addScaledVector(o,t.y),l.addScaledVector(s,t.z),l}}(),isFrontFacing:function(){var t=new r,e=new r;return function(i,n,r,a){return t.subVectors(r,n),e.subVectors(i,n),0>t.cross(e).dot(a)}}()}),Object.assign(X.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new r,e=new r;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new r),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return X.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new r),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return X.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,i,n,r){return X.getUV(t,this.a,this.b,this.c,e,i,n,r)},containsPoint:function(t){return X.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return X.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new r,e=new r,i=new r,n=new r,a=new r,o=new r;return function(s,l){void 0===l&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),l=new r);var c=this.a,h=this.b,u=this.c;t.subVectors(h,c),e.subVectors(u,c),n.subVectors(s,c);var d=t.dot(n),p=e.dot(n);if(0>=d&&0>=p)return l.copy(c);a.subVectors(s,h);var f=t.dot(a),m=e.dot(a);if(0<=f&&m<=f)return l.copy(h);var g=d*m-f*p;if(0>=g&&0<=d&&0>=f)return h=d/(d-f),l.copy(c).addScaledVector(t,h);o.subVectors(s,u),s=t.dot(o);var v=e.dot(o);return 0<=v&&s<=v?l.copy(u):0>=(d=s*p-d*v)&&0<=p&&0>=v?(g=p/(p-v),l.copy(c).addScaledVector(e,g)):0>=(p=f*v-s*m)&&0<=m-f&&0<=s-v?(i.subVectors(u,h),g=(m-f)/(m-f+(s-v)),l.copy(h).addScaledVector(i,g)):(h=d*(u=1/(p+d+g)),g*=u,l.copy(c).addScaledVector(t,h).addScaledVector(e,g))}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Y.prototype=Object.create(V.prototype),Y.prototype.constructor=Y,Y.prototype.isMeshBasicMaterial=!0,Y.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Z.prototype=Object.assign(Object.create(T.prototype),{constructor:Z,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return T.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var i=t[e[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=i.length;t<e;t++){var n=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(){function t(t,e,i,n,r,a,o,s){return null===(1===e.side?n.intersectTriangle(o,a,r,!0,s):n.intersectTriangle(r,a,o,2!==e.side,s))?null:(M.copy(s),M.applyMatrix4(t.matrixWorld),(e=i.ray.origin.distanceTo(M))<i.near||e>i.far?null:{distance:e,point:M.clone(),object:t})}function e(e,n,r,a,o,p,g,M,E,T){if(s.fromBufferAttribute(o,M),l.fromBufferAttribute(o,E),c.fromBufferAttribute(o,T),o=e.morphTargetInfluences,n.morphTargets&&p&&o){f.set(0,0,0),m.set(0,0,0),v.set(0,0,0);for(var S=0,A=p.length;S<A;S++){var C=o[S],L=p[S];0!==C&&(h.fromBufferAttribute(L,M),u.fromBufferAttribute(L,E),d.fromBufferAttribute(L,T),f.addScaledVector(h.sub(s),C),m.addScaledVector(u.sub(l),C),v.addScaledVector(d.sub(c),C))}s.add(f),l.add(m),c.add(v)}return(e=t(e,n,r,a,s,l,c,x))&&(g&&(y.fromBufferAttribute(g,M),_.fromBufferAttribute(g,E),b.fromBufferAttribute(g,T),e.uv=X.getUV(x,s,l,c,y,_,b,new i)),g=new w(M,E,T),X.getNormal(s,l,c,g.normal),e.face=g),e}var n=new g,a=new q,o=new p,s=new r,l=new r,c=new r,h=new r,u=new r,d=new r,f=new r,m=new r,v=new r,y=new i,_=new i,b=new i,x=new r,M=new r;return function(r,s){var l=this.geometry,c=this.material,h=this.matrixWorld;if(void 0!==c&&(null===l.boundingSphere&&l.computeBoundingSphere(),o.copy(l.boundingSphere),o.applyMatrix4(h),!1!==r.ray.intersectsSphere(o)&&(n.getInverse(h),a.copy(r.ray).applyMatrix4(n),null===l.boundingBox||!1!==a.intersectsBox(l.boundingBox))))if(l.isBufferGeometry){var u=l.index;h=l.attributes.position;var d,p,f=l.morphAttributes.position,m=l.attributes.uv,g=l.groups,v=l.drawRange;if(null!==u)if(Array.isArray(c)){var w=0;for(d=g.length;w<d;w++){var M=g[w],E=c[M.materialIndex],T=Math.max(M.start,v.start);for(p=l=Math.min(M.start+M.count,v.start+v.count);T<p;T+=3){l=u.getX(T);var S=u.getX(T+1),A=u.getX(T+2);(l=e(this,E,r,a,h,f,m,l,S,A))&&(l.faceIndex=Math.floor(T/3),l.face.materialIndex=M.materialIndex,s.push(l))}}}else for(w=T=Math.max(0,v.start),d=l=Math.min(u.count,v.start+v.count);w<d;w+=3)l=u.getX(w),S=u.getX(w+1),A=u.getX(w+2),(l=e(this,c,r,a,h,f,m,l,S,A))&&(l.faceIndex=Math.floor(w/3),s.push(l));else if(void 0!==h)if(Array.isArray(c))for(w=0,d=g.length;w<d;w++)for(E=c[(M=g[w]).materialIndex],T=Math.max(M.start,v.start),p=l=Math.min(M.start+M.count,v.start+v.count);T<p;T+=3)(l=e(this,E,r,a,h,f,m,l=T,S=T+1,A=T+2))&&(l.faceIndex=Math.floor(T/3),l.face.materialIndex=M.materialIndex,s.push(l));else for(w=T=Math.max(0,v.start),d=l=Math.min(h.count,v.start+v.count);w<d;w+=3)(l=e(this,c,r,a,h,f,m,l=w,S=w+1,A=w+2))&&(l.faceIndex=Math.floor(w/3),s.push(l))}else if(l.isGeometry)for(h=Array.isArray(c),f=l.vertices,m=l.faces,0<(l=l.faceVertexUvs[0]).length&&(u=l),d=0,M=m.length;d<M;d++)E=m[d],void 0!==(l=h?c[E.materialIndex]:c)&&(g=f[E.a],v=f[E.b],w=f[E.c],l=t(this,l,r,a,g,v,w,x))&&(u&&u[d]&&(T=u[d],y.copy(T[0]),_.copy(T[1]),b.copy(T[2]),l.uv=X.getUV(x,g,v,w,y,_,b,new i)),l.face=E,l.faceIndex=d,s.push(l))}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),st.prototype=Object.create(o.prototype),st.prototype.constructor=st,st.prototype.isCubeTexture=!0,Object.defineProperty(st.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),lt.prototype=Object.create(o.prototype),lt.prototype.constructor=lt,lt.prototype.isDataTexture2DArray=!0,ct.prototype=Object.create(o.prototype),ct.prototype.constructor=ct,ct.prototype.isDataTexture3D=!0;var Ea=new o,Ta=new lt,Sa=new ct,Aa=new st,Ca=[],La=[],Da=new Float32Array(16),Pa=new Float32Array(9),Ra=new Float32Array(4);jt.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),dt(e,t)},Vt.prototype.setValue=function(t,e,i){for(var n=this.seq,r=0,a=n.length;r!==a;++r){var o=n[r];o.setValue(t,e[o.id],i)}};var Oa=/([\w\d_]+)(\])?(\[|\.)?/g;Wt.prototype.setValue=function(t,e,i,n){void 0!==(e=this.map[e])&&e.setValue(t,i,n)},Wt.prototype.setOptional=function(t,e,i){void 0!==(e=e[i])&&this.setValue(t,i,e)},Wt.upload=function(t,e,i,n){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=i[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,n)}},Wt.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var a=t[n];a.id in e&&i.push(a)}return i};var Ia=0,za=0;pe.prototype=Object.create(V.prototype),pe.prototype.constructor=pe,pe.prototype.isMeshDepthMaterial=!0,pe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},fe.prototype=Object.create(V.prototype),fe.prototype.constructor=fe,fe.prototype.isMeshDistanceMaterial=!0,fe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},_e.prototype=Object.assign(Object.create(T.prototype),{constructor:_e,isGroup:!0}),be.prototype=Object.assign(Object.create(T.prototype),{constructor:be,isCamera:!0,copy:function(t,e){return T.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new r),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){T.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),xe.prototype=Object.assign(Object.create(be.prototype),{constructor:xe,isPerspectiveCamera:!0,copy:function(t,e){return be.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*ua.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*ua.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*ua.RAD2DEG*Math.atan(Math.tan(.5*ua.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*ua.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/o,e-=a.offsetY*i/s,n*=a.width/o,i*=a.height/s}0!==(a=this.filmOffset)&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=T.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),we.prototype=Object.assign(Object.create(xe.prototype),{constructor:we,isArrayCamera:!0});var Na,ka=new r,Fa=new r;Object.assign(Ae.prototype,{isFogExp2:!0,clone:function(){return new Ae(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Ce.prototype,{isFog:!0,clone:function(){return new Ce(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Le.prototype=Object.assign(Object.create(T.prototype),{constructor:Le,isScene:!0,copy:function(t,e){return T.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=T.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(De.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(De.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(Pe.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Pe.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}}),Re.prototype=Object.create(V.prototype),Re.prototype.constructor=Re,Re.prototype.isSpriteMaterial=!0,Re.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},Oe.prototype=Object.assign(Object.create(T.prototype),{constructor:Oe,isSprite:!0,raycast:function(){function t(t,e,i,n,r,a){o.subVectors(t,i).addScalar(.5).multiply(n),void 0!==r?(s.x=a*o.x-r*o.y,s.y=r*o.x+a*o.y):s.copy(o),t.copy(e),t.x+=s.x,t.y+=s.y,t.applyMatrix4(l)}var e=new r,n=new r,a=new r,o=new i,s=new i,l=new g,c=new r,h=new r,u=new r,d=new i,p=new i,f=new i;return function(r,o){n.setFromMatrixScale(this.matrixWorld),l.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),a.setFromMatrixPosition(this.modelViewMatrix);var s=this.material.rotation;if(0!==s)var m=Math.cos(s),g=Math.sin(s);s=this.center,t(c.set(-.5,-.5,0),a,s,n,g,m),t(h.set(.5,-.5,0),a,s,n,g,m),t(u.set(.5,.5,0),a,s,n,g,m),d.set(0,0),p.set(1,0),f.set(1,1);var v=r.ray.intersectTriangle(c,h,u,!1,e);null===v&&(t(h.set(-.5,.5,0),a,s,n,g,m),p.set(0,1),null===(v=r.ray.intersectTriangle(c,u,h,!1,e)))||(g=r.ray.origin.distanceTo(e))<r.near||g>r.far||o.push({distance:g,point:e.clone(),uv:X.getUV(e,c,h,u,d,p,f,new i),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return T.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Ie.prototype=Object.assign(Object.create(T.prototype),{constructor:Ie,isLOD:!0,copy:function(t){T.prototype.copy.call(this,t,!1);for(var e=0,i=(t=t.levels).length;e<i;e++){var n=t[e];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:function(){var t=new r;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,i)}}(),update:function(){var t=new r,e=new r;return function(i){var n=this.levels;if(1<n.length){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld),i=t.distanceTo(e),n[0].object.visible=!0;for(var r=1,a=n.length;r<a&&i>=n[r].distance;r++)n[r-1].object.visible=!1,n[r].object.visible=!0;for(;r<a;r++)n[r].object.visible=!1}}}(),toJSON:function(t){(t=T.prototype.toJSON.call(this,t)).object.levels=[];for(var e=this.levels,i=0,n=e.length;i<n;i++){var r=e[i];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}),ze.prototype=Object.assign(Object.create(Z.prototype),{constructor:ze,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new s,e=this.geometry.attributes.skinWeight,i=0,n=e.count;i<n;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);var r=1/t.manhattanLength();1/0!==r?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Z.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(Ne.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new g;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){var t,e,i=0;for(e=this.bones.length;i<e;i++)(t=this.bones[i])&&t.matrixWorld.getInverse(this.boneInverses[i]);for(i=0,e=this.bones.length;i<e;i++)(t=this.bones[i])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new g,e=new g;return function(){for(var i=this.bones,n=this.boneInverses,r=this.boneMatrices,a=this.boneTexture,o=0,s=i.length;o<s;o++)t.multiplyMatrices(i[o]?i[o].matrixWorld:e,n[o]),t.toArray(r,16*o);void 0!==a&&(a.needsUpdate=!0)}}(),clone:function(){return new Ne(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e];if(n.name===t)return n}}}),ke.prototype=Object.assign(Object.create(T.prototype),{constructor:ke,isBone:!0}),Fe.prototype=Object.create(V.prototype),Fe.prototype.constructor=Fe,Fe.prototype.isLineBasicMaterial=!0,Fe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Be.prototype=Object.assign(Object.create(T.prototype),{constructor:Be,isLine:!0,computeLineDistances:function(){var t=new r,e=new r;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[0],a=1,o=n.count;a<o;a++)t.fromBufferAttribute(n,a-1),e.fromBufferAttribute(n,a),r[a]=r[a-1],r[a]+=t.distanceTo(e);i.addAttribute("lineDistance",new z(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry)for(n=i.vertices,(r=i.lineDistances)[0]=0,a=1,o=n.length;a<o;a++)r[a]=r[a-1],r[a]+=n[a-1].distanceTo(n[a]);return this}}(),raycast:function(){var t=new g,e=new q,i=new p;return function(n,a){var o=n.linePrecision,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),i.copy(s.boundingSphere),i.applyMatrix4(l),i.radius+=o,!1!==n.ray.intersectsSphere(i)){t.getInverse(l),e.copy(n.ray).applyMatrix4(t),o/=(this.scale.x+this.scale.y+this.scale.z)/3,o*=o;var c=new r,h=new r;l=new r;var u=new r,d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,f=s.attributes.position.array;if(null!==p){s=0;for(var m=(p=p.array).length-1;s<m;s+=d){var g=p[s+1];c.fromArray(f,3*p[s]),h.fromArray(f,3*g),(g=e.distanceSqToSegment(c,h,u,l))>o||(u.applyMatrix4(this.matrixWorld),(g=n.ray.origin.distanceTo(u))<n.near||g>n.far||a.push({distance:g,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}else for(s=0,m=f.length/3-1;s<m;s+=d)c.fromArray(f,3*s),h.fromArray(f,3*s+3),(g=e.distanceSqToSegment(c,h,u,l))>o||(u.applyMatrix4(this.matrixWorld),(g=n.ray.origin.distanceTo(u))<n.near||g>n.far||a.push({distance:g,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}else if(s.isGeometry)for(h=(c=s.vertices).length,s=0;s<h-1;s+=d)(g=e.distanceSqToSegment(c[s],c[s+1],u,l))>o||(u.applyMatrix4(this.matrixWorld),(g=n.ray.origin.distanceTo(u))<n.near||g>n.far||a.push({distance:g,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ue.prototype=Object.assign(Object.create(Be.prototype),{constructor:Ue,isLineSegments:!0,computeLineDistances:function(){var t=new r,e=new r;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[],a=0,o=n.count;a<o;a+=2)t.fromBufferAttribute(n,a),e.fromBufferAttribute(n,a+1),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+t.distanceTo(e);i.addAttribute("lineDistance",new z(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry)for(n=i.vertices,r=i.lineDistances,a=0,o=n.length;a<o;a+=2)t.copy(n[a]),e.copy(n[a+1]),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+t.distanceTo(e);return this}}()}),He.prototype=Object.assign(Object.create(Be.prototype),{constructor:He,isLineLoop:!0}),Ge.prototype=Object.create(V.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isPointsMaterial=!0,Ge.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},je.prototype=Object.assign(Object.create(T.prototype),{constructor:je,isPoints:!0,raycast:function(){var t=new g,e=new q,i=new p;return function(n,a){function o(t,i){var r=e.distanceSqToPoint(t);r<u&&(e.closestPointToPoint(t,d),d.applyMatrix4(c),(t=n.ray.origin.distanceTo(d))<n.near||t>n.far||a.push({distance:t,distanceToRay:Math.sqrt(r),point:d.clone(),index:i,face:null,object:s}))}var s=this,l=this.geometry,c=this.matrixWorld,h=n.params.Points.threshold;if(null===l.boundingSphere&&l.computeBoundingSphere(),i.copy(l.boundingSphere),i.applyMatrix4(c),i.radius+=h,!1!==n.ray.intersectsSphere(i)){t.getInverse(c),e.copy(n.ray).applyMatrix4(t);var u=(h/=(this.scale.x+this.scale.y+this.scale.z)/3)*h;h=new r;var d=new r;if(l.isBufferGeometry){var p=l.index;if(l=l.attributes.position.array,null!==p){var f=p.array;p=0;for(var m=f.length;p<m;p++){var g=f[p];h.fromArray(l,3*g),o(h,g)}}else for(p=0,f=l.length/3;p<f;p++)h.fromArray(l,3*p),o(h,p)}else for(p=0,f=(h=l.vertices).length;p<f;p++)o(h[p],p)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ve.prototype=Object.assign(Object.create(o.prototype),{constructor:Ve,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),We.prototype=Object.create(o.prototype),We.prototype.constructor=We,We.prototype.isCompressedTexture=!0,qe.prototype=Object.create(o.prototype),qe.prototype.constructor=qe,qe.prototype.isCanvasTexture=!0,Xe.prototype=Object.create(o.prototype),Xe.prototype.constructor=Xe,Xe.prototype.isDepthTexture=!0,Ye.prototype=Object.create(B.prototype),Ye.prototype.constructor=Ye,Ze.prototype=Object.create(S.prototype),Ze.prototype.constructor=Ze,Je.prototype=Object.create(B.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(S.prototype),Qe.prototype.constructor=Qe,Ke.prototype=Object.create(B.prototype),Ke.prototype.constructor=Ke,$e.prototype=Object.create(S.prototype),$e.prototype.constructor=$e,ti.prototype=Object.create(Ke.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(S.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(Ke.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(S.prototype),ni.prototype.constructor=ni,ri.prototype=Object.create(Ke.prototype),ri.prototype.constructor=ri,ai.prototype=Object.create(S.prototype),ai.prototype.constructor=ai,oi.prototype=Object.create(Ke.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(S.prototype),si.prototype.constructor=si,li.prototype=Object.create(B.prototype),li.prototype.constructor=li,li.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},ci.prototype=Object.create(S.prototype),ci.prototype.constructor=ci,hi.prototype=Object.create(B.prototype),hi.prototype.constructor=hi,ui.prototype=Object.create(S.prototype),ui.prototype.constructor=ui,di.prototype=Object.create(B.prototype),di.prototype.constructor=di;var Ba=function(t,e,i){i=i||2;var n,r=e&&e.length,a=r?e[0]*i:t.length,o=pi(t,0,a,i,!0),s=[];if(!o)return s;if(r){var l,c=i;r=[];var h=0;for(l=e.length;h<l;h++){var u=e[h]*c;(u=pi(t,u,h<l-1?e[h+1]*c:t.length,c,!1))===u.next&&(u.steiner=!0),r.push(yi(u))}for(r.sort(mi),h=0;h<r.length;h++)(c=gi(e=r[h],c=o))&&fi(e=Ei(c,e),e.next),o=fi(o,o.next)}if(t.length>80*i){var d=n=t[0],p=r=t[1];for(c=i;c<a;c+=i)(h=t[c])<d&&(d=h),(e=t[c+1])<p&&(p=e),h>n&&(n=h),e>r&&(r=e);n=0!==(n=Math.max(n-d,r-p))?1/n:0}return function t(e,i,n,r,a,o,s){if(e){if(!s&&o){var l=e,c=l;do{null===c.z&&(c.z=vi(c.x,c.y,r,a,o)),c.prevZ=c.prev,c=c.nextZ=c.next}while(c!==l);c.prevZ.nextZ=null,c.prevZ=null,l=c;var h,u,d,p,f=1;do{c=l;var m=l=null;for(u=0;c;){u++;var g=c;for(h=d=0;h<f&&(d++,g=g.nextZ);h++);for(p=f;0<d||0<p&&g;)0!==d&&(0===p||!g||c.z<=g.z)?(h=c,c=c.nextZ,d--):(h=g,g=g.nextZ,p--),m?m.nextZ=h:l=h,h.prevZ=m,m=h;c=g}m.nextZ=null,f*=2}while(1<u)}for(l=e;e.prev!==e.next;){if(c=e.prev,g=e.next,o)t:{p=r;var v=a,y=o;if(0<=bi(u=(m=e).prev,d=m,f=m.next))m=!1;else{var _=u.x>d.x?u.x>f.x?u.x:f.x:d.x>f.x?d.x:f.x,b=u.y>d.y?u.y>f.y?u.y:f.y:d.y>f.y?d.y:f.y;for(h=vi(u.x<d.x?u.x<f.x?u.x:f.x:d.x<f.x?d.x:f.x,u.y<d.y?u.y<f.y?u.y:f.y:d.y<f.y?d.y:f.y,p,v,y),p=vi(_,b,p,v,y),v=m.nextZ;v&&v.z<=p;){if(v!==m.prev&&v!==m.next&&_i(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=bi(v.prev,v,v.next)){m=!1;break t}v=v.nextZ}for(v=m.prevZ;v&&v.z>=h;){if(v!==m.prev&&v!==m.next&&_i(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=bi(v.prev,v,v.next)){m=!1;break t}v=v.prevZ}m=!0}}else t:if(m=e,u=m.prev,d=m,f=m.next,0<=bi(u,d,f))m=!1;else{for(h=m.next.next;h!==m.prev;){if(_i(u.x,u.y,d.x,d.y,f.x,f.y,h.x,h.y)&&0<=bi(h.prev,h,h.next)){m=!1;break t}h=h.next}m=!0}if(m)i.push(c.i/n),i.push(e.i/n),i.push(g.i/n),Si(e),l=e=g.next;else if((e=g)===l){if(s){if(1===s){s=i,l=n,c=e;do{!xi(g=c.prev,m=c.next.next)&&wi(g,c,c.next,m)&&Mi(g,m)&&Mi(m,g)&&(s.push(g.i/l),s.push(c.i/l),s.push(m.i/l),Si(c),Si(c.next),c=e=m),c=c.next}while(c!==e);t(e=c,i,n,r,a,o,2)}else if(2===s)t:{s=e;do{for(l=s.next.next;l!==s.prev;){if(c=s.i!==l.i){if(g=l,m=(c=s).next.i!==g.i&&c.prev.i!==g.i){e:{m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==g.i&&m.next.i!==g.i&&wi(m,m.next,c,g)){m=!0;break e}m=m.next}while(m!==c);m=!1}m=!m}if(m=m&&Mi(c,g)&&Mi(g,c)){m=c,u=!1,d=(c.x+g.x)/2,g=(c.y+g.y)/2;do{m.y>g!=m.next.y>g&&m.next.y!==m.y&&d<(m.next.x-m.x)*(g-m.y)/(m.next.y-m.y)+m.x&&(u=!u),m=m.next}while(m!==c);m=u}c=m}if(c){e=Ei(s,l),s=fi(s,s.next),e=fi(e,e.next),t(s,i,n,r,a,o),t(e,i,n,r,a,o);break t}l=l.next}s=s.next}while(s!==e)}}else t(fi(e),i,n,r,a,o,1);break}}}}(o,s,i,d,p,n),s},Ua={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},isClockWise:function(t){return 0>Ua.area(t)},triangulateShape:function(t,e){var i=[],n=[],r=[];Ci(t),Li(i,t);var a=t.length;for(e.forEach(Ci),t=0;t<e.length;t++)n.push(a),a+=e[t].length,Li(i,e[t]);for(e=Ba(i,n),t=0;t<e.length;t+=3)r.push(e.slice(t,t+3));return r}};Di.prototype=Object.create(S.prototype),Di.prototype.constructor=Di,Di.prototype.toJSON=function(){var t=S.prototype.toJSON.call(this);return Ri(this.parameters.shapes,this.parameters.options,t)},Pi.prototype=Object.create(B.prototype),Pi.prototype.constructor=Pi,Pi.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return Ri(this.parameters.shapes,this.parameters.options,t)};var Ha={generateTopUV:function(t,e,n,r,a){t=e[3*r],r=e[3*r+1];var o=e[3*a];return a=e[3*a+1],[new i(e[3*n],e[3*n+1]),new i(t,r),new i(o,a)]},generateSideWallUV:function(t,e,n,r,a,o){t=e[3*n];var s=e[3*n+1];n=e[3*n+2];var l=e[3*r],c=e[3*r+1];r=e[3*r+2];var h=e[3*a],u=e[3*a+1];a=e[3*a+2];var d=e[3*o],p=e[3*o+1];return e=e[3*o+2],.01>Math.abs(s-c)?[new i(t,1-n),new i(l,1-r),new i(h,1-a),new i(d,1-e)]:[new i(s,1-n),new i(c,1-r),new i(u,1-a),new i(p,1-e)]}};Oi.prototype=Object.create(S.prototype),Oi.prototype.constructor=Oi,Ii.prototype=Object.create(Pi.prototype),Ii.prototype.constructor=Ii,zi.prototype=Object.create(S.prototype),zi.prototype.constructor=zi,Ni.prototype=Object.create(B.prototype),Ni.prototype.constructor=Ni,ki.prototype=Object.create(S.prototype),ki.prototype.constructor=ki,Fi.prototype=Object.create(B.prototype),Fi.prototype.constructor=Fi,Bi.prototype=Object.create(S.prototype),Bi.prototype.constructor=Bi,Ui.prototype=Object.create(B.prototype),Ui.prototype.constructor=Ui,Hi.prototype=Object.create(S.prototype),Hi.prototype.constructor=Hi,Hi.prototype.toJSON=function(){var t=S.prototype.toJSON.call(this);return ji(this.parameters.shapes,t)},Gi.prototype=Object.create(B.prototype),Gi.prototype.constructor=Gi,Gi.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return ji(this.parameters.shapes,t)},Vi.prototype=Object.create(B.prototype),Vi.prototype.constructor=Vi,Wi.prototype=Object.create(S.prototype),Wi.prototype.constructor=Wi,qi.prototype=Object.create(B.prototype),qi.prototype.constructor=qi,Xi.prototype=Object.create(Wi.prototype),Xi.prototype.constructor=Xi,Yi.prototype=Object.create(qi.prototype),Yi.prototype.constructor=Yi,Zi.prototype=Object.create(S.prototype),Zi.prototype.constructor=Zi,Ji.prototype=Object.create(B.prototype),Ji.prototype.constructor=Ji;var Ga=Object.freeze({WireframeGeometry:Ye,ParametricGeometry:Ze,ParametricBufferGeometry:Je,TetrahedronGeometry:$e,TetrahedronBufferGeometry:ti,OctahedronGeometry:ei,OctahedronBufferGeometry:ii,IcosahedronGeometry:ni,IcosahedronBufferGeometry:ri,DodecahedronGeometry:ai,DodecahedronBufferGeometry:oi,PolyhedronGeometry:Qe,PolyhedronBufferGeometry:Ke,TubeGeometry:si,TubeBufferGeometry:li,TorusKnotGeometry:ci,TorusKnotBufferGeometry:hi,TorusGeometry:ui,TorusBufferGeometry:di,TextGeometry:Oi,TextBufferGeometry:Ii,SphereGeometry:zi,SphereBufferGeometry:Ni,RingGeometry:ki,RingBufferGeometry:Fi,PlaneGeometry:G,PlaneBufferGeometry:j,LatheGeometry:Bi,LatheBufferGeometry:Ui,ShapeGeometry:Hi,ShapeBufferGeometry:Gi,ExtrudeGeometry:Di,ExtrudeBufferGeometry:Pi,EdgesGeometry:Vi,ConeGeometry:Xi,ConeBufferGeometry:Yi,CylinderGeometry:Wi,CylinderBufferGeometry:qi,CircleGeometry:Zi,CircleBufferGeometry:Ji,BoxGeometry:U,BoxBufferGeometry:H});Qi.prototype=Object.create(V.prototype),Qi.prototype.constructor=Qi,Qi.prototype.isShadowMaterial=!0,Qi.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this},Ki.prototype=Object.create(W.prototype),Ki.prototype.constructor=Ki,Ki.prototype.isRawShaderMaterial=!0,$i.prototype=Object.create(V.prototype),$i.prototype.constructor=$i,$i.prototype.isMeshStandardMaterial=!0,$i.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},tn.prototype=Object.create($i.prototype),tn.prototype.constructor=tn,tn.prototype.isMeshPhysicalMaterial=!0,tn.prototype.copy=function(t){return $i.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},en.prototype=Object.create(V.prototype),en.prototype.constructor=en,en.prototype.isMeshPhongMaterial=!0,en.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},nn.prototype=Object.create(en.prototype),nn.prototype.constructor=nn,nn.prototype.isMeshToonMaterial=!0,nn.prototype.copy=function(t){return en.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},rn.prototype=Object.create(V.prototype),rn.prototype.constructor=rn,rn.prototype.isMeshNormalMaterial=!0,rn.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},an.prototype=Object.create(V.prototype),an.prototype.constructor=an,an.prototype.isMeshLambertMaterial=!0,an.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},on.prototype=Object.create(V.prototype),on.prototype.constructor=on,on.prototype.isMeshMatcapMaterial=!0,on.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},sn.prototype=Object.create(Fe.prototype),sn.prototype.constructor=sn,sn.prototype.isLineDashedMaterial=!0,sn.prototype.copy=function(t){return Fe.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var ja=Object.freeze({ShadowMaterial:Qi,SpriteMaterial:Re,RawShaderMaterial:Ki,ShaderMaterial:W,PointsMaterial:Ge,MeshPhysicalMaterial:tn,MeshStandardMaterial:$i,MeshPhongMaterial:en,MeshToonMaterial:nn,MeshNormalMaterial:rn,MeshLambertMaterial:an,MeshDepthMaterial:pe,MeshDistanceMaterial:fe,MeshBasicMaterial:Y,MeshMatcapMaterial:on,LineDashedMaterial:sn,LineBasicMaterial:Fe,Material:V}),Va={arraySlice:function(t,e,i){return Va.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,i=Array(e),n=0;n!==e;++n)i[n]=n;return i.sort((function(e,i){return t[e]-t[i]})),i},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),a=0,o=0;o!==n;++a)for(var s=i[a]*e,l=0;l!==e;++l)r[o++]=t[s+l];return r},flattenJSON:function(t,e,i,n){for(var r=1,a=t[0];void 0!==a&&void 0===a[n];)a=t[r++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[n])&&(e.push(a.time),i.push.apply(i,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[n])&&(e.push(a.time),o.toArray(i,i.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(o=a[n])&&(e.push(a.time),i.push(o)),a=t[r++]}while(void 0!==a)}}};Object.assign(ln.prototype,{evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{i:{n:if(!(t<n)){for(var a=i+2;;){if(void 0===n){if(t<r)break n;return this._cachedIndex=i=e.length,this.afterEnd_(i-1,t,r)}if(i===a)break;if(r=n,t<(n=e[++i]))break e}n=e.length;break i}if(t>=r)break t;for(t<(a=e[1])&&(i=2,r=a),a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===a)break;if(n=r,t>=(r=e[--i-1]))break e}n=i,i=0}for(;i<n;)t<e[r=i+n>>>1]?n=r:i=r+1;if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return this._cachedIndex=i=e.length,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize;t*=n;for(var r=0;r!==n;++r)e[r]=i[t+r];return e},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ln.prototype,{beforeStart_:ln.prototype.copySampleValue_,afterEnd_:ln.prototype.copySampleValue_}),cn.prototype=Object.assign(Object.create(ln.prototype),{constructor:cn,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,a=t+1,o=n[r],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-i;break;case 2402:o=e+n[r=n.length-2]-n[r+1];break;default:r=t,o=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*i-e;break;case 2402:a=1,s=i+n[1]-n[0];break;default:a=t-1,s=e}t=.5*(i-e),n=this.valueSize,this._weightPrev=t/(e-o),this._weightNext=t/(s-i),this._offsetPrev=r*n,this._offsetNext=a*n},interpolate_:function(t,e,i,n){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,u=this._weightNext,d=(i-e)/(n-e);for(e=-h*(n=(i=d*d)*d)+2*h*i-h*d,h=(1+h)*n+(-1.5-2*h)*i+(-.5+h)*d+1,d=(-1-u)*n+(1.5+u)*i+.5*d,u=u*n-u*i,i=0;i!==o;++i)r[i]=e*a[l+i]+h*a[s+i]+d*a[t+i]+u*a[c+i];return r}}),hn.prototype=Object.assign(Object.create(ln.prototype),{constructor:hn,interpolate_:function(t,e,i,n){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o;for(i=1-(e=(i-e)/(n-e)),n=0;n!==o;++n)r[n]=a[s+n]*i+a[t+n]*e;return r}}),un.prototype=Object.assign(Object.create(ln.prototype),{constructor:un,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(dn,{toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{e={name:t.name,times:Va.convertArray(t.times,Array),values:Va.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(dn.prototype,{constructor:dn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new un(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new hn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new cn(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,a=n-1;r!==n&&i[r]<t;)++r;for(;-1!==a&&i[a]>e;)--a;return++a,0===r&&a===n||(r>=a&&(r=(a=Math.max(a,1))-1),t=this.getValueSize(),this.times=Va.arraySlice(i,r,a),this.values=Va.arraySlice(this.values,r*t,a*t)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var i=this.times;e=this.values;var n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var r=null,a=0;a!==n;a++){var o=i[a];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),t=!1;break}if(null!==r&&r>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,r),t=!1;break}r=o}if(void 0!==e&&Va.isTypedArray(e))for(a=0,i=e.length;a!==i;++a)if(n=e[a],isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,n),t=!1;break}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,a=t.length-1,o=1;o<a;++o){var s=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(n)s=!0;else{var c=o*i,h=c-i,u=c+i;for(l=0;l!==i;++l){var d=e[c+l];if(d!==e[h+l]||d!==e[u+l]){s=!0;break}}}if(s){if(o!==r)for(t[r]=t[o],s=o*i,c=r*i,l=0;l!==i;++l)e[c+l]=e[s+l];++r}}if(0<a){for(t[r]=t[a],s=a*i,c=r*i,l=0;l!==i;++l)e[c+l]=e[s+l];++r}return r!==t.length&&(this.times=Va.arraySlice(t,0,r),this.values=Va.arraySlice(e,0,r*i)),this},clone:function(){var t=Va.arraySlice(this.times,0),e=Va.arraySlice(this.values,0);return(t=new this.constructor(this.name,t,e)).createInterpolant=this.createInterpolant,t}}),pn.prototype=Object.assign(Object.create(dn.prototype),{constructor:pn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fn.prototype=Object.assign(Object.create(dn.prototype),{constructor:fn,ValueTypeName:"color"}),mn.prototype=Object.assign(Object.create(dn.prototype),{constructor:mn,ValueTypeName:"number"}),gn.prototype=Object.assign(Object.create(ln.prototype),{constructor:gn,interpolate_:function(t,e,i,r){var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize;for(e=(i-e)/(r-e),i=(t*=s)+s;t!==i;t+=4)n.slerpFlat(a,0,o,t-s,o,t,e);return a}}),vn.prototype=Object.assign(Object.create(dn.prototype),{constructor:vn,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new gn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),yn.prototype=Object.assign(Object.create(dn.prototype),{constructor:yn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),_n.prototype=Object.assign(Object.create(dn.prototype),{constructor:_n,ValueTypeName:"vector"}),Object.assign(bn,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,a=i.length;r!==a;++r)e.push(xn(i[r]).scale(n));return new bn(t.name,t.duration,e)},toJSON:function(t){var e=[],i=t.tracks;t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid};for(var n=0,r=i.length;n!==r;++n)e.push(dn.toJSON(i[n]));return t},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var c=Va.getKeyframeOrder(s);s=Va.sortedArray(s,1,c),l=Va.sortedArray(l,1,c),n||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new mn(".morphTargetInfluences["+e[o].name+"]",s,l).scale(1/i))}return new bn(t,-1,a)},findByName:function(t,e){var i=t;for(Array.isArray(t)||(i=t.geometry&&t.geometry.animations||t.animations),t=0;t<i.length;t++)if(i[t].name===e)return i[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],l=s.name.match(r);if(l&&1<l.length){var c=l[1];(l=n[c])||(n[c]=l=[]),l.push(s)}}for(c in t=[],n)t.push(bn.CreateFromMorphTargetSequence(c,n[c],e,i));return t},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var i=function(t,e,i,n,r){if(0!==i.length){var a=[],o=[];Va.flattenJSON(i,a,o,n),0!==a.length&&r.push(new t(e,a,o))}},n=[],r=t.name||"default",a=t.length||-1,o=t.fps||30;t=t.hierarchy||[];for(var s=0;s<t.length;s++){var l=t[s].keys;if(l&&0!==l.length)if(l[0].morphTargets){a={};for(var c=0;c<l.length;c++)if(l[c].morphTargets)for(var h=0;h<l[c].morphTargets.length;h++)a[l[c].morphTargets[h]]=-1;for(var u in a){var d=[],p=[];for(h=0;h!==l[c].morphTargets.length;++h){var f=l[c];d.push(f.time),p.push(f.morphTarget===u?1:0)}n.push(new mn(".morphTargetInfluence["+u+"]",d,p))}a=a.length*(o||1)}else i(_n,(c=".bones["+e[s].name+"]")+".position",l,"pos",n),i(vn,c+".quaternion",l,"rot",n),i(_n,c+".scale",l,"scl",n)}return 0===n.length?null:new bn(r,a,n)}}),Object.assign(bn.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e){var n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new bn(this.name,this.duration,t)}});var Wa={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},qa=new wn,Xa={};Object.assign(Mn.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Wa.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;if(void 0===Xa[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){i=o[1];var s=!!o[2];o=o[3],o=decodeURIComponent(o),s&&(o=atob(o));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":var c=new Uint8Array(o.length);for(s=0;s<o.length;s++)c[s]=o.charCodeAt(s);var h="blob"===l?new Blob([c.buffer],{type:i}):c.buffer;break;case"document":h=(new DOMParser).parseFromString(o,i);break;case"json":h=JSON.parse(o);break;default:h=o}setTimeout((function(){e&&e(h),r.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}),0)}}else{Xa[t]=[],Xa[t].push({onLoad:e,onProgress:i,onError:n});var u=new XMLHttpRequest;for(s in u.open("GET",t,!0),u.addEventListener("load",(function(e){var i=this.response;Wa.add(t,i);var n=Xa[t];if(delete Xa[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=n.length;a<o;a++){var s=n[a];s.onLoad&&s.onLoad(i)}}else{for(a=0,o=n.length;a<o;a++)(s=n[a]).onError&&s.onError(e);r.manager.itemError(t)}r.manager.itemEnd(t)}),!1),u.addEventListener("progress",(function(e){for(var i=Xa[t],n=0,r=i.length;n<r;n++){var a=i[n];a.onProgress&&a.onProgress(e)}}),!1),u.addEventListener("error",(function(e){var i=Xa[t];delete Xa[t];for(var n=0,a=i.length;n<a;n++){var o=i[n];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),u.addEventListener("abort",(function(e){var i=Xa[t];delete Xa[t];for(var n=0,a=i.length;n<a;n++){var o=i[n];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(u.responseType=this.responseType),void 0!==this.withCredentials&&(u.withCredentials=this.withCredentials),u.overrideMimeType&&u.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)u.setRequestHeader(s,this.requestHeader[s]);u.send(null)}return r.manager.itemStart(t),u}Xa[t].push({onLoad:e,onProgress:i,onError:n})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(En.prototype,{load:function(t,e,i,n){var r=this,a=new Mn(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),i,n)},parse:function(t){for(var e=[],i=0;i<t.length;i++){var n=bn.parse(t[i]);e.push(n)}return e},setPath:function(t){return this.path=t,this}}),Object.assign(Tn.prototype,{load:function(t,e,i,n){function r(r){l.load(t[r],(function(t){t=a._parser(t,!0),o[r]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(c+=1)&&(1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s))}),i,n)}var a=this,o=[],s=new We;s.image=o;var l=new Mn(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,h=0,u=t.length;h<u;++h)r(h);else l.load(t,(function(t){if((t=a._parser(t,!0)).isCubemap)for(var i=t.mipmaps.length/t.mipmapCount,n=0;n<i;n++){o[n]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)o[n].mipmaps.push(t.mipmaps[n*t.mipmapCount+r]),o[n].format=t.format,o[n].width=t.width,o[n].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s)}),i,n);return s},setPath:function(t){return this.path=t,this}}),Object.assign(Sn.prototype,{load:function(t,e,i,n){var r=this,a=new u,o=new Mn(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,(function(t){(t=r._parser(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:1001,a.wrapT=void 0!==t.wrapT?t.wrapT:1001,a.magFilter=void 0!==t.magFilter?t.magFilter:1006,a.minFilter=void 0!==t.minFilter?t.minFilter:1008,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps),1===t.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,e&&e(a,t))}),i,n),a},setPath:function(t){return this.path=t,this}}),Object.assign(An.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){function r(){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),Wa.add(t,this),e&&e(this),o.manager.itemEnd(t)}function a(e){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),n&&n(e),o.manager.itemError(t),o.manager.itemEnd(t)}void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=Wa.get(t);if(void 0!==s)return o.manager.itemStart(t),setTimeout((function(){e&&e(s),o.manager.itemEnd(t)}),0),s;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");return l.addEventListener("load",r,!1),l.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin),o.manager.itemStart(t),l.src=t,l},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Cn.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){function r(i){o.load(t[i],(function(t){a.images[i]=t,6===++s&&(a.needsUpdate=!0,e&&e(a))}),void 0,n)}var a=new st,o=new An(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var s=0;for(i=0;i<t.length;++i)r(i);return a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ln.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){var r=new o,a=new An(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(i){r.image=i,i=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data:image\/jpeg/),r.format=i?1022:1023,r.needsUpdate=!0,void 0!==e&&e(r)}),i,n),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Dn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],n=this.getPoint(0),r=0;for(i.push(0),e=1;e<=t;e++){var a=this.getPoint(e/t);r+=a.distanceTo(n),i.push(r),n=a}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i=this.getLengths(),n=i.length;e=e||t*i[n-1];for(var r,a=0,o=n-1;a<=o;)if(0>(r=i[t=Math.floor(a+(o-a)/2)]-e))a=t+1;else{if(!(0<r)){o=t;break}o=t-1}return i[t=o]===e?t/(n-1):(t+(e-(a=i[t]))/(i[t+1]-a))/(n-1)},getTangent:function(t){var e=t-1e-4;return 0>e&&(e=0),1<(t+=1e-4)&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){var i,n=new r,a=[],o=[],s=[],l=new r,c=new g;for(i=0;i<=t;i++){var h=i/t;a[i]=this.getTangentAt(h),a[i].normalize()}o[0]=new r,s[0]=new r,i=Number.MAX_VALUE,h=Math.abs(a[0].x);var u=Math.abs(a[0].y),d=Math.abs(a[0].z);for(h<=i&&(i=h,n.set(1,0,0)),u<=i&&(i=u,n.set(0,1,0)),d<=i&&n.set(0,0,1),l.crossVectors(a[0],n).normalize(),o[0].crossVectors(a[0],l),s[0].crossVectors(a[0],o[0]),i=1;i<=t;i++)o[i]=o[i-1].clone(),s[i]=s[i-1].clone(),l.crossVectors(a[i-1],a[i]),l.length()>Number.EPSILON&&(l.normalize(),n=Math.acos(ua.clamp(a[i-1].dot(a[i]),-1,1)),o[i].applyMatrix4(c.makeRotationAxis(l,n))),s[i].crossVectors(a[i],o[i]);if(!0===e)for(n=Math.acos(ua.clamp(o[0].dot(o[t]),-1,1)),n/=t,0<a[0].dot(l.crossVectors(o[0],o[t]))&&(n=-n),i=1;i<=t;i++)o[i].applyMatrix4(c.makeRotationAxis(a[i],n*i)),s[i].crossVectors(a[i],o[i]);return{tangents:a,normals:o,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Pn.prototype=Object.create(Dn.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isEllipseCurve=!0,Pn.prototype.getPoint=function(t,e){e=e||new i;for(var n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;0>r;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=a?0:n),!0!==this.aClockwise||a||(r=r===n?-n:r-n),n=this.aStartAngle+t*r,t=this.aX+this.xRadius*Math.cos(n);var o=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(n=Math.cos(this.aRotation),r=Math.sin(this.aRotation),t=(a=t-this.aX)*n-(o-=this.aY)*r+this.aX,o=a*r+o*n+this.aY),e.set(t,o)},Pn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Pn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Pn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Rn.prototype=Object.create(Pn.prototype),Rn.prototype.constructor=Rn,Rn.prototype.isArcCurve=!0;var Ya=new r,Za=new On,Ja=new On,Qa=new On;In.prototype=Object.create(Dn.prototype),In.prototype.constructor=In,In.prototype.isCatmullRomCurve3=!0,In.prototype.getPoint=function(t,e){e=e||new r;var i=this.points,n=i.length;t*=n-(this.closed?0:1);var a=Math.floor(t);if(t-=a,this.closed?a+=0<a?0:(Math.floor(Math.abs(a)/n)+1)*n:0===t&&a===n-1&&(a=n-2,t=1),this.closed||0<a)var o=i[(a-1)%n];else Ya.subVectors(i[0],i[1]).add(i[0]),o=Ya;var s=i[a%n],l=i[(a+1)%n];if(this.closed||a+2<n?i=i[(a+2)%n]:(Ya.subVectors(i[n-1],i[n-2]).add(i[n-1]),i=Ya),"centripetal"===this.curveType||"chordal"===this.curveType){var c="chordal"===this.curveType?.5:.25;n=Math.pow(o.distanceToSquared(s),c),1e-4>(a=Math.pow(s.distanceToSquared(l),c))&&(a=1),1e-4>n&&(n=a),1e-4>(c=Math.pow(l.distanceToSquared(i),c))&&(c=a),Za.initNonuniformCatmullRom(o.x,s.x,l.x,i.x,n,a,c),Ja.initNonuniformCatmullRom(o.y,s.y,l.y,i.y,n,a,c),Qa.initNonuniformCatmullRom(o.z,s.z,l.z,i.z,n,a,c)}else"catmullrom"===this.curveType&&(Za.initCatmullRom(o.x,s.x,l.x,i.x,this.tension),Ja.initCatmullRom(o.y,s.y,l.y,i.y,this.tension),Qa.initCatmullRom(o.z,s.z,l.z,i.z,this.tension));return e.set(Za.calc(t),Ja.calc(t),Qa.calc(t)),e},In.prototype.copy=function(t){Dn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},In.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},In.prototype.fromJSON=function(t){Dn.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new r).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Fn.prototype=Object.create(Dn.prototype),Fn.prototype.constructor=Fn,Fn.prototype.isCubicBezierCurve=!0,Fn.prototype.getPoint=function(t,e){e=e||new i;var n=this.v0,r=this.v1,a=this.v2,o=this.v3;return e.set(kn(t,n.x,r.x,a.x,o.x),kn(t,n.y,r.y,a.y,o.y)),e},Fn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Fn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Fn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Bn.prototype=Object.create(Dn.prototype),Bn.prototype.constructor=Bn,Bn.prototype.isCubicBezierCurve3=!0,Bn.prototype.getPoint=function(t,e){e=e||new r;var i=this.v0,n=this.v1,a=this.v2,o=this.v3;return e.set(kn(t,i.x,n.x,a.x,o.x),kn(t,i.y,n.y,a.y,o.y),kn(t,i.z,n.z,a.z,o.z)),e},Bn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Bn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Bn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Un.prototype=Object.create(Dn.prototype),Un.prototype.constructor=Un,Un.prototype.isLineCurve=!0,Un.prototype.getPoint=function(t,e){return e=e||new i,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Un.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Un.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Un.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Un.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Un.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Hn.prototype=Object.create(Dn.prototype),Hn.prototype.constructor=Hn,Hn.prototype.isLineCurve3=!0,Hn.prototype.getPoint=function(t,e){return e=e||new r,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Hn.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Hn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Hn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Hn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Gn.prototype=Object.create(Dn.prototype),Gn.prototype.constructor=Gn,Gn.prototype.isQuadraticBezierCurve=!0,Gn.prototype.getPoint=function(t,e){e=e||new i;var n=this.v0,r=this.v1,a=this.v2;return e.set(Nn(t,n.x,r.x,a.x),Nn(t,n.y,r.y,a.y)),e},Gn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Gn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Gn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},jn.prototype=Object.create(Dn.prototype),jn.prototype.constructor=jn,jn.prototype.isQuadraticBezierCurve3=!0,jn.prototype.getPoint=function(t,e){e=e||new r;var i=this.v0,n=this.v1,a=this.v2;return e.set(Nn(t,i.x,n.x,a.x),Nn(t,i.y,n.y,a.y),Nn(t,i.z,n.z,a.z)),e},jn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},jn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},jn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Vn.prototype=Object.create(Dn.prototype),Vn.prototype.constructor=Vn,Vn.prototype.isSplineCurve=!0,Vn.prototype.getPoint=function(t,e){e=e||new i;var n=this.points,r=(n.length-1)*t;r-=t=Math.floor(r);var a=n[0===t?t:t-1],o=n[t],s=n[t>n.length-2?n.length-1:t+1];return n=n[t>n.length-3?n.length-1:t+2],e.set(zn(r,a.x,o.x,s.x,n.x),zn(r,a.y,o.y,s.y,n.y)),e},Vn.prototype.copy=function(t){Dn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this},Vn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t},Vn.prototype.fromJSON=function(t){Dn.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new i).fromArray(r))}return this};var Ka=Object.freeze({ArcCurve:Rn,CatmullRomCurve3:In,CubicBezierCurve:Fn,CubicBezierCurve3:Bn,EllipseCurve:Pn,LineCurve:Un,LineCurve3:Hn,QuadraticBezierCurve:Gn,QuadraticBezierCurve3:jn,SplineCurve:Vn});Wn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Wn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Un(e,t))},getPoint:function(t){var e=t*this.getLength(),i=this.getCurveLengths();for(t=0;t<i.length;){if(i[t]>=e)return e=i[t]-e,i=(t=this.curves[t]).getLength(),t.getPointAt(0===i?0:1-e/i);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++){var a=r[n];a=a.getPoints(a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t);for(var o=0;o<a.length;o++){var s=a[o];e&&e.equals(s)||(i.push(s),e=s)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){Dn.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Dn.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){Dn.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push((new Ka[n.type]).fromJSON(n))}return this}}),qn.prototype=Object.assign(Object.create(Wn.prototype),{constructor:qn,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Un(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){t=new Gn(this.currentPoint.clone(),new i(t,e),new i(n,r)),this.curves.push(t),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,a,o){t=new Fn(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(a,o)),this.curves.push(t),this.currentPoint.set(a,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t);e=new Vn(e),this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,a){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,a)},absarc:function(t,e,i,n,r,a){this.absellipse(t,e,i,i,n,r,a)},ellipse:function(t,e,i,n,r,a,o,s){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,a,o,s)},absellipse:function(t,e,i,n,r,a,o,s){t=new Pn(t,e,i,n,r,a,o,s),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)},copy:function(t){return Wn.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Wn.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Wn.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Xn.prototype=Object.assign(Object.create(qn.prototype),{constructor:Xn,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){qn.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=qn.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){qn.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push((new qn).fromJSON(n))}return this}}),Yn.prototype=Object.assign(Object.create(T.prototype),{constructor:Yn,isLight:!0,copy:function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=T.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Zn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Zn,isHemisphereLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Jn.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Qn.prototype=Object.assign(Object.create(Jn.prototype),{constructor:Qn,isSpotLightShadow:!0,update:function(t){var e=this.camera,i=2*ua.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height;t=t.distance||e.far,i===e.fov&&n===e.aspect&&t===e.far||(e.fov=i,e.aspect=n,e.far=t,e.updateProjectionMatrix())}}),Kn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Kn,isSpotLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),$n.prototype=Object.assign(Object.create(Yn.prototype),{constructor:$n,isPointLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),tr.prototype=Object.assign(Object.create(be.prototype),{constructor:tr,isOrthographicCamera:!0,copy:function(t,e){return be.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t;if(i+=t,t=n+e,e=n-e,null!==this.view&&this.view.enabled){i=this.zoom/(this.view.width/this.view.fullWidth),e=this.zoom/(this.view.height/this.view.fullHeight);var a=(this.right-this.left)/this.view.width;n=(this.top-this.bottom)/this.view.height,i=(r+=this.view.offsetX/i*a)+this.view.width/i*a,e=(t-=this.view.offsetY/e*n)-this.view.height/e*n}this.projectionMatrix.makeOrthographic(r,i,t,e,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=T.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),er.prototype=Object.assign(Object.create(Jn.prototype),{constructor:er}),ir.prototype=Object.assign(Object.create(Yn.prototype),{constructor:ir,isDirectionalLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),nr.prototype=Object.assign(Object.create(Yn.prototype),{constructor:nr,isAmbientLight:!0}),rr.prototype=Object.assign(Object.create(Yn.prototype),{constructor:rr,isRectAreaLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return(t=Yn.prototype.toJSON.call(this,t)).object.width=this.width,t.object.height=this.height,t}}),Object.assign(ar.prototype,{load:function(t,e,i,n){var r=this,a=new Mn(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),i,n)},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,o=new ja[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearCoat&&(o.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(o.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(o.vertexColors=t.vertexColors),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.uniforms)for(var l in t.uniforms){var c=t.uniforms[l];switch(o.uniforms[l]={},c.type){case"t":o.uniforms[l].value=e(c.value);break;case"c":o.uniforms[l].value=(new _).setHex(c.value);break;case"v2":o.uniforms[l].value=(new i).fromArray(c.value);break;case"v3":o.uniforms[l].value=(new r).fromArray(c.value);break;case"v4":o.uniforms[l].value=(new s).fromArray(c.value);break;case"m3":o.uniforms[l].value=(new a).fromArray(c.value);case"m4":o.uniforms[l].value=(new g).fromArray(c.value);break;default:o.uniforms[l].value=c.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var h in t.extensions)o.extensions[h]=t.extensions[h];return void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=e(t.map)),void 0!==t.matcap&&(o.matcap=e(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=e(t.alphaMap),o.transparent=!0),void 0!==t.bumpMap&&(o.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale&&(l=t.normalScale,!1===Array.isArray(l)&&(l=[l,l]),o.normalScale=(new i).fromArray(l)),void 0!==t.displacementMap&&(o.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=e(t.specularMap)),void 0!==t.envMap&&(o.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.lightMap&&(o.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=e(t.gradientMap)),o},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var $a={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};or.prototype=Object.assign(Object.create(B.prototype),{constructor:or,isInstancedBufferGeometry:!0,copy:function(t){return B.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=B.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),sr.prototype=Object.assign(Object.create(A.prototype),{constructor:sr,isInstancedBufferAttribute:!0,copy:function(t){return A.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=A.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Object.assign(lr.prototype,{load:function(t,e,i,n){var r=this,a=new Mn(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),i,n)},parse:function(t){var e=t.isInstancedBufferGeometry?new or:new B,i=t.data.index;if(void 0!==i){var n=new to[i.type](i.array);e.setIndex(new A(n,1))}for(var a in i=t.data.attributes){var o=i[a];n=new to[o.type](o.array),n=new(o.isInstancedBufferAttribute?sr:A)(n,o.itemSize,o.normalized),void 0!==o.name&&(n.name=o.name),e.addAttribute(a,n)}var s=t.data.morphAttributes;if(s)for(a in s){var l=s[a],c=[];i=0;for(var h=l.length;i<h;i++)o=l[i],n=new A(n=new to[o.type](o.array),o.itemSize,o.normalized),void 0!==o.name&&(n.name=o.name),c.push(n);e.morphAttributes[a]=c}if(void 0!==(a=t.data.groups||t.data.drawcalls||t.data.offsets))for(i=0,o=a.length;i!==o;++i)n=a[i],e.addGroup(n.start,n.count,n.materialIndex);return void 0!==(i=t.data.boundingSphere)&&(a=new r,void 0!==i.center&&a.fromArray(i.center),e.boundingSphere=new p(a,i.radius)),t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e},setPath:function(t){return this.path=t,this}});var to={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(cr.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){var r=this,a=void 0===this.path?$a.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a,(a=new Mn(r.manager)).setPath(this.path),a.load(t,(function(i){var a=null;try{a=JSON.parse(i)}catch(e){return void 0!==n&&n(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}void 0===(i=a.metadata)||void 0===i.type||"geometry"===i.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t):r.parse(a,e)}),i,n)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var i=this.parseShape(t.shapes);i=this.parseGeometries(t.geometries,i);var n=this.parseImages(t.images,(function(){void 0!==e&&e(r)}));n=this.parseTextures(t.textures,n),n=this.parseMaterials(t.materials,n);var r=this.parseObject(t.object,i,n);return t.animations&&(r.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(r),r},parseShape:function(t){var e={};if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var r=(new Xn).fromJSON(t[i]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var i={};if(void 0!==t)for(var n=new lr,r=0,a=t.length;r<a;r++){var o=t[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":var s=new Ga[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ga[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ga[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ga[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ga[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ga[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Ga[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ga[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ga[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ga[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Ga[o.type]((new Ka[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ga[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Ga[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":s=[];for(var l=0,c=o.shapes.length;l<c;l++){var h=e[o.shapes[l]];s.push(h)}s=new Ga[o.type](s,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(s=[],l=0,c=o.shapes.length;l<c;l++)h=e[o.shapes[l]],s.push(h);void 0!==(l=o.options.extrudePath)&&(o.options.extrudePath=(new Ka[l.type]).fromJSON(l)),s=new Ga[o.type](s,o.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=n.parse(o);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?s=(new THREE.LegacyJSONLoader).parse(o,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}return i},parseMaterials:function(t,e){var i={},n={};if(void 0!==t){var r=new ar;r.setTextures(e),e=0;for(var a=t.length;e<a;e++){var o=t[e];if("MultiMaterial"===o.type){for(var s=[],l=0;l<o.materials.length;l++){var c=o.materials[l];void 0===i[c.uuid]&&(i[c.uuid]=r.parse(c)),s.push(i[c.uuid])}n[o.uuid]=s}else void 0===i[o.uuid]&&(i[o.uuid]=r.parse(o)),n[o.uuid]=i[o.uuid]}}return n},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=bn.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),e.push(r)}return e},parseImages:function(t,e){function i(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}var n=this,r={};if(void 0!==t&&0<t.length){var a=new An(e=new wn(e));a.setCrossOrigin(this.crossOrigin),e=0;for(var o=t.length;e<o;e++){var s=t[e],l=s.url;if(Array.isArray(l)){r[s.uuid]=[];for(var c=0,h=l.length;c<h;c++){var u=l[c];u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u,r[s.uuid].push(i(u))}}else u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:n.resourcePath+s.url,r[s.uuid]=i(u)}}return r},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var l=Array.isArray(e[s.image])?new st(e[s.image]):new o(e[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=i(s.mapping,eo)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=i(s.wrap[0],io),l.wrapT=i(s.wrap[1],io)),void 0!==s.format&&(l.format=s.format),void 0!==s.type&&(l.type=s.type),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=i(s.minFilter,no)),void 0!==s.magFilter&&(l.magFilter=i(s.magFilter,no)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),n[s.uuid]=l}return n},parseObject:function(t,e,i){function n(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++){var a=t[n];void 0===i[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(i[a])}return e}return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}}switch(t.type){case"Scene":var a=new Le;void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new _(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new Ce(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new Ae(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new xe(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new tr(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new nr(t.color,t.intensity);break;case"DirectionalLight":a=new ir(t.color,t.intensity);break;case"PointLight":a=new $n(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new rr(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new Kn(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new Zn(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":a=n(t.geometry);var o=r(t.material);a=a.bones&&0<a.bones.length?new ze(a,o):new Z(a,o),void 0!==t.drawMode&&a.setDrawMode(t.drawMode);break;case"LOD":a=new Ie;break;case"Line":a=new Be(n(t.geometry),r(t.material),t.mode);break;case"LineLoop":a=new He(n(t.geometry),r(t.material));break;case"LineSegments":a=new Ue(n(t.geometry),r(t.material));break;case"PointCloud":case"Points":a=new je(n(t.geometry),r(t.material));break;case"Sprite":a=new Oe(r(t.material));break;case"Group":a=new _e;break;default:a=new T}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children){o=t.children;for(var s=0;s<o.length;s++)a.add(this.parseObject(o[s],e,i))}if("LOD"===t.type)for(t=t.levels,o=0;o<t.length;o++){s=t[o];var l=a.getObjectByProperty("uuid",s.object);void 0!==l&&a.addLevel(l,s.distance)}return a}});var eo={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},io={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},no={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};hr.prototype={constructor:hr,setOptions:function(t){return this.options=t,this},load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Wa.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)})).then((function(i){Wa.add(t,i),e&&e(i),r.manager.itemEnd(t)})).catch((function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(ur.prototype,{moveTo:function(t,e){this.currentPath=new qn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,a){this.currentPath.bezierCurveTo(t,e,i,n,r,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],a=new Xn;a.curves=r.curves,e.push(a)}return e}function n(t,e){for(var i=e.length,n=!1,r=i-1,a=0;a<i;r=a++){var o=e[r],s=e[a],l=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(0>c&&(o=e[a],l=-l,s=e[r],c=-c),!(t.y<o.y||t.y>s.y))if(t.y===o.y){if(t.x===o.x)return!0}else{if(0===(r=c*(t.x-o.x)-l*(t.y-o.y)))return!0;0>r||(n=!n)}}else if(t.y===o.y&&(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x))return!0}return n}var r=Ua.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return i(a);if(e=[],1===a.length){var o=a[0],s=new Xn;return s.curves=o.curves,e.push(s),e}var l=!r(a[0].getPoints());l=t?!l:l,s=[];var c=[],h=[],u=0;c[u]=void 0,h[u]=[];for(var d=0,p=a.length;d<p;d++){var f=(o=a[d]).getPoints(),m=r(f);(m=t?!m:m)?(!l&&c[u]&&u++,c[u]={s:new Xn,p:f},c[u].s.curves=o.curves,l&&u++,h[u]=[]):h[u].push({h:o,p:f[0]})}if(!c[0])return i(a);if(1<c.length){for(d=!1,t=[],r=0,a=c.length;r<a;r++)s[r]=[];for(r=0,a=c.length;r<a;r++)for(o=h[r],m=0;m<o.length;m++){for(l=o[m],u=!0,f=0;f<c.length;f++)n(l.p,c[f].p)&&(r!==f&&t.push({froms:r,tos:f,hole:m}),u?(u=!1,s[f].push(l)):d=!0);u&&s[r].push(l)}0<t.length&&(d||(h=s))}for(d=0,r=c.length;d<r;d++)for(s=c[d].s,e.push(s),a=0,o=(t=h[d]).length;a<o;a++)s.holes.push(t[a].h);return e}}),Object.assign(dr.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);var i=[],n=e;e=this.data;var r=Array.from?Array.from(t):String(t).split("");n/=e.resolution;var a=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n;t=[];for(var o=0,s=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)o=0,s-=a;else{var h=n,u=o,d=s;if(c=e.glyphs[c]||e.glyphs["?"]){var p=new ur;if(c.o)for(var f=c._cachedOutline||(c._cachedOutline=c.o.split(" ")),m=0,g=f.length;m<g;)switch(f[m++]){case"m":var v=f[m++]*h+u,y=f[m++]*h+d;p.moveTo(v,y);break;case"l":v=f[m++]*h+u,y=f[m++]*h+d,p.lineTo(v,y);break;case"q":var _=f[m++]*h+u,b=f[m++]*h+d,x=f[m++]*h+u,w=f[m++]*h+d;p.quadraticCurveTo(x,w,_,b);break;case"b":_=f[m++]*h+u,b=f[m++]*h+d,x=f[m++]*h+u,w=f[m++]*h+d,v=f[m++]*h+u,y=f[m++]*h+d,p.bezierCurveTo(x,w,v,y,_,b)}h={offsetX:c.ha*h,path:p}}else h=void 0;o+=h.offsetX,t.push(h.path)}}for(e=0,r=t.length;e<r;e++)Array.prototype.push.apply(i,t[e].toShapes());return i}}),Object.assign(pr.prototype,{load:function(t,e,i,n){var r=this,a=new Mn(this.manager);a.setPath(this.path),a.load(t,(function(t){try{var i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}t=r.parse(i),e&&e(t)}),i,n)},parse:function(t){return new dr(t)},setPath:function(t){return this.path=t,this}}),fr.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i+1];if(e[i].test(t))return r}return null}},Object.assign(fr.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:function(){var t={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},e=new _,i=new Ln,n=new ar;return function(r,a,o){function s(t,e,n,r,s){t=a+t;var l=fr.Handlers.get(t);return null!==l?t=l.load(t):(i.setCrossOrigin(o),t=i.load(t)),void 0!==e&&(t.repeat.fromArray(e),1!==e[0]&&(t.wrapS=1e3),1!==e[1]&&(t.wrapT=1e3)),void 0!==n&&t.offset.fromArray(n),void 0!==r&&("repeat"===r[0]&&(t.wrapS=1e3),"mirror"===r[0]&&(t.wrapS=1002),"repeat"===r[1]&&(t.wrapT=1e3),"mirror"===r[1]&&(t.wrapT=1002)),void 0!==s&&(t.anisotropy=s),e=ua.generateUUID(),c[e]=t,e}var l,c={},h={uuid:ua.generateUUID(),type:"MeshLambertMaterial"};for(l in r){var u=r[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":h.name=u;break;case"blending":h.blending=t[u];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":h.color=e.fromArray(u).getHex();break;case"colorSpecular":h.specular=e.fromArray(u).getHex();break;case"colorEmissive":h.emissive=e.fromArray(u).getHex();break;case"specularCoef":h.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(h.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(h.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(h.type="MeshStandardMaterial");break;case"mapDiffuse":h.map=s(u,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":h.emissiveMap=s(u,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":h.lightMap=s(u,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":h.aoMap=s(u,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":h.bumpMap=s(u,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":h.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":h.normalMap=s(u,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":h.normalScale=u;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":h.specularMap=s(u,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":h.metalnessMap=s(u,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":h.roughnessMap=s(u,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":h.alphaMap=s(u,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":h.side=1;break;case"doubleSided":h.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),h.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":h[l]=u;break;case"vertexColors":!0===u&&(h.vertexColors=2),"face"===u&&(h.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,u)}}return"MeshBasicMaterial"===h.type&&delete h.emissive,"MeshPhongMaterial"!==h.type&&delete h.specular,1>h.opacity&&(h.transparent=!0),n.setTextures(c),n.parse(h)}}()});var ro,ao,oo,so={getContext:function(){return void 0===ro&&(ro=new(window.AudioContext||window.webkitAudioContext)),ro},setContext:function(t){ro=t}};Object.assign(mr.prototype,{load:function(t,e,i,n){var r=new Mn(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,(function(t){t=t.slice(0),so.getContext().decodeAudioData(t,(function(t){e(t)}))}),i,n)},setPath:function(t){return this.path=t,this}}),Object.assign(gr.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;9>e;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;9>t;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e=.282095*r[0],e+=.488603*r[1]*n,e+=.488603*r[2]*t,e+=.488603*r[3]*i,e+=1.092548*r[4]*i*n,e+=1.092548*r[5]*n*t,e+=.315392*r[6]*(3*t*t-1),(e+=1.092548*r[7]*i*t)+.546274*r[8]*(i*i-n*n)},getIrradianceAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e=.886227*r[0],e+=1.023328*r[1]*n,e+=1.023328*r[2]*t,e+=1.023328*r[3]*i,e+=.858086*r[4]*i*n,e+=.858086*r[5]*n*t,e+=r[6]*(.743125*t*t-.247708),(e+=.858086*r[7]*i*t)+.429043*r[8]*(i*i-n*n)},add:function(t){for(var e=0;9>e;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;9>e;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var i=0;9>i;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this},equals:function(t){for(var e=0;9>e;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t){for(var e=this.coefficients,i=0;9>i;i++)e[i].fromArray(t,3*i);return this},toArray:function(){for(var t=[],e=this.coefficients,i=0;9>i;i++)e[i].toArray(t,3*i);return t}}),Object.assign(gr,{getBasisAt:function(t,e){var i=t.x,n=t.y;t=t.z,e[0]=.282095,e[1]=.488603*n,e[2]=.488603*t,e[3]=.488603*i,e[4]=1.092548*i*n,e[5]=1.092548*n*t,e[6]=.315392*(3*t*t-1),e[7]=1.092548*i*t,e[8]=.546274*(i*i-n*n)}}),vr.prototype=Object.assign(Object.create(Yn.prototype),{constructor:vr,isLightProbe:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return Yn.prototype.toJSON.call(this,t)}}),yr.prototype=Object.assign(Object.create(vr.prototype),{constructor:yr,isHemisphereLightProbe:!0,copy:function(t){return vr.prototype.copy.call(this,t),this},toJSON:function(t){return vr.prototype.toJSON.call(this,t)}}),_r.prototype=Object.assign(Object.create(vr.prototype),{constructor:_r,isAmbientLightProbe:!0,copy:function(t){return vr.prototype.copy.call(this,t),this},toJSON:function(t){return vr.prototype.toJSON.call(this,t)}}),Object.assign(br.prototype,{update:function(){var t,e,i,n,r,a,o,s,l=new g,c=new g;return function(h){if(t!==this||e!==h.focus||i!==h.fov||n!==h.aspect*this.aspect||r!==h.near||a!==h.far||o!==h.zoom||s!==this.eyeSep){t=this,e=h.focus,i=h.fov,n=h.aspect*this.aspect,r=h.near,a=h.far,o=h.zoom;var u=h.projectionMatrix.clone(),d=(s=this.eyeSep/2)*r/e,p=r*Math.tan(ua.DEG2RAD*i*.5)/o;c.elements[12]=-s,l.elements[12]=s;var f=-p*n+d,m=p*n+d;u.elements[0]=2*r/(m-f),u.elements[8]=(m+f)/(m-f),this.cameraL.projectionMatrix.copy(u),f=-p*n-d,m=p*n-d,u.elements[0]=2*r/(m-f),u.elements[8]=(m+f)/(m-f),this.cameraR.projectionMatrix.copy(u)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(l)}}()}),xr.prototype=Object.create(T.prototype),xr.prototype.constructor=xr,Object.assign(wr.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Mr.prototype=Object.assign(Object.create(T.prototype),{constructor:Mr,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new r,e=new n,i=new r,a=new r,o=new wr;return function(n){T.prototype.updateMatrixWorld.call(this,n),n=this.context.listener;var r=this.up;if(this.timeDelta=o.getDelta(),this.matrixWorld.decompose(t,e,i),a.set(0,0,-1).applyQuaternion(e),n.positionX){var s=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(t.x,s),n.positionY.linearRampToValueAtTime(t.y,s),n.positionZ.linearRampToValueAtTime(t.z,s),n.forwardX.linearRampToValueAtTime(a.x,s),n.forwardY.linearRampToValueAtTime(a.y,s),n.forwardZ.linearRampToValueAtTime(a.z,s),n.upX.linearRampToValueAtTime(r.x,s),n.upY.linearRampToValueAtTime(r.y,s),n.upZ.linearRampToValueAtTime(r.z,s)}else n.setPosition(t.x,t.y,t.z),n.setOrientation(a.x,a.y,a.z,r.x,r.y,r.z)}}()}),Er.prototype=Object.assign(Object.create(T.prototype),{constructor:Er,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Tr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Tr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this},updateMatrixWorld:function(){var t=new r,e=new n,i=new r,a=new r;return function(n){if(T.prototype.updateMatrixWorld.call(this,n),!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(t,e,i),a.set(0,0,1).applyQuaternion(e),(n=this.panner).positionX){var r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(t.x,r),n.positionY.linearRampToValueAtTime(t.y,r),n.positionZ.linearRampToValueAtTime(t.z,r),n.orientationX.linearRampToValueAtTime(a.x,r),n.orientationY.linearRampToValueAtTime(a.y,r),n.orientationZ.linearRampToValueAtTime(a.z,r)}else n.setPosition(t.x,t.y,t.z),n.setOrientation(a.x,a.y,a.z)}}()}),Object.assign(Sr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Object.assign(Ar.prototype,{accumulate:function(t,e){var i=this.buffer,n=this.valueSize;t=t*n+n;var r=this.cumulativeWeight;if(0===r){for(r=0;r!==n;++r)i[t+r]=i[r];r=e}else r+=e,this._mixBufferRegion(i,t,0,e/r,n);this.cumulativeWeight=r},apply:function(t){var e=this.valueSize,i=this.buffer;t=t*e+e;var n=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,1>n&&this._mixBufferRegion(i,t,3*e,1-n,e),n=e;for(var a=e+e;n!==a;++n)if(i[n]!==i[n+e]){r.setValue(i,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,i=3*e;this.binding.getValue(t,i);for(var n=e;n!==i;++n)t[n]=t[i+n%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,i,n,r){if(.5<=n)for(n=0;n!==r;++n)t[e+n]=t[i+n]},_slerp:function(t,e,i,r){n.slerpFlat(t,e,t,e,t,i,r)},_lerp:function(t,e,i,n,r){for(var a=1-n,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[i+o]*n}}}),Object.assign(Cr.prototype,{getValue:function(t,e){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(Lr,{Composite:Cr,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new Lr.Composite(t,e,i):new Lr(t,e,i)},sanitizeNodeName:function(){var t=/[\[\]\.:\/]/g;return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",e=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");t=/(WCOD+)?/.source.replace("WCOD",t);var i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),n=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),r=new RegExp("^"+e+t+i+n+"$"),a=["material","materials","bones"];return function(t){var e=r.exec(t);if(!e)throw Error("PropertyBinding: Cannot parse trackName: "+t);var i=(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]}).nodeName&&e.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=e.nodeName.substring(i+1);-1!==a.indexOf(n)&&(e.nodeName=e.nodeName.substring(0,i),e.objectName=n)}if(null===e.propertyName||0===e.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){var n=function(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.name===e||r.uuid===e||(r=n(r.children)))return r}return null};if(t=n(t.children))return t}return null}}),Object.assign(Lr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(this.node=t=Lr.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var a=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(t=t.skeleton.bones,i=0;i<t.length;i++)if(t[i].name===a){a=i;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}if(void 0===(a=t[n]))console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+n+" but it wasn't found.",t);else{if(e=this.Versioning.None,this.targetObject=t,void 0!==t.needsUpdate?e=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate),i=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(i=0;i<this.node.geometry.morphAttributes.position.length;i++)if(t.geometry.morphAttributes.position[i].name===r){r=i;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(i=0;i<this.node.geometry.morphTargets.length;i++)if(t.geometry.morphTargets[i].name===r){r=i;break}}}i=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(i=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][e]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Lr.prototype,{_getValue_unbound:Lr.prototype.getValue,_setValue_unbound:Lr.prototype.setValue}),Object.assign(Dr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid,p=n[d];if(void 0===p){p=e++,n[d]=p,t.push(u),d=0;for(var f=s;d!==f;++d)o[d].push(new Lr(u,r[d],a[d]))}else if(p<i){l=t[p];var m=--i;for(n[(f=t[m]).uuid]=p,t[p]=f,n[d]=m,t[m]=u,d=0,f=s;d!==f;++d){var g=o[d],v=g[p];g[p]=g[m],void 0===v&&(v=new Lr(u,r[d],a[d])),g[m]=v}}else t[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,c=i[l];if(void 0!==c&&c>=e){var h=e++,u=t[h];for(i[u.uuid]=c,t[c]=u,i[l]=h,t[h]=s,s=0,l=r;s!==l;++s){var d=(u=n[s])[c];u[c]=u[h],u[h]=d}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,c=n[l];if(void 0!==c)if(delete n[l],c<i){var h=t[l=--i],u=--e,d=t[u];for(n[h.uuid]=c,t[c]=h,n[d.uuid]=l,t[l]=d,t.pop(),h=0,d=a;h!==d;++h){var p=r[h],f=p[u];p[c]=p[l],p[l]=f,p.pop()}}else for(n[(d=t[u=--e]).uuid]=c,t[c]=d,t.pop(),h=0,d=a;h!==d;++h)(p=r[h])[c]=p[u],p.pop()}this.nCachedObjects_=i},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var a=this._paths,o=this._parsedPaths,s=this._objects,l=this.nCachedObjects_,c=Array(s.length);for(n=r.length,i[t]=n,a.push(t),o.push(e),r.push(c),i=l,n=s.length;i!==n;++i)c[i]=new Lr(s[i],t,e);return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=i,a[i]=s,a.pop(),r[i]=r[o],r.pop(),n[i]=n[o],n.pop()}}}),Object.assign(Pr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){i=this._clip.duration;var n=t._clip.duration,r=i/n;t.warp(1,n/i,e),this.warp(r,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,a=this._timeScaleInterpolant,o=this.timeScale;return null===a&&(this._timeScaleInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,n[1]=r+i,a[0]=t/o,a[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){if(this.enabled){var r=this._startTime;if(null!==r){if(0>(e=(t-r)*i)||0===i)return;this._startTime=null,e*=i}if(e*=this._updateTimeScale(t),i=this._updateTime(e),0<(t=this._updateWeight(t))){e=this._interpolants,r=this._propertyBindings;for(var a=0,o=e.length;a!==o;++a)e[a].evaluate(i),r[a].accumulate(n,t)}}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i)e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t,i=this._clip.duration,n=this.loop,r=this._loopCount,a=2202===n;if(0===t)return-1===r?e:a&&1==(1&r)?i-e:e;if(2200===n)t:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=i)e=i;else{if(!(0>e)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(-1===r&&(0<=t?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=i||0>e){e-=i*(n=Math.floor(e/i)),r+=Math.abs(n);var o=this.repetitions-r;0>=o?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e=0<t?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(1===o?(t=0>t,this._setEndings(t,!t,a)):this._setEndings(!1,!1,a),this._loopCount=r,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n}))}else this.time=e;if(a&&1==(1&r))return i-e}return e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,a=this._weightInterpolant;return null===a&&(this._weightInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,a[0]=e,n[1]=r+t,a[1]=i,this}}),Rr.prototype=Object.assign(Object.create(e.prototype),{constructor:Rr,_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,a=t._propertyBindings;t=t._interpolants;var o=i.uuid,s=this._bindingsByRootAndName,l=s[o];for(void 0===l&&(l={},s[o]=l),s=0;s!==r;++s){var c=n[s],h=c.name,u=l[h];if(void 0===u){if(void 0!==(u=a[s])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,h));continue}++(u=new Ar(Lr.create(i,h,e&&e._propertyBindings[s].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(u,o,h)}a[s]=u,t[s].resultBuffer=u.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(i=0,n=(e=t._propertyBindings).length;i!==n;++i){var r=e[i];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,a=r[e];void 0===a?(a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a):(e=a.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=n.length,n.push(t),a.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null,e=t._clip.uuid;var r=(n=(i=this._actionsByClip)[e]).knownActions,a=r[r.length-1],o=t._byClipCacheIndex;a._byClipCacheIndex=o,r[o]=a,r.pop(),t._byClipCacheIndex=null,delete n.actionByRoot[(t._localRoot||this._root).uuid],0===r.length&&delete i[e],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=0,i=(t=t._propertyBindings).length;e!==i;++e){var n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],a=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid;i=i.path;var r=this._bindingsByRootAndName,a=r[n],o=e[e.length-1];t=t._cacheIndex,o._cacheIndex=t,e[t]=o,e.pop(),delete a[i];t:{for(var s in a)break t;delete r[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&((i=new hn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var i=e||this._root,n=i.uuid;t=null!==(i="string"==typeof t?bn.findByName(i,t):t)?i.uuid:t;var r=this._actionsByClip[t],a=null;if(void 0!==r){if(void 0!==(a=r.actionByRoot[n]))return a;a=r.knownActions[0],null===i&&(i=a._clip)}return null===i?null:(e=new Pr(this,i,e),this._bindAction(e,a),this._addInactiveAction(e,t,n),e)},existingAction:function(t,e){var i=e||this._root;return e=i.uuid,i="string"==typeof t?bn.findByName(i,t):t,void 0!==(t=this._actionsByClip[i?i.uuid:t])&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==e;++r)t[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==i;++o)e[o]._update(n,t,r,a);for(t=this._bindings,e=this._nActiveBindings,o=0;o!==e;++o)t[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions;t=t.uuid;var i=this._actionsByClip,n=i[t];if(void 0!==n){for(var r=0,a=(n=n.knownActions).length;r!==a;++r){var o=n[r];this._deactivateAction(o);var s=o._cacheIndex,l=e[e.length-1];o._cacheIndex=null,o._byClipCacheIndex=null,l._cacheIndex=s,e[s]=l,e.pop(),this._removeInactiveBindingsForAction(o)}delete i[t]}},uncacheRoot:function(t){t=t.uuid;var e=this._actionsByClip;for(n in e){var i=e[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[t];if(void 0!==n)for(var r in n)(t=n[r]).restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){null!==(t=this.existingAction(t,e))&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),Or.prototype.clone=function(){return new Or(void 0===this.value.clone?this.value:this.value.clone())},Ir.prototype=Object.assign(Object.create(De.prototype),{constructor:Ir,isInstancedInterleavedBuffer:!0,copy:function(t){return De.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(zr.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){return kr(t,this,i=i||[],e),i.sort(Nr),i},intersectObjects:function(t,e,i){if(i=i||[],!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=t.length;n<r;n++)kr(t[n],this,i,e);return i.sort(Nr),i}}),Object.assign(Fr.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t,i),this.phi=Math.acos(ua.clamp(e/this.radius,-1,1))),this}}),Object.assign(Br.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}}),Object.assign(Ur.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i;return function(e,i){return i=t.copy(i).multiplyScalar(.5),this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new i),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new i),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(Hr.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new r),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new r),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new r),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new r,e=new r;return function(i,n){return t.subVectors(i,this.start),e.subVectors(this.end,this.start),i=e.dot(e),i=e.dot(t)/i,n&&(i=ua.clamp(i,0,1)),i}}(),closestPointToPoint:function(t,e,i){return t=this.closestPointToPointParameter(t,e),void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new r),this.delta(i).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Gr.prototype=Object.create(T.prototype),Gr.prototype.constructor=Gr,Gr.prototype.isImmediateRenderObject=!0,jr.prototype=Object.create(Ue.prototype),jr.prototype.constructor=jr,jr.prototype.update=function(){var t=new r,e=new r,i=new a;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,l=o.faces,c=o=0,h=l.length;c<h;c++)for(var u=l[c],d=0,p=u.vertexNormals.length;d<p;d++){var f=u.vertexNormals[d];t.copy(s[u[n[d]]]).applyMatrix4(r),e.copy(f).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),a.setXYZ(o,t.x,t.y,t.z),o+=1,a.setXYZ(o,e.x,e.y,e.z),o+=1}else if(o&&o.isBufferGeometry)for(n=o.attributes.position,s=o.attributes.normal,d=o=0,p=n.count;d<p;d++)t.set(n.getX(d),n.getY(d),n.getZ(d)).applyMatrix4(r),e.set(s.getX(d),s.getY(d),s.getZ(d)),e.applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),a.setXYZ(o,t.x,t.y,t.z),o+=1,a.setXYZ(o,e.x,e.y,e.z),o+=1;a.needsUpdate=!0}}(),Vr.prototype=Object.create(T.prototype),Vr.prototype.constructor=Vr,Vr.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Vr.prototype.update=function(){var t=new r;return function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,i=e*Math.tan(this.light.angle);this.cone.scale.set(i,i,e),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Wr.prototype=Object.create(Ue.prototype),Wr.prototype.constructor=Wr,Wr.prototype.updateMatrixWorld=function(){var t=new r,e=new g,i=new g;return function(n){var r=this.bones,a=this.geometry,o=a.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var c=r[s];c.parent&&c.parent.isBone&&(e.multiplyMatrices(i,c.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(l,t.x,t.y,t.z),e.multiplyMatrices(i,c.parent.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(l+1,t.x,t.y,t.z),l+=2)}a.getAttribute("position").needsUpdate=!0,T.prototype.updateMatrixWorld.call(this,n)}}(),qr.prototype=Object.create(Z.prototype),qr.prototype.constructor=qr,qr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},qr.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Xr.prototype=Object.create(Be.prototype),Xr.prototype.constructor=Xr,Xr.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);1<e&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},Xr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yr.prototype=Object.create(T.prototype),Yr.prototype.constructor=Yr,Yr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yr.prototype.update=function(){var t=new r,e=new _,i=new _;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=n.geometry.getAttribute("color");e.copy(this.light.color),i.copy(this.light.groundColor);for(var a=0,o=r.count;a<o;a++){var s=a<o/2?e:i;r.setXYZ(a,s.r,s.g,s.b)}r.needsUpdate=!0}n.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Zr.prototype=Object.create(Z.prototype),Zr.prototype.constructor=Zr,Zr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Zr.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},Jr.prototype=Object.assign(Object.create(Ue.prototype),{constructor:Jr,copy:function(t){return Ue.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),Qr.prototype=Object.create(Ue.prototype),Qr.prototype.constructor=Qr,Kr.prototype=Object.create(Be.prototype),Kr.prototype.constructor=Kr,Kr.prototype.update=function(){function t(t,n,a,o){for(a=(n-t)/a,p.setXYZ(h,0,0,0),u++,e=t;e<n;e+=a)i=h+u,p.setXYZ(i,Math.sin(e)*r,0,Math.cos(e)*r),p.setXYZ(i+1,Math.sin(Math.min(e+a,n))*r,0,Math.cos(Math.min(e+a,n))*r),p.setXYZ(i+2,0,0,0),u+=3;d.addGroup(h,u,o),h+=u,u=0}var e,i,n=this.audio,r=this.range,a=this.divisionsInnerAngle,o=this.divisionsOuterAngle,s=ua.degToRad(n.panner.coneInnerAngle),l=s/2,c=(n=ua.degToRad(n.panner.coneOuterAngle))/2,h=0,u=0,d=this.geometry,p=d.attributes.position;d.clearGroups(),t(-c,-l,o,0),t(-l,l,a,1),t(l,c,o,0),p.needsUpdate=!0,s===n&&(this.material[0].visible=!1)},Kr.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},$r.prototype=Object.create(Ue.prototype),$r.prototype.constructor=$r,$r.prototype.update=function(){var t=new r,e=new r,i=new a;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=0,l=0,c=(a=a.faces).length;l<c;l++){var h=a[l],u=h.normal;t.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(n),e.copy(u).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),r.setXYZ(s,t.x,t.y,t.z),s+=1,r.setXYZ(s,e.x,e.y,e.z),s+=1}r.needsUpdate=!0}}(),ta.prototype=Object.create(T.prototype),ta.prototype.constructor=ta,ta.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ta.prototype.update=function(){var t=new r,e=new r,i=new r;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(e,t),this.lightPlane.lookAt(e),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=i.length()}}(),ea.prototype=Object.create(Ue.prototype),ea.prototype.constructor=ea,ea.prototype.update=function(){function t(t,r,o,s){if(n.set(r,o,s).unproject(a),void 0!==(t=i[t]))for(r=e.getAttribute("position"),o=0,s=t.length;o<s;o++)r.setXYZ(t[o],n.x,n.y,n.z)}var e,i,n=new r,a=new be;return function(){e=this.geometry,i=this.pointMap,a.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),ia.prototype=Object.create(Ue.prototype),ia.prototype.constructor=ia,ia.prototype.update=function(){var t=new d;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){e=t.min;var i=t.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=e.x,r[4]=i.y,r[5]=i.z,r[6]=e.x,r[7]=e.y,r[8]=i.z,r[9]=i.x,r[10]=e.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=e.z,r[15]=e.x,r[16]=i.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=i.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ia.prototype.setFromObject=function(t){return this.object=t,this.update(),this},ia.prototype.copy=function(t){return Ue.prototype.copy.call(this,t),this.object=t.object,this},ia.prototype.clone=function(){return(new this.constructor).copy(this)},na.prototype=Object.create(Ue.prototype),na.prototype.constructor=na,na.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),T.prototype.updateMatrixWorld.call(this,t))},ra.prototype=Object.create(Be.prototype),ra.prototype.constructor=ra,ra.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;1e-8>Math.abs(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=0>e?1:0,this.lookAt(this.plane.normal),T.prototype.updateMatrixWorld.call(this,t)},aa.prototype=Object.create(T.prototype),aa.prototype.constructor=aa,aa.prototype.setDirection=function(){var t,e=new r;return function(i){.99999<i.y?this.quaternion.set(0,0,0,1):-.99999>i.y?this.quaternion.set(1,0,0,0):(e.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(e,t))}}(),aa.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},aa.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},aa.prototype.copy=function(t){return T.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},aa.prototype.clone=function(){return(new this.constructor).copy(this)},oa.prototype=Object.create(Ue.prototype),oa.prototype.constructor=oa,Dn.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Dn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Wn.prototype,{createPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new S,i=0,n=t.length;i<n;i++){var a=t[i];e.vertices.push(new r(a.x,a.y,a.z||0))}return e}}),Object.assign(qn.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),sa.prototype=Object.create(In.prototype),la.prototype=Object.create(In.prototype),ca.prototype=Object.create(In.prototype),Object.assign(ca.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Jr.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Wr.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(fr.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),$a.extractUrlBase(t)}}),Object.assign(cr.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Ur.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(d.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Hr.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(ua,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ua.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ua.ceilPowerOfTwo(t)}}),Object.assign(a.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(g.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new r),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,a)}}),f.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},n.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(q.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(X.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(X,{barycoordFromPoint:function(t,e,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),X.getBarycoord(t,e,i,n,r)},normal:function(t,e,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),X.getNormal(t,e,i,n)}}),Object.assign(Xn.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Di(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Hi(this,t)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(r.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(s.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(T.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(T.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ie.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ne.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ze.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Dn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),xe.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Yn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(A.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(B.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(B.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Pi.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Or.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(V.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(en.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(W.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Se.prototype,{clearTarget:function(t,e,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,i,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(Se.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(me.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(h.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(l.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Ee.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Er.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new mr).load(t,(function(t){e.setBuffer(t)})),this},Sr.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},xr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},pa.crossOrigin=void 0,pa.loadTexture=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Ln;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},pa.loadTextureCube=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Cn;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},pa.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},pa.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},t.ACESFilmicToneMapping=5,t.AddEquation=100,t.AddOperation=2,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AmbientLight=nr,t.AmbientLightProbe=_r,t.AnimationClip=bn,t.AnimationLoader=En,t.AnimationMixer=Rr,t.AnimationObjectGroup=Dr,t.AnimationUtils=Va,t.ArcCurve=Rn,t.ArrayCamera=we,t.ArrowHelper=aa,t.Audio=Er,t.AudioAnalyser=Sr,t.AudioContext=so,t.AudioListener=Mr,t.AudioLoader=mr,t.AxesHelper=oa,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new oa(t)},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Sn(t)},t.Bone=ke,t.BooleanKeyframeTrack=pn,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ia(t,e)},t.Box2=Ur,t.Box3=d,t.Box3Helper=na,t.BoxBufferGeometry=H,t.BoxGeometry=U,t.BoxHelper=ia,t.BufferAttribute=A,t.BufferGeometry=B,t.BufferGeometryLoader=lr,t.ByteType=1010,t.Cache=Wa,t.Camera=be,t.CameraHelper=ea,t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.CanvasTexture=qe,t.CatmullRomCurve3=In,t.CineonToneMapping=4,t.CircleBufferGeometry=Ji,t.CircleGeometry=Zi,t.ClampToEdgeWrapping=1001,t.Clock=wr,t.ClosedSplineCurve3=sa,t.Color=_,t.ColorKeyframeTrack=fn,t.CompressedTexture=We,t.CompressedTextureLoader=Tn,t.ConeBufferGeometry=Yi,t.ConeGeometry=Xi,t.CubeCamera=xr,t.CubeGeometry=U,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.CubeTexture=st,t.CubeTextureLoader=Cn,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.CubicBezierCurve=Fn,t.CubicBezierCurve3=Bn,t.CubicInterpolant=cn,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=Dn,t.CurvePath=Wn,t.CustomBlending=5,t.CylinderBufferGeometry=qi,t.CylinderGeometry=Wi,t.Cylindrical=Br,t.DataTexture=u,t.DataTexture2DArray=lt,t.DataTexture3D=ct,t.DataTextureLoader=Sn,t.DefaultLoadingManager=qa,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.DepthTexture=Xe,t.DirectionalLight=ir,t.DirectionalLightHelper=ta,t.DirectionalLightShadow=er,t.DiscreteInterpolant=un,t.DodecahedronBufferGeometry=oi,t.DodecahedronGeometry=ai,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new A(t,e).setDynamic(!0)},t.EdgesGeometry=Vi,t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ue(new Vi(t.geometry),new Fe({color:void 0!==e?e:16777215}))},t.EllipseCurve=Pn,t.EqualDepth=4,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.Euler=M,t.EventDispatcher=e,t.ExtrudeBufferGeometry=Pi,t.ExtrudeGeometry=Di,t.Face3=w,t.Face4=function(t,e,i,n,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new w(t,e,i,r,a,o)},t.FaceColors=1,t.FaceNormalsHelper=$r,t.FileLoader=Mn,t.FlatShading=1,t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new z(t,e)},t.Float32BufferAttribute=z,t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new N(t,e)},t.Float64BufferAttribute=N,t.FloatType=1015,t.Fog=Ce,t.FogExp2=Ae,t.Font=dr,t.FontLoader=pr,t.FrontFaceDirectionCCW=1,t.FrontFaceDirectionCW=0,t.FrontSide=0,t.Frustum=m,t.GammaEncoding=3007,t.Geometry=S,t.GeometryUtils={merge:function(t,e,i){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();var n=e.matrix;e=e.geometry}t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GridHelper=Jr,t.Group=_e,t.HalfFloatType=1016,t.HemisphereLight=Zn,t.HemisphereLightHelper=Yr,t.HemisphereLightProbe=yr,t.IcosahedronBufferGeometry=ri,t.IcosahedronGeometry=ni,t.ImageBitmapLoader=hr,t.ImageLoader=An,t.ImageUtils=pa,t.ImmediateRenderObject=Gr,t.InstancedBufferAttribute=sr,t.InstancedBufferGeometry=or,t.InstancedInterleavedBuffer=Ir,t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new P(t,e)},t.Int16BufferAttribute=P,t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new O(t,e)},t.Int32BufferAttribute=O,t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new C(t,e)},t.Int8BufferAttribute=C,t.IntType=1013,t.InterleavedBuffer=De,t.InterleavedBufferAttribute=Pe,t.Interpolant=ln,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.KeyframeTrack=dn,t.LOD=Ie,t.LatheBufferGeometry=Ui,t.LatheGeometry=Bi,t.Layers=E,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},t.LessDepth=2,t.LessEqualDepth=3,t.Light=Yn,t.LightProbe=vr,t.LightProbeHelper=Zr,t.LightShadow=Jn,t.Line=Be,t.Line3=Hr,t.LineBasicMaterial=Fe,t.LineCurve=Un,t.LineCurve3=Hn,t.LineDashedMaterial=sn,t.LineLoop=He,t.LinePieces=1,t.LineSegments=Ue,t.LineStrip=0,t.LinearEncoding=3e3,t.LinearFilter=1006,t.LinearInterpolant=hn,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearToneMapping=1,t.Loader=fr,t.LoaderUtils=$a,t.LoadingManager=wn,t.LogLuvEncoding=3003,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.Material=V,t.MaterialLoader=ar,t.Math=ua,t.Matrix3=a,t.Matrix4=g,t.MaxEquation=104,t.Mesh=Z,t.MeshBasicMaterial=Y,t.MeshDepthMaterial=pe,t.MeshDistanceMaterial=fe,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MeshLambertMaterial=an,t.MeshMatcapMaterial=on,t.MeshNormalMaterial=rn,t.MeshPhongMaterial=en,t.MeshPhysicalMaterial=tn,t.MeshStandardMaterial=$i,t.MeshToonMaterial=nn,t.MinEquation=103,t.MirroredRepeatWrapping=1002,t.MixOperation=1,t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=1003,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NeverDepth=0,t.NoBlending=0,t.NoColors=0,t.NoToneMapping=0,t.NormalBlending=1,t.NotEqualDepth=7,t.NumberKeyframeTrack=mn,t.Object3D=T,t.ObjectLoader=cr,t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=ii,t.OctahedronGeometry=ei,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=tr,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.ParametricBufferGeometry=Je,t.ParametricGeometry=Ze,t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Oe(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ge(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new je(t,e)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ge(t)},t.Path=qn,t.PerspectiveCamera=xe,t.Plane=f,t.PlaneBufferGeometry=j,t.PlaneGeometry=G,t.PlaneHelper=ra,t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new je(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ge(t)},t.PointLight=$n,t.PointLightHelper=qr,t.Points=je,t.PointsMaterial=Ge,t.PolarGridHelper=Qr,t.PolyhedronBufferGeometry=Ke,t.PolyhedronGeometry=Qe,t.PositionalAudio=Tr,t.PositionalAudioHelper=Kr,t.PropertyBinding=Lr,t.PropertyMixer=Ar,t.QuadraticBezierCurve=Gn,t.QuadraticBezierCurve3=jn,t.Quaternion=n,t.QuaternionKeyframeTrack=vn,t.QuaternionLinearInterpolant=gn,t.REVISION="105",t.RGBADepthPacking=3201,t.RGBAFormat=1023,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGBDEncoding=3006,t.RGBEEncoding=3002,t.RGBEFormat=1023,t.RGBFormat=1022,t.RGBM16Encoding=3005,t.RGBM7Encoding=3004,t.RGB_ETC1_Format=36196,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_S3TC_DXT1_Format=33776,t.RawShaderMaterial=Ki,t.Ray=q,t.Raycaster=zr,t.RectAreaLight=rr,t.RectAreaLightHelper=Xr,t.RedFormat=1028,t.ReinhardToneMapping=2,t.RepeatWrapping=1e3,t.ReverseSubtractEquation=102,t.RingBufferGeometry=Fi,t.RingGeometry=ki,t.Scene=Le,t.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},t.ShaderChunk=ma,t.ShaderLib=_a,t.ShaderMaterial=W,t.ShadowMaterial=Qi,t.Shape=Xn,t.ShapeBufferGeometry=Gi,t.ShapeGeometry=Hi,t.ShapePath=ur,t.ShapeUtils=Ua,t.ShortType=1011,t.Skeleton=Ne,t.SkeletonHelper=Wr,t.SkinnedMesh=ze,t.SmoothShading=2,t.Sphere=p,t.SphereBufferGeometry=Ni,t.SphereGeometry=zi,t.Spherical=Fr,t.SphericalHarmonics3=gr,t.SphericalReflectionMapping=305,t.Spline=ca,t.SplineCurve=Vn,t.SplineCurve3=la,t.SpotLight=Kn,t.SpotLightHelper=Vr,t.SpotLightShadow=Qn,t.Sprite=Oe,t.SpriteMaterial=Re,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StereoCamera=br,t.StringKeyframeTrack=yn,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=ti,t.TetrahedronGeometry=$e,t.TextBufferGeometry=Ii,t.TextGeometry=Oi,t.Texture=o,t.TextureLoader=Ln,t.TorusBufferGeometry=di,t.TorusGeometry=ui,t.TorusKnotBufferGeometry=hi,t.TorusKnotGeometry=ci,t.Triangle=X,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=li,t.TubeGeometry=si,t.UVMapping=300,t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new R(t,e)},t.Uint16BufferAttribute=R,t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new I(t,e)},t.Uint32BufferAttribute=I,t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new L(t,e)},t.Uint8BufferAttribute=L,t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new D(t,e)},t.Uint8ClampedBufferAttribute=D,t.Uncharted2ToneMapping=3,t.Uniform=Or,t.UniformsLib=ya,t.UniformsUtils=ga,t.UnsignedByteType=1009,t.UnsignedInt248Type=1020,t.UnsignedIntType=1014,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedShortType=1012,t.Vector2=i,t.Vector3=r,t.Vector4=s,t.VectorKeyframeTrack=_n,t.Vertex=function(t,e,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new r(t,e,i)},t.VertexColors=2,t.VertexNormalsHelper=jr,t.VideoTexture=Ve,t.WebGLMultisampleRenderTarget=c,t.WebGLRenderTarget=l,t.WebGLRenderTargetCube=h,t.WebGLRenderer=Se,t.WebGLUtils=ye,t.WireframeGeometry=Ye,t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ue(new Ye(t.geometry),new Fe({color:void 0!==e?e:16777215}))},t.WrapAroundEnding=2402,t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Mn(t)},t.ZeroCurvatureEnding=2400,t.ZeroFactor=200,t.ZeroSlopeEnding=2401,t.sRGBEncoding=3001,Object.defineProperty(t,"__esModule",{value:!0})})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).bootstrap=e()}(this,(function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,a,o=function(t){do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t},s=function(t){var e=t.getAttribute("data-bs-target");if(!e||"#"===e){var i=t.getAttribute("href");e=i&&"#"!==i?i.trim():null}return e},l=function(t){var e=s(t);return e&&document.querySelector(e)?e:null},c=function(t){var e=s(t);return e?document.querySelector(e):null},h=function(t){if(!t)return 0;var e=window.getComputedStyle(t),i=e.transitionDuration,n=e.transitionDelay,r=Number.parseFloat(i),a=Number.parseFloat(n);return r||a?(i=i.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(i)+Number.parseFloat(n))):0},u=function(t){t.dispatchEvent(new Event("transitionend"))},d=function(t){return(t[0]||t).nodeType},p=function(t,e){var i=!1,n=e+5;t.addEventListener("transitionend",(function e(){i=!0,t.removeEventListener("transitionend",e)})),setTimeout((function(){i||u(t)}),n)},f=function(t,e,i){Object.keys(i).forEach((function(n){var r,a=i[n],o=e[n],s=o&&d(o)?"element":null==(r=o)?""+r:{}.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(a).test(s))throw new Error(t.toUpperCase()+': Option "'+n+'" provided type "'+s+'" but expected type "'+a+'".')}))},m=function(t){if(!t)return!1;if(t.style&&t.parentNode&&t.parentNode.style){var e=getComputedStyle(t),i=getComputedStyle(t.parentNode);return"none"!==e.display&&"none"!==i.display&&"hidden"!==e.visibility}return!1},g=function(){return function(){}},v=function(t){return t.offsetHeight},y=function(){var t=window.jQuery;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},_=function(t){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()},b="rtl"===document.documentElement.dir,x=(r={},a=1,{set:function(t,e,i){void 0===t.bsKey&&(t.bsKey={key:e,id:a},a++),r[t.bsKey.id]=i},get:function(t,e){if(!t||void 0===t.bsKey)return null;var i=t.bsKey;return i.key===e?r[i.id]:null},delete:function(t,e){if(void 0!==t.bsKey){var i=t.bsKey;i.key===e&&(delete r[i.id],delete t.bsKey)}}}),w=function(t,e,i){x.set(t,e,i)},M=function(t,e){return x.get(t,e)},E=/[^.]*(?=\..*)\.|.*/,T=/\..*/,S=/::\d+$/,A={},C=1,L={mouseenter:"mouseover",mouseleave:"mouseout"},D=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function P(t,e){return e&&e+"::"+C++||t.uidEvent||C++}function R(t){var e=P(t);return t.uidEvent=e,A[e]=A[e]||{},A[e]}function O(t,e,i){void 0===i&&(i=null);for(var n=Object.keys(t),r=0,a=n.length;r<a;r++){var o=t[n[r]];if(o.originalHandler===e&&o.delegationSelector===i)return o}return null}function I(t,e,i){var n="string"==typeof e,r=n?i:e,a=t.replace(T,""),o=L[a];return o&&(a=o),D.has(a)||(a=t),[n,r,a]}function z(t,e,i,n,r){if("string"==typeof e&&t){i||(i=n,n=null);var a=I(e,i,n),o=a[0],s=a[1],l=a[2],c=R(t),h=c[l]||(c[l]={}),u=O(h,s,o?i:null);if(u)u.oneOff=u.oneOff&&r;else{var d=P(s,e.replace(E,"")),p=o?function(t,e,i){return function n(r){for(var a=t.querySelectorAll(e),o=r.target;o&&o!==this;o=o.parentNode)for(var s=a.length;s--;)if(a[s]===o)return r.delegateTarget=o,n.oneOff&&k.off(t,r.type,i),i.apply(o,[r]);return null}}(t,i,n):function(t,e){return function i(n){return n.delegateTarget=t,i.oneOff&&k.off(t,n.type,e),e.apply(t,[n])}}(t,i);p.delegationSelector=o?i:null,p.originalHandler=s,p.oneOff=r,p.uidEvent=d,h[d]=p,t.addEventListener(l,p,o)}}}function N(t,e,i,n,r){var a=O(e[i],n,r);a&&(t.removeEventListener(i,a,Boolean(r)),delete e[i][a.uidEvent])}var k={on:function(t,e,i,n){z(t,e,i,n,!1)},one:function(t,e,i,n){z(t,e,i,n,!0)},off:function(t,e,i,n){if("string"==typeof e&&t){var r=I(e,i,n),a=r[0],o=r[1],s=r[2],l=s!==e,c=R(t),h=e.startsWith(".");if(void 0===o){h&&Object.keys(c).forEach((function(i){!function(t,e,i,n){var r=e[i]||{};Object.keys(r).forEach((function(a){if(a.includes(n)){var o=r[a];N(t,e,i,o.originalHandler,o.delegationSelector)}}))}(t,c,i,e.slice(1))}));var u=c[s]||{};Object.keys(u).forEach((function(i){var n=i.replace(S,"");if(!l||e.includes(n)){var r=u[i];N(t,c,s,r.originalHandler,r.delegationSelector)}}))}else{if(!c||!c[s])return;N(t,c,s,o,a?i:null)}}},trigger:function(t,e,i){if("string"!=typeof e||!t)return null;var n,r=y(),a=e.replace(T,""),o=e!==a,s=D.has(a),l=!0,c=!0,h=!1,u=null;return o&&r&&(n=r.Event(e,i),r(t).trigger(n),l=!n.isPropagationStopped(),c=!n.isImmediatePropagationStopped(),h=n.isDefaultPrevented()),s?(u=document.createEvent("HTMLEvents")).initEvent(a,l,!0):u=new CustomEvent(e,{bubbles:l,cancelable:!0}),void 0!==i&&Object.keys(i).forEach((function(t){Object.defineProperty(u,t,{get:function(){return i[t]}})})),h&&u.preventDefault(),c&&t.dispatchEvent(u),u.defaultPrevented&&void 0!==n&&n.preventDefault(),u}},F=function(){function t(t){t&&(this._element=t,w(t,this.constructor.DATA_KEY,this))}return t.prototype.dispose=function(){(function(t,e){x.delete(t,e)})(this._element,this.constructor.DATA_KEY),this._element=null},t.getInstance=function(t){return M(t,this.DATA_KEY)},e(t,null,[{key:"VERSION",get:function(){return"5.0.0-beta1"}}]),t}(),B="alert",U=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var r=i.prototype;return r.close=function(t){var e=t?this._getRootElement(t):this._element,i=this._triggerCloseEvent(e);null===i||i.defaultPrevented||this._removeElement(e)},r._getRootElement=function(t){return c(t)||t.closest(".alert")},r._triggerCloseEvent=function(t){return k.trigger(t,"close.bs.alert")},r._removeElement=function(t){var e=this;if(t.classList.remove("show"),t.classList.contains("fade")){var i=h(t);k.one(t,"transitionend",(function(){return e._destroyElement(t)})),p(t,i)}else this._destroyElement(t)},r._destroyElement=function(t){t.parentNode&&t.parentNode.removeChild(t),k.trigger(t,"closed.bs.alert")},i.jQueryInterface=function(t){return this.each((function(){var e=M(this,"bs.alert");e||(e=new i(this)),"close"===t&&e[t](this)}))},i.handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},e(i,null,[{key:"DATA_KEY",get:function(){return"bs.alert"}}]),i}(F);k.on(document,"click.bs.alert.data-api",'[data-bs-dismiss="alert"]',U.handleDismiss(new U)),_((function(){var t=y();if(t){var e=t.fn[B];t.fn[B]=U.jQueryInterface,t.fn[B].Constructor=U,t.fn[B].noConflict=function(){return t.fn[B]=e,U.jQueryInterface}}}));var H=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.toggle=function(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))},i.jQueryInterface=function(t){return this.each((function(){var e=M(this,"bs.button");e||(e=new i(this)),"toggle"===t&&e[t]()}))},e(i,null,[{key:"DATA_KEY",get:function(){return"bs.button"}}]),i}(F);function G(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function j(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))}k.on(document,"click.bs.button.data-api",'[data-bs-toggle="button"]',(function(t){t.preventDefault();var e=t.target.closest('[data-bs-toggle="button"]'),i=M(e,"bs.button");i||(i=new H(e)),i.toggle()})),_((function(){var t=y();if(t){var e=t.fn.button;t.fn.button=H.jQueryInterface,t.fn.button.Constructor=H,t.fn.button.noConflict=function(){return t.fn.button=e,H.jQueryInterface}}}));var V={setDataAttribute:function(t,e,i){t.setAttribute("data-bs-"+j(e),i)},removeDataAttribute:function(t,e){t.removeAttribute("data-bs-"+j(e))},getDataAttributes:function(t){if(!t)return{};var e={};return Object.keys(t.dataset).filter((function(t){return t.startsWith("bs")})).forEach((function(i){var n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=G(t.dataset[i])})),e},getDataAttribute:function(t,e){return G(t.getAttribute("data-bs-"+j(e)))},offset:function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},position:function(t){return{top:t.offsetTop,left:t.offsetLeft}}},W={matches:function(t,e){return t.matches(e)},find:function(t,e){var i;return void 0===e&&(e=document.documentElement),(i=[]).concat.apply(i,Element.prototype.querySelectorAll.call(e,t))},findOne:function(t,e){return void 0===e&&(e=document.documentElement),Element.prototype.querySelector.call(e,t)},children:function(t,e){var i;return(i=[]).concat.apply(i,t.children).filter((function(t){return t.matches(e)}))},parents:function(t,e){for(var i=[],n=t.parentNode;n&&n.nodeType===Node.ELEMENT_NODE&&3!==n.nodeType;)this.matches(n,e)&&i.push(n),n=n.parentNode;return i},prev:function(t,e){for(var i=t.previousElementSibling;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next:function(t,e){for(var i=t.nextElementSibling;i;){if(this.matches(i,e))return[i];i=i.nextElementSibling}return[]}},q="carousel",X={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Y={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Z={TOUCH:"touch",PEN:"pen"},J=function(t){function r(e,i){var n;return(n=t.call(this,e)||this)._items=null,n._interval=null,n._activeElement=null,n._isPaused=!1,n._isSliding=!1,n.touchTimeout=null,n.touchStartX=0,n.touchDeltaX=0,n._config=n._getConfig(i),n._indicatorsElement=W.findOne(".carousel-indicators",n._element),n._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,n._pointerEvent=Boolean(window.PointerEvent),n._addEventListeners(),n}n(r,t);var a=r.prototype;return a.next=function(){this._isSliding||this._slide("next")},a.nextWhenVisible=function(){!document.hidden&&m(this._element)&&this.next()},a.prev=function(){this._isSliding||this._slide("prev")},a.pause=function(t){t||(this._isPaused=!0),W.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(u(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},a.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},a.to=function(t){var e=this;this._activeElement=W.findOne(".active.carousel-item",this._element);var i=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)k.one(this._element,"slid.bs.carousel",(function(){return e.to(t)}));else{if(i===t)return this.pause(),void this.cycle();var n=t>i?"next":"prev";this._slide(n,this._items[t])}},a.dispose=function(){t.prototype.dispose.call(this),k.off(this._element,".bs.carousel"),this._items=null,this._config=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},a._getConfig=function(t){return t=i({},X,t),f(q,t,Y),t},a._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;this.touchDeltaX=0,e>0&&this.prev(),e<0&&this.next()}},a._addEventListeners=function(){var t=this;this._config.keyboard&&k.on(this._element,"keydown.bs.carousel",(function(e){return t._keydown(e)})),"hover"===this._config.pause&&(k.on(this._element,"mouseenter.bs.carousel",(function(e){return t.pause(e)})),k.on(this._element,"mouseleave.bs.carousel",(function(e){return t.cycle(e)}))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()},a._addTouchEventListeners=function(){var t=this,e=function(e){t._pointerEvent&&Z[e.pointerType.toUpperCase()]?t.touchStartX=e.clientX:t._pointerEvent||(t.touchStartX=e.touches[0].clientX)},i=function(e){t._pointerEvent&&Z[e.pointerType.toUpperCase()]&&(t.touchDeltaX=e.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout((function(e){return t.cycle(e)}),500+t._config.interval))};W.find(".carousel-item img",this._element).forEach((function(t){k.on(t,"dragstart.bs.carousel",(function(t){return t.preventDefault()}))})),this._pointerEvent?(k.on(this._element,"pointerdown.bs.carousel",(function(t){return e(t)})),k.on(this._element,"pointerup.bs.carousel",(function(t){return i(t)})),this._element.classList.add("pointer-event")):(k.on(this._element,"touchstart.bs.carousel",(function(t){return e(t)})),k.on(this._element,"touchmove.bs.carousel",(function(e){return function(e){e.touches&&e.touches.length>1?t.touchDeltaX=0:t.touchDeltaX=e.touches[0].clientX-t.touchStartX}(e)})),k.on(this._element,"touchend.bs.carousel",(function(t){return i(t)})))},a._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.key){case"ArrowLeft":t.preventDefault(),this.prev();break;case"ArrowRight":t.preventDefault(),this.next()}},a._getItemIndex=function(t){return this._items=t&&t.parentNode?W.find(".carousel-item",t.parentNode):[],this._items.indexOf(t)},a._getItemByDirection=function(t,e){var i="next"===t,n="prev"===t,r=this._getItemIndex(e),a=this._items.length-1;if((n&&0===r||i&&r===a)&&!this._config.wrap)return e;var o=(r+("prev"===t?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},a._triggerSlideEvent=function(t,e){var i=this._getItemIndex(t),n=this._getItemIndex(W.findOne(".active.carousel-item",this._element));return k.trigger(this._element,"slide.bs.carousel",{relatedTarget:t,direction:e,from:n,to:i})},a._setActiveIndicatorElement=function(t){if(this._indicatorsElement){for(var e=W.find(".active",this._indicatorsElement),i=0;i<e.length;i++)e[i].classList.remove("active");var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&n.classList.add("active")}},a._updateInterval=function(){var t=this._activeElement||W.findOne(".active.carousel-item",this._element);if(t){var e=Number.parseInt(t.getAttribute("data-bs-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}},a._slide=function(t,e){var i,n,r,a=this,o=W.findOne(".active.carousel-item",this._element),s=this._getItemIndex(o),l=e||o&&this._getItemByDirection(t,o),c=this._getItemIndex(l),u=Boolean(this._interval);if("next"===t?(i="carousel-item-start",n="carousel-item-next",r="left"):(i="carousel-item-end",n="carousel-item-prev",r="right"),l&&l.classList.contains("active"))this._isSliding=!1;else if(!this._triggerSlideEvent(l,r).defaultPrevented&&o&&l){if(this._isSliding=!0,u&&this.pause(),this._setActiveIndicatorElement(l),this._activeElement=l,this._element.classList.contains("slide")){l.classList.add(n),v(l),o.classList.add(i),l.classList.add(i);var d=h(o);k.one(o,"transitionend",(function(){l.classList.remove(i,n),l.classList.add("active"),o.classList.remove("active",n,i),a._isSliding=!1,setTimeout((function(){k.trigger(a._element,"slid.bs.carousel",{relatedTarget:l,direction:r,from:s,to:c})}),0)})),p(o,d)}else o.classList.remove("active"),l.classList.add("active"),this._isSliding=!1,k.trigger(this._element,"slid.bs.carousel",{relatedTarget:l,direction:r,from:s,to:c});u&&this.cycle()}},r.carouselInterface=function(t,e){var n=M(t,"bs.carousel"),a=i({},X,V.getDataAttributes(t));"object"==typeof e&&(a=i({},a,e));var o="string"==typeof e?e:a.slide;if(n||(n=new r(t,a)),"number"==typeof e)n.to(e);else if("string"==typeof o){if(void 0===n[o])throw new TypeError('No method named "'+o+'"');n[o]()}else a.interval&&a.ride&&(n.pause(),n.cycle())},r.jQueryInterface=function(t){return this.each((function(){r.carouselInterface(this,t)}))},r.dataApiClickHandler=function(t){var e=c(this);if(e&&e.classList.contains("carousel")){var n=i({},V.getDataAttributes(e),V.getDataAttributes(this)),a=this.getAttribute("data-bs-slide-to");a&&(n.interval=!1),r.carouselInterface(e,n),a&&M(e,"bs.carousel").to(a),t.preventDefault()}},e(r,null,[{key:"Default",get:function(){return X}},{key:"DATA_KEY",get:function(){return"bs.carousel"}}]),r}(F);k.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",J.dataApiClickHandler),k.on(window,"load.bs.carousel.data-api",(function(){for(var t=W.find('[data-bs-ride="carousel"]'),e=0,i=t.length;e<i;e++)J.carouselInterface(t[e],M(t[e],"bs.carousel"))})),_((function(){var t=y();if(t){var e=t.fn[q];t.fn[q]=J.jQueryInterface,t.fn[q].Constructor=J,t.fn[q].noConflict=function(){return t.fn[q]=e,J.jQueryInterface}}}));var Q="collapse",K={toggle:!0,parent:""},$={toggle:"boolean",parent:"(string|element)"},tt=function(t){function r(e,i){var n;(n=t.call(this,e)||this)._isTransitioning=!1,n._config=n._getConfig(i),n._triggerArray=W.find('[data-bs-toggle="collapse"][href="#'+e.id+'"],[data-bs-toggle="collapse"][data-bs-target="#'+e.id+'"]');for(var r=W.find('[data-bs-toggle="collapse"]'),a=0,o=r.length;a<o;a++){var s=r[a],c=l(s),h=W.find(c).filter((function(t){return t===e}));null!==c&&h.length&&(n._selector=c,n._triggerArray.push(s))}return n._parent=n._config.parent?n._getParent():null,n._config.parent||n._addAriaAndCollapsedClass(n._element,n._triggerArray),n._config.toggle&&n.toggle(),n}n(r,t);var a=r.prototype;return a.toggle=function(){this._element.classList.contains("show")?this.hide():this.show()},a.show=function(){var t=this;if(!this._isTransitioning&&!this._element.classList.contains("show")){var e,i;this._parent&&0===(e=W.find(".show, .collapsing",this._parent).filter((function(e){return"string"==typeof t._config.parent?e.getAttribute("data-bs-parent")===t._config.parent:e.classList.contains("collapse")}))).length&&(e=null);var n=W.findOne(this._selector);if(e){var a=e.find((function(t){return n!==t}));if((i=a?M(a,"bs.collapse"):null)&&i._isTransitioning)return}if(!k.trigger(this._element,"show.bs.collapse").defaultPrevented){e&&e.forEach((function(t){n!==t&&r.collapseInterface(t,"hide"),i||w(t,"bs.collapse",null)}));var o=this._getDimension();this._element.classList.remove("collapse"),this._element.classList.add("collapsing"),this._element.style[o]=0,this._triggerArray.length&&this._triggerArray.forEach((function(t){t.classList.remove("collapsed"),t.setAttribute("aria-expanded",!0)})),this.setTransitioning(!0);var s="scroll"+(o[0].toUpperCase()+o.slice(1)),l=h(this._element);k.one(this._element,"transitionend",(function(){t._element.classList.remove("collapsing"),t._element.classList.add("collapse","show"),t._element.style[o]="",t.setTransitioning(!1),k.trigger(t._element,"shown.bs.collapse")})),p(this._element,l),this._element.style[o]=this._element[s]+"px"}}},a.hide=function(){var t=this;if(!this._isTransitioning&&this._element.classList.contains("show")&&!k.trigger(this._element,"hide.bs.collapse").defaultPrevented){var e=this._getDimension();this._element.style[e]=this._element.getBoundingClientRect()[e]+"px",v(this._element),this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show");var i=this._triggerArray.length;if(i>0)for(var n=0;n<i;n++){var r=this._triggerArray[n],a=c(r);a&&!a.classList.contains("show")&&(r.classList.add("collapsed"),r.setAttribute("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[e]="";var o=h(this._element);k.one(this._element,"transitionend",(function(){t.setTransitioning(!1),t._element.classList.remove("collapsing"),t._element.classList.add("collapse"),k.trigger(t._element,"hidden.bs.collapse")})),p(this._element,o)}},a.setTransitioning=function(t){this._isTransitioning=t},a.dispose=function(){t.prototype.dispose.call(this),this._config=null,this._parent=null,this._triggerArray=null,this._isTransitioning=null},a._getConfig=function(t){return(t=i({},K,t)).toggle=Boolean(t.toggle),f(Q,t,$),t},a._getDimension=function(){return this._element.classList.contains("width")?"width":"height"},a._getParent=function(){var t=this,e=this._config.parent;d(e)?void 0===e.jquery&&void 0===e[0]||(e=e[0]):e=W.findOne(e);var i='[data-bs-toggle="collapse"][data-bs-parent="'+e+'"]';return W.find(i,e).forEach((function(e){var i=c(e);t._addAriaAndCollapsedClass(i,[e])})),e},a._addAriaAndCollapsedClass=function(t,e){if(t&&e.length){var i=t.classList.contains("show");e.forEach((function(t){i?t.classList.remove("collapsed"):t.classList.add("collapsed"),t.setAttribute("aria-expanded",i)}))}},r.collapseInterface=function(t,e){var n=M(t,"bs.collapse"),a=i({},K,V.getDataAttributes(t),"object"==typeof e&&e?e:{});if(!n&&a.toggle&&"string"==typeof e&&/show|hide/.test(e)&&(a.toggle=!1),n||(n=new r(t,a)),"string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'+e+'"');n[e]()}},r.jQueryInterface=function(t){return this.each((function(){r.collapseInterface(this,t)}))},e(r,null,[{key:"Default",get:function(){return K}},{key:"DATA_KEY",get:function(){return"bs.collapse"}}]),r}(F);k.on(document,"click.bs.collapse.data-api",'[data-bs-toggle="collapse"]',(function(t){"A"===t.target.tagName&&t.preventDefault();var e=V.getDataAttributes(this),i=l(this);W.find(i).forEach((function(t){var i,n=M(t,"bs.collapse");n?(null===n._parent&&"string"==typeof e.parent&&(n._config.parent=e.parent,n._parent=n._getParent()),i="toggle"):i=e,tt.collapseInterface(t,i)}))})),_((function(){var t=y();if(t){var e=t.fn[Q];t.fn[Q]=tt.jQueryInterface,t.fn[Q].Constructor=tt,t.fn[Q].noConflict=function(){return t.fn[Q]=e,tt.jQueryInterface}}}));var et="top",it="bottom",nt="right",rt="left",at=[et,it,nt,rt],ot=at.reduce((function(t,e){return t.concat([e+"-start",e+"-end"])}),[]),st=[].concat(at,["auto"]).reduce((function(t,e){return t.concat([e,e+"-start",e+"-end"])}),[]),lt=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ct(t){return t?(t.nodeName||"").toLowerCase():null}function ht(t){if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ut(t){return t instanceof ht(t).Element||t instanceof Element}function dt(t){return t instanceof ht(t).HTMLElement||t instanceof HTMLElement}var pt={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},r=e.elements[t];dt(r)&&ct(r)&&(Object.assign(r.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],r=e.attributes[t]||{},a=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]="",t}),{});dt(n)&&ct(n)&&(Object.assign(n.style,a),Object.keys(r).forEach((function(t){n.removeAttribute(t)})))}))}},requires:["computeStyles"]};function ft(t){return t.split("-")[0]}function mt(t){return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}}function gt(t,e){var i,n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&((i=n)instanceof ht(i).ShadowRoot||i instanceof ShadowRoot)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function vt(t){return ht(t).getComputedStyle(t)}function yt(t){return["table","td","th"].indexOf(ct(t))>=0}function _t(t){return((ut(t)?t.ownerDocument:t.document)||window.document).documentElement}function bt(t){return"html"===ct(t)?t:t.assignedSlot||t.parentNode||t.host||_t(t)}function xt(t){if(!dt(t)||"fixed"===vt(t).position)return null;var e=t.offsetParent;if(e){var i=_t(e);if("body"===ct(e)&&"static"===vt(e).position&&"static"!==vt(i).position)return i}return e}function wt(t){for(var e=ht(t),i=xt(t);i&&yt(i)&&"static"===vt(i).position;)i=xt(i);return i&&"body"===ct(i)&&"static"===vt(i).position?e:i||function(t){for(var e=bt(t);dt(e)&&["html","body"].indexOf(ct(e))<0;){var i=vt(e);if("none"!==i.transform||"none"!==i.perspective||i.willChange&&"auto"!==i.willChange)return e;e=e.parentNode}return null}(t)||e}function Mt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Et(t,e,i){return Math.max(t,Math.min(e,i))}function Tt(t){return Object.assign(Object.assign({},{top:0,right:0,bottom:0,left:0}),t)}function St(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}var At={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i=t.state,n=t.name,r=i.elements.arrow,a=i.modifiersData.popperOffsets,o=ft(i.placement),s=Mt(o),l=[rt,nt].indexOf(o)>=0?"height":"width";if(r&&a){var c=i.modifiersData[n+"#persistent"].padding,h=mt(r),u="y"===s?et:rt,d="y"===s?it:nt,p=i.rects.reference[l]+i.rects.reference[s]-a[s]-i.rects.popper[l],f=a[s]-i.rects.reference[s],m=wt(r),g=m?"y"===s?m.clientHeight||0:m.clientWidth||0:0,v=p/2-f/2,y=c[u],_=g-h[l]-c[d],b=g/2-h[l]/2+v,x=Et(y,b,_),w=s;i.modifiersData[n]=((e={})[w]=x,e.centerOffset=x-b,e)}},effect:function(t){var e=t.state,i=t.options,n=t.name,r=i.element,a=void 0===r?"[data-popper-arrow]":r,o=i.padding,s=void 0===o?0:o;null!=a&&("string"!=typeof a||(a=e.elements.popper.querySelector(a)))&&gt(e.elements.popper,a)&&(e.elements.arrow=a,e.modifiersData[n+"#persistent"]={padding:Tt("number"!=typeof s?s:St(s,at))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},Ct={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Lt(t){var e,i=t.popper,n=t.popperRect,r=t.placement,a=t.offsets,o=t.position,s=t.gpuAcceleration,l=t.adaptive,c=function(t){var e=t.x,i=t.y,n=window.devicePixelRatio||1;return{x:Math.round(e*n)/n||0,y:Math.round(i*n)/n||0}}(a),h=c.x,u=c.y,d=a.hasOwnProperty("x"),p=a.hasOwnProperty("y"),f=rt,m=et,g=window;if(l){var v=wt(i);v===ht(i)&&(v=_t(i)),r===et&&(m=it,u-=v.clientHeight-n.height,u*=s?1:-1),r===rt&&(f=nt,h-=v.clientWidth-n.width,h*=s?1:-1)}var y,_=Object.assign({position:o},l&&Ct);return s?Object.assign(Object.assign({},_),{},((y={})[m]=p?"0":"",y[f]=d?"0":"",y.transform=(g.devicePixelRatio||1)<2?"translate("+h+"px, "+u+"px)":"translate3d("+h+"px, "+u+"px, 0)",y)):Object.assign(Object.assign({},_),{},((e={})[m]=p?u+"px":"",e[f]=d?h+"px":"",e.transform="",e))}var Dt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,n=i.gpuAcceleration,r=void 0===n||n,a=i.adaptive,o=void 0===a||a,s={placement:ft(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign(Object.assign({},e.styles.popper),Lt(Object.assign(Object.assign({},s),{},{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign(Object.assign({},e.styles.arrow),Lt(Object.assign(Object.assign({},s),{},{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1})))),e.attributes.popper=Object.assign(Object.assign({},e.attributes.popper),{},{"data-popper-placement":e.placement})},data:{}},Pt={passive:!0},Rt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,r=n.scroll,a=void 0===r||r,o=n.resize,s=void 0===o||o,l=ht(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&c.forEach((function(t){t.addEventListener("scroll",i.update,Pt)})),s&&l.addEventListener("resize",i.update,Pt),function(){a&&c.forEach((function(t){t.removeEventListener("scroll",i.update,Pt)})),s&&l.removeEventListener("resize",i.update,Pt)}},data:{}},Ot={left:"right",right:"left",bottom:"top",top:"bottom"};function It(t){return t.replace(/left|right|bottom|top/g,(function(t){return Ot[t]}))}var zt={start:"end",end:"start"};function Nt(t){return t.replace(/start|end/g,(function(t){return zt[t]}))}function kt(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function Ft(t){var e=ht(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Bt(t){return kt(_t(t)).left+Ft(t).scrollLeft}function Ut(t){var e=vt(t),i=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+n)}function Ht(t,e){void 0===e&&(e=[]);var i=function t(e){return["html","body","#document"].indexOf(ct(e))>=0?e.ownerDocument.body:dt(e)&&Ut(e)?e:t(bt(e))}(t),n="body"===ct(i),r=ht(i),a=n?[r].concat(r.visualViewport||[],Ut(i)?i:[]):i,o=e.concat(a);return n?o:o.concat(Ht(bt(a)))}function Gt(t){return Object.assign(Object.assign({},t),{},{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function jt(t,e){return"viewport"===e?Gt(function(t){var e=ht(t),i=_t(t),n=e.visualViewport,r=i.clientWidth,a=i.clientHeight,o=0,s=0;return n&&(r=n.width,a=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,s=n.offsetTop)),{width:r,height:a,x:o+Bt(t),y:s}}(t)):dt(e)?function(t){var e=kt(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):Gt(function(t){var e=_t(t),i=Ft(t),n=t.ownerDocument.body,r=Math.max(e.scrollWidth,e.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),a=Math.max(e.scrollHeight,e.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),o=-i.scrollLeft+Bt(t),s=-i.scrollTop;return"rtl"===vt(n||e).direction&&(o+=Math.max(e.clientWidth,n?n.clientWidth:0)-r),{width:r,height:a,x:o,y:s}}(_t(t)))}function Vt(t){return t.split("-")[1]}function Wt(t){var e,i=t.reference,n=t.element,r=t.placement,a=r?ft(r):null,o=r?Vt(r):null,s=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(a){case et:e={x:s,y:i.y-n.height};break;case it:e={x:s,y:i.y+i.height};break;case nt:e={x:i.x+i.width,y:l};break;case rt:e={x:i.x-n.width,y:l};break;default:e={x:i.x,y:i.y}}var c=a?Mt(a):null;if(null!=c){var h="y"===c?"height":"width";switch(o){case"start":e[c]=Math.floor(e[c])-Math.floor(i[h]/2-n[h]/2);break;case"end":e[c]=Math.floor(e[c])+Math.ceil(i[h]/2-n[h]/2)}}return e}function qt(t,e){void 0===e&&(e={});var i=e,n=i.placement,r=void 0===n?t.placement:n,a=i.boundary,o=void 0===a?"clippingParents":a,s=i.rootBoundary,l=void 0===s?"viewport":s,c=i.elementContext,h=void 0===c?"popper":c,u=i.altBoundary,d=void 0!==u&&u,p=i.padding,f=void 0===p?0:p,m=Tt("number"!=typeof f?f:St(f,at)),g="popper"===h?"reference":"popper",v=t.elements.reference,y=t.rects.popper,_=t.elements[d?g:h],b=function(t,e,i){var n="clippingParents"===e?function(t){var e=Ht(bt(t)),i=["absolute","fixed"].indexOf(vt(t).position)>=0&&dt(t)?wt(t):t;return ut(i)?e.filter((function(t){return ut(t)&&gt(t,i)&&"body"!==ct(t)})):[]}(t):[].concat(e),r=[].concat(n,[i]),a=r[0],o=r.reduce((function(e,i){var n=jt(t,i);return e.top=Math.max(n.top,e.top),e.right=Math.min(n.right,e.right),e.bottom=Math.min(n.bottom,e.bottom),e.left=Math.max(n.left,e.left),e}),jt(t,a));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(ut(_)?_:_.contextElement||_t(t.elements.popper),o,l),x=kt(v),w=Wt({reference:x,element:y,strategy:"absolute",placement:r}),M=Gt(Object.assign(Object.assign({},y),w)),E="popper"===h?M:x,T={top:b.top-E.top+m.top,bottom:E.bottom-b.bottom+m.bottom,left:b.left-E.left+m.left,right:E.right-b.right+m.right},S=t.modifiersData.offset;if("popper"===h&&S){var A=S[r];Object.keys(T).forEach((function(t){var e=[nt,it].indexOf(t)>=0?1:-1,i=[et,it].indexOf(t)>=0?"y":"x";T[t]+=A[i]*e}))}return T}var Xt={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var r=i.mainAxis,a=void 0===r||r,o=i.altAxis,s=void 0===o||o,l=i.fallbackPlacements,c=i.padding,h=i.boundary,u=i.rootBoundary,d=i.altBoundary,p=i.flipVariations,f=void 0===p||p,m=i.allowedAutoPlacements,g=e.options.placement,v=ft(g),y=l||(v!==g&&f?function(t){if("auto"===ft(t))return[];var e=It(t);return[Nt(t),e,Nt(e)]}(g):[It(g)]),_=[g].concat(y).reduce((function(t,i){return t.concat("auto"===ft(i)?function(t,e){void 0===e&&(e={});var i=e,n=i.placement,r=i.boundary,a=i.rootBoundary,o=i.padding,s=i.flipVariations,l=i.allowedAutoPlacements,c=void 0===l?st:l,h=Vt(n),u=h?s?ot:ot.filter((function(t){return Vt(t)===h})):at,d=u.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=u);var p=d.reduce((function(e,i){return e[i]=qt(t,{placement:i,boundary:r,rootBoundary:a,padding:o})[ft(i)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:i,boundary:h,rootBoundary:u,padding:c,flipVariations:f,allowedAutoPlacements:m}):i)}),[]),b=e.rects.reference,x=e.rects.popper,w=new Map,M=!0,E=_[0],T=0;T<_.length;T++){var S=_[T],A=ft(S),C="start"===Vt(S),L=[et,it].indexOf(A)>=0,D=L?"width":"height",P=qt(e,{placement:S,boundary:h,rootBoundary:u,altBoundary:d,padding:c}),R=L?C?nt:rt:C?it:et;b[D]>x[D]&&(R=It(R));var O=It(R),I=[];if(a&&I.push(P[A]<=0),s&&I.push(P[R]<=0,P[O]<=0),I.every((function(t){return t}))){E=S,M=!1;break}w.set(S,I)}if(M)for(var z=function(t){var e=_.find((function(e){var i=w.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return E=e,"break"},N=f?3:1;N>0&&"break"!==z(N);N--);e.placement!==E&&(e.modifiersData[n]._skip=!0,e.placement=E,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Yt(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Zt(t){return[et,nt,it,rt].some((function(e){return t[e]>=0}))}var Jt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,r=e.rects.popper,a=e.modifiersData.preventOverflow,o=qt(e,{elementContext:"reference"}),s=qt(e,{altBoundary:!0}),l=Yt(o,n),c=Yt(s,r,a),h=Zt(l),u=Zt(c);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign(Object.assign({},e.attributes.popper),{},{"data-popper-reference-hidden":h,"data-popper-escaped":u})}},Qt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,i=t.options,n=t.name,r=i.offset,a=void 0===r?[0,0]:r,o=st.reduce((function(t,i){return t[i]=function(t,e,i){var n=ft(t),r=[rt,et].indexOf(n)>=0?-1:1,a="function"==typeof i?i(Object.assign(Object.assign({},e),{},{placement:t})):i,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[rt,nt].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}(i,e.rects,a),t}),{}),s=o[e.placement],l=s.x,c=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[n]=o}},Kt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=Wt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},$t={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name,r=i.mainAxis,a=void 0===r||r,o=i.altAxis,s=void 0!==o&&o,l=i.boundary,c=i.rootBoundary,h=i.altBoundary,u=i.padding,d=i.tether,p=void 0===d||d,f=i.tetherOffset,m=void 0===f?0:f,g=qt(e,{boundary:l,rootBoundary:c,padding:u,altBoundary:h}),v=ft(e.placement),y=Vt(e.placement),_=!y,b=Mt(v),x="x"===b?"y":"x",w=e.modifiersData.popperOffsets,M=e.rects.reference,E=e.rects.popper,T="function"==typeof m?m(Object.assign(Object.assign({},e.rects),{},{placement:e.placement})):m,S={x:0,y:0};if(w){if(a){var A="y"===b?et:rt,C="y"===b?it:nt,L="y"===b?"height":"width",D=w[b],P=w[b]+g[A],R=w[b]-g[C],O=p?-E[L]/2:0,I="start"===y?M[L]:E[L],z="start"===y?-E[L]:-M[L],N=e.elements.arrow,k=p&&N?mt(N):{width:0,height:0},F=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=F[A],U=F[C],H=Et(0,M[L],k[L]),G=_?M[L]/2-O-H-B-T:I-H-B-T,j=_?-M[L]/2+O+H+U+T:z+H+U+T,V=e.elements.arrow&&wt(e.elements.arrow),W=V?"y"===b?V.clientTop||0:V.clientLeft||0:0,q=e.modifiersData.offset?e.modifiersData.offset[e.placement][b]:0,X=w[b]+G-q-W,Y=w[b]+j-q,Z=Et(p?Math.min(P,X):P,D,p?Math.max(R,Y):R);w[b]=Z,S[b]=Z-D}if(s){var J="x"===b?et:rt,Q="x"===b?it:nt,K=w[x],$=Et(K+g[J],K,K-g[Q]);w[x]=$,S[x]=$-K}e.modifiersData[n]=S}},requiresIfExists:["offset"]};function te(t,e,i){void 0===i&&(i=!1);var n,r,a=_t(e),o=kt(t),s=dt(e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!i)&&(("body"!==ct(e)||Ut(a))&&(l=(n=e)!==ht(n)&&dt(n)?{scrollLeft:(r=n).scrollLeft,scrollTop:r.scrollTop}:Ft(n)),dt(e)?((c=kt(e)).x+=e.clientLeft,c.y+=e.clientTop):a&&(c.x=Bt(a))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}var ee={placement:"bottom",modifiers:[],strategy:"absolute"};function ie(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function ne(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,r=e.defaultOptions,a=void 0===r?ee:r;return function(t,e,i){void 0===i&&(i=a);var r,o,s={placement:"bottom",orderedModifiers:[],options:Object.assign(Object.assign({},ee),a),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,h={state:s,setOptions:function(i){u(),s.options=Object.assign(Object.assign(Object.assign({},a),s.options),i),s.scrollParents={reference:ut(t)?Ht(t):t.contextElement?Ht(t.contextElement):[],popper:Ht(e)};var r,o,c=function(t){var e=function(t){var e=new Map,i=new Set,n=[];return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||function t(r){i.add(r.name),[].concat(r.requires||[],r.requiresIfExists||[]).forEach((function(n){if(!i.has(n)){var r=e.get(n);r&&t(r)}})),n.push(r)}(t)})),n}(t);return lt.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}((r=[].concat(n,s.options.modifiers),o=r.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign(Object.assign(Object.assign({},i),e),{},{options:Object.assign(Object.assign({},i.options),e.options),data:Object.assign(Object.assign({},i.data),e.data)}):e,t}),{}),Object.keys(o).map((function(t){return o[t]}))));return s.orderedModifiers=c.filter((function(t){return t.enabled})),s.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,r=t.effect;if("function"==typeof r){var a=r({state:s,name:e,instance:h,options:n});l.push(a||function(){})}})),h.update()},forceUpdate:function(){if(!c){var t=s.elements,e=t.reference,i=t.popper;if(ie(e,i)){s.rects={reference:te(e,wt(i),"fixed"===s.options.strategy),popper:mt(i)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(t){return s.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<s.orderedModifiers.length;n++)if(!0!==s.reset){var r=s.orderedModifiers[n],a=r.fn,o=r.options,l=void 0===o?{}:o,u=r.name;"function"==typeof a&&(s=a({state:s,options:l,name:u,instance:h})||s)}else s.reset=!1,n=-1}}},update:(r=function(){return new Promise((function(t){h.forceUpdate(),t(s)}))},function(){return o||(o=new Promise((function(t){Promise.resolve().then((function(){o=void 0,t(r())}))}))),o}),destroy:function(){u(),c=!0}};if(!ie(t,e))return h;function u(){l.forEach((function(t){return t()})),l=[]}return h.setOptions(i).then((function(t){!c&&i.onFirstUpdate&&i.onFirstUpdate(t)})),h}}var re=ne(),ae=ne({defaultModifiers:[Rt,Kt,Dt,pt]}),oe=ne({defaultModifiers:[Rt,Kt,Dt,pt,Qt,Xt,$t,At,Jt]}),se=Object.freeze({__proto__:null,popperGenerator:ne,detectOverflow:qt,createPopperBase:re,createPopper:oe,createPopperLite:ae,top:et,bottom:it,right:nt,left:rt,auto:"auto",basePlacements:at,start:"start",end:"end",clippingParents:"clippingParents",viewport:"viewport",popper:"popper",reference:"reference",variationPlacements:ot,placements:st,beforeRead:"beforeRead",read:"read",afterRead:"afterRead",beforeMain:"beforeMain",main:"main",afterMain:"afterMain",beforeWrite:"beforeWrite",write:"write",afterWrite:"afterWrite",modifierPhases:lt,applyStyles:pt,arrow:At,computeStyles:Dt,eventListeners:Rt,flip:Xt,hide:Jt,offset:Qt,popperOffsets:Kt,preventOverflow:$t}),le="dropdown",ce=new RegExp("ArrowUp|ArrowDown|Escape"),he=b?"top-end":"top-start",ue=b?"top-start":"top-end",de=b?"bottom-end":"bottom-start",pe=b?"bottom-start":"bottom-end",fe=b?"left-start":"right-start",me=b?"right-start":"left-start",ge={offset:0,flip:!0,boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null},ve={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},ye=function(t){function r(e,i){var n;return(n=t.call(this,e)||this)._popper=null,n._config=n._getConfig(i),n._menu=n._getMenuElement(),n._inNavbar=n._detectNavbar(),n._addEventListeners(),n}n(r,t);var a=r.prototype;return a.toggle=function(){if(!this._element.disabled&&!this._element.classList.contains("disabled")){var t=this._element.classList.contains("show");r.clearMenus(),t||this.show()}},a.show=function(){if(!(this._element.disabled||this._element.classList.contains("disabled")||this._menu.classList.contains("show"))){var t=r.getParentFromElement(this._element),e={relatedTarget:this._element};if(!k.trigger(this._element,"show.bs.dropdown",e).defaultPrevented){if(!this._inNavbar){if(void 0===se)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var i=this._element;"parent"===this._config.reference?i=t:d(this._config.reference)&&(i=this._config.reference,void 0!==this._config.reference.jquery&&(i=this._config.reference[0])),this._popper=oe(i,this._menu,this._getPopperConfig())}var n;"ontouchstart"in document.documentElement&&!t.closest(".navbar-nav")&&(n=[]).concat.apply(n,document.body.children).forEach((function(t){return k.on(t,"mouseover",null,(function(){}))})),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.toggle("show"),this._element.classList.toggle("show"),k.trigger(t,"shown.bs.dropdown",e)}}},a.hide=function(){if(!this._element.disabled&&!this._element.classList.contains("disabled")&&this._menu.classList.contains("show")){var t=r.getParentFromElement(this._element),e={relatedTarget:this._element};k.trigger(t,"hide.bs.dropdown",e).defaultPrevented||(this._popper&&this._popper.destroy(),this._menu.classList.toggle("show"),this._element.classList.toggle("show"),k.trigger(t,"hidden.bs.dropdown",e))}},a.dispose=function(){t.prototype.dispose.call(this),k.off(this._element,".bs.dropdown"),this._menu=null,this._popper&&(this._popper.destroy(),this._popper=null)},a.update=function(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()},a._addEventListeners=function(){var t=this;k.on(this._element,"click.bs.dropdown",(function(e){e.preventDefault(),e.stopPropagation(),t.toggle()}))},a._getConfig=function(t){return t=i({},this.constructor.Default,V.getDataAttributes(this._element),t),f(le,t,this.constructor.DefaultType),t},a._getMenuElement=function(){return W.next(this._element,".dropdown-menu")[0]},a._getPlacement=function(){var t=this._element.parentNode;if(t.classList.contains("dropend"))return fe;if(t.classList.contains("dropstart"))return me;var e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?ue:he:e?pe:de},a._detectNavbar=function(){return null!==this._element.closest(".navbar")},a._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{altBoundary:this._config.flip,rootBoundary:this._config.boundary}}]};return"static"===this._config.display&&(t.modifiers=[{name:"applyStyles",enabled:!1}]),i({},t,this._config.popperConfig)},r.dropdownInterface=function(t,e){var i=M(t,"bs.dropdown");if(i||(i=new r(t,"object"==typeof e?e:null)),"string"==typeof e){if(void 0===i[e])throw new TypeError('No method named "'+e+'"');i[e]()}},r.jQueryInterface=function(t){return this.each((function(){r.dropdownInterface(this,t)}))},r.clearMenus=function(t){if(!t||2!==t.button&&("keyup"!==t.type||"Tab"===t.key))for(var e=W.find('[data-bs-toggle="dropdown"]'),i=0,n=e.length;i<n;i++){var a=r.getParentFromElement(e[i]),o=M(e[i],"bs.dropdown"),s={relatedTarget:e[i]};if(t&&"click"===t.type&&(s.clickEvent=t),o){var l,c=o._menu;if(e[i].classList.contains("show")&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&"Tab"===t.key)&&c.contains(t.target)||k.trigger(a,"hide.bs.dropdown",s).defaultPrevented))"ontouchstart"in document.documentElement&&(l=[]).concat.apply(l,document.body.children).forEach((function(t){return k.off(t,"mouseover",null,(function(){}))})),e[i].setAttribute("aria-expanded","false"),o._popper&&o._popper.destroy(),c.classList.remove("show"),e[i].classList.remove("show"),k.trigger(a,"hidden.bs.dropdown",s)}}},r.getParentFromElement=function(t){return c(t)||t.parentNode},r.dataApiKeydownHandler=function(t){if(!(/input|textarea/i.test(t.target.tagName)?"Space"===t.key||"Escape"!==t.key&&("ArrowDown"!==t.key&&"ArrowUp"!==t.key||t.target.closest(".dropdown-menu")):!ce.test(t.key))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!this.classList.contains("disabled"))){var e=r.getParentFromElement(this),i=this.classList.contains("show");if("Escape"===t.key)return(this.matches('[data-bs-toggle="dropdown"]')?this:W.prev(this,'[data-bs-toggle="dropdown"]')[0]).focus(),void r.clearMenus();if(i&&"Space"!==t.key){var n=W.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",e).filter(m);if(n.length){var a=n.indexOf(t.target);"ArrowUp"===t.key&&a>0&&a--,"ArrowDown"===t.key&&a<n.length-1&&a++,n[a=-1===a?0:a].focus()}}else r.clearMenus()}},e(r,null,[{key:"Default",get:function(){return ge}},{key:"DefaultType",get:function(){return ve}},{key:"DATA_KEY",get:function(){return"bs.dropdown"}}]),r}(F);k.on(document,"keydown.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]',ye.dataApiKeydownHandler),k.on(document,"keydown.bs.dropdown.data-api",".dropdown-menu",ye.dataApiKeydownHandler),k.on(document,"click.bs.dropdown.data-api",ye.clearMenus),k.on(document,"keyup.bs.dropdown.data-api",ye.clearMenus),k.on(document,"click.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]',(function(t){t.preventDefault(),t.stopPropagation(),ye.dropdownInterface(this,"toggle")})),k.on(document,"click.bs.dropdown.data-api",".dropdown form",(function(t){return t.stopPropagation()})),_((function(){var t=y();if(t){var e=t.fn[le];t.fn[le]=ye.jQueryInterface,t.fn[le].Constructor=ye,t.fn[le].noConflict=function(){return t.fn[le]=e,ye.jQueryInterface}}}));var _e={backdrop:!0,keyboard:!0,focus:!0},be={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},xe=function(t){function r(e,i){var n;return(n=t.call(this,e)||this)._config=n._getConfig(i),n._dialog=W.findOne(".modal-dialog",e),n._backdrop=null,n._isShown=!1,n._isBodyOverflowing=!1,n._ignoreBackdropClick=!1,n._isTransitioning=!1,n._scrollbarWidth=0,n}n(r,t);var a=r.prototype;return a.toggle=function(t){return this._isShown?this.hide():this.show(t)},a.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){this._element.classList.contains("fade")&&(this._isTransitioning=!0);var i=k.trigger(this._element,"show.bs.modal",{relatedTarget:t});this._isShown||i.defaultPrevented||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),k.on(this._element,"click.dismiss.bs.modal",'[data-bs-dismiss="modal"]',(function(t){return e.hide(t)})),k.on(this._dialog,"mousedown.dismiss.bs.modal",(function(){k.one(e._element,"mouseup.dismiss.bs.modal",(function(t){t.target===e._element&&(e._ignoreBackdropClick=!0)}))})),this._showBackdrop((function(){return e._showElement(t)})))}},a.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning&&!k.trigger(this._element,"hide.bs.modal").defaultPrevented){this._isShown=!1;var i=this._element.classList.contains("fade");if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),k.off(document,"focusin.bs.modal"),this._element.classList.remove("show"),k.off(this._element,"click.dismiss.bs.modal"),k.off(this._dialog,"mousedown.dismiss.bs.modal"),i){var n=h(this._element);k.one(this._element,"transitionend",(function(t){return e._hideModal(t)})),p(this._element,n)}else this._hideModal()}},a.dispose=function(){[window,this._element,this._dialog].forEach((function(t){return k.off(t,".bs.modal")})),t.prototype.dispose.call(this),k.off(document,"focusin.bs.modal"),this._config=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},a.handleUpdate=function(){this._adjustDialog()},a._getConfig=function(t){return t=i({},_e,t),f("modal",t,be),t},a._showElement=function(t){var e=this,i=this._element.classList.contains("fade"),n=W.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),i&&v(this._element),this._element.classList.add("show"),this._config.focus&&this._enforceFocus();var r=function(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,k.trigger(e._element,"shown.bs.modal",{relatedTarget:t})};if(i){var a=h(this._dialog);k.one(this._dialog,"transitionend",r),p(this._dialog,a)}else r()},a._enforceFocus=function(){var t=this;k.off(document,"focusin.bs.modal"),k.on(document,"focusin.bs.modal",(function(e){document===e.target||t._element===e.target||t._element.contains(e.target)||t._element.focus()}))},a._setEscapeEvent=function(){var t=this;this._isShown?k.on(this._element,"keydown.dismiss.bs.modal",(function(e){t._config.keyboard&&"Escape"===e.key?(e.preventDefault(),t.hide()):t._config.keyboard||"Escape"!==e.key||t._triggerBackdropTransition()})):k.off(this._element,"keydown.dismiss.bs.modal")},a._setResizeEvent=function(){var t=this;this._isShown?k.on(window,"resize.bs.modal",(function(){return t._adjustDialog()})):k.off(window,"resize.bs.modal")},a._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop((function(){document.body.classList.remove("modal-open"),t._resetAdjustments(),t._resetScrollbar(),k.trigger(t._element,"hidden.bs.modal")}))},a._removeBackdrop=function(){this._backdrop.parentNode.removeChild(this._backdrop),this._backdrop=null},a._showBackdrop=function(t){var e=this,i=this._element.classList.contains("fade")?"fade":"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",i&&this._backdrop.classList.add(i),document.body.appendChild(this._backdrop),k.on(this._element,"click.dismiss.bs.modal",(function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._triggerBackdropTransition():e.hide())})),i&&v(this._backdrop),this._backdrop.classList.add("show"),!i)return void t();var n=h(this._backdrop);k.one(this._backdrop,"transitionend",t),p(this._backdrop,n)}else if(!this._isShown&&this._backdrop){this._backdrop.classList.remove("show");var r=function(){e._removeBackdrop(),t()};if(this._element.classList.contains("fade")){var a=h(this._backdrop);k.one(this._backdrop,"transitionend",r),p(this._backdrop,a)}else r()}else t()},a._triggerBackdropTransition=function(){var t=this;if(!k.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented){var e=this._element.scrollHeight>document.documentElement.clientHeight;e||(this._element.style.overflowY="hidden"),this._element.classList.add("modal-static");var i=h(this._dialog);k.off(this._element,"transitionend"),k.one(this._element,"transitionend",(function(){t._element.classList.remove("modal-static"),e||(k.one(t._element,"transitionend",(function(){t._element.style.overflowY=""})),p(t._element,i))})),p(this._element,i),this._element.focus()}},a._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;(!this._isBodyOverflowing&&t&&!b||this._isBodyOverflowing&&!t&&b)&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),(this._isBodyOverflowing&&!t&&!b||!this._isBodyOverflowing&&t&&b)&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},a._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},a._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(t.left+t.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},a._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){W.find(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top").forEach((function(e){var i=e.style.paddingRight,n=window.getComputedStyle(e)["padding-right"];V.setDataAttribute(e,"padding-right",i),e.style.paddingRight=Number.parseFloat(n)+t._scrollbarWidth+"px"})),W.find(".sticky-top").forEach((function(e){var i=e.style.marginRight,n=window.getComputedStyle(e)["margin-right"];V.setDataAttribute(e,"margin-right",i),e.style.marginRight=Number.parseFloat(n)-t._scrollbarWidth+"px"}));var e=document.body.style.paddingRight,i=window.getComputedStyle(document.body)["padding-right"];V.setDataAttribute(document.body,"padding-right",e),document.body.style.paddingRight=Number.parseFloat(i)+this._scrollbarWidth+"px"}document.body.classList.add("modal-open")},a._resetScrollbar=function(){W.find(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top").forEach((function(t){var e=V.getDataAttribute(t,"padding-right");void 0!==e&&(V.removeDataAttribute(t,"padding-right"),t.style.paddingRight=e)})),W.find(".sticky-top").forEach((function(t){var e=V.getDataAttribute(t,"margin-right");void 0!==e&&(V.removeDataAttribute(t,"margin-right"),t.style.marginRight=e)}));var t=V.getDataAttribute(document.body,"padding-right");void 0===t?document.body.style.paddingRight="":(V.removeDataAttribute(document.body,"padding-right"),document.body.style.paddingRight=t)},a._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},r.jQueryInterface=function(t,e){return this.each((function(){var n=M(this,"bs.modal"),a=i({},_e,V.getDataAttributes(this),"object"==typeof t&&t?t:{});if(n||(n=new r(this,a)),"string"==typeof t){if(void 0===n[t])throw new TypeError('No method named "'+t+'"');n[t](e)}}))},e(r,null,[{key:"Default",get:function(){return _e}},{key:"DATA_KEY",get:function(){return"bs.modal"}}]),r}(F);k.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(t){var e=this,n=c(this);"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault(),k.one(n,"show.bs.modal",(function(t){t.defaultPrevented||k.one(n,"hidden.bs.modal",(function(){m(e)&&e.focus()}))}));var r=M(n,"bs.modal");if(!r){var a=i({},V.getDataAttributes(n),V.getDataAttributes(this));r=new xe(n,a)}r.show(this)})),_((function(){var t=y();if(t){var e=t.fn.modal;t.fn.modal=xe.jQueryInterface,t.fn.modal.Constructor=xe,t.fn.modal.noConflict=function(){return t.fn.modal=e,xe.jQueryInterface}}}));var we=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Me=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi,Ee=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;function Te(t,e,i){var n;if(!t.length)return t;if(i&&"function"==typeof i)return i(t);for(var r=(new window.DOMParser).parseFromString(t,"text/html"),a=Object.keys(e),o=(n=[]).concat.apply(n,r.body.querySelectorAll("*")),s=function(t,i){var n,r=o[t],s=r.nodeName.toLowerCase();if(!a.includes(s))return r.parentNode.removeChild(r),"continue";var l=(n=[]).concat.apply(n,r.attributes),c=[].concat(e["*"]||[],e[s]||[]);l.forEach((function(t){(function(t,e){var i=t.nodeName.toLowerCase();if(e.includes(i))return!we.has(i)||Boolean(t.nodeValue.match(Me)||t.nodeValue.match(Ee));for(var n=e.filter((function(t){return t instanceof RegExp})),r=0,a=n.length;r<a;r++)if(i.match(n[r]))return!0;return!1})(t,c)||r.removeAttribute(t.nodeName)}))},l=0,c=o.length;l<c;l++)s(l);return r.body.innerHTML}var Se="tooltip",Ae=new RegExp("(^|\\s)bs-tooltip\\S+","g"),Ce=new Set(["sanitize","allowList","sanitizeFn"]),Le={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",container:"(string|element|boolean)",fallbackPlacements:"(null|array)",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object)"},De={AUTO:"auto",TOP:"top",RIGHT:b?"left":"right",BOTTOM:"bottom",LEFT:b?"right":"left"},Pe={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",container:!1,fallbackPlacements:null,boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},Re={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},Oe=function(t){function r(e,i){var n;if(void 0===se)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");return(n=t.call(this,e)||this)._isEnabled=!0,n._timeout=0,n._hoverState="",n._activeTrigger={},n._popper=null,n.config=n._getConfig(i),n.tip=null,n._setListeners(),n}n(r,t);var a=r.prototype;return a.enable=function(){this._isEnabled=!0},a.disable=function(){this._isEnabled=!1},a.toggleEnabled=function(){this._isEnabled=!this._isEnabled},a.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,i=M(t.delegateTarget,e);i||(i=new this.constructor(t.delegateTarget,this._getDelegateConfig()),w(t.delegateTarget,e,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(this.getTipElement().classList.contains("show"))return void this._leave(null,this);this._enter(null,this)}},a.dispose=function(){clearTimeout(this._timeout),k.off(this._element,this.constructor.EVENT_KEY),k.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.parentNode.removeChild(this.tip),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.config=null,this.tip=null,t.prototype.dispose.call(this)},a.show=function(){var t=this;if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(this.isWithContent()&&this._isEnabled){var e=k.trigger(this._element,this.constructor.Event.SHOW),i=function t(e){if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){var i=e.getRootNode();return i instanceof ShadowRoot?i:null}return e instanceof ShadowRoot?e:e.parentNode?t(e.parentNode):null}(this._element),n=null===i?this._element.ownerDocument.documentElement.contains(this._element):i.contains(this._element);if(e.defaultPrevented||!n)return;var r=this.getTipElement(),a=o(this.constructor.NAME);r.setAttribute("id",a),this._element.setAttribute("aria-describedby",a),this.setContent(),this.config.animation&&r.classList.add("fade");var s="function"==typeof this.config.placement?this.config.placement.call(this,r,this._element):this.config.placement,l=this._getAttachment(s);this._addAttachmentClass(l);var c=this._getContainer();w(r,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||c.appendChild(r),k.trigger(this._element,this.constructor.Event.INSERTED),this._popper=oe(this._element,r,this._getPopperConfig(l)),r.classList.add("show");var u,d,f="function"==typeof this.config.customClass?this.config.customClass():this.config.customClass;f&&(u=r.classList).add.apply(u,f.split(" ")),"ontouchstart"in document.documentElement&&(d=[]).concat.apply(d,document.body.children).forEach((function(t){k.on(t,"mouseover",(function(){}))}));var m=function(){var e=t._hoverState;t._hoverState=null,k.trigger(t._element,t.constructor.Event.SHOWN),"out"===e&&t._leave(null,t)};if(this.tip.classList.contains("fade")){var g=h(this.tip);k.one(this.tip,"transitionend",m),p(this.tip,g)}else m()}},a.hide=function(){var t=this;if(this._popper){var e=this.getTipElement(),i=function(){"show"!==t._hoverState&&e.parentNode&&e.parentNode.removeChild(e),t._cleanTipClass(),t._element.removeAttribute("aria-describedby"),k.trigger(t._element,t.constructor.Event.HIDDEN),t._popper&&(t._popper.destroy(),t._popper=null)};if(!k.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented){var n;if(e.classList.remove("show"),"ontouchstart"in document.documentElement&&(n=[]).concat.apply(n,document.body.children).forEach((function(t){return k.off(t,"mouseover",g)})),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this.tip.classList.contains("fade")){var r=h(e);k.one(e,"transitionend",i),p(e,r)}else i();this._hoverState=""}}},a.update=function(){null!==this._popper&&this._popper.update()},a.isWithContent=function(){return Boolean(this.getTitle())},a.getTipElement=function(){if(this.tip)return this.tip;var t=document.createElement("div");return t.innerHTML=this.config.template,this.tip=t.children[0],this.tip},a.setContent=function(){var t=this.getTipElement();this.setElementContent(W.findOne(".tooltip-inner",t),this.getTitle()),t.classList.remove("fade","show")},a.setElementContent=function(t,e){if(null!==t)return"object"==typeof e&&d(e)?(e.jquery&&(e=e[0]),void(this.config.html?e.parentNode!==t&&(t.innerHTML="",t.appendChild(e)):t.textContent=e.textContent)):void(this.config.html?(this.config.sanitize&&(e=Te(e,this.config.allowList,this.config.sanitizeFn)),t.innerHTML=e):t.textContent=e)},a.getTitle=function(){var t=this._element.getAttribute("data-bs-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this._element):this.config.title),t},a.updateAttachment=function(t){return"right"===t?"end":"left"===t?"start":t},a._getPopperConfig=function(t){var e=this,n={name:"flip",options:{altBoundary:!0}};return this.config.fallbackPlacements&&(n.options.fallbackPlacements=this.config.fallbackPlacements),i({},{placement:t,modifiers:[n,{name:"preventOverflow",options:{rootBoundary:this.config.boundary}},{name:"arrow",options:{element:"."+this.constructor.NAME+"-arrow"}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:function(t){return e._handlePopperPlacementChange(t)}}],onFirstUpdate:function(t){t.options.placement!==t.placement&&e._handlePopperPlacementChange(t)}},this.config.popperConfig)},a._addAttachmentClass=function(t){this.getTipElement().classList.add("bs-tooltip-"+this.updateAttachment(t))},a._getContainer=function(){return!1===this.config.container?document.body:d(this.config.container)?this.config.container:W.findOne(this.config.container)},a._getAttachment=function(t){return De[t.toUpperCase()]},a._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach((function(e){if("click"===e)k.on(t._element,t.constructor.Event.CLICK,t.config.selector,(function(e){return t.toggle(e)}));else if("manual"!==e){var i="hover"===e?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,n="hover"===e?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;k.on(t._element,i,t.config.selector,(function(e){return t._enter(e)})),k.on(t._element,n,t.config.selector,(function(e){return t._leave(e)}))}})),this._hideModalHandler=function(){t._element&&t.hide()},k.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=i({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},a._fixTitle=function(){var t=this._element.getAttribute("title"),e=typeof this._element.getAttribute("data-bs-original-title");(t||"string"!==e)&&(this._element.setAttribute("data-bs-original-title",t||""),!t||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",t),this._element.setAttribute("title",""))},a._enter=function(t,e){var i=this.constructor.DATA_KEY;(e=e||M(t.delegateTarget,i))||(e=new this.constructor(t.delegateTarget,this._getDelegateConfig()),w(t.delegateTarget,i,e)),t&&(e._activeTrigger["focusin"===t.type?"focus":"hover"]=!0),e.getTipElement().classList.contains("show")||"show"===e._hoverState?e._hoverState="show":(clearTimeout(e._timeout),e._hoverState="show",e.config.delay&&e.config.delay.show?e._timeout=setTimeout((function(){"show"===e._hoverState&&e.show()}),e.config.delay.show):e.show())},a._leave=function(t,e){var i=this.constructor.DATA_KEY;(e=e||M(t.delegateTarget,i))||(e=new this.constructor(t.delegateTarget,this._getDelegateConfig()),w(t.delegateTarget,i,e)),t&&(e._activeTrigger["focusout"===t.type?"focus":"hover"]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState="out",e.config.delay&&e.config.delay.hide?e._timeout=setTimeout((function(){"out"===e._hoverState&&e.hide()}),e.config.delay.hide):e.hide())},a._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},a._getConfig=function(t){var e=V.getDataAttributes(this._element);return Object.keys(e).forEach((function(t){Ce.has(t)&&delete e[t]})),t&&"object"==typeof t.container&&t.container.jquery&&(t.container=t.container[0]),"number"==typeof(t=i({},this.constructor.Default,e,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),f(Se,t,this.constructor.DefaultType),t.sanitize&&(t.template=Te(t.template,t.allowList,t.sanitizeFn)),t},a._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},a._cleanTipClass=function(){var t=this.getTipElement(),e=t.getAttribute("class").match(Ae);null!==e&&e.length>0&&e.map((function(t){return t.trim()})).forEach((function(e){return t.classList.remove(e)}))},a._handlePopperPlacementChange=function(t){var e=t.state;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))},r.jQueryInterface=function(t){return this.each((function(){var e=M(this,"bs.tooltip"),i="object"==typeof t&&t;if((e||!/dispose|hide/.test(t))&&(e||(e=new r(this,i)),"string"==typeof t)){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}}))},e(r,null,[{key:"Default",get:function(){return Pe}},{key:"NAME",get:function(){return Se}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return Re}},{key:"EVENT_KEY",get:function(){return".bs.tooltip"}},{key:"DefaultType",get:function(){return Le}}]),r}(F);_((function(){var t=y();if(t){var e=t.fn[Se];t.fn[Se]=Oe.jQueryInterface,t.fn[Se].Constructor=Oe,t.fn[Se].noConflict=function(){return t.fn[Se]=e,Oe.jQueryInterface}}}));var Ie="popover",ze=new RegExp("(^|\\s)bs-popover\\S+","g"),Ne=i({},Oe.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),ke=i({},Oe.DefaultType,{content:"(string|element|function)"}),Fe={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"},Be=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var r=i.prototype;return r.isWithContent=function(){return this.getTitle()||this._getContent()},r.setContent=function(){var t=this.getTipElement();this.setElementContent(W.findOne(".popover-header",t),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this._element)),this.setElementContent(W.findOne(".popover-body",t),e),t.classList.remove("fade","show")},r._addAttachmentClass=function(t){this.getTipElement().classList.add("bs-popover-"+this.updateAttachment(t))},r._getContent=function(){return this._element.getAttribute("data-bs-content")||this.config.content},r._cleanTipClass=function(){var t=this.getTipElement(),e=t.getAttribute("class").match(ze);null!==e&&e.length>0&&e.map((function(t){return t.trim()})).forEach((function(e){return t.classList.remove(e)}))},i.jQueryInterface=function(t){return this.each((function(){var e=M(this,"bs.popover"),n="object"==typeof t?t:null;if((e||!/dispose|hide/.test(t))&&(e||(e=new i(this,n),w(this,"bs.popover",e)),"string"==typeof t)){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}}))},e(i,null,[{key:"Default",get:function(){return Ne}},{key:"NAME",get:function(){return Ie}},{key:"DATA_KEY",get:function(){return"bs.popover"}},{key:"Event",get:function(){return Fe}},{key:"EVENT_KEY",get:function(){return".bs.popover"}},{key:"DefaultType",get:function(){return ke}}]),i}(Oe);_((function(){var t=y();if(t){var e=t.fn[Ie];t.fn[Ie]=Be.jQueryInterface,t.fn[Ie].Constructor=Be,t.fn[Ie].noConflict=function(){return t.fn[Ie]=e,Be.jQueryInterface}}}));var Ue="scrollspy",He={offset:10,method:"auto",target:""},Ge={offset:"number",method:"string",target:"(string|element)"},je=function(t){function r(e,i){var n;return(n=t.call(this,e)||this)._scrollElement="BODY"===e.tagName?window:e,n._config=n._getConfig(i),n._selector=n._config.target+" .nav-link, "+n._config.target+" .list-group-item, "+n._config.target+" .dropdown-item",n._offsets=[],n._targets=[],n._activeTarget=null,n._scrollHeight=0,k.on(n._scrollElement,"scroll.bs.scrollspy",(function(t){return n._process(t)})),n.refresh(),n._process(),n}n(r,t);var a=r.prototype;return a.refresh=function(){var t=this,e=this._scrollElement===this._scrollElement.window?"offset":"position",i="auto"===this._config.method?e:this._config.method,n="position"===i?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),W.find(this._selector).map((function(t){var e=l(t),r=e?W.findOne(e):null;if(r){var a=r.getBoundingClientRect();if(a.width||a.height)return[V[i](r).top+n,e]}return null})).filter((function(t){return t})).sort((function(t,e){return t[0]-e[0]})).forEach((function(e){t._offsets.push(e[0]),t._targets.push(e[1])}))},a.dispose=function(){t.prototype.dispose.call(this),k.off(this._scrollElement,".bs.scrollspy"),this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},a._getConfig=function(t){if("string"!=typeof(t=i({},He,"object"==typeof t&&t?t:{})).target&&d(t.target)){var e=t.target.id;e||(e=o(Ue),t.target.id=e),t.target="#"+e}return f(Ue,t,Ge),t},a._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},a._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},a._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},a._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=i){var n=this._targets[this._targets.length-1];this._activeTarget!==n&&this._activate(n)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var r=this._offsets.length;r--;)this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&(void 0===this._offsets[r+1]||t<this._offsets[r+1])&&this._activate(this._targets[r])}},a._activate=function(t){this._activeTarget=t,this._clear();var e=this._selector.split(",").map((function(e){return e+'[data-bs-target="'+t+'"],'+e+'[href="'+t+'"]'})),i=W.findOne(e.join(","));i.classList.contains("dropdown-item")?(W.findOne(".dropdown-toggle",i.closest(".dropdown")).classList.add("active"),i.classList.add("active")):(i.classList.add("active"),W.parents(i,".nav, .list-group").forEach((function(t){W.prev(t,".nav-link, .list-group-item").forEach((function(t){return t.classList.add("active")})),W.prev(t,".nav-item").forEach((function(t){W.children(t,".nav-link").forEach((function(t){return t.classList.add("active")}))}))}))),k.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:t})},a._clear=function(){W.find(this._selector).filter((function(t){return t.classList.contains("active")})).forEach((function(t){return t.classList.remove("active")}))},r.jQueryInterface=function(t){return this.each((function(){var e=M(this,"bs.scrollspy");if(e||(e=new r(this,"object"==typeof t&&t)),"string"==typeof t){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}}))},e(r,null,[{key:"Default",get:function(){return He}},{key:"DATA_KEY",get:function(){return"bs.scrollspy"}}]),r}(F);k.on(window,"load.bs.scrollspy.data-api",(function(){W.find('[data-bs-spy="scroll"]').forEach((function(t){return new je(t,V.getDataAttributes(t))}))})),_((function(){var t=y();if(t){var e=t.fn[Ue];t.fn[Ue]=je.jQueryInterface,t.fn[Ue].Constructor=je,t.fn[Ue].noConflict=function(){return t.fn[Ue]=e,je.jQueryInterface}}}));var Ve=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var r=i.prototype;return r.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains("active")||this._element.classList.contains("disabled"))){var e,i=c(this._element),n=this._element.closest(".nav, .list-group");if(n){var r="UL"===n.nodeName||"OL"===n.nodeName?":scope > li > .active":".active";e=(e=W.find(r,n))[e.length-1]}var a=null;if(e&&(a=k.trigger(e,"hide.bs.tab",{relatedTarget:this._element})),!(k.trigger(this._element,"show.bs.tab",{relatedTarget:e}).defaultPrevented||null!==a&&a.defaultPrevented)){this._activate(this._element,n);var o=function(){k.trigger(e,"hidden.bs.tab",{relatedTarget:t._element}),k.trigger(t._element,"shown.bs.tab",{relatedTarget:e})};i?this._activate(i,i.parentNode,o):o()}}},r._activate=function(t,e,i){var n=this,r=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?W.children(e,".active"):W.find(":scope > li > .active",e))[0],a=i&&r&&r.classList.contains("fade"),o=function(){return n._transitionComplete(t,r,i)};if(r&&a){var s=h(r);r.classList.remove("show"),k.one(r,"transitionend",o),p(r,s)}else o()},r._transitionComplete=function(t,e,i){if(e){e.classList.remove("active");var n=W.findOne(":scope > .dropdown-menu .active",e.parentNode);n&&n.classList.remove("active"),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}t.classList.add("active"),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),v(t),t.classList.contains("fade")&&t.classList.add("show"),t.parentNode&&t.parentNode.classList.contains("dropdown-menu")&&(t.closest(".dropdown")&&W.find(".dropdown-toggle").forEach((function(t){return t.classList.add("active")})),t.setAttribute("aria-expanded",!0)),i&&i()},i.jQueryInterface=function(t){return this.each((function(){var e=M(this,"bs.tab")||new i(this);if("string"==typeof t){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t]()}}))},e(i,null,[{key:"DATA_KEY",get:function(){return"bs.tab"}}]),i}(F);k.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',(function(t){t.preventDefault(),(M(this,"bs.tab")||new Ve(this)).show()})),_((function(){var t=y();if(t){var e=t.fn.tab;t.fn.tab=Ve.jQueryInterface,t.fn.tab.Constructor=Ve,t.fn.tab.noConflict=function(){return t.fn.tab=e,Ve.jQueryInterface}}}));var We={animation:"boolean",autohide:"boolean",delay:"number"},qe={animation:!0,autohide:!0,delay:5e3},Xe=function(t){function r(e,i){var n;return(n=t.call(this,e)||this)._config=n._getConfig(i),n._timeout=null,n._setListeners(),n}n(r,t);var a=r.prototype;return a.show=function(){var t=this;if(!k.trigger(this._element,"show.bs.toast").defaultPrevented){this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");var e=function(){t._element.classList.remove("showing"),t._element.classList.add("show"),k.trigger(t._element,"shown.bs.toast"),t._config.autohide&&(t._timeout=setTimeout((function(){t.hide()}),t._config.delay))};if(this._element.classList.remove("hide"),v(this._element),this._element.classList.add("showing"),this._config.animation){var i=h(this._element);k.one(this._element,"transitionend",e),p(this._element,i)}else e()}},a.hide=function(){var t=this;if(this._element.classList.contains("show")&&!k.trigger(this._element,"hide.bs.toast").defaultPrevented){var e=function(){t._element.classList.add("hide"),k.trigger(t._element,"hidden.bs.toast")};if(this._element.classList.remove("show"),this._config.animation){var i=h(this._element);k.one(this._element,"transitionend",e),p(this._element,i)}else e()}},a.dispose=function(){this._clearTimeout(),this._element.classList.contains("show")&&this._element.classList.remove("show"),k.off(this._element,"click.dismiss.bs.toast"),t.prototype.dispose.call(this),this._config=null},a._getConfig=function(t){return t=i({},qe,V.getDataAttributes(this._element),"object"==typeof t&&t?t:{}),f("toast",t,this.constructor.DefaultType),t},a._setListeners=function(){var t=this;k.on(this._element,"click.dismiss.bs.toast",'[data-bs-dismiss="toast"]',(function(){return t.hide()}))},a._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},r.jQueryInterface=function(t){return this.each((function(){var e=M(this,"bs.toast");if(e||(e=new r(this,"object"==typeof t&&t)),"string"==typeof t){if(void 0===e[t])throw new TypeError('No method named "'+t+'"');e[t](this)}}))},e(r,null,[{key:"DefaultType",get:function(){return We}},{key:"Default",get:function(){return qe}},{key:"DATA_KEY",get:function(){return"bs.toast"}}]),r}(F);return _((function(){var t=y();if(t){var e=t.fn.toast;t.fn.toast=Xe.jQueryInterface,t.fn.toast.Constructor=Xe,t.fn.toast.noConflict=function(){return t.fn.toast=e,Xe.jQueryInterface}}})),{Alert:U,Button:H,Carousel:J,Collapse:tt,Dropdown:ye,Modal:xe,Popover:Be,ScrollSpy:je,Tab:Ve,Toast:Xe,Tooltip:Oe}})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t){return"string"==typeof t}function r(t){return"function"==typeof t}function a(t){return"number"==typeof t}function o(t){return void 0===t}function s(t){return"object"==typeof t}function l(t){return!1!==t}function c(){return"undefined"!=typeof window}function h(t){return r(t)||n(t)}function u(t){return(Et=we(t,he))&&Ni}function d(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function p(t,e){return!e&&console.warn(t)}function f(t,e){return t&&(he[t]=e)&&Et&&(Et[t]=e)||he}function m(){return 0}function g(t){var e,i,n=t[0];if(s(n)||r(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=be.length;i--&&!be[i].targetTest(n););e=be[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new qe(t[i],e)))||t.splice(i,1);return t}function v(t){return t._gsap||g(Le(t))[0]._gsap}function y(t,e,i){return(i=t[e])&&r(i)?t[e]():o(i)&&t.getAttribute&&t.getAttribute(e)||i}function _(t,e){return(t=t.split(",")).forEach(e)||t}function b(t){return Math.round(1e5*t)/1e5||0}function x(t){return Math.round(1e7*t)/1e7||0}function w(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),"+"===i?t+n:"-"===i?t-n:"*"===i?t*n:t/n}function M(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i}function E(){var t,e,i=me.length,n=me.slice(0);for(ge={},t=me.length=0;t<i;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function T(t,e,i,n){me.length&&E(),t.render(e,i,n||yt&&e<0&&(t._initted||t._startAt)),me.length&&E()}function S(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(le).length<2?e:n(t)?t.trim():t}function A(t){return t}function C(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}function L(t,e){for(var i in e)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=s(e[i])?L(t[i]||(t[i]={}),e[i]):e[i]);return t}function D(t,e){var i,n={};for(i in t)i in e||(n[i]=t[i]);return n}function P(t){var e=t.parent||bt,i=t.keyframes?function(t){return function(e,i){for(var n in i)n in e||"duration"===n&&t||"ease"===n||(e[n]=i[n])}}(ie(t.keyframes)):C;if(l(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t}function R(t,e,i,n,r){void 0===i&&(i="_first"),void 0===n&&(n="_last");var a,o=t[n];if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e}function O(t,e,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=e._prev,a=e._next;r?r._next=a:t[i]===e&&(t[i]=a),a?a._prev=r:t[n]===e&&(t[n]=r),e._next=e._prev=e.parent=null}function I(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function z(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t}function N(t,e,i,n){return t._startAt&&(yt?t._startAt.revert(de):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))}function k(t){return t._repeat?Me(t._tTime,t=t.duration()+t._rDelay)*t:0}function F(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function B(t){return t._end=x(t._start+(t._tDur/Math.abs(t._ts||t._rts||Yt)||0))}function U(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=x(i._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),B(t),i._dirty||z(i,t)),t}function H(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=F(t.rawTime(),e),(!e._dur||Ae(0,e.totalDuration(),i)-e._tTime>Yt)&&e.render(i,!0)),z(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)0<=i.rawTime()&&i.totalTime(i._tTime),i=i._dp;t._zTime=-Yt}}function G(t,e,i,n){return e.parent&&I(e),e._start=x((a(i)?i:i||t!==bt?Se(t,i,e):t._time)+e._delay),e._end=x(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),R(t,e,"_first","_last",t._sort?"_start":0),Ee(e)||(t._recent=e),n||H(t,e),t._ts<0&&U(t,t._tTime),t}function j(t,e){return(he.ScrollTrigger||d("scrollTrigger",e))&&he.ScrollTrigger.create(e,t)}function V(t,e,i,n,r){return ei(t,e,r),t._initted?!i&&t._pt&&!yt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&St!==Ne.frame?(me.push(t),t._lazy=[r,n],1):void 0:1}function W(t,e,i,n){var r=t._repeat,a=x(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=a/t._dur),t._dur=a,t._tDur=r?r<0?1e10:x(a*(r+1)+t._rDelay*r):a,0<o&&!n&&U(t,t._tTime=t._tDur*o),t.parent&&B(t),i||z(t.parent,t),t}function q(t){return t instanceof Ze?z(t):W(t,t._dur)}function X(t,e,i){var n,r,o=a(e[1]),s=(o?2:1)+(t<2?0:1),c=e[s];if(o&&(c.duration=e[1]),c.parent=i,t){for(n=c,r=i;r&&!("immediateRender"in n);)n=r.vars.defaults||{},r=l(r.vars.inherit)&&r.parent;c.immediateRender=l(n.immediateRender),t<2?c.runBackwards=1:c.startAt=e[s-1]}return new ai(e[0],c,e[1+s])}function Y(t,e){return t||0===t?e(t):e}function Z(t,e){return n(t)&&(e=ce.exec(t))?e[1]:""}function J(t,e){return t&&s(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&s(t[0]))&&!t.nodeType&&t!==xt}function Q(t){return t=Le(t)[0]||p("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return Le(e,i.querySelectorAll?i:i===t?p("Invalid scope")||Mt.createElement("div"):t)}}function K(t){return t.sort((function(){return.5-Math.random()}))}function $(t){if(r(t))return t;var e=s(t)?t:{each:t},i=Ge(e.ease),a=e.from||0,o=parseFloat(e.base)||0,l={},c=0<a&&a<1,h=isNaN(a)||c,u=e.axis,d=a,p=a;return n(a)?d=p={center:.5,edges:.5,end:1}[a]||0:!c&&h&&(d=a[0],p=a[1]),function(t,n,r){var s,c,f,m,g,v,y,_,b,w=(r||e).length,M=l[w];if(!M){if(!(b="auto"===e.grid?0:(e.grid||[1,Xt])[1])){for(y=-Xt;y<(y=r[b++].getBoundingClientRect().left)&&b<w;);b--}for(M=l[w]=[],s=h?Math.min(b,w)*d-.5:a%b,c=b===Xt?0:h?w*p/b-.5:a/b|0,_=Xt,v=y=0;v<w;v++)f=v%b-s,m=c-(v/b|0),M[v]=g=u?Math.abs("y"===u?m:f):Kt(f*f+m*m),y<g&&(y=g),g<_&&(_=g);"random"===a&&K(M),M.max=y-_,M.min=_,M.v=w=(parseFloat(e.amount)||parseFloat(e.each)*(w<b?w-1:u?"y"===u?w/b:b:Math.max(b,w/b))||0)*("edges"===a?-1:1),M.b=w<0?o-w:o,M.u=Z(e.amount||e.each)||0,i=i&&w<0?He(i):i}return w=(M[t]-M.min)/M.max||0,x(M.b+(i?i(w):w)*M.v)+M.u}}function tt(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=x(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(a(i)?0:Z(i))}}function et(t,e){var i,n,o=ie(t);return!o&&s(t)&&(i=o=t.radius||Xt,t.values?(t=Le(t.values),(n=!a(t[0]))&&(i*=i)):t=tt(t.increment)),Y(e,o?r(t)?function(e){return n=t(e),Math.abs(n-e)<=i?n:e}:function(e){for(var r,o,s=parseFloat(n?e.x:e),l=parseFloat(n?e.y:0),c=Xt,h=0,u=t.length;u--;)(r=n?(r=t[u].x-s)*r+(o=t[u].y-l)*o:Math.abs(t[u]-s))<c&&(c=r,h=u);return h=!i||c<=i?t[h]:e,n||h===e||a(e)?h:h+Z(e)}:tt(t))}function it(t,e,i,n){return Y(ie(t)?!e:!0===i?!!(i=0):!n,(function(){return ie(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*n)/n}))}function nt(t,e,i){return Y(i,(function(i){return t[~~e(i)]}))}function rt(t){for(var e,i,n,r,a=0,o="";~(e=t.indexOf("random(",a));)n=t.indexOf(")",e),r="["===t.charAt(e+7),i=t.substr(e+7,n-e-7).match(r?le:ne),o+=t.substr(a,e-a)+it(r?i:+i[0],r?0:+i[1],+i[2]||1e-5),a=n+1;return o+t.substr(a,t.length-a)}function at(t,e,i){var n,r,a,o=t.labels,s=Xt;for(n in o)(r=o[n]-e)<0==!!i&&r&&s>(r=Math.abs(r))&&(a=n,s=r);return a}function ot(t){return I(t),t.scrollTrigger&&t.scrollTrigger.kill(!!yt),t.progress()<1&&Pe(t,"onInterrupt"),t}function st(t,e,i){return(6*(t+=t<0?1:1<t?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*Re+.5|0}function lt(t,e,i){var n,r,o,s,l,c,h,u,d,p,f=t?a(t)?[t>>16,t>>8&Re,t&Re]:0:Oe.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Oe[t])f=Oe[t];else if("#"===t.charAt(0)){if(t.length<6&&(t="#"+(n=t.charAt(1))+n+(r=t.charAt(2))+r+(o=t.charAt(3))+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(f=parseInt(t.substr(1,6),16))>>16,f>>8&Re,f&Re,parseInt(t.substr(7),16)/255];f=[(t=parseInt(t.substr(1),16))>>16,t>>8&Re,t&Re]}else if("hsl"===t.substr(0,3))if(f=p=t.match(ne),e){if(~t.indexOf("="))return f=t.match(re),i&&f.length<4&&(f[3]=1),f}else s=+f[0]%360/360,l=f[1]/100,n=2*(c=f[2]/100)-(r=c<=.5?c*(l+1):c+l-c*l),3<f.length&&(f[3]*=1),f[0]=st(s+1/3,n,r),f[1]=st(s,n,r),f[2]=st(s-1/3,n,r);else f=t.match(ne)||Oe.transparent;f=f.map(Number)}return e&&!p&&(n=f[0]/Re,r=f[1]/Re,o=f[2]/Re,c=((h=Math.max(n,r,o))+(u=Math.min(n,r,o)))/2,h===u?s=l=0:(d=h-u,l=.5<c?d/(2-h-u):d/(h+u),s=h===n?(r-o)/d+(r<o?6:0):h===r?(o-n)/d+2:(n-r)/d+4,s*=60),f[0]=~~(s+.5),f[1]=~~(100*l+.5),f[2]=~~(100*c+.5)),i&&f.length<4&&(f[3]=1),f}function ct(t){var e=[],i=[],n=-1;return t.split(Ie).forEach((function(t){var r=t.match(ae)||[];e.push.apply(e,r),i.push(n+=r.length+1)})),e.c=i,e}function ht(t,e,i){var n,r,a,o,s="",l=(t+s).match(Ie),c=e?"hsla(":"rgba(",h=0;if(!l)return t;if(l=l.map((function(t){return(t=lt(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),i&&(a=ct(t),(n=i.c).join(s)!==a.c.join(s)))for(o=(r=t.replace(Ie,"1").split(ae)).length-1;h<o;h++)s+=r[h]+(~n.indexOf(h)?l.shift()||c+"0,0,0,0)":(a.length?a:l.length?l:i).shift());if(!r)for(o=(r=t.split(Ie)).length-1;h<o;h++)s+=r[h]+l[h];return s+r[o]}function ut(t){var e,i=t.join(" ");if(Ie.lastIndex=0,Ie.test(i))return e=ze.test(i),t[1]=ht(t[1],e),t[0]=ht(t[0],e,ct(t[1])),!0}function dt(t,e){for(var i,n=t._first;n;)n instanceof Ze?dt(n,e):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===e||(n.timeline?dt(n.timeline,e):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=e)),n=n._next}function pt(t,e,i,n){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===n&&(n=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,a={easeIn:e,easeOut:i,easeInOut:n};return _(t,(function(t){for(var e in Fe[t]=he[t]=a,Fe[r=t.toLowerCase()]=i,a)Fe[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Fe[t+"."+e]=a[e]})),a}function ft(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}}function mt(t,e,i){function n(t){return 1===t?1:r*Math.pow(2,-10*t)*te((t-o)*a)+1}var r=1<=e?e:1,a=(i||(t?.3:.45))/(e<1?e:1),o=a/Zt*(Math.asin(1/r)||0),s="out"===t?n:"in"===t?function(t){return 1-n(1-t)}:ft(n);return a=Zt/a,s.config=function(e,i){return mt(t,e,i)},s}function gt(t,e){function i(t){return t?--t*t*((e+1)*t+e)+1:0}void 0===e&&(e=1.70158);var n="out"===t?i:"in"===t?function(t){return 1-i(1-t)}:ft(i);return n.config=function(e){return gt(t,e)},n}var vt,yt,_t,bt,xt,wt,Mt,Et,Tt,St,At,Ct,Lt,Dt,Pt,Rt,Ot,It,zt,Nt,kt,Ft,Bt,Ut,Ht,Gt,jt,Vt,Wt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},qt={duration:.5,overwrite:!1,delay:0},Xt=1e8,Yt=1/Xt,Zt=2*Math.PI,Jt=Zt/4,Qt=0,Kt=Math.sqrt,$t=Math.cos,te=Math.sin,ee="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},ie=Array.isArray,ne=/(?:-?\.?\d|\.)+/gi,re=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ae=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,oe=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,se=/[+-]=-?[.\d]+/,le=/[^,'"\[\]\s]+/gi,ce=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,he={},ue={suppressEvents:!0,isStart:!0,kill:!1},de={suppressEvents:!0,kill:!1},pe={suppressEvents:!0},fe={},me=[],ge={},ve={},ye={},_e=30,be=[],xe="",we=function(t,e){for(var i in e)t[i]=e[i];return t},Me=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},Ee=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Te={_start:0,endTime:m,totalDuration:m},Se=function t(e,i,r){var a,o,s,l=e.labels,c=e._recent||Te,h=e.duration()>=Xt?c.endTime(!1):e._dur;return n(i)&&(isNaN(i)||i in l)?(o=i.charAt(0),s="%"===i.substr(-1),a=i.indexOf("="),"<"===o||">"===o?(0<=a&&(i=i.replace(/=/,"")),("<"===o?c._start:c.endTime(0<=c._repeat))+(parseFloat(i.substr(1))||0)*(s?(a<0?c:r).totalDuration()/100:1)):a<0?(i in l||(l[i]=h),l[i]):(o=parseFloat(i.charAt(a-1)+i.substr(a+1)),s&&r&&(o=o/100*(ie(r)?r[0]:r).totalDuration()),1<a?t(e,i.substr(0,a-1),r)+o:h+o)):null==i?h:+i},Ae=function(t,e,i){return i<t?t:e<i?e:i},Ce=[].slice,Le=function(t,e,i){return _t&&!e&&_t.selector?_t.selector(t):!n(t)||i||!wt&&ke()?ie(t)?function(t,e,i){return void 0===i&&(i=[]),t.forEach((function(t){return n(t)&&!e||J(t,1)?i.push.apply(i,Le(t)):i.push(t)}))||i}(t,i):J(t)?Ce.call(t,0):t?[t]:[]:Ce.call((e||Mt).querySelectorAll(t),0)},De=function(t,e,i,n,r){var a=e-t,o=n-i;return Y(r,(function(e){return i+((e-t)/a*o||0)}))},Pe=function(t,e,i){var n,r,a,o=t.vars,s=o[e],l=_t,c=t._ctx;if(s)return n=o[e+"Params"],r=o.callbackScope||t,i&&me.length&&E(),c&&(_t=c),a=n?s.apply(r,n):s.call(r),_t=l,a},Re=255,Oe={aqua:[0,Re,Re],lime:[0,Re,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Re],navy:[0,0,128],white:[Re,Re,Re],olive:[128,128,0],yellow:[Re,Re,0],orange:[Re,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Re,0,0],pink:[Re,192,203],cyan:[0,Re,Re],transparent:[Re,Re,Re,0]},Ie=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Oe)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),ze=/hsl[a]?\(/,Ne=(zt=Date.now,Nt=500,kt=33,Ft=zt(),Bt=Ft,Ht=Ut=1e3/240,Rt={time:0,frame:0,tick:function(){je(!0)},deltaRatio:function(t){return Ot/(1e3/(t||60))},wake:function(){Tt&&(!wt&&c()&&(xt=wt=window,Mt=xt.document||{},he.gsap=Ni,(xt.gsapVersions||(xt.gsapVersions=[])).push(Ni.version),u(Et||xt.GreenSockGlobals||!xt.gsap&&xt||{}),Pt=xt.requestAnimationFrame),Lt&&Rt.sleep(),Dt=Pt||function(t){return setTimeout(t,Ht-1e3*Rt.time+1|0)},Ct=1,je(2))},sleep:function(){(Pt?xt.cancelAnimationFrame:clearTimeout)(Lt),Ct=0,Dt=m},lagSmoothing:function(t,e){Nt=t||1e8,kt=Math.min(e,Nt,0)},fps:function(t){Ut=1e3/(t||240),Ht=1e3*Rt.time+Ut},add:function(t,e,i){var n=e?function(e,i,r,a){t(e,i,r,a),Rt.remove(n)}:t;return Rt.remove(t),Gt[i?"unshift":"push"](n),ke(),n},remove:function(t,e){~(e=Gt.indexOf(t))&&Gt.splice(e,1)&&e<=It&&It--},_listeners:Gt=[]}),ke=function(){return!Ct&&Ne.wake()},Fe={},Be=/^[\d.\-M][\d.\-,\s]/,Ue=/["']/g,He=function(t){return function(e){return 1-t(1-e)}},Ge=function(t,e){return t&&(r(t)?t:Fe[t]||function(t){var e=(t+"").split("("),i=Fe[e[0]];return i&&1<e.length&&i.config?i.config.apply(null,~t.indexOf("{")?[function(t){for(var e,i,n,r={},a=t.substr(1,t.length-3).split(":"),o=a[0],s=1,l=a.length;s<l;s++)i=a[s],e=s!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,e),r[o]=isNaN(n)?n.replace(Ue,"").trim():+n,o=i.substr(e+1).trim();return r}(e[1])]:function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)}(t).split(",").map(S)):Fe._CE&&Be.test(t)?Fe._CE("",t):i}(t))||e};function je(t){var e,i,n,r,a=zt()-Bt,o=!0===t;if(Nt<a&&(Ft+=a-kt),(0<(e=(n=(Bt+=a)-Ft)-Ht)||o)&&(r=++Rt.frame,Ot=n-1e3*Rt.time,Rt.time=n/=1e3,Ht+=e+(Ut<=e?4:Ut-e),i=1),o||(Lt=Dt(je)),i)for(It=0;It<Gt.length;It++)Gt[It](n,Ot,r,t)}function Ve(t){return t<Vt?jt*t*t:t<.7272727272727273?jt*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?jt*(t-=2.25/2.75)*t+.9375:jt*Math.pow(t-2.625/2.75,2)+.984375}_("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var i=e<5?e+1:e;pt(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},(function(t){return 1-Math.pow(1-t,i)}),(function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2}))})),Fe.Linear.easeNone=Fe.none=Fe.Linear.easeIn,pt("Elastic",mt("in"),mt("out"),mt()),jt=7.5625,Vt=1/2.75,pt("Bounce",(function(t){return 1-Ve(1-t)}),Ve),pt("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),pt("Circ",(function(t){return-(Kt(1-t*t)-1)})),pt("Sine",(function(t){return 1===t?1:1-$t(t*Jt)})),pt("Back",gt("in"),gt("out"),gt()),Fe.SteppedEase=Fe.steps=he.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,n=t+(e?0:1),r=e?1:0;return function(t){return((n*Ae(0,.99999999,t)|0)+r)*i}}},qt.ease=Fe["quad.out"],_("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return xe+=t+","+t+"Params,"}));var We,qe=function(t,e){this.id=Qt++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:y,this.set=e?e.getSetter:ui},Xe=((We=Ye.prototype).delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},We.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},We.totalDuration=function(t){return arguments.length?(this._dirty=0,W(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},We.totalTime=function(t,e){if(ke(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(U(this,t),!i._dp||i.parent||H(i,this);i&&i.parent;)i.parent._time!==i._start+(0<=i._ts?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&G(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===Yt||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),T(this,t,e)),this},We.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+k(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},We.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},We.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+k(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},We.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?Me(this._tTime,i)+1:1},We.timeScale=function(t){if(!arguments.length)return this._rts===-Yt?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?F(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-Yt?0:this._rts,this.totalTime(Ae(-this._delay,this._tDur,e),!0),B(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},We.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ke(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Yt&&(this._tTime-=Yt)))),this):this._ps},We.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return!e||!e._sort&&this.parent||G(e,this,t-this._delay),this}return this._start},We.endTime=function(t){return this._start+(l(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},We.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?F(e.rawTime(t),this):this._tTime:this._tTime},We.revert=function(t){void 0===t&&(t=pe);var e=yt;return yt=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),yt=e,this},We.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return!this.parent&&this.vars.immediateRender?-1:i},We.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,q(this)):-2===this._repeat?1/0:this._repeat},We.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,q(this),e?this.time(e):this}return this._rDelay},We.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},We.seek=function(t,e){return this.totalTime(Se(this,t),l(e))},We.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,l(e))},We.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},We.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},We.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},We.resume=function(){return this.paused(!1)},We.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-Yt:0)),this):this._rts<0},We.invalidate=function(){return this._initted=this._act=0,this._zTime=-Yt,this},We.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-Yt))},We.eventCallback=function(t,e,i){var n=this.vars;return 1<arguments.length?(e?(n[t]=e,i&&(n[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},We.then=function(t){var e=this;return new Promise((function(i){function n(){var t=e.then;e.then=null,r(a)&&(a=a(e))&&(a.then||a===e)&&(e.then=t),i(a),e.then=t}var a=r(t)?t:A;e._initted&&1===e.totalProgress()&&0<=e._ts||!e._tTime&&e._ts<0?n():e._prom=n}))},We.kill=function(){ot(this)},Ye);function Ye(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,W(this,+t.duration,1,1),this.data=t.data,_t&&(this._ctx=_t).data.push(this),Ct||Ne.wake()}C(Xe.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Yt,_prom:0,_ps:!1,_rts:1});var Ze=function(t){function o(e,n){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=l(e.sortChildren),bt&&G(e.parent||bt,i(r),n),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&j(i(r),e.scrollTrigger),r}e(o,t);var s=o.prototype;return s.to=function(t,e,i){return X(0,arguments,this),this},s.from=function(t,e,i){return X(1,arguments,this),this},s.fromTo=function(t,e,i,n){return X(2,arguments,this),this},s.set=function(t,e,i){return e.duration=0,e.parent=this,P(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new ai(t,e,Se(this,i),1),this},s.call=function(t,e,i){return G(this,ai.delayedCall(0,t,e),i)},s.staggerTo=function(t,e,i,n,r,a,o){return i.duration=e,i.stagger=i.stagger||n,i.onComplete=a,i.onCompleteParams=o,i.parent=this,new ai(t,i,Se(this,r)),this},s.staggerFrom=function(t,e,i,n,r,a,o){return i.runBackwards=1,P(i).immediateRender=l(i.immediateRender),this.staggerTo(t,e,i,n,r,a,o)},s.staggerFromTo=function(t,e,i,n,r,a,o,s){return n.startAt=i,P(n).immediateRender=l(n.immediateRender),this.staggerTo(t,e,n,r,a,o,s)},s.render=function(t,e,i){var n,r,a,o,s,l,c,h,u,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=t<=0?0:x(t),_=this._zTime<0!=t<0&&(this._initted||!v);if(this!==bt&&g<y&&0<=t&&(y=g),y!==this._tTime||i||_){if(m!==this._time&&v&&(y+=this._time-m,t+=this._time-m),n=y,u=this._start,l=!(h=this._ts),_&&(v||(m=this._zTime),!t&&e||(this._zTime=t)),this._repeat){if(p=this._yoyo,s=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*s+t,e,i);if(n=x(y%s),y===g?(o=this._repeat,n=v):((o=~~(y/s))&&o===y/s&&(n=v,o--),v<n&&(n=v)),d=Me(this._tTime,s),!m&&this._tTime&&d!==o&&(d=o),p&&1&o&&(n=v-n,f=1),o!==d&&!this._lock){var b=p&&1&d,w=b===(p&&1&o);if(o<d&&(b=!b),m=b?0:v,this._lock=1,this.render(m||(f?0:x(o*s)),e,!v)._lock=0,this._tTime=y,!e&&this.parent&&Pe(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),m&&m!==this._time||l!=!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,w&&(this._lock=2,m=b?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;dt(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,i){var n;if(e<i)for(n=t._first;n&&n._start<=i;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,x(m),x(n)))&&(y-=n-(n=c._start)),this._tTime=y,this._time=n,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&n&&!e&&(Pe(this,"onStart"),this._tTime!==y))return this;if(m<=n&&0<=t)for(r=this._first;r;){if(a=r._next,(r._act||n>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(0<r._ts?(n-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(n-r._start)*r._ts,e,i),n!==this._time||!this._ts&&!l){c=0,a&&(y+=this._zTime=-Yt);break}}r=a}else{r=this._last;for(var M=t<0?t:n;r;){if(a=r._prev,(r._act||M<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(0<r._ts?(M-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(M-r._start)*r._ts,e,i||yt&&(r._initted||r._startAt)),n!==this._time||!this._ts&&!l){c=0,a&&(y+=this._zTime=M?-Yt:Yt);break}}r=a}}if(c&&!e&&(this.pause(),c.render(m<=n?0:-Yt)._zTime=m<=n?1:-1,this._ts))return this._start=u,B(this),this.render(t,e,i);this._onUpdate&&!e&&Pe(this,"onUpdate",!0),(y===g&&this._tTime>=this.totalDuration()||!y&&m)&&(u!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||(!t&&v||!(y===g&&0<this._ts||!y&&this._ts<0)||I(this,1),e||t<0&&!m||!y&&!m&&g||(Pe(this,y===g&&0<=t?"onComplete":"onReverseComplete",!0),!this._prom||y<g&&0<this.timeScale()||this._prom())))}return this},s.add=function(t,e){var i=this;if(a(e)||(e=Se(this,e,t)),!(t instanceof Xe)){if(ie(t))return t.forEach((function(t){return i.add(t,e)})),this;if(n(t))return this.addLabel(t,e);if(!r(t))return this;t=ai.delayedCall(0,t)}return this!==t?G(this,t,e):this},s.getChildren=function(t,e,i,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=-Xt);for(var r=[],a=this._first;a;)a._start>=n&&(a instanceof ai?e&&r.push(a):(i&&r.push(a),t&&r.push.apply(r,a.getChildren(!0,e,i)))),a=a._next;return r},s.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},s.remove=function(t){return n(t)?this.removeLabel(t):r(t)?this.killTweensOf(t):(O(this,t),t===this._recent&&(this._recent=this._last),z(this))},s.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=x(Ne.time-(0<this._ts?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},s.addLabel=function(t,e){return this.labels[t]=Se(this,e),this},s.removeLabel=function(t){return delete this.labels[t],this},s.addPause=function(t,e,i){var n=ai.delayedCall(0,e||m,i);return n.data="isPause",this._hasPause=1,G(this,n,Se(this,t))},s.removePause=function(t){var e=this._first;for(t=Se(this,t);e;)e._start===t&&"isPause"===e.data&&I(e),e=e._next},s.killTweensOf=function(t,e,i){for(var n=this.getTweensOf(t,i),r=n.length;r--;)Ke!==n[r]&&n[r].kill(t,e);return this},s.getTweensOf=function(t,e){for(var i,n=[],r=Le(t),o=this._first,s=a(e);o;)o instanceof ai?M(o._targets,r)&&(s?(!Ke||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&n.push(o):(i=o.getTweensOf(r,e)).length&&n.push.apply(n,i),o=o._next;return n},s.tweenTo=function(t,e){e=e||{};var i,n=this,r=Se(n,t),a=e.startAt,o=e.onStart,s=e.onStartParams,l=e.immediateRender,c=ai.to(n,C({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(a&&"time"in a?a.time:n._time))/n.timeScale())||Yt,onStart:function(){if(n.pause(),!i){var t=e.duration||Math.abs((r-(a&&"time"in a?a.time:n._time))/n.timeScale());c._dur!==t&&W(c,t,0,1).render(c._time,!0,!0),i=1}o&&o.apply(c,s||[])}},e));return l?c.render(0):c},s.tweenFromTo=function(t,e,i){return this.tweenTo(e,C({startAt:{time:Se(this,t)}},i))},s.recent=function(){return this._recent},s.nextLabel=function(t){return void 0===t&&(t=this._time),at(this,Se(this,t))},s.previousLabel=function(t){return void 0===t&&(t=this._time),at(this,Se(this,t),1)},s.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+Yt)},s.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var n,r=this._first,a=this.labels;r;)r._start>=i&&(r._start+=t,r._end+=t),r=r._next;if(e)for(n in a)a[n]>=i&&(a[n]+=t);return z(this)},s.invalidate=function(e){var i=this._first;for(this._lock=0;i;)i.invalidate(e),i=i._next;return t.prototype.invalidate.call(this,e)},s.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),z(this)},s.totalDuration=function(t){var e,i,n,r=0,a=this,o=a._last,s=Xt;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(n=a.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),s<(i=o._start)&&a._sort&&o._ts&&!a._lock?(a._lock=1,G(a,o,i-o._delay,1)._lock=0):s=i,i<0&&o._ts&&(r-=i,(!n&&!a._dp||n&&n.smoothChildTiming)&&(a._start+=i/a._ts,a._time-=i,a._tTime-=i),a.shiftChildren(-i,!1,-1/0),s=0),o._end>r&&o._ts&&(r=o._end),o=e;W(a,a===bt&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},o.updateRoot=function(t){if(bt._ts&&(T(bt,F(t,bt)),St=Ne.frame),Ne.frame>=_e){_e+=Wt.autoSleep||120;var e=bt._first;if((!e||!e._ts)&&Wt.autoSleep&&Ne._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ne.sleep()}}},o}(Xe);function Je(t,e,i,a,o,l){var c,h,u,d;if(ve[t]&&!1!==(c=new ve[t]).init(o,c.rawVars?e[t]:function(t,e,i,a,o){if(r(t)&&(t=ii(t,o,e,i,a)),!s(t)||t.style&&t.nodeType||ie(t)||ee(t))return n(t)?ii(t,o,e,i,a):t;var l,c={};for(l in t)c[l]=ii(t[l],o,e,i,a);return c}(e[t],a,o,l,i),i,a,l)&&(i._pt=h=new _i(i._pt,o,t,0,1,c.render,c,0,c.priority),i!==At))for(u=i._ptLookup[i._targets.indexOf(o)],d=c._props.length;d--;)u[c._props[d]]=h;return c}function Qe(t,e,i,n){var r,a,o=e.ease||n||"power1.inOut";if(ie(e))a=i[t]||(i[t]=[]),e.forEach((function(t,i){return a.push({t:i/(e.length-1)*100,v:t,e:o})}));else for(r in e)a=i[r]||(i[r]=[]),"ease"===r||a.push({t:parseFloat(t),v:e[r],e:o})}C(Ze.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ke,$e,ti=function(t,e,i,a,o,s,l,c,h,u){r(a)&&(a=a(o||0,t,s));var p,f=t[e],m="get"!==i?i:r(f)?h?t[e.indexOf("set")||!r(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():f,g=r(f)?h?hi:ci:li;if(n(a)&&(~a.indexOf("random(")&&(a=rt(a)),"="===a.charAt(1)&&(!(p=w(m,a)+(Z(m)||0))&&0!==p||(a=p))),!u||m!==a||$e)return isNaN(m*a)||""===a?(f||e in t||d(e,a),function(t,e,i,n,r,a,o){var s,l,c,h,u,d,p,f,m=new _i(this._pt,t,e,0,1,fi,null,r),g=0,v=0;for(m.b=i,m.e=n,i+="",(p=~(n+="").indexOf("random("))&&(n=rt(n)),a&&(a(f=[i,n],t,e),i=f[0],n=f[1]),l=i.match(oe)||[];s=oe.exec(n);)h=s[0],u=n.substring(g,s.index),c?c=(c+1)%5:"rgba("===u.substr(-5)&&(c=1),h!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:u||1===v?u:",",s:d,c:"="===h.charAt(1)?w(d,h)-d:parseFloat(h)-d,m:c&&c<4?Math.round:0},g=oe.lastIndex);return m.c=g<n.length?n.substring(g,n.length):"",m.fp=o,(se.test(n)||p)&&(m.e=0),this._pt=m}.call(this,t,e,m,a,g,c||Wt.stringFilter,h)):(p=new _i(this._pt,t,e,+m||0,a-(m||0),"boolean"==typeof f?pi:di,0,g),h&&(p.fp=h),l&&p.modifier(l,this,t),this._pt=p)},ei=function t(e,i,n){var r,a,o,s,c,h,u,d,p,f,m,y,_,b=e.vars,x=b.ease,w=b.startAt,M=b.immediateRender,T=b.lazy,S=b.onUpdate,A=b.onUpdateParams,L=b.callbackScope,P=b.runBackwards,R=b.yoyoEase,O=b.keyframes,z=b.autoRevert,N=e._dur,k=e._startAt,F=e._targets,B=e.parent,U=B&&"nested"===B.data?B.vars.targets:F,H="auto"===e._overwrite&&!vt,G=e.timeline;if(!G||O&&x||(x="none"),e._ease=Ge(x,qt.ease),e._yEase=R?He(Ge(!0===R?x:R,qt.ease)):0,R&&e._yoyo&&!e._repeat&&(R=e._yEase,e._yEase=e._ease,e._ease=R),e._from=!G&&!!b.runBackwards,!G||O&&!b.stagger){if(y=(d=F[0]?v(F[0]).harness:0)&&b[d.prop],r=D(b,fe),k&&(k._zTime<0&&k.progress(1),i<0&&P&&M&&!z?k.render(-1,!0):k.revert(P&&N?de:ue),k._lazy=0),w){if(I(e._startAt=ai.set(F,C({data:"isStart",overwrite:!1,parent:B,immediateRender:!0,lazy:l(T),startAt:null,delay:0,onUpdate:S,onUpdateParams:A,callbackScope:L,stagger:0},w))),i<0&&(yt||!M&&!z)&&e._startAt.revert(de),M&&N&&i<=0&&n<=0)return void(i&&(e._zTime=i))}else if(P&&N&&!k)if(i&&(M=!1),o=C({overwrite:!1,data:"isFromStart",lazy:M&&l(T),immediateRender:M,stagger:0,parent:B},r),y&&(o[d.prop]=y),I(e._startAt=ai.set(F,o)),i<0&&(yt?e._startAt.revert(de):e._startAt.render(-1,!0)),e._zTime=i,M){if(!i)return}else t(e._startAt,Yt,Yt);for(e._pt=e._ptCache=0,T=N&&l(T)||T&&!N,a=0;a<F.length;a++){if(u=(c=F[a])._gsap||g(F)[a]._gsap,e._ptLookup[a]=f={},ge[u.id]&&me.length&&E(),m=U===F?a:U.indexOf(c),d&&!1!==(p=new d).init(c,y||r,e,m,U)&&(e._pt=s=new _i(e._pt,c,p.name,0,1,p.render,p,0,p.priority),p._props.forEach((function(t){f[t]=s})),p.priority&&(h=1)),!d||y)for(o in r)ve[o]&&(p=Je(o,r,e,m,c,U))?p.priority&&(h=1):f[o]=s=ti.call(e,c,o,"get",r[o],m,U,0,b.stringFilter);e._op&&e._op[a]&&e.kill(c,e._op[a]),H&&e._pt&&(Ke=e,bt.killTweensOf(c,f,e.globalTime(i)),_=!e.parent,Ke=0),e._pt&&T&&(ge[u.id]=1)}h&&yi(e),e._onInit&&e._onInit(e)}e._onUpdate=S,e._initted=(!e._op||e._pt)&&!_,O&&i<=0&&G.render(Xt,!0,!0)},ii=function(t,e,i,a,o){return r(t)?t.call(e,i,a,o):n(t)&&~t.indexOf("random(")?rt(t):t},ni=xe+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",ri={};_(ni+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return ri[t]=1}));var ai=function(t){function r(e,n,r,o){var c;"number"==typeof n&&(r.duration=n,n=r,r=null);var u,d,f,m,v,y,_,b,w=(c=t.call(this,o?n:P(n))||this).vars,M=w.duration,E=w.delay,T=w.immediateRender,S=w.stagger,A=w.overwrite,L=w.keyframes,R=w.defaults,O=w.scrollTrigger,I=w.yoyoEase,z=n.parent||bt,N=(ie(e)||ee(e)?a(e[0]):"length"in n)?[e]:Le(e);if(c._targets=N.length?g(N):p("GSAP target "+e+" not found. https://greensock.com",!Wt.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=A,L||S||h(M)||h(E)){if(n=c.vars,(u=c.timeline=new Ze({data:"nested",defaults:R||{},targets:z&&"nested"===z.data?z.vars.targets:N})).kill(),u.parent=u._dp=i(c),u._start=0,S||h(M)||h(E)){if(m=N.length,_=S&&$(S),s(S))for(v in S)~ni.indexOf(v)&&((b=b||{})[v]=S[v]);for(d=0;d<m;d++)(f=D(n,ri)).stagger=0,I&&(f.yoyoEase=I),b&&we(f,b),y=N[d],f.duration=+ii(M,i(c),d,y,N),f.delay=(+ii(E,i(c),d,y,N)||0)-c._delay,!S&&1===m&&f.delay&&(c._delay=E=f.delay,c._start+=E,f.delay=0),u.to(y,f,_?_(d,y,N):0),u._ease=Fe.none;u.duration()?M=E=0:c.timeline=0}else if(L){P(C(u.vars.defaults,{ease:"none"})),u._ease=Ge(L.ease||n.ease||"none");var k,F,B,U=0;if(ie(L))L.forEach((function(t){return u.to(N,t,">")})),u.duration();else{for(v in f={},L)"ease"===v||"easeEach"===v||Qe(v,L[v],f,L.easeEach);for(v in f)for(k=f[v].sort((function(t,e){return t.t-e.t})),d=U=0;d<k.length;d++)(B={ease:(F=k[d]).e,duration:(F.t-(d?k[d-1].t:0))/100*M})[v]=F.v,u.to(N,B,U),U+=B.duration;u.duration()<M&&u.to({},{duration:M-u.duration()})}}M||c.duration(M=u.duration())}else c.timeline=0;return!0!==A||vt||(Ke=i(c),bt.killTweensOf(N),Ke=0),G(z,i(c),r),n.reversed&&c.reverse(),n.paused&&c.paused(!0),(T||!M&&!L&&c._start===x(z._time)&&l(T)&&function t(e){return!e||e._ts&&t(e.parent)}(i(c))&&"nested"!==z.data)&&(c._tTime=-Yt,c.render(Math.max(0,-E)||0)),O&&j(i(c),O),c}e(r,t);var o=r.prototype;return o.render=function(t,e,i){var n,r,a,o,s,l,c,h,u,d=this._time,p=this._tDur,f=this._dur,m=t<0,g=p-Yt<t&&!m?p:t<Yt?0:t;if(f){if(g!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=m){if(n=g,h=this.timeline,this._repeat){if(o=f+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*o+t,e,i);if(n=x(g%o),g===p?(a=this._repeat,n=f):((a=~~(g/o))&&a===g/o&&(n=f,a--),f<n&&(n=f)),(l=this._yoyo&&1&a)&&(u=this._yEase,n=f-n),s=Me(this._tTime,o),n===d&&!i&&this._initted)return this._tTime=g,this;a!==s&&(h&&this._yEase&&dt(h,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=i=1,this.render(x(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(V(this,m?t:n,i,e,g))return this._tTime=0,this;if(d!==this._time)return this;if(f!==this._dur)return this.render(t,e,i)}if(this._tTime=g,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(u||this._ease)(n/f),this._from&&(this.ratio=c=1-c),n&&!d&&!e&&(Pe(this,"onStart"),this._tTime!==g))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;h&&h.render(t<0?t:!n&&l?-Yt:h._dur*h._ease(n/this._dur),e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(m&&N(this,t,0,i),Pe(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!e&&this.parent&&Pe(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&N(this,t,0,!0),!t&&f||!(g===this._tDur&&0<this._ts||!g&&this._ts<0)||I(this,1),e||m&&!d||!(g||d||l)||(Pe(this,g===p?"onComplete":"onReverseComplete",!0),!this._prom||g<p&&0<this.timeScale()||this._prom()))}}else!function(t,e,i,n){var r,a,o,s=t.ratio,l=e<0||!e&&(!t._start&&function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))}(t)&&(t._initted||!Ee(t))||(t._ts<0||t._dp._ts<0)&&!Ee(t))?0:1,c=t._rDelay,h=0;if(c&&t._repeat&&(h=Ae(0,t._tDur,e),a=Me(h,c),t._yoyo&&1&a&&(l=1-l),a!==Me(t._tTime,c)&&(s=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==s||yt||n||t._zTime===Yt||!e&&t._zTime){if(!t._initted&&V(t,e,n,i,h))return;for(o=t._zTime,t._zTime=e||(i?Yt:0),i=i||e&&!o,t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=h,r=t._pt;r;)r.r(l,r.d),r=r._next;e<0&&N(t,e,0,!0),t._onUpdate&&!i&&Pe(t,"onUpdate"),h&&t._repeat&&!i&&t.parent&&Pe(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&I(t,1),i||yt||(Pe(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},o.targets=function(){return this._targets},o.invalidate=function(e){return e&&this.vars.runBackwards||(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},o.resetTo=function(t,e,i,n){Ct||Ne.wake(),this._ts||this.play();var r=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||ei(this,r),function(t,e,i,n,r,a,o){var s,l,c,h,u=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!u)for(u=t._ptCache[e]=[],c=t._ptLookup,h=t._targets.length;h--;){if((s=c[h][e])&&s.d&&s.d._pt)for(s=s.d._pt;s&&s.p!==e&&s.fp!==e;)s=s._next;if(!s)return $e=1,t.vars[e]="+=0",ei(t,o),$e=0,1;u.push(s)}for(h=u.length;h--;)(s=(l=u[h])._pt||l).s=!n&&0!==n||r?s.s+(n||0)+a*s.c:n,s.c=i-s.s,l.e&&(l.e=b(i)+Z(l.e)),l.b&&(l.b=s.s+Z(l.b))}(this,t,e,i,n,this._ease(r/this._dur),r)?this.resetTo(t,e,i,n):(U(this,0),this.parent||R(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},o.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?ot(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ke&&!0!==Ke.vars.overwrite)._first||ot(this),this.parent&&i!==this.timeline.totalDuration()&&W(this,this._dur*this.timeline._tDur/i,0,1),this}var r,a,o,s,l,c,h,u=this._targets,d=t?Le(t):u,p=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0}(u,d))return"all"===e&&(this._pt=0),ot(this);for(r=this._op=this._op||[],"all"!==e&&(n(e)&&(l={},_(e,(function(t){return l[t]=1})),e=l),e=function(t,e){var i,n,r,a,o=t[0]?v(t[0]).harness:0,s=o&&o.aliases;if(!s)return e;for(n in i=we({},e),s)if(n in i)for(r=(a=s[n].split(",")).length;r--;)i[a[r]]=i[n];return i}(u,e)),h=u.length;h--;)if(~d.indexOf(u[h]))for(l in a=p[h],"all"===e?(r[h]=e,s=a,o={}):(o=r[h]=r[h]||{},s=e),s)(c=a&&a[l])&&("kill"in c.d&&!0!==c.d.kill(l)||O(this,c,"_pt"),delete a[l]),"all"!==o&&(o[l]=1);return this._initted&&!this._pt&&f&&ot(this),this},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e){return X(1,arguments)},r.delayedCall=function(t,e,i,n){return new r(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:n})},r.fromTo=function(t,e,i){return X(2,arguments)},r.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new r(t,e)},r.killTweensOf=function(t,e,i){return bt.killTweensOf(t,e,i)},r}(Xe);function oi(t,e,i){return t.setAttribute(e,i)}function si(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)}C(ai.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_("staggerTo,staggerFrom,staggerFromTo",(function(t){ai[t]=function(){var e=new Ze,i=Ce.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}}));var li=function(t,e,i){return t[e]=i},ci=function(t,e,i){return t[e](i)},hi=function(t,e,i,n){return t[e](n.fp,i)},ui=function(t,e){return r(t[e])?ci:o(t[e])&&t.setAttribute?oi:li},di=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},pi=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},fi=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},mi=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},gi=function(t,e,i,n){for(var r,a=this._pt;a;)r=a._next,a.p===n&&a.modifier(t,e,i),a=r},vi=function(t){for(var e,i,n=this._pt;n;)i=n._next,n.p===t&&!n.op||n.op===t?O(this,n,"_pt"):n.dep||(e=1),n=i;return!e},yi=function(t){for(var e,i,n,r,a=t._pt;a;){for(e=a._next,i=n;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:r)?a._prev._next=a:n=a,(a._next=i)?i._prev=a:r=a,a=e}t._pt=n},_i=(bi.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=si,this.m=t,this.mt=i,this.tween=e},bi);function bi(t,e,i,n,r,a,o,s,l){this.t=e,this.s=n,this.c=r,this.p=i,this.r=a||di,this.d=o||this,this.set=s||li,this.pr=l||0,(this._next=t)&&(t._prev=this)}function xi(t){return(Ti[t]||Si).map((function(t){return t()}))}function wi(){var t=Date.now(),e=[];2<t-Ai&&(xi("matchMediaInit"),Ei.forEach((function(t){var i,n,r,a,o=t.queries,s=t.conditions;for(n in o)(i=xt.matchMedia(o[n]).matches)&&(r=1),i!==s[n]&&(s[n]=i,a=1);a&&(t.revert(),r&&e.push(t))})),xi("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t)})),Ai=t,xi("matchMedia"))}_(xe+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return fe[t]=1})),he.TweenMax=he.TweenLite=ai,he.TimelineLite=he.TimelineMax=Ze,bt=new Ze({sortChildren:!1,defaults:qt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Wt.stringFilter=ut;var Mi,Ei=[],Ti={},Si=[],Ai=0,Ci=((Mi=Li.prototype).add=function(t,e,i){function n(){var t,n=_t,o=a.selector;return n&&n!==a&&n.data.push(a),i&&(a.selector=Q(i)),_t=a,r(t=e.apply(a,arguments))&&a._r.push(t),_t=n,a.selector=o,a.isReverted=!1,t}r(t)&&(i=e,e=t,t=r);var a=this;return a.last=n,t===r?n(a):t?a[t]=n:n},Mi.ignore=function(t){var e=_t;_t=null,t(this),_t=e},Mi.getTweens=function(){var t=[];return this.data.forEach((function(e){return e instanceof Li?t.push.apply(t,e.getTweens()):e instanceof ai&&!(e.parent&&"nested"===e.parent.data)&&t.push(e)})),t},Mi.clear=function(){this._r.length=this.data.length=0},Mi.kill=function(t,e){var i=this;if(t){var n=this.getTweens();this.data.forEach((function(t){"isFlip"===t.data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(t){return n.splice(n.indexOf(t),1)})))})),n.map((function(t){return{g:t.globalTime(0),t:t}})).sort((function(t,e){return e.g-t.g||-1})).forEach((function(e){return e.t.revert(t)})),this.data.forEach((function(e){return!(e instanceof Xe)&&e.revert&&e.revert(t)})),this._r.forEach((function(e){return e(t,i)})),this.isReverted=!0}else this.data.forEach((function(t){return t.kill&&t.kill()}));if(this.clear(),e){var r=Ei.indexOf(this);~r&&Ei.splice(r,1)}},Mi.revert=function(t){this.kill(t||{})},Li);function Li(t,e){this.selector=e&&Q(e),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var Di,Pi=((Di=Ri.prototype).add=function(t,e,i){s(t)||(t={matches:t});var n,r,a,o=new Ci(0,i||this.scope),l=o.conditions={};for(r in this.contexts.push(o),e=o.add("onMatch",e),o.queries=t)"all"===r?a=1:(n=xt.matchMedia(t[r]))&&(Ei.indexOf(o)<0&&Ei.push(o),(l[r]=n.matches)&&(a=1),n.addListener?n.addListener(wi):n.addEventListener("change",wi));return a&&e(o),this},Di.revert=function(t){this.kill(t||{})},Di.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},Ri);function Ri(t){this.contexts=[],this.scope=t}var Oi={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((function(t){return function(t){var e=(t=!t.name&&t.default||t).name,i=r(t),n=e&&!i&&t.init?function(){this._props=[]}:t,a={init:m,render:mi,add:ti,kill:vi,modifier:gi,rawVars:0},o={targetTest:0,get:0,getSetter:ui,aliases:{},register:0};if(ke(),t!==n){if(ve[e])return;C(n,C(D(t,a),o)),we(n.prototype,we(a,D(t,o))),ve[n.prop=e]=n,t.targetTest&&(be.push(n),fe[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}f(e,n),t.register&&t.register(Ni,n,_i)}(t)}))},timeline:function(t){return new Ze(t)},getTweensOf:function(t,e){return bt.getTweensOf(t,e)},getProperty:function(t,e,i,r){n(t)&&(t=Le(t)[0]);var a=v(t||{}).get,o=i?A:S;return"native"===i&&(i=""),t?e?o((ve[e]&&ve[e].get||a)(t,e,i,r)):function(e,i,n){return o((ve[e]&&ve[e].get||a)(t,e,i,n))}:t},quickSetter:function(t,e,i){if(1<(t=Le(t)).length){var n=t.map((function(t){return Ni.quickSetter(t,e,i)})),r=n.length;return function(t){for(var e=r;e--;)n[e](t)}}t=t[0]||{};var a=ve[e],o=v(t),s=o.harness&&(o.harness.aliases||{})[e]||e,l=a?function(e){var n=new a;At._pt=0,n.init(t,i?e+i:e,At,0,[t]),n.render(1,n),At._pt&&mi(1,At)}:o.set(t,s);return a?l:function(e){return l(t,s,i?e+i:e,o,1)}},quickTo:function(t,e,i){function n(t,i,n){return a.resetTo(e,t,i,n)}var r,a=Ni.to(t,we(((r={})[e]="+=0.1",r.paused=!0,r),i||{}));return n.tween=a,n},isTweening:function(t){return 0<bt.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=Ge(t.ease,qt.ease)),L(qt,t||{})},config:function(t){return L(Wt,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,r=t.defaults,a=t.extendTimeline;(n||"").split(",").forEach((function(t){return t&&!ve[t]&&!he[t]&&p(e+" effect requires "+t+" plugin.")})),ye[e]=function(t,e,n){return i(Le(t),C(e||{},r),n)},a&&(Ze.prototype[e]=function(t,i,n){return this.add(ye[e](t,s(i)?i:(n=i)&&{},this),n)})},registerEase:function(t,e){Fe[t]=Ge(e)},parseEase:function(t,e){return arguments.length?Ge(t,e):Fe},getById:function(t){return bt.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,n,r=new Ze(t);for(r.smoothChildTiming=l(t.smoothChildTiming),bt.remove(r),r._dp=0,r._time=r._tTime=bt._time,i=bt._first;i;)n=i._next,!e&&!i._dur&&i instanceof ai&&i.vars.onComplete===i._targets[0]||G(r,i,i._start-i._delay),i=n;return G(bt,r,0),r},context:function(t,e){return t?new Ci(t,e):_t},matchMedia:function(t){return new Pi(t)},matchMediaRefresh:function(){return Ei.forEach((function(t){var e,i,n=t.conditions;for(i in n)n[i]&&(n[i]=!1,e=1);e&&t.revert()}))||wi()},addEventListener:function(t,e){var i=Ti[t]||(Ti[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Ti[t],n=i&&i.indexOf(e);0<=n&&i.splice(n,1)},utils:{wrap:function t(e,i,n){var r=i-e;return ie(e)?nt(e,t(0,e.length),i):Y(n,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,i,n){var r=i-e,a=2*r;return ie(e)?nt(e,t(0,e.length-1),i):Y(n,(function(t){return e+(r<(t=(a+(t-e)%a)%a||0)?a-t:t)}))},distribute:$,random:it,snap:et,normalize:function(t,e,i){return De(t,e,0,1,i)},getUnit:Z,clamp:function(t,e,i){return Y(i,(function(i){return Ae(t,e,i)}))},splitColor:lt,toArray:Le,selector:Q,mapRange:De,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||Z(i))}},interpolate:function t(e,i,r,a){var o=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!o){var s,l,c,h,u,d=n(e),p={};if(!0===r&&(a=1)&&(r=null),d)e={p:e},i={p:i};else if(ie(e)&&!ie(i)){for(c=[],h=e.length,u=h-2,l=1;l<h;l++)c.push(t(e[l-1],e[l]));h--,o=function(t){t*=h;var e=Math.min(u,~~t);return c[e](t-e)},r=i}else a||(e=we(ie(e)?[]:{},e));if(!c){for(s in i)ti.call(p,e,s,"get",i[s]);o=function(t){return mi(t,p)||(d?e.p:e)}}}return Y(r,o)},shuffle:K},install:u,effects:ye,ticker:Ne,updateRoot:Ze.updateRoot,plugins:ve,globalTimeline:bt,core:{PropTween:_i,globals:f,Tween:ai,Timeline:Ze,Animation:Xe,getCache:v,_removeLinkedListItem:O,reverting:function(){return yt},context:function(t){return t&&_t&&(_t.data.push(t),t._ctx=_t),_t},suppressOverwrites:function(t){return vt=t}}};function Ii(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i}function zi(t,e){return{name:t,rawVars:1,init:function(t,i,r){r._onInit=function(t){var r,a;if(n(i)&&(r={},_(i,(function(t){return r[t]=1})),i=r),e){for(a in r={},i)r[a]=e(i[a]);i=r}!function(t,e){var i,n,r,a=t._targets;for(i in e)for(n=a.length;n--;)(r=(r=t._ptLookup[n][i])&&r.d)&&(r._pt&&(r=Ii(r,i)),r&&r.modifier&&r.modifier(e[i],t,a[n],i))}(t,i)}}}}_("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Oi[t]=ai[t]})),Ne.add(Ze.updateRoot),At=Oi.to({},{duration:0});var Ni=Oi.registerPlugin({name:"attr",init:function(t,e,i,n,r){var a,o,s;for(a in this.tween=i,e)s=t.getAttribute(a)||"",(o=this.add(t,"setAttribute",(s||0)+"",e[a],n,r,0,0,a)).op=a,o.b=s,this._props.push(a)},render:function(t,e){for(var i=e._pt;i;)yt?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},zi("roundProps",tt),zi("modifiers"),zi("snap",et))||Oi;function ki(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Fi(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Bi(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function Ui(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)}function Hi(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function Gi(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function ji(t,e,i){return t.style[e]=i}function Vi(t,e,i){return t.style.setProperty(e,i)}function Wi(t,e,i){return t._gsap[e]=i}function qi(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i}function Xi(t,e,i,n,r){var a=t._gsap;a.scaleX=a.scaleY=i,a.renderTransform(r,a)}function Yi(t,e,i,n,r){var a=t._gsap;a[e]=i,a.renderTransform(r,a)}function Zi(t,e){var i=this,n=this.target,r=n.style;if(t in Xn){if(this.tfm=this.tfm||{},"transform"!==t&&(~(t=tr[t]||t).indexOf(",")?t.split(",").forEach((function(t){return i.tfm[t]=sr(n,t)})):this.tfm[t]=n._gsap.x?n._gsap[t]:sr(n,t)),0<=this.props.indexOf(er))return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(ir,e,"")),t=er}(r||e)&&this.props.push(t,e,r[t])}function Ji(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))}function Qi(){var t,e,i=this.props,n=this.target,r=n.style,a=n._gsap;for(t=0;t<i.length;t+=3)i[t+1]?n[i[t]]=i[t+2]:i[t+2]?r[i[t]]=i[t+2]:r.removeProperty(i[t].replace(Qn,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)a[e]=this.tfm[e];a.svg&&(a.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),!(t=An())||t.isStart||r[er]||(Ji(r),a.uncache=1)}}function Ki(t,e){var i={target:t,props:[],revert:Qi,save:Zi};return e&&e.split(",").forEach((function(t){return i.save(t)})),i}function $i(t,e){var i=wn.createElementNS?wn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):wn.createElement(t);return i.style?i:wn.createElement(t)}function tn(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(Qn,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&tn(t,rr(e)||e,1)||""}function en(){"undefined"!=typeof window&&window.document&&(xn=window,wn=xn.document,Mn=wn.documentElement,Tn=$i("div")||{style:{}},$i("div"),er=rr(er),ir=er+"Origin",Tn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Cn=!!rr("perspective"),An=Ni.core.reverting,En=1)}function nn(t){var e,i=$i("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(Mn.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=nn}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Mn.removeChild(i),this.style.cssText=a,e}function rn(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])}function an(t){var e;try{e=t.getBBox()}catch(i){e=nn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===nn||(e=nn.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+rn(t,["x","cx","x1"])||0,y:+rn(t,["y","cy","y1"])||0,width:0,height:0}}function on(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!an(t))}function sn(t,e){if(e){var i=t.style;e in Xn&&e!==ir&&(e=er),i.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty(e.replace(Qn,"-$1").toLowerCase())):i.removeAttribute(e)}}function ln(t,e,i,n,r,a){var o=new _i(t._pt,e,i,0,1,a?Gi:Hi);return(t._pt=o).b=n,o.e=r,t._props.push(i),o}function cn(t,e,i,n){var r,a,o,s,l=parseFloat(i)||0,c=(i+"").trim().substr((l+"").length)||"px",h=Tn.style,u=Kn.test(e),d="svg"===t.tagName.toLowerCase(),p=(d?"client":"offset")+(u?"Width":"Height"),f="px"===n,m="%"===n;return n===c||!l||ar[n]||ar[c]?l:("px"===c||f||(l=cn(t,e,i,"px")),s=t.getCTM&&on(t),!m&&"%"!==c||!Xn[e]&&!~e.indexOf("adius")?(h[u?"width":"height"]=100+(f?c:n),a=~e.indexOf("adius")||"em"===n&&t.appendChild&&!d?t:t.parentNode,s&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==wn&&a.appendChild||(a=wn.body),(o=a._gsap)&&m&&o.width&&u&&o.time===Ne.time&&!o.uncache?b(l/o.width*100):(!m&&"%"!==c||or[tn(a,"display")]||(h.position=tn(t,"position")),a===t&&(h.position="static"),a.appendChild(Tn),r=Tn[p],a.removeChild(Tn),h.position="absolute",u&&m&&((o=v(a)).time=Ne.time,o.width=a[p]),b(f?r*l/100:r&&l?100/r*l:0))):(r=s?t.getBBox()[u?"width":"height"]:t[p],b(m?l/r*100:l/100*r)))}function hn(t,e,i,n){if(!i||"none"===i){var r=rr(e,t,1),a=r&&tn(t,r,1);a&&a!==i?(e=r,i=a):"borderColor"===e&&(i=tn(t,"borderTopColor"))}var o,s,l,c,h,u,d,p,f,m,g,v=new _i(this._pt,t.style,e,0,1,fi),y=0,_=0;if(v.b=i,v.e=n,i+="","auto"==(n+="")&&(t.style[e]=n,n=tn(t,e)||n,t.style[e]=i),ut(o=[i,n]),n=o[1],l=(i=o[0]).match(ae)||[],(n.match(ae)||[]).length){for(;s=ae.exec(n);)d=s[0],f=n.substring(y,s.index),h?h=(h+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(h=1),d!==(u=l[_++]||"")&&(c=parseFloat(u)||0,g=u.substr((c+"").length),"="===d.charAt(1)&&(d=w(c,d)+g),p=parseFloat(d),m=d.substr((p+"").length),y=ae.lastIndex-m.length,m||(m=m||Wt.units[e]||g,y===n.length&&(n+=m,v.e+=m)),g!==m&&(c=cn(t,e,u,m)||0),v._pt={_next:v._pt,p:f||1===_?f:",",s:c,c:p-c,m:h&&h<4||"zIndex"===e?Math.round:0});v.c=y<n.length?n.substring(y,n.length):""}else v.r="display"===e&&"none"===n?Gi:Hi;return se.test(n)&&(v.e=0),this._pt=v}function un(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return"top"!==i&&"bottom"!==i&&"left"!==n&&"right"!==n||(t=i,i=n,n=t),e[0]=lr[i]||i,e[1]=lr[n]||n,e.join(" ")}function dn(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,n,r,a=e.t,o=a.style,s=e.u,l=a._gsap;if("all"===s||!0===s)o.cssText="",n=1;else for(r=(s=s.split(",")).length;-1<--r;)i=s[r],Xn[i]&&(n=1,i="transformOrigin"===i?ir:er),sn(a,i);n&&(sn(a,er),l&&(l.svg&&a.removeAttribute("transform"),dr(a,1),l.uncache=1,Ji(o)))}}function pn(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function fn(t){var e=tn(t,er);return pn(e)?hr:e.substr(7).match(re).map(b)}function mn(t,e){var i,n,r,a,o=t._gsap||v(t),s=t.style,l=fn(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?hr:l:(l!==hr||t.offsetParent||t===Mn||o.svg||(r=s.display,s.display="block",(i=t.parentNode)&&t.offsetParent||(a=1,n=t.nextElementSibling,Mn.appendChild(t)),l=fn(t),r?s.display=r:sn(t,"display"),a&&(n?i.insertBefore(t,n):i?i.appendChild(t):Mn.removeChild(t))),e&&6<l.length?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)}function gn(t,e,i,n,r,a){var o,s,l,c=t._gsap,h=r||mn(t,!0),u=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=h[0],g=h[1],v=h[2],y=h[3],_=h[4],b=h[5],x=e.split(" "),w=parseFloat(x[0])||0,M=parseFloat(x[1])||0;i?h!==hr&&(s=m*y-g*v)&&(l=w*(-g/s)+M*(m/s)-(m*b-g*_)/s,w=w*(y/s)+M*(-v/s)+(v*b-y*_)/s,M=l):(w=(o=an(t)).x+(~x[0].indexOf("%")?w/100*o.width:w),M=o.y+(~(x[1]||x[0]).indexOf("%")?M/100*o.height:M)),n||!1!==n&&c.smooth?(_=w-u,b=M-d,c.xOffset=p+(_*m+b*v)-_,c.yOffset=f+(_*g+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=M,c.smooth=!!n,c.origin=e,c.originIsAbsolute=!!i,t.style[ir]="0px 0px",a&&(ln(a,c,"xOrigin",u,w),ln(a,c,"yOrigin",d,M),ln(a,c,"xOffset",p,c.xOffset),ln(a,c,"yOffset",f,c.yOffset)),t.setAttribute("data-svg-origin",w+" "+M)}function vn(t,e,i){var n=Z(e);return b(parseFloat(e)+parseFloat(cn(t,"x",i+"px",n)))+n}function yn(t,e,i,r,a){var o,s,l=360,c=n(a),h=parseFloat(a)*(c&&~a.indexOf("rad")?Yn:1)-r,u=r+h+"deg";return c&&("short"===(o=a.split("_")[1])&&(h%=l)!=h%180&&(h+=h<0?l:-l),"cw"===o&&h<0?h=(h+36e9)%l-~~(h/l)*l:"ccw"===o&&0<h&&(h=(h-36e9)%l-~~(h/l)*l)),t._pt=s=new _i(t._pt,e,i,r,h,Fi),s.e=u,s.u="deg",t._props.push(i),s}function _n(t,e){for(var i in e)t[i]=e[i];return t}function bn(t,e,i){var n,r,a,o,s,l,c,h=_n({},i._gsap),u=i.style;for(r in h.svg?(a=i.getAttribute("transform"),i.setAttribute("transform",""),u[er]=e,n=dr(i,1),sn(i,er),i.setAttribute("transform",a)):(a=getComputedStyle(i)[er],u[er]=e,n=dr(i,1),u[er]=a),Xn)(a=h[r])!==(o=n[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(s=Z(a)!==(c=Z(o))?cn(i,r,a,c):parseFloat(a),l=parseFloat(o),t._pt=new _i(t._pt,n,r,s,l-s,ki),t._pt.u=c||0,t._props.push(r));_n(n,h)}ai.version=Ze.version=Ni.version="3.11.2",Tt=1,c()&&ke();var xn,wn,Mn,En,Tn,Sn,An,Cn,Ln=Fe.Power0,Dn=Fe.Power1,Pn=Fe.Power2,Rn=Fe.Power3,On=Fe.Power4,In=Fe.Linear,zn=Fe.Quad,Nn=Fe.Cubic,kn=Fe.Quart,Fn=Fe.Quint,Bn=Fe.Strong,Un=Fe.Elastic,Hn=Fe.Back,Gn=Fe.SteppedEase,jn=Fe.Bounce,Vn=Fe.Sine,Wn=Fe.Expo,qn=Fe.Circ,Xn={},Yn=180/Math.PI,Zn=Math.PI/180,Jn=Math.atan2,Qn=/([A-Z])/g,Kn=/(left|right|width|margin|padding|x)/i,$n=/[\s,\(]\S/,tr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},er="transform",ir=er+"Origin",nr="O,Moz,ms,Ms,Webkit".split(","),rr=function(t,e,i){var n=(e||Tn).style,r=5;if(t in n&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(nr[r]+t in n););return r<0?null:(3===r?"ms":0<=r?nr[r]:"")+t},ar={deg:1,rad:1,turn:1},or={grid:1,flex:1},sr=function(t,e,i,n){var r;return En||en(),e in tr&&"transform"!==e&&~(e=tr[e]).indexOf(",")&&(e=e.split(",")[0]),Xn[e]&&"transform"!==e?(r=dr(t,n),r="transformOrigin"!==e?r[e]:r.svg?r.origin:pr(tn(t,ir))+" "+r.zOrigin+"px"):(r=t.style[e])&&"auto"!==r&&!n&&!~(r+"").indexOf("calc(")||(r=cr[e]&&cr[e](t,e,i)||tn(t,e)||y(t,e)||("opacity"===e?1:0)),i&&!~(r+"").trim().indexOf(" ")?cn(t,e,r,i)+i:r},lr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},cr={clearProps:function(t,e,i,n,r){if("isFromStart"!==r.data){var a=t._pt=new _i(t._pt,e,i,0,0,dn);return a.u=n,a.pr=-10,a.tween=r,t._props.push(i),1}}},hr=[1,0,0,1,0,0],ur={},dr=function(t,e){var i=t._gsap||new qe(t);if("x"in i&&!e&&!i.uncache)return i;var n,r,a,o,s,l,c,h,u,d,p,f,m,g,v,y,_,x,w,M,E,T,S,A,C,L,D,P,R,O,I,z,N=t.style,k=i.scaleX<0,F="deg",B=getComputedStyle(t),U=tn(t,ir)||"0";return n=r=a=l=c=h=u=d=p=0,o=s=1,i.svg=!(!t.getCTM||!on(t)),B.translate&&("none"===B.translate&&"none"===B.scale&&"none"===B.rotate||(N[er]=("none"!==B.translate?"translate3d("+(B.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==B.rotate?"rotate("+B.rotate+") ":"")+("none"!==B.scale?"scale("+B.scale.split(" ").join(",")+") ":"")+("none"!==B[er]?B[er]:"")),N.scale=N.rotate=N.translate="none"),g=mn(t,i.svg),i.svg&&(A=i.uncache?(C=t.getBBox(),U=i.xOrigin-C.x+"px "+(i.yOrigin-C.y)+"px",""):!e&&t.getAttribute("data-svg-origin"),gn(t,A||U,!!A||i.originIsAbsolute,!1!==i.smooth,g)),f=i.xOrigin||0,m=i.yOrigin||0,g!==hr&&(x=g[0],w=g[1],M=g[2],E=g[3],n=T=g[4],r=S=g[5],6===g.length?(o=Math.sqrt(x*x+w*w),s=Math.sqrt(E*E+M*M),l=x||w?Jn(w,x)*Yn:0,(u=M||E?Jn(M,E)*Yn+l:0)&&(s*=Math.abs(Math.cos(u*Zn))),i.svg&&(n-=f-(f*x+m*M),r-=m-(f*w+m*E))):(z=g[6],O=g[7],D=g[8],P=g[9],R=g[10],I=g[11],n=g[12],r=g[13],a=g[14],c=(v=Jn(z,R))*Yn,v&&(A=T*(y=Math.cos(-v))+D*(_=Math.sin(-v)),C=S*y+P*_,L=z*y+R*_,D=T*-_+D*y,P=S*-_+P*y,R=z*-_+R*y,I=O*-_+I*y,T=A,S=C,z=L),h=(v=Jn(-M,R))*Yn,v&&(y=Math.cos(-v),I=E*(_=Math.sin(-v))+I*y,x=A=x*y-D*_,w=C=w*y-P*_,M=L=M*y-R*_),l=(v=Jn(w,x))*Yn,v&&(A=x*(y=Math.cos(v))+w*(_=Math.sin(v)),C=T*y+S*_,w=w*y-x*_,S=S*y-T*_,x=A,T=C),c&&359.9<Math.abs(c)+Math.abs(l)&&(c=l=0,h=180-h),o=b(Math.sqrt(x*x+w*w+M*M)),s=b(Math.sqrt(S*S+z*z)),v=Jn(T,S),u=2e-4<Math.abs(v)?v*Yn:0,p=I?1/(I<0?-I:I):0),i.svg&&(A=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!pn(tn(t,er)),A&&t.setAttribute("transform",A))),90<Math.abs(u)&&Math.abs(u)<270&&(k?(o*=-1,u+=l<=0?180:-180,l+=l<=0?180:-180):(s*=-1,u+=u<=0?180:-180)),e=e||i.uncache,i.x=n-((i.xPercent=n&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+"px",i.y=r-((i.yPercent=r&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+"px",i.z=a+"px",i.scaleX=b(o),i.scaleY=b(s),i.rotation=b(l)+F,i.rotationX=b(c)+F,i.rotationY=b(h)+F,i.skewX=u+F,i.skewY=d+F,i.transformPerspective=p+"px",(i.zOrigin=parseFloat(U.split(" ")[2])||0)&&(N[ir]=pr(U)),i.xOffset=i.yOffset=0,i.force3D=Wt.force3D,i.renderTransform=i.svg?_r:Cn?yr:fr,i.uncache=0,i},pr=function(t){return(t=t.split(" "))[0]+" "+t[1]},fr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,yr(t,e)},mr="0deg",gr="0px",vr=") ",yr=function(t,e){var i=e||this,n=i.xPercent,r=i.yPercent,a=i.x,o=i.y,s=i.z,l=i.rotation,c=i.rotationY,h=i.rotationX,u=i.skewX,d=i.skewY,p=i.scaleX,f=i.scaleY,m=i.transformPerspective,g=i.force3D,v=i.target,y=i.zOrigin,_="",b="auto"===g&&t&&1!==t||!0===g;if(y&&(h!==mr||c!==mr)){var x,w=parseFloat(c)*Zn,M=Math.sin(w),E=Math.cos(w);w=parseFloat(h)*Zn,a=vn(v,a,M*(x=Math.cos(w))*-y),o=vn(v,o,-Math.sin(w)*-y),s=vn(v,s,E*x*-y+y)}m!==gr&&(_+="perspective("+m+vr),(n||r)&&(_+="translate("+n+"%, "+r+"%) "),!b&&a===gr&&o===gr&&s===gr||(_+=s!==gr||b?"translate3d("+a+", "+o+", "+s+") ":"translate("+a+", "+o+vr),l!==mr&&(_+="rotate("+l+vr),c!==mr&&(_+="rotateY("+c+vr),h!==mr&&(_+="rotateX("+h+vr),u===mr&&d===mr||(_+="skew("+u+", "+d+vr),1===p&&1===f||(_+="scale("+p+", "+f+vr),v.style[er]=_||"translate(0, 0)"},_r=function(t,e){var i,n,r,a,o,s=e||this,l=s.xPercent,c=s.yPercent,h=s.x,u=s.y,d=s.rotation,p=s.skewX,f=s.skewY,m=s.scaleX,g=s.scaleY,v=s.target,y=s.xOrigin,_=s.yOrigin,x=s.xOffset,w=s.yOffset,M=s.forceCSS,E=parseFloat(h),T=parseFloat(u);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=Zn,p*=Zn,i=Math.cos(d)*m,n=Math.sin(d)*m,r=Math.sin(d-p)*-g,a=Math.cos(d-p)*g,p&&(f*=Zn,o=Math.tan(p-f),r*=o=Math.sqrt(1+o*o),a*=o,f&&(o=Math.tan(f),i*=o=Math.sqrt(1+o*o),n*=o)),i=b(i),n=b(n),r=b(r),a=b(a)):(i=m,a=g,n=r=0),(E&&!~(h+"").indexOf("px")||T&&!~(u+"").indexOf("px"))&&(E=cn(v,"x",h,"px"),T=cn(v,"y",u,"px")),(y||_||x||w)&&(E=b(E+y-(y*i+_*r)+x),T=b(T+_-(y*n+_*a)+w)),(l||c)&&(E=b(E+l/100*(o=v.getBBox()).width),T=b(T+c/100*o.height)),o="matrix("+i+","+n+","+r+","+a+","+E+","+T+")",v.setAttribute("transform",o),M&&(v.style[er]=o)};_("padding,margin,Width,Radius",(function(t,e){var i="Right",n="Bottom",r="Left",a=(e<3?["Top",i,n,r]:["Top"+r,"Top"+i,n+i,n+r]).map((function(i){return e<2?t+i:"border"+i+t}));cr[1<e?"border"+t:t]=function(t,e,i,n,r){var o,s;if(arguments.length<4)return o=a.map((function(e){return sr(t,e,i)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(n+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,r)}}));var br,xr,wr={name:"css",register:en,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,a){var o,s,l,c,h,u,p,f,m,g,v,y,_,b,x,M,E=this._props,T=t.style,S=i.vars.startAt;for(p in En||en(),this.styles=this.styles||Ki(t),M=this.styles.props,this.tween=i,e)if("autoRound"!==p&&(s=e[p],!ve[p]||!Je(p,e,i,r,t,a)))if(h=typeof s,u=cr[p],"function"===h&&(h=typeof(s=s.call(i,r,t,a))),"string"===h&&~s.indexOf("random(")&&(s=rt(s)),u)u(this,t,p,s,i)&&(x=1);else if("--"===p.substr(0,2))o=(getComputedStyle(t).getPropertyValue(p)+"").trim(),s+="",Ie.lastIndex=0,Ie.test(o)||(f=Z(o),m=Z(s)),m?f!==m&&(o=cn(t,p,o,m)+m):f&&(s+=f),this.add(T,"setProperty",o,s,r,a,0,0,p),E.push(p),M.push(p,0,T[p]);else if("undefined"!==h){if(S&&p in S?(n(o="function"==typeof S[p]?S[p].call(i,r,t,a):S[p])&&~o.indexOf("random(")&&(o=rt(o)),Z(o+"")||(o+=Wt.units[p]||Z(sr(t,p))||""),"="===(o+"").charAt(1)&&(o=sr(t,p))):o=sr(t,p),c=parseFloat(o),(g="string"===h&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),l=parseFloat(s),p in tr&&("autoAlpha"===p&&(1===c&&"hidden"===sr(t,"visibility")&&l&&(c=0),M.push("visibility",0,T.visibility),ln(this,T,"visibility",c?"inherit":"hidden",l?"inherit":"hidden",!l)),"scale"!==p&&"transform"!==p&&~(p=tr[p]).indexOf(",")&&(p=p.split(",")[0])),v=p in Xn)if(this.styles.save(p),y||((_=t._gsap).renderTransform&&!e.parseTransform||dr(t,e.parseTransform),b=!1!==e.smoothOrigin&&_.smooth,(y=this._pt=new _i(this._pt,T,er,0,1,_.renderTransform,_,0,-1)).dep=1),"scale"===p)this._pt=new _i(this._pt,_,"scaleY",c,(g?w(c,g+l):l)-c||0,ki),this._pt.u=0,E.push("scaleY",p),p+="X";else{if("transformOrigin"===p){M.push(ir,0,T[ir]),s=un(s),_.svg?gn(t,s,0,b,0,this):((m=parseFloat(s.split(" ")[2])||0)!==_.zOrigin&&ln(this,_,"zOrigin",_.zOrigin,m),ln(this,T,p,pr(o),pr(s)));continue}if("svgOrigin"===p){gn(t,s,1,b,0,this);continue}if(p in ur){yn(this,_,p,c,g?w(c,g+s):s);continue}if("smoothOrigin"===p){ln(this,_,"smooth",_.smooth,s);continue}if("force3D"===p){_[p]=s;continue}if("transform"===p){bn(this,s,t);continue}}else p in T||(p=rr(p)||p);if(v||(l||0===l)&&(c||0===c)&&!$n.test(s)&&p in T)l=l||0,(f=(o+"").substr((c+"").length))!==(m=Z(s)||(p in Wt.units?Wt.units[p]:f))&&(c=cn(t,p,o,m)),this._pt=new _i(this._pt,v?_:T,p,c,(g?w(c,g+l):l)-c,v||"px"!==m&&"zIndex"!==p||!1===e.autoRound?ki:Ui),this._pt.u=m||0,f!==m&&"%"!==m&&(this._pt.b=o,this._pt.r=Bi);else if(p in T)hn.call(this,t,p,o,g?g+s:s);else{if(!(p in t)){d(p,s);continue}this.add(t,p,o||t[p],g?g+s:s,r,a)}v||(p in T?M.push(p,0,T[p]):M.push(p,1,o||t[p])),E.push(p)}x&&yi(this)},render:function(t,e){if(e.tween._time||!An())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:sr,aliases:tr,getSetter:function(t,e,i){var n=tr[e];return n&&n.indexOf(",")<0&&(e=n),e in Xn&&e!==ir&&(t._gsap.x||sr(t,"x"))?i&&Sn===i?"scale"===e?qi:Wi:(Sn=i||{})&&("scale"===e?Xi:Yi):t.style&&!o(t.style[e])?ji:~e.indexOf("-")?Vi:ui(t,e)},core:{_removeProperty:sn,_getMatrix:mn}};Ni.utils.checkPrefix=rr,Ni.core.getStyleSaver=Ki,xr=_("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(br="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Xn[t]=1})),_(br,(function(t){Wt.units[t]="deg",ur[t]=1})),tr[xr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+br,_("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");tr[e[1]]=xr[e[0]]})),_("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Wt.units[t]="px"})),Ni.registerPlugin(wr);var Mr=Ni.registerPlugin(wr)||Ni,Er=Mr.core.Tween;t.Back=Hn,t.Bounce=jn,t.CSSPlugin=wr,t.Circ=qn,t.Cubic=Nn,t.Elastic=Un,t.Expo=Wn,t.Linear=In,t.Power0=Ln,t.Power1=Dn,t.Power2=Pn,t.Power3=Rn,t.Power4=On,t.Quad=zn,t.Quart=kn,t.Quint=Fn,t.Sine=Vn,t.SteppedEase=Gn,t.Strong=Bn,t.TimelineLite=Ze,t.TimelineMax=Ze,t.TweenLite=ai,t.TweenMax=Er,t.default=Mr,t.gsap=Mr,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default})),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,(function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var a=i[r];n&&n[a]&&(this.off(t,a),delete n[a]),a.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}("undefined"!=typeof window?window:this,(function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);var a,c=t;return"string"==typeof t&&(c=document.querySelectorAll(t)),c?(this.elements=(a=c,Array.isArray(a)?a:"object"==typeof a&&"number"==typeof a.length?l.call(a):[a]),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),o&&(this.jqDeferred=new o.Deferred),void setTimeout(this.check.bind(this))):void s.error("Bad element for imagesLoaded "+(c||t))}function r(t){this.img=t}function a(t,e){this.url=t,this.element=e,this.img=new Image}var o=t.jQuery,s=t.console,l=Array.prototype.slice;(n.prototype=Object.create(e.prototype)).options={},n.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},n.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var r=i[n];this.addImage(r)}if("string"==typeof this.options.background){var a=t.querySelectorAll(this.options.background);for(n=0;n<a.length;n++){var o=a[n];this.addElementBackgroundImages(o)}}}};var c={1:!0,9:!0,11:!0};return n.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var r=n&&n[2];r&&this.addBackground(r,t),n=i.exec(e.backgroundImage)}},n.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},n.prototype.addBackground=function(t,e){var i=new a(t,e);this.images.push(i)},n.prototype.check=function(){function t(t,i,n){setTimeout((function(){e.progress(t,i,n)}))}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach((function(e){e.once("progress",t),e.check()})):void this.complete()},n.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+i,t,e)},n.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},(r.prototype=Object.create(e.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(a.prototype=Object.create(r.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},a.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},n.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((o=e).fn.imagesLoaded=function(t,e){return new n(this,t,e).jqDeferred.promise(o(this))})},n.makeJQueryPlugin(),n})),function(t){t.fn.niceSelect=function(e){function i(e){e.after(t("<div></div>").addClass("nice-select").addClass(e.attr("class")||"").addClass(e.attr("disabled")?"disabled":"").attr("tabindex",e.attr("disabled")?null:"0").html('<span class="current"></span><ul class="list"></ul>'));var i=e.next(),n=e.find("option"),r=e.find("option:selected");i.find(".current").html(r.data("display")||r.text()),n.each((function(e){var n=t(this),r=n.data("display");i.find("ul").append(t("<li></li>").attr("data-value",n.val()).attr("data-display",r||null).addClass("option"+(n.is(":selected")?" selected":"")+(n.is(":disabled")?" disabled":"")).html(n.text()))}))}if("string"==typeof e)return"update"==e?this.each((function(){var e=t(this),n=t(this).next(".nice-select"),r=n.hasClass("open");n.length&&(n.remove(),i(e),r&&e.next().trigger("click"))})):"destroy"==e?(this.each((function(){var e=t(this),i=t(this).next(".nice-select");i.length&&(i.remove(),e.css("display",""))})),0==t(".nice-select").length&&t(document).off(".nice_select")):console.log('Method "'+e+'" does not exist.'),this;this.hide(),this.each((function(){var e=t(this);e.next().hasClass("nice-select")||i(e)})),t(document).off(".nice_select"),t(document).on("click.nice_select",".nice-select",(function(e){var i=t(this);t(".nice-select").not(i).removeClass("open"),i.toggleClass("open"),i.hasClass("open")?(i.find(".option"),i.find(".focus").removeClass("focus"),i.find(".selected").addClass("focus")):i.focus()})),t(document).on("click.nice_select",(function(e){0===t(e.target).closest(".nice-select").length&&t(".nice-select").removeClass("open").find(".option")})),t(document).on("click.nice_select",".nice-select .option:not(.disabled)",(function(e){var i=t(this),n=i.closest(".nice-select");n.find(".selected").removeClass("selected"),i.addClass("selected");var r=i.data("display")||i.text();n.find(".current").text(r),n.prev("select").val(i.data("value")).trigger("change")})),t(document).on("keydown.nice_select",".nice-select",(function(e){var i=t(this),n=t(i.find(".focus")||i.find(".list .option.selected"));if(32==e.keyCode||13==e.keyCode)return i.hasClass("open")?n.trigger("click"):i.trigger("click"),!1;if(40==e.keyCode){if(i.hasClass("open")){var r=n.nextAll(".option:not(.disabled)").first();r.length>0&&(i.find(".focus").removeClass("focus"),r.addClass("focus"))}else i.trigger("click");return!1}if(38==e.keyCode){if(i.hasClass("open")){var a=n.prevAll(".option:not(.disabled)").first();a.length>0&&(i.find(".focus").removeClass("focus"),a.addClass("focus"))}else i.trigger("click");return!1}if(27==e.keyCode)i.hasClass("open")&&i.trigger("click");else if(9==e.keyCode&&i.hasClass("open"))return!1}));var n=document.createElement("a").style;return n.cssText="pointer-events:auto","auto"!==n.pointerEvents&&t("html").addClass("no-csspointerevents"),this}}(jQuery),function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,(function(t,e){"use strict";function i(i,a,s){(s=s||e||t.jQuery)&&(a.prototype.option||(a.prototype.option=function(t){s.isPlainObject(t)&&(this.options=s.extend(!0,this.options,t))}),s.fn[i]=function(t){if("string"!=typeof t)return u=t,this.each((function(t,e){var n=s.data(e,i);n?(n.option(u),n._init()):(n=new a(e,u),s.data(e,i,n))})),this;var e,n,l,c,h,u,d=r.call(arguments,1);return l=d,h="$()."+i+'("'+(n=t)+'")',(e=this).each((function(t,e){var r=s.data(e,i);if(r){var a=r[n];if(a&&"_"!=n.charAt(0)){var u=a.apply(r,l);c=void 0===c?u:c}else o(h+" is not a valid method")}else o(i+" not initialized. Cannot call methods, i.e. "+h)})),void 0!==c?c:e},n(s))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var r=Array.prototype.slice,a=t.console,o=void 0===a?function(){}:function(t){a.error(t)};return n(e||t.jQuery),i})),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,(function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],r=0;r<i.length;r++){var a=i[r];n&&n[a]&&(this.off(t,a),delete n[a]),a.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,(function(){"use strict";function t(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function e(t){var e=getComputedStyle(t);return e||n("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}var i,n="undefined"==typeof console?function(){}:function(t){console.error(t)},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],a=r.length,o=!1;return function n(s){if(function(){if(!o){o=!0;var r=document.createElement("div");r.style.width="200px",r.style.padding="1px 2px 3px 4px",r.style.borderStyle="solid",r.style.borderWidth="1px 2px 3px 4px",r.style.boxSizing="border-box";var a=document.body||document.documentElement;a.appendChild(r);var s=e(r);i=200==Math.round(t(s.width)),n.isBoxSizeOuter=i,a.removeChild(r)}}(),"string"==typeof s&&(s=document.querySelector(s)),s&&"object"==typeof s&&s.nodeType){var l=e(s);if("none"==l.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<a;e++)t[r[e]]=0;return t}();var c={};c.width=s.offsetWidth,c.height=s.offsetHeight;for(var h=c.isBorderBox="border-box"==l.boxSizing,u=0;u<a;u++){var d=r[u],p=l[d],f=parseFloat(p);c[d]=isNaN(f)?0:f}var m=c.paddingLeft+c.paddingRight,g=c.paddingTop+c.paddingBottom,v=c.marginLeft+c.marginRight,y=c.marginTop+c.marginBottom,_=c.borderLeftWidth+c.borderRightWidth,b=c.borderTopWidth+c.borderBottomWidth,x=h&&i,w=t(l.width);!1!==w&&(c.width=w+(x?0:m+_));var M=t(l.height);return!1!==M&&(c.height=M+(x?0:g+b)),c.innerWidth=c.width-(m+_),c.innerHeight=c.height-(g+b),c.outerWidth=c.width+v,c.outerHeight=c.height+y,c}}})),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,(function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(e,i){return e[t](i)}})),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],(function(i){return e(t,i)})):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,(function(t,e){var i={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},n=Array.prototype.slice;i.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?n.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var r=[];return t.forEach((function(t){if(t instanceof HTMLElement){if(!n)return void r.push(t);e(t,n)&&r.push(t);for(var i=t.querySelectorAll(n),a=0;a<i.length;a++)r.push(i[a])}})),r},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],r=e+"Timeout";t.prototype[e]=function(){var t=this[r];clearTimeout(t);var e=arguments,a=this;this[r]=setTimeout((function(){n.apply(a,e),delete a[r]}),i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,(function(t,e,i){return e+"-"+i})).toLowerCase()};var r=t.console;return i.htmlInit=function(e,n){i.docReady((function(){var a=i.toDashed(n),o="data-"+a,s=document.querySelectorAll("["+o+"]"),l=document.querySelectorAll(".js-"+a),c=i.makeArray(s).concat(i.makeArray(l)),h=o+"-options",u=t.jQuery;c.forEach((function(t){var i,a=t.getAttribute(o)||t.getAttribute(h);try{i=a&&JSON.parse(a)}catch(i){return void(r&&r.error("Error parsing "+o+" on "+t.className+": "+i))}var s=new e(t,i);u&&u.data(t,n,s)}))}))},i})),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,(function(t,e){"use strict";function i(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var n=document.documentElement.style,r="string"==typeof n.transition?"transition":"WebkitTransition",a="string"==typeof n.transform?"transform":"WebkitTransform",o={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],s={transform:a,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},l=i.prototype=Object.create(t.prototype);l.constructor=i,l._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},l.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.getSize=function(){this.size=e(this.element)},l.css=function(t){var e=this.element.style;for(var i in t)e[s[i]||i]=t[i]},l.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),n=t[e?"left":"right"],r=t[i?"top":"bottom"],a=parseFloat(n),o=parseFloat(r),s=this.layout.size;-1!=n.indexOf("%")&&(a=a/100*s.width),-1!=r.indexOf("%")&&(o=o/100*s.height),a=isNaN(a)?0:a,o=isNaN(o)?0:o,a-=e?s.paddingLeft:s.paddingRight,o-=i?s.paddingTop:s.paddingBottom,this.position.x=a,this.position.y=o},l.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),r=i?"paddingLeft":"paddingRight",a=i?"left":"right",o=i?"right":"left",s=this.position.x+t[r];e[a]=this.getXValue(s),e[o]="";var l=n?"paddingTop":"paddingBottom",c=n?"top":"bottom",h=n?"bottom":"top",u=this.position.y+t[l];e[c]=this.getYValue(u),e[h]="",this.css(e),this.emitEvent("layout",[this])},l.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},l.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},l._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,r=t==this.position.x&&e==this.position.y;if(this.setPosition(t,e),!r||this.isTransitioning){var a=t-i,o=e-n,s={};s.transform=this.getTranslate(a,o),this.transition({to:s,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},l.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},l.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},l.moveTo=l._transitionTo,l.setPosition=function(t,e){this.position.x=parseFloat(t),this.position.y=parseFloat(e)},l._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},l.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);t.from&&(this.css(t.from),this.element.offsetHeight),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var c="opacity,"+a.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}));l.enableTransition=function(){if(!this.isTransitioning){var t=this.layout.options.transitionDuration;t="number"==typeof t?t+"ms":t,this.css({transitionProperty:c,transitionDuration:t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(o,this,!1)}},l.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},l.onotransitionend=function(t){this.ontransitionend(t)};var h={"-webkit-transform":"transform"};l.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=h[t.propertyName]||t.propertyName;delete e.ingProperties[i],function(t){for(var e in t)return!1;return!0}(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd&&(e.onEnd[i].call(this),delete e.onEnd[i]),this.emitEvent("transitionEnd",[this])}},l.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},l._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var u={transitionProperty:"",transitionDuration:"",transitionDelay:""};return l.removeTransitionStyles=function(){this.css(u)},l.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},l.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},l.remove=function(){return r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",(function(){this.removeElem()})),void this.hide()):void this.removeElem()},l.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},l.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},l.getHideRevealTransitionEndProperty=function(t){var e=this.layout.options[t];if(e.opacity)return"opacity";for(var i in e)return i},l.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},l.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},l.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},i})),function(t,e){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],(function(i,n,r,a){return e(t,i,n,r,a)})):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)}(window,(function(t,e,i,n,r){"use strict";function a(t,e){var i=n.getQueryElement(t);if(i){this.element=i,l&&(this.$element=l(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e);var r=++h;this.element.outlayerGUID=r,(u[r]=this)._create(),this._getOption("initLayout")&&this.layout()}else s&&s.error("Bad element for "+this.constructor.namespace+": "+(i||t))}function o(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}var s=t.console,l=t.jQuery,c=function(){},h=0,u={};a.namespace="outlayer",a.Item=r,a.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var d=a.prototype;n.extend(d,e.prototype),d.option=function(t){n.extend(this.options,t)},d._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},a.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},d._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),n.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},d.reloadItems=function(){this.items=this._itemize(this.element.children)},d._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],r=0;r<e.length;r++){var a=new i(e[r],this);n.push(a)}return n},d._filterFindItemElements=function(t){return n.filterFindElements(t,this.options.itemSelector)},d.getItemElements=function(){return this.items.map((function(t){return t.element}))},d.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},d._init=d.layout,d._resetLayout=function(){this.getSize()},d.getSize=function(){this.size=i(this.element)},d._getMeasurement=function(t,e){var n,r=this.options[t];r?("string"==typeof r?n=this.element.querySelector(r):r instanceof HTMLElement&&(n=r),this[t]=n?i(n)[e]:r):this[t]=0},d.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},d._getItemsForLayout=function(t){return t.filter((function(t){return!t.isIgnored}))},d._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var i=[];t.forEach((function(t){var n=this._getItemLayoutPosition(t);n.item=t,n.isInstant=e||t.isLayoutInstant,i.push(n)}),this),this._processLayoutQueue(i)}},d._getItemLayoutPosition=function(){return{x:0,y:0}},d._processLayoutQueue=function(t){this.updateStagger(),t.forEach((function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)}),this)},d.updateStagger=function(){var t=this.options.stagger;return null==t?void(this.stagger=0):(this.stagger=function(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),i=e&&e[1],n=e&&e[2];return i.length?(i=parseFloat(i))*(p[n]||1):0}(t),this.stagger)},d._positionItem=function(t,e,i,n,r){n?t.goTo(e,i):(t.stagger(r*this.stagger),t.moveTo(e,i))},d._postLayout=function(){this.resizeContainer()},d.resizeContainer=function(){if(this._getOption("resizeContainer")){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},d._getContainerSize=c,d._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},d._emitCompleteOnItems=function(t,e){function i(){r.dispatchEvent(t+"Complete",null,[e])}function n(){++o==a&&i()}var r=this,a=e.length;if(e&&a){var o=0;e.forEach((function(e){e.once(t,n)}))}else i()},d.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),l)if(this.$element=this.$element||l(this.element),e){var r=l.Event(e);r.type=t,this.$element.trigger(r,i)}else this.$element.trigger(t,i)},d.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},d.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},d.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},d.unstamp=function(t){(t=this._find(t))&&t.forEach((function(t){n.removeFrom(this.stamps,t),this.unignore(t)}),this)},d._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),n.makeArray(t)},d._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},d._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},d._manageStamp=c,d._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,r=i(t);return{left:e.left-n.left-r.marginLeft,top:e.top-n.top-r.marginTop,right:n.right-e.right-r.marginRight,bottom:n.bottom-e.bottom-r.marginBottom}},d.handleEvent=n.handleEvent,d.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},d.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},d.onresize=function(){this.resize()},n.debounceMethod(a,"onresize",100),d.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},d.needsResizeLayout=function(){var t=i(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},d.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},d.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},d.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},d.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,i){t.stagger(i*e),t.reveal()}))}},d.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach((function(t,i){t.stagger(i*e),t.hide()}))}},d.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},d.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},d.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},d.getItems=function(t){t=n.makeArray(t);var e=[];return t.forEach((function(t){var i=this.getItem(t);i&&e.push(i)}),this),e},d.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach((function(t){t.remove(),n.removeFrom(this.items,t)}),this)},d.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach((function(t){t.destroy()})),this.unbindResize();var e=this.element.outlayerGUID;delete u[e],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},a.data=function(t){var e=(t=n.getQueryElement(t))&&t.outlayerGUID;return e&&u[e]},a.create=function(t,e){var i=o(a);return i.defaults=n.extend({},a.defaults),n.extend(i.defaults,e),i.compatOptions=n.extend({},a.compatOptions),i.namespace=t,i.data=a.data,i.Item=o(r),n.htmlInit(i,t),l&&l.bridget&&l.bridget(t,i),i};var p={ms:1,s:1e3};return a.Item=r,a})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/item",["outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.Item=e(t.Outlayer))}(window,(function(t){"use strict";function e(){t.Item.apply(this,arguments)}var i=e.prototype=Object.create(t.Item.prototype),n=i._create;i._create=function(){this.id=this.layout.itemGUID++,n.call(this),this.sortData={}},i.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var t=this.layout.options.getSortData,e=this.layout._sorters;for(var i in t){var n=e[i];this.sortData[i]=n(this.element,this)}}};var r=i.destroy;return i.destroy=function(){r.apply(this,arguments),this.css({display:""})},e})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-mode",["get-size/get-size","outlayer/outlayer"],e):"object"==typeof module&&module.exports?module.exports=e(require("get-size"),require("outlayer")):(t.Isotope=t.Isotope||{},t.Isotope.LayoutMode=e(t.getSize,t.Outlayer))}(window,(function(t,e){"use strict";function i(t){(this.isotope=t)&&(this.options=t.options[this.namespace],this.element=t.element,this.items=t.filteredItems,this.size=t.size)}var n=i.prototype;return["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"].forEach((function(t){n[t]=function(){return e.prototype[t].apply(this.isotope,arguments)}})),n.needsVerticalResizeLayout=function(){var e=t(this.isotope.element);return this.isotope.size&&e&&e.innerHeight!=this.isotope.size.innerHeight},n._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},n.getColumnWidth=function(){this.getSegmentSize("column","Width")},n.getRowHeight=function(){this.getSegmentSize("row","Height")},n.getSegmentSize=function(t,e){var i=t+e,n="outer"+e;if(this._getMeasurement(i,n),!this[i]){var r=this.getFirstItemSize();this[i]=r&&r[n]||this.isotope.size["inner"+e]}},n.getFirstItemSize=function(){var e=this.isotope.filteredItems[0];return e&&e.element&&t(e.element)},n.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},n.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},i.modes={},i.create=function(t,e){function r(){i.apply(this,arguments)}return(r.prototype=Object.create(n)).constructor=r,e&&(r.options=e),i.modes[r.prototype.namespace=t]=r},i})),function(t,e){"function"==typeof define&&define.amd?define("masonry-layout/masonry",["outlayer/outlayer","get-size/get-size"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,(function(t,e){var i=t.create("masonry");i.compatOptions.fitWidth="isFitWidth";var n=i.prototype;return n._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},n.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}var n=this.columnWidth+=this.gutter,r=this.containerWidth+this.gutter,a=r/n,o=n-r%n;a=Math[o&&o<1?"round":"floor"](a),this.cols=Math.max(a,1)},n.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,i=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var n=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](i,t),r={x:this.columnWidth*n.col,y:n.y},a=n.y+t.size.outerHeight,o=i+n.col,s=n.col;s<o;s++)this.colYs[s]=a;return r},n._getTopColPosition=function(t){var e=this._getTopColGroup(t),i=Math.min.apply(Math,e);return{col:e.indexOf(i),y:i}},n._getTopColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;n<i;n++)e[n]=this._getColGroupY(n,t);return e},n._getColGroupY=function(t,e){if(e<2)return this.colYs[t];var i=this.colYs.slice(t,t+e);return Math.max.apply(Math,i)},n._getHorizontalColPosition=function(t,e){var i=this.horizontalColIndex%this.cols;i=1<t&&i+t>this.cols?0:i;var n=e.size.outerWidth&&e.size.outerHeight;return this.horizontalColIndex=n?i+t:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,t)}},n._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),r=this._getOption("originLeft")?n.left:n.right,a=r+i.outerWidth,o=Math.floor(r/this.columnWidth);o=Math.max(0,o);var s=Math.floor(a/this.columnWidth);s-=a%this.columnWidth?0:1,s=Math.min(this.cols-1,s);for(var l=(this._getOption("originTop")?n.top:n.bottom)+i.outerHeight,c=o;c<=s;c++)this.colYs[c]=Math.max(l,this.colYs[c])},n._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},n._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},i})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/masonry",["../layout-mode","masonry-layout/masonry"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode"),require("masonry-layout")):e(t.Isotope.LayoutMode,t.Masonry)}(window,(function(t,e){"use strict";var i=t.create("masonry"),n=i.prototype,r={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(var a in e.prototype)r[a]||(n[a]=e.prototype[a]);var o=n.measureColumns;n.measureColumns=function(){this.items=this.isotope.filteredItems,o.call(this)};var s=n._getOption;return n._getOption=function(t){return"fitWidth"==t?void 0!==this.options.isFitWidth?this.options.isFitWidth:this.options.fitWidth:s.apply(this.isotope,arguments)},i})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/fit-rows",["../layout-mode"],e):"object"==typeof exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,(function(t){"use strict";var e=t.create("fitRows"),i=e.prototype;return i._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},i._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter;0!==this.x&&e+this.x>i&&(this.x=0,this.y=this.maxY);var n={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+t.size.outerHeight),this.x+=e,n},i._getContainerSize=function(){return{height:this.maxY}},e})),function(t,e){"function"==typeof define&&define.amd?define("isotope-layout/js/layout-modes/vertical",["../layout-mode"],e):"object"==typeof module&&module.exports?module.exports=e(require("../layout-mode")):e(t.Isotope.LayoutMode)}(window,(function(t){"use strict";var e=t.create("vertical",{horizontalAlignment:0}),i=e.prototype;return i._resetLayout=function(){this.y=0},i._getItemLayoutPosition=function(t){t.getSize();var e=(this.isotope.size.innerWidth-t.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=t.size.outerHeight,{x:e,y:i}},i._getContainerSize=function(){return{height:this.y}},e})),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope-layout/js/item","isotope-layout/js/layout-mode","isotope-layout/js/layout-modes/masonry","isotope-layout/js/layout-modes/fit-rows","isotope-layout/js/layout-modes/vertical"],(function(i,n,r,a,o,s){return e(t,i,n,r,a,o,s)})):"object"==typeof module&&module.exports?module.exports=e(t,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope-layout/js/item"),require("isotope-layout/js/layout-mode"),require("isotope-layout/js/layout-modes/masonry"),require("isotope-layout/js/layout-modes/fit-rows"),require("isotope-layout/js/layout-modes/vertical")):t.Isotope=e(t,t.Outlayer,t.getSize,t.matchesSelector,t.fizzyUIUtils,t.Isotope.Item,t.Isotope.LayoutMode)}(window,(function(t,e,i,n,r,a,o){var s=t.jQuery,l=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s+|\s+$/g,"")},c=e.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});c.Item=a,c.LayoutMode=o;var h=c.prototype;h._create=function(){for(var t in this.itemGUID=0,this._sorters={},this._getSorters(),e.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"],o.modes)this._initLayoutMode(t)},h.reloadItems=function(){this.itemGUID=0,e.prototype.reloadItems.call(this)},h._itemize=function(){for(var t=e.prototype._itemize.apply(this,arguments),i=0;i<t.length;i++)t[i].id=this.itemGUID++;return this._updateItemsSortData(t),t},h._initLayoutMode=function(t){var e=o.modes[t],i=this.options[t]||{};this.options[t]=e.options?r.extend(e.options,i):i,this.modes[t]=new e(this)},h.layout=function(){return!this._isLayoutInited&&this._getOption("initLayout")?void this.arrange():void this._layout()},h._layout=function(){var t=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,t),this._isLayoutInited=!0},h.arrange=function(t){this.option(t),this._getIsInstant();var e=this._filter(this.items);this.filteredItems=e.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[e]):this._hideReveal(e),this._sort(),this._layout()},h._init=h.arrange,h._hideReveal=function(t){this.reveal(t.needReveal),this.hide(t.needHide)},h._getIsInstant=function(){var t=this._getOption("layoutInstant"),e=void 0!==t?t:!this._isLayoutInited;return this._isInstant=e},h._bindArrangeComplete=function(){function t(){e&&i&&n&&r.dispatchEvent("arrangeComplete",null,[r.filteredItems])}var e,i,n,r=this;this.once("layoutComplete",(function(){e=!0,t()})),this.once("hideComplete",(function(){i=!0,t()})),this.once("revealComplete",(function(){n=!0,t()}))},h._filter=function(t){var e=this.options.filter;e=e||"*";for(var i=[],n=[],r=[],a=this._getFilterTest(e),o=0;o<t.length;o++){var s=t[o];if(!s.isIgnored){var l=a(s);l&&i.push(s),l&&s.isHidden?n.push(s):l||s.isHidden||r.push(s)}}return{matches:i,needReveal:n,needHide:r}},h._getFilterTest=function(t){return s&&this.options.isJQueryFiltering?function(e){return s(e.element).is(t)}:"function"==typeof t?function(e){return t(e.element)}:function(e){return n(e.element,t)}},h.updateSortData=function(t){var e;e=t?(t=r.makeArray(t),this.getItems(t)):this.items,this._getSorters(),this._updateItemsSortData(e)},h._getSorters=function(){var t=this.options.getSortData;for(var e in t){var i=t[e];this._sorters[e]=u(i)}},h._updateItemsSortData=function(t){for(var e=t&&t.length,i=0;e&&i<e;i++)t[i].updateSortData()};var u=function(t){if("string"!=typeof t)return t;var e,i,n=l(t).split(" "),r=n[0],a=r.match(/^\[(.+)\]$/),o=a&&a[1],s=(i=r,(e=o)?function(t){return t.getAttribute(e)}:function(t){var e=t.querySelector(i);return e&&e.textContent}),h=c.sortDataParsers[n[1]];return h?function(t){return t&&h(s(t))}:function(t){return t&&s(t)}};c.sortDataParsers={parseInt:function(t){return parseInt(t,10)},parseFloat:function(t){return parseFloat(t)}},h._sort=function(){if(this.options.sortBy){var t=r.makeArray(this.options.sortBy);this._getIsSameSortBy(t)||(this.sortHistory=t.concat(this.sortHistory));var e=(i=this.sortHistory,n=this.options.sortAscending,function(t,e){for(var r=0;r<i.length;r++){var a=i[r],o=t.sortData[a],s=e.sortData[a];if(s<o||o<s)return(s<o?1:-1)*((void 0!==n[a]?n[a]:n)?1:-1)}return 0});this.filteredItems.sort(e)}var i,n},h._getIsSameSortBy=function(t){for(var e=0;e<t.length;e++)if(t[e]!=this.sortHistory[e])return!1;return!0},h._mode=function(){var t=this.options.layoutMode,e=this.modes[t];if(!e)throw new Error("No layout mode: "+t);return e.options=this.options[t],e},h._resetLayout=function(){e.prototype._resetLayout.call(this),this._mode()._resetLayout()},h._getItemLayoutPosition=function(t){return this._mode()._getItemLayoutPosition(t)},h._manageStamp=function(t){this._mode()._manageStamp(t)},h._getContainerSize=function(){return this._mode()._getContainerSize()},h.needsResizeLayout=function(){return this._mode().needsResizeLayout()},h.appended=function(t){var e=this.addItems(t);if(e.length){var i=this._filterRevealAdded(e);this.filteredItems=this.filteredItems.concat(i)}},h.prepended=function(t){var e=this._itemize(t);if(e.length){this._resetLayout(),this._manageStamps();var i=this._filterRevealAdded(e);this.layoutItems(this.filteredItems),this.filteredItems=i.concat(this.filteredItems),this.items=e.concat(this.items)}},h._filterRevealAdded=function(t){var e=this._filter(t);return this.hide(e.needHide),this.reveal(e.matches),this.layoutItems(e.matches,!0),e.matches},h.insert=function(t){var e=this.addItems(t);if(e.length){var i,n,r=e.length;for(i=0;i<r;i++)n=e[i],this.element.appendChild(n.element);var a=this._filter(e).matches;for(i=0;i<r;i++)e[i].isLayoutInstant=!0;for(this.arrange(),i=0;i<r;i++)delete e[i].isLayoutInstant;this.reveal(a)}};var d=h.remove;return h.remove=function(t){t=r.makeArray(t);var e=this.getItems(t);d.call(this,t);for(var i=e&&e.length,n=0;i&&n<i;n++){var a=e[n];r.removeFrom(this.filteredItems,a)}},h.shuffle=function(){for(var t=0;t<this.items.length;t++)this.items[t].sortData.random=Math.random();this.options.sortBy="random",this._sort(),this._layout()},h._noTransition=function(t,e){var i=this.options.transitionDuration;this.options.transitionDuration=0;var n=t.apply(this,e);return this.options.transitionDuration=i,n},h.getFilteredItemElements=function(){return this.filteredItems.map((function(t){return t.element}))},c})),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}((function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e,i=0,n=Array.prototype.slice;t.cleanData=(e=t.cleanData,function(i){for(var n,r,a=0;null!=(r=i[a]);a++)try{(n=t._data(r,"events"))&&n.remove&&t(r).triggerHandler("remove")}catch(i){}e(i)}),t.widget=function(e,i,n){var r,a,o,s={},l=e.split(".")[0],c=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},r=t[l][e],a=t[l][e]=function(t,e){if(!this._createWidget)return new a(t,e);arguments.length&&this._createWidget(t,e)},t.extend(a,r,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(o=new i).options=t.widget.extend({},o.options),t.each(n,(function(e,n){function r(){return i.prototype[e].apply(this,arguments)}function a(t){return i.prototype[e].apply(this,t)}t.isFunction(n)?s[e]=function(){var t,e=this._super,i=this._superApply;return this._super=r,this._superApply=a,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}:s[e]=n})),a.prototype=t.widget.extend(o,{widgetEventPrefix:r&&o.widgetEventPrefix||e},s,{constructor:a,namespace:l,widgetName:e,widgetFullName:c}),r?(t.each(r._childConstructors,(function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)})),delete r._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var i,r,a=n.call(arguments,1),o=0,s=a.length;o<s;o++)for(i in a[o])r=a[o][i],a[o].hasOwnProperty(i)&&void 0!==r&&(t.isPlainObject(r)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],r):t.widget.extend({},r):e[i]=r);return e},t.widget.bridge=function(e,i){var r=i.prototype.widgetFullName||e;t.fn[e]=function(a){var o="string"==typeof a,s=n.call(arguments,1),l=this;return o?this.length||"instance"!==a?this.each((function(){var i,n=t.data(this,r);return"instance"===a?(l=n,!1):n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,s))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+a+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+a+"'")})):l=void 0:(s.length&&(a=t.widget.extend.apply(null,[a].concat(s))),this.each((function(){var e=t.data(this,r);e?(e.option(a||{}),e._init&&e._init()):t.data(this,r,new i(a,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,r,a,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(n=e.split(".")).shift(),n.length){for(r=o[e]=t.widget.extend({},this.options[e]),a=0;a<n.length-1;a++)r[n[a]]=r[n[a]]||{},r=r[n[a]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,r;for(i in e)r=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&r&&r.length&&(n=t(r.get()),this._removeClass(r,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],n=this;function r(r,a){for(var o,s=0;s<r.length;s++)o=n.classesElementLookup[r[s]]||t(),o=e.add?t(t.unique(o.get().concat(e.element.get()))):t(o.not(e.element).get()),n.classesElementLookup[r[s]]=o,i.push(r[s]),a&&e.classes[r[s]]&&i.push(e.classes[r[s]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&r(e.keys.match(/\S+/g)||[],!0),e.extra&&r(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(n,r){-1!==t.inArray(e.target,r)&&(i.classesElementLookup[n]=t(r.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var r="string"==typeof t||null===t;return(t={extra:r?e:i,keys:r?t:e,element:r?this.element:t,add:n}).element.toggleClass(this._classes(t),n),this},_on:function(e,i,n){var r,a=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=r=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),t.each(n,(function(n,o){function s(){if(e||!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}var l;"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||t.guid++),n=(l=n.match(/^([\w:-]*)\s*(.*)$/))[1]+a.eventNamespace,(l=l[2])?r.on(n,l,s):i.on(n,s)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var r,a,o=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(r in a)r in i||(i[r]=a[r]);return this.element.trigger(i,n),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(n,r,a){var o;"string"==typeof r&&(r={effect:r});var s=r?!0!==r&&"number"!=typeof r&&r.effect||i:e;"number"==typeof(r=r||{})&&(r={duration:r}),o=!t.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),o&&t.effects&&t.effects.effect[s]?n[e](r):s!==e&&n[s]?n[s](r.duration,r.easing,a):n.queue((function(i){t(this)[e](),a&&a.call(n[0]),i()}))}})),t.widget,t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var r=!1;t(document).on("mouseup",(function(){r=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,a=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!a&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),r=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,r=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i=this.options,n=this.element.find(".ui-slider-handle"),r=[],a=i.values&&i.values.length||1;for(n.length>a&&(n.slice(a).remove(),n=n.slice(0,a)),e=n.length;e<a;e++)r.push("<span tabindex='0'></span>");this.handles=n.add(t(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,r,a,o,s,l=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),s={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(s),n=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var o=Math.abs(i-l.values(e));(o<n||n===o&&(e===l._lastChangedValue||l.values(e)===c.min))&&(n=o,r=t(this),a=e)})),!1!==this._start(e,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),o=r.offset(),s=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=s?{left:0,top:0}:{left:e.pageX-o.left-r.width()/2,top:e.pageY-o.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY};return e=this._normValueFromMouse(e),this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e;return 1<(t=(t="horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(t=1),t<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),e=this._valueMin()+t*e,this._trimAlignValue(e)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,r=this.value(),a=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),r=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),a[e]=i),i!==r&&!1!==this._trigger("slide",t,this._uiHash(e,i,a))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,r,a;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(e))return this._hasMultipleValues()?this._values(e):this.value();for(n=this.options.values,r=e,a=0;a<n.length;a+=1)n[a]=this._trimAlignValue(r[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var n,r=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(r=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=r-1;0<=n;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e;return t-=i,2*Math.abs(i)>=e&&(t+=0<i?e:-e),parseFloat(t.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString();return-1===(t=e.indexOf("."))?0:e.length-t-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,r,a,o=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,h={};this._hasMultipleValues()?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,h["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[c?"animate":"css"](h,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},s.animate),1===n&&l.range[c?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:s.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},s.animate),1===n&&l.range[c?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:s.animate}))),e=i})):(n=this.value(),r=this._valueMin(),a=this._valueMax(),i=a!==r?(n-r)/(a-r)*100:0,h["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](h,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-i+"%"},s.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-i+"%"},s.animate))},_handleEvents:{keydown:function(e){var i,n,r,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,a)))return}switch(r=this.options.step,i=n=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-r)}this._slide(e,a,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}})})),function(){"use strict";function t(n){if(!n)throw new Error("No options passed to Waypoint constructor");if(!n.element)throw new Error("No element option passed to Waypoint constructor");if(!n.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,n),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=n.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var n in i)e.push(i[n]);for(var r=0,a=e.length;a>r;r++)e[r][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=r.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,n[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,n={},r=window.Waypoint,a=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete n[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",(function(){e.didResize||(e.didResize=!0,r.requestAnimationFrame(t))}))},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",(function(){(!e.didScroll||r.isTouch)&&(e.didScroll=!0,r.requestAnimationFrame(t))}))},e.prototype.handleResize=function(){r.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var n=e[i],r=n.newScroll>n.oldScroll?n.forward:n.backward;for(var a in this.waypoints[i]){var o=this.waypoints[i][a],s=n.oldScroll<o.triggerPoint,l=n.newScroll>=o.triggerPoint;(s&&l||!s&&!l)&&(o.queueTrigger(r),t[o.group.id]=o.group)}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?r.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?r.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var n=0,r=t.length;r>n;n++)t[n].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),n={};for(var a in this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var o=t[a];for(var s in this.waypoints[a]){var l,c,h,u,d=this.waypoints[a][s],p=d.options.offset,f=d.triggerPoint,m=0,g=null==f;d.element!==d.element.window&&(m=d.adapter.offset()[o.offsetProp]),"function"==typeof p?p=p.apply(d):"string"==typeof p&&(p=parseFloat(p),d.options.offset.indexOf("%")>-1&&(p=Math.ceil(o.contextDimension*p/100))),l=o.contextScroll-o.contextOffset,d.triggerPoint=m+l-p,c=f<o.oldScroll,h=d.triggerPoint>=o.oldScroll,u=!c&&!h,!g&&(c&&h)?(d.queueTrigger(o.backward),n[d.group.id]=d.group):(!g&&u||g&&o.oldScroll>=d.triggerPoint)&&(d.queueTrigger(o.forward),n[d.group.id]=d.group)}}return r.requestAnimationFrame((function(){for(var t in n)n[t].flushTriggers()})),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in n)n[t].refresh()},e.findByElement=function(t){return n[t.waypointContextKey]},window.onload=function(){a&&a(),e.refreshAll()},r.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},r.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}var n={vertical:{},horizontal:{}},r=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var n=this.triggerQueues[i],r="up"===i||"left"===i;n.sort(r?e:t);for(var a=0,o=n.length;o>a;a+=1){var s=n[a];(s.options.continuous||a===n.length-1)&&s.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=r.Adapter.inArray(e,this.waypoints);return i===this.waypoints.length-1?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=r.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=r.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return n[t.axis][t.name]||new i(t)},r.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],(function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}})),e.each(["extend","inArray","isEmptyObject"],(function(i,n){t[n]=e[n]})),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],n=arguments[0];return t.isFunction(arguments[0])&&((n=t.extend({},arguments[1])).handler=arguments[0]),this.each((function(){var r=t.extend({},n,{element:this});"string"==typeof r.context&&(r.context=t(this).closest(r.context)[0]),i.push(new e(r))})),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}(),
/*!
* jquery.counterup.js 1.0
*
* Copyright 2013, Benjamin Intal http://gambit.ph @bfintal
* Released under the GPL v2 License
*
* Date: Nov 26, 2013
*/
function(t){"use strict";t.fn.counterUp=function(e){var i,n=t.extend({time:400,delay:10,offset:100,beginAt:0,formatter:!1,context:"window",callback:function(){}},e);return this.each((function(){var e=t(this),r={time:t(this).data("counterup-time")||n.time,delay:t(this).data("counterup-delay")||n.delay,offset:t(this).data("counterup-offset")||n.offset,beginAt:t(this).data("counterup-beginat")||n.beginAt,context:t(this).data("counterup-context")||n.context};e.waypoint((function(a){!function(){var a=[],o=r.time/r.delay,s=t(this).attr("data-num")?t(this).attr("data-num"):e.text(),l=/[0-9]+,[0-9]+/.test(s),c=((s=s.replace(/,/g,"")).split(".")[1]||[]).length;r.beginAt>s&&(r.beginAt=s);var h=/[0-9]+:[0-9]+:[0-9]+/.test(s);if(h){var u=s.split(":"),d=1;for(i=0;u.length>0;)i+=d*parseInt(u.pop(),10),d*=60}for(var p=o;p>=r.beginAt/s*o;p--){var f=parseFloat(s/o*p).toFixed(c);if(h){f=parseInt(i/o*p);var m=parseInt(f/3600)%24,g=parseInt(f/60)%60,v=parseInt(f%60,10);f=(m<10?"0"+m:m)+":"+(g<10?"0"+g:g)+":"+(v<10?"0"+v:v)}if(l)for(;/(\d+)(\d{3})/.test(f.toString());)f=f.toString().replace(/(\d+)(\d{3})/,"$1,$2");n.formatter&&(f=n.formatter.call(this,f)),a.unshift(f)}e.data("counterup-nums",a),e.text(r.beginAt);e.data("counterup-func",(function(){e.data("counterup-nums")?(e.html(e.data("counterup-nums").shift()),e.data("counterup-nums").length?setTimeout(e.data("counterup-func"),r.delay):(e.data("counterup-nums",null),e.data("counterup-func",null),n.callback.call(this))):n.callback.call(this)})),setTimeout(e.data("counterup-func"),r.delay)}(),this.destroy()}),{offset:r.offset+"%",context:r.context})}))}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}((function(t){t.ui=t.ui||{},t.ui.version="1.12.1";var e,i=0,n=Array.prototype.slice;t.cleanData=(e=t.cleanData,function(i){for(var n,r,a=0;null!=(r=i[a]);a++)try{(n=t._data(r,"events"))&&n.remove&&t(r).triggerHandler("remove")}catch(i){}e(i)}),t.widget=function(e,i,n){var r,a,o,s={},l=e.split(".")[0],c=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},r=t[l][e],a=t[l][e]=function(t,e){if(!this._createWidget)return new a(t,e);arguments.length&&this._createWidget(t,e)},t.extend(a,r,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(o=new i).options=t.widget.extend({},o.options),t.each(n,(function(e,n){function r(){return i.prototype[e].apply(this,arguments)}function a(t){return i.prototype[e].apply(this,t)}t.isFunction(n)?s[e]=function(){var t,e=this._super,i=this._superApply;return this._super=r,this._superApply=a,t=n.apply(this,arguments),this._super=e,this._superApply=i,t}:s[e]=n})),a.prototype=t.widget.extend(o,{widgetEventPrefix:r&&o.widgetEventPrefix||e},s,{constructor:a,namespace:l,widgetName:e,widgetFullName:c}),r?(t.each(r._childConstructors,(function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)})),delete r._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var i,r,a=n.call(arguments,1),o=0,s=a.length;o<s;o++)for(i in a[o])r=a[o][i],a[o].hasOwnProperty(i)&&void 0!==r&&(t.isPlainObject(r)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],r):t.widget.extend({},r):e[i]=r);return e},t.widget.bridge=function(e,i){var r=i.prototype.widgetFullName||e;t.fn[e]=function(a){var o="string"==typeof a,s=n.call(arguments,1),l=this;return o?this.length||"instance"!==a?this.each((function(){var i,n=t.data(this,r);return"instance"===a?(l=n,!1):n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,s))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+a+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+a+"'")})):l=void 0:(s.length&&(a=t.widget.extend.apply(null,[a].concat(s))),this.each((function(){var e=t.data(this,r);e?(e.option(a||{}),e._init&&e._init()):t.data(this,r,new i(a,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,r,a,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(n=e.split(".")).shift(),n.length){for(r=o[e]=t.widget.extend({},this.options[e]),a=0;a<n.length-1;a++)r[n[a]]=r[n[a]]||{},r=r[n[a]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,r;for(i in e)r=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&r&&r.length&&(n=t(r.get()),this._removeClass(r,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],n=this;function r(r,a){for(var o,s=0;s<r.length;s++)o=n.classesElementLookup[r[s]]||t(),o=e.add?t(t.unique(o.get().concat(e.element.get()))):t(o.not(e.element).get()),n.classesElementLookup[r[s]]=o,i.push(r[s]),a&&e.classes[r[s]]&&i.push(e.classes[r[s]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&r(e.keys.match(/\S+/g)||[],!0),e.extra&&r(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(n,r){-1!==t.inArray(e.target,r)&&(i.classesElementLookup[n]=t(r.not(e.target).get()))}))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var r="string"==typeof t||null===t;return(t={extra:r?e:i,keys:r?t:e,element:r?this.element:t,add:n}).element.toggleClass(this._classes(t),n),this},_on:function(e,i,n){var r,a=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=r=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),t.each(n,(function(n,o){function s(){if(e||!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}var l;"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||t.guid++),n=(l=n.match(/^([\w:-]*)\s*(.*)$/))[1]+a.eventNamespace,(l=l[2])?r.on(n,l,s):i.on(n,s)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var r,a,o=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(r in a)r in i||(i[r]=a[r]);return this.element.trigger(i,n),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(n,r,a){var o;"string"==typeof r&&(r={effect:r});var s=r?!0!==r&&"number"!=typeof r&&r.effect||i:e;"number"==typeof(r=r||{})&&(r={duration:r}),o=!t.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),o&&t.effects&&t.effects.effect[s]?n[e](r):s!==e&&n[s]?n[s](r.duration,r.easing,a):n.queue((function(i){t(this)[e](),a&&a.call(n[0]),i()}))}})),t.widget,t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var r=!1;t(document).on("mouseup",(function(){r=!1})),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).on("click."+this.widgetName,(function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,a=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(n&&!a&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),r=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,r=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.widget("ui.slider",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i=this.options,n=this.element.find(".ui-slider-handle"),r=[],a=i.values&&i.values.length||1;for(n.length>a&&(n.slice(a).remove(),n=n.slice(0,a)),e=n.length;e<a;e++)r.push("<span tabindex='0'></span>");this.handles=n.add(t(r.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each((function(e){t(this).data("ui-slider-handle-index",e).attr("tabIndex",0)}))},_createRange:function(){var e=this.options;e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=t("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==e.range&&"max"!==e.range||this._addClass(this.range,"ui-slider-range-"+e.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(e){var i,n,r,a,o,s,l=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),s={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(s),n=this._valueMax()-this._valueMin()+1,this.handles.each((function(e){var o=Math.abs(i-l.values(e));(o<n||n===o&&(e===l._lastChangedValue||l.values(e)===c.min))&&(n=o,r=t(this),a=e)})),!1!==this._start(e,a)&&(this._mouseSliding=!0,this._handleIndex=a,this._addClass(r,null,"ui-state-active"),r.trigger("focus"),o=r.offset(),s=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=s?{left:0,top:0}:{left:e.pageX-o.left-r.width()/2,top:e.pageY-o.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY};return e=this._normValueFromMouse(e),this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e;return 1<(t=(t="horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(t=1),t<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),e=this._valueMin()+t*e,this._trimAlignValue(e)},_uiHash:function(t,e,i){var n={handle:this.handles[t],handleIndex:t,value:void 0!==e?e:this.value()};return this._hasMultipleValues()&&(n.value=void 0!==e?e:this.values(t),n.values=i||this.values()),n},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(t,e){return this._trigger("start",t,this._uiHash(e))},_slide:function(t,e,i){var n,r=this.value(),a=this.values();this._hasMultipleValues()&&(n=this.values(e?0:1),r=this.values(e),2===this.options.values.length&&!0===this.options.range&&(i=0===e?Math.min(n,i):Math.max(n,i)),a[e]=i),i!==r&&!1!==this._trigger("slide",t,this._uiHash(e,i,a))&&(this._hasMultipleValues()?this.values(e,i):this.value(i))},_stop:function(t,e){this._trigger("stop",t,this._uiHash(e))},_change:function(t,e){this._keySliding||this._mouseSliding||(this._lastChangedValue=e,this._trigger("change",t,this._uiHash(e)))},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,r,a;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(e))return this._hasMultipleValues()?this._values(e):this.value();for(n=this.options.values,r=e,a=0;a<n.length;a+=1)n[a]=this._trimAlignValue(r[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var n,r=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(r=this.options.values.length),this._super(e,i),e){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(i),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=r-1;0<=n;n--)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(t){this._super(t),this._toggleClass(null,"ui-state-disabled",!!t)},_value:function(){var t=this.options.value;return this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],this._trimAlignValue(e);if(this._hasMultipleValues()){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,i=(t-this._valueMin())%e;return t-=i,2*Math.abs(i)>=e&&(t+=0<i?e:-e),parseFloat(t.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step;(t=Math.round((t-e)/i)*i+e)>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString();return-1===(t=e.indexOf("."))?0:e.length-t-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(t){"vertical"===t&&this.range.css({width:"",left:""}),"horizontal"===t&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var e,i,n,r,a,o=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,h={};this._hasMultipleValues()?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,h["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[c?"animate":"css"](h,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},s.animate),1===n&&l.range[c?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:s.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},s.animate),1===n&&l.range[c?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:s.animate}))),e=i})):(n=this.value(),r=this._valueMin(),a=this._valueMax(),i=a!==r?(n-r)/(a-r)*100:0,h["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](h,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-i+"%"},s.animate),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-i+"%"},s.animate))},_handleEvents:{keydown:function(e){var i,n,r,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(t(e.target),null,"ui-state-active"),!1===this._start(e,a)))return}switch(r=this.options.step,i=n=this._hasMultipleValues()?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+r);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-r)}this._slide(e,a,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),this._removeClass(t(e.target),null,"ui-state-active"))}}})})),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}((function(t){var e,i,n,r,a,o,s="Close",l="BeforeClose",c="MarkupParse",h="Open",u="Change",d="mfp",p=".mfp",f="mfp-ready",m="mfp-removing",g="mfp-prevent-close",v=function(){},y=!!window.jQuery,_=t(window),b=function(t,i){e.ev.on(d+t+p,i)},x=function(e,i,n,r){var a=document.createElement("div");return a.className="mfp-"+e,n&&(a.innerHTML=n),r?i&&i.appendChild(a):(a=t(a),i&&a.appendTo(i)),a},w=function(i,n){e.ev.triggerHandler(d+i,n),e.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),e.st.callbacks[i]&&e.st.callbacks[i].apply(e,t.isArray(n)?n:[n]))},M=function(i){return i===o&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),o=i),e.currTemplate.closeBtn},E=function(){t.magnificPopup.instance||((e=new v).init(),t.magnificPopup.instance=e)};v.prototype={constructor:v,init:function(){var i=navigator.appVersion;e.isLowIE=e.isIE8=document.all&&!document.addEventListener,e.isAndroid=/android/gi.test(i),e.isIOS=/iphone|ipad|ipod/gi.test(i),e.supportsTransition=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(void 0!==t.transition)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1}(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),n=t(document),e.popupsCache={}},open:function(i){var r;if(!1===i.isObj){e.items=i.items.toArray(),e.index=0;var o,s=i.items;for(r=0;r<s.length;r++)if((o=s[r]).parsed&&(o=o.el[0]),o===i.el[0]){e.index=r;break}}else e.items=t.isArray(i.items)?i.items:[i.items],e.index=i.index||0;if(!e.isOpen){e.types=[],a="",i.mainEl&&i.mainEl.length?e.ev=i.mainEl.eq(0):e.ev=n,i.key?(e.popupsCache[i.key]||(e.popupsCache[i.key]={}),e.currTemplate=e.popupsCache[i.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,i),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=x("bg").on("click"+p,(function(){e.close()})),e.wrap=x("wrap").attr("tabindex",-1).on("click"+p,(function(t){e._checkIfClose(t.target)&&e.close()})),e.container=x("container",e.wrap)),e.contentContainer=x("content"),e.st.preloader&&(e.preloader=x("preloader",e.container,e.st.tLoading));var l=t.magnificPopup.modules;for(r=0;r<l.length;r++){var u=l[r];u=u.charAt(0).toUpperCase()+u.slice(1),e["init"+u].call(e)}w("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(b(c,(function(t,e,i,n){i.close_replaceWith=M(n.type)})),a+=" mfp-close-btn-in"):e.wrap.append(M())),e.st.alignTop&&(a+=" mfp-align-top"),e.fixedContentPos?e.wrap.css({overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}):e.wrap.css({top:_.scrollTop(),position:"absolute"}),(!1===e.st.fixedBgPos||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:n.height(),position:"absolute"}),e.st.enableEscapeKey&&n.on("keyup"+p,(function(t){27===t.keyCode&&e.close()})),_.on("resize"+p,(function(){e.updateSize()})),e.st.closeOnContentClick||(a+=" mfp-auto-cursor"),a&&e.wrap.addClass(a);var d=e.wH=_.height(),m={};if(e.fixedContentPos&&e._hasScrollBar(d)){var g=e._getScrollbarSize();g&&(m.marginRight=g)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):m.overflow="hidden");var v=e.st.mainClass;return e.isIE7&&(v+=" mfp-ie7"),v&&e._addClassToMFP(v),e.updateItemHTML(),w("BuildControls"),t("html").css(m),e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo||t(document.body)),e._lastFocusedEl=document.activeElement,setTimeout((function(){e.content?(e._addClassToMFP(f),e._setFocus()):e.bgOverlay.addClass(f),n.on("focusin"+p,e._onFocusIn)}),16),e.isOpen=!0,e.updateSize(d),w(h),i}e.updateItemHTML()},close:function(){e.isOpen&&(w(l),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(m),setTimeout((function(){e._close()}),e.st.removalDelay)):e._close())},_close:function(){w(s);var i=m+" "+f+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(i+=e.st.mainClass+" "),e._removeClassFromMFP(i),e.fixedContentPos){var r={marginRight:""};e.isIE7?t("body, html").css("overflow",""):r.overflow="",t("html").css(r)}n.off("keyup.mfp focusin"+p),e.ev.off(p),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&!0!==e.currTemplate[e.currItem.type]||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e.st.autoFocusLast&&e._lastFocusedEl&&t(e._lastFocusedEl).focus(),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,w("AfterClose")},updateSize:function(t){if(e.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*i;e.wrap.css("height",n),e.wH=n}else e.wH=t||_.height();e.fixedContentPos||e.wrap.css("height",e.wH),w("Resize")},updateItemHTML:function(){var i=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),i.parsed||(i=e.parseEl(e.index));var n=i.type;if(w("BeforeChange",[e.currItem?e.currItem.type:"",n]),e.currItem=i,!e.currTemplate[n]){var a=!!e.st[n]&&e.st[n].markup;w("FirstMarkupParse",a),e.currTemplate[n]=!a||t(a)}r&&r!==i.type&&e.container.removeClass("mfp-"+r+"-holder");var o=e["get"+n.charAt(0).toUpperCase()+n.slice(1)](i,e.currTemplate[n]);e.appendContent(o,n),i.preloaded=!0,w(u,i),r=i.type,e.container.prepend(e.contentContainer),w("AfterChange")},appendContent:function(t,i){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&!0===e.currTemplate[i]?e.content.find(".mfp-close").length||e.content.append(M()):e.content=t:e.content="",w("BeforeAppend"),e.container.addClass("mfp-"+i+"-holder"),e.contentContainer.append(e.content)},parseEl:function(i){var n,r=e.items[i];if(r.tagName?r={el:t(r)}:(n=r.type,r={data:r,src:r.src}),r.el){for(var a=e.types,o=0;o<a.length;o++)if(r.el.hasClass("mfp-"+a[o])){n=a[o];break}r.src=r.el.attr("data-mfp-src"),r.src||(r.src=r.el.attr("href"))}return r.type=n||e.st.type||"inline",r.index=i,r.parsed=!0,e.items[i]=r,w("ElementParse",r),e.items[i]},addGroup:function(t,i){var n=function(n){n.mfpEl=this,e._openClick(n,t,i)};i||(i={});var r="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(r).on(r,n)):(i.isObj=!1,i.delegate?t.off(r).on(r,i.delegate,n):(i.items=t,t.off(r).on(r,n)))},_openClick:function(i,n,r){if((void 0!==r.midClick?r.midClick:t.magnificPopup.defaults.midClick)||!(2===i.which||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey)){var a=void 0!==r.disableOn?r.disableOn:t.magnificPopup.defaults.disableOn;if(a)if(t.isFunction(a)){if(!a.call(e))return!0}else if(_.width()<a)return!0;i.type&&(i.preventDefault(),e.isOpen&&i.stopPropagation()),r.el=t(i.mfpEl),r.delegate&&(r.items=n.find(r.delegate)),e.open(r)}},updateStatus:function(t,n){if(e.preloader){i!==t&&e.container.removeClass("mfp-s-"+i),n||"loading"!==t||(n=e.st.tLoading);var r={status:t,text:n};w("UpdateStatus",r),t=r.status,n=r.text,e.preloader.html(n),e.preloader.find("a").on("click",(function(t){t.stopImmediatePropagation()})),e.container.addClass("mfp-s-"+t),i=t}},_checkIfClose:function(i){if(!t(i).hasClass(g)){var n=e.st.closeOnContentClick,r=e.st.closeOnBgClick;if(n&&r)return!0;if(!e.content||t(i).hasClass("mfp-close")||e.preloader&&i===e.preloader[0])return!0;if(i===e.content[0]||t.contains(e.content[0],i)){if(n)return!0}else if(r&&t.contains(document,i))return!0;return!1}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?n.height():document.body.scrollHeight)>(t||_.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(i){return i.target===e.wrap[0]||t.contains(e.wrap[0],i.target)?void 0:(e._setFocus(),!1)},_parseMarkup:function(e,i,n){var r;n.data&&(i=t.extend(n.data,i)),w(c,[e,i,n]),t.each(i,(function(i,n){if(void 0===n||!1===n)return!0;if((r=i.split("_")).length>1){var a=e.find(p+"-"+r[0]);if(a.length>0){var o=r[1];"replaceWith"===o?a[0]!==n[0]&&a.replaceWith(n):"img"===o?a.is("img")?a.attr("src",n):a.replaceWith(t("<img>").attr("src",n).attr("class",a.attr("class"))):a.attr(r[1],n)}}else e.find(p+"-"+i).html(n)}))},_getScrollbarSize:function(){if(void 0===e.scrollbarSize){var t=document.createElement("div");t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:v.prototype,modules:[],open:function(e,i){return E(),(e=e?t.extend(!0,{},e):{}).isObj=!0,e.index=i||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,i){i.options&&(t.magnificPopup.defaults[e]=i.options),t.extend(this.proto,i.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},t.fn.magnificPopup=function(i){E();var n=t(this);if("string"==typeof i)if("open"===i){var r,a=y?n.data("magnificPopup"):n[0].magnificPopup,o=parseInt(arguments[1],10)||0;a.items?r=a.items[o]:(r=n,a.delegate&&(r=r.find(a.delegate)),r=r.eq(o)),e._openClick({mfpEl:r},n,a)}else e.isOpen&&e[i].apply(e,Array.prototype.slice.call(arguments,1));else i=t.extend(!0,{},i),y?n.data("magnificPopup",i):n[0].magnificPopup=i,e.addGroup(n,i);return n};var T,S,A,C="inline",L=function(){A&&(S.after(A.addClass(T)).detach(),A=null)};t.magnificPopup.registerModule(C,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(C),b(s+"."+C,(function(){L()}))},getInline:function(i,n){if(L(),i.src){var r=e.st.inline,a=t(i.src);if(a.length){var o=a[0].parentNode;o&&o.tagName&&(S||(T=r.hiddenClass,S=x(T),T="mfp-"+T),A=a.after(S).detach().removeClass(T)),e.updateStatus("ready")}else e.updateStatus("error",r.tNotFound),a=t("<div>");return i.inlineElement=a,a}return e.updateStatus("ready"),e._parseMarkup(n,{},i),n}}});var D,P="ajax",R=function(){D&&t(document.body).removeClass(D)},O=function(){R(),e.req&&e.req.abort()};t.magnificPopup.registerModule(P,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(P),D=e.st.ajax.cursor,b(s+"."+P,O),b("BeforeChange."+P,O)},getAjax:function(i){D&&t(document.body).addClass(D),e.updateStatus("loading");var n=t.extend({url:i.src,success:function(n,r,a){var o={data:n,xhr:a};w("ParseAjax",o),e.appendContent(t(o.data),P),i.finished=!0,R(),e._setFocus(),setTimeout((function(){e.wrap.addClass(f)}),16),e.updateStatus("ready"),w("AjaxContentAdded")},error:function(){R(),i.finished=i.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",i.src))}},e.st.ajax.settings);return e.req=t.ajax(n),""}}});var I,z=function(i){if(i.data&&void 0!==i.data.title)return i.data.title;var n=e.st.image.titleSrc;if(n){if(t.isFunction(n))return n.call(e,i);if(i.el)return i.el.attr(n)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var i=e.st.image,n=".image";e.types.push("image"),b(h+n,(function(){"image"===e.currItem.type&&i.cursor&&t(document.body).addClass(i.cursor)})),b(s+n,(function(){i.cursor&&t(document.body).removeClass(i.cursor),_.off("resize"+p)})),b("Resize"+n,e.resizeImage),e.isLowIE&&b("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var i=0;e.isLowIE&&(i=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-i)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,I&&clearInterval(I),t.isCheckingImgSize=!1,w("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var i=0,n=t.img[0],r=function(a){I&&clearInterval(I),I=setInterval((function(){return n.naturalWidth>0?void e._onImageHasSize(t):(i>200&&clearInterval(I),void(3===++i?r(10):40===i?r(50):100===i&&r(500)))}),a)};r(1)},getImage:function(i,n){var r=0,a=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,w("ImageLoadComplete")):200>++r?setTimeout(a,100):o())},o=function(){i&&(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("error",s.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},s=e.st.image,l=n.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",i.el&&i.el.find("img").length&&(c.alt=i.el.find("img").attr("alt")),i.img=t(c).on("load.mfploader",a).on("error.mfploader",o),c.src=i.src,l.is("img")&&(i.img=i.img.clone()),(c=i.img[0]).naturalWidth>0?i.hasSize=!0:c.width||(i.hasSize=!1)}return e._parseMarkup(n,{title:z(i),img_replaceWith:i.img},i),e.resizeImage(),i.hasSize?(I&&clearInterval(I),i.loadError?(n.addClass("mfp-loading"),e.updateStatus("error",s.tError.replace("%url%",i.src))):(n.removeClass("mfp-loading"),e.updateStatus("ready")),n):(e.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,n.addClass("mfp-loading"),e.findImageSize(i)),n)}}});var N;t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,i=e.st.zoom,n=".zoom";if(i.enabled&&e.supportsTransition){var r,a,o=i.duration,c=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),n="all "+i.duration/1e3+"s "+i.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},a="transition";return r["-webkit-"+a]=r["-moz-"+a]=r["-o-"+a]=r[a]=n,e.css(r),e},h=function(){e.content.css("visibility","visible")};b("BuildControls"+n,(function(){if(e._allowZoom()){if(clearTimeout(r),e.content.css("visibility","hidden"),!(t=e._getItemToZoom()))return void h();(a=c(t)).css(e._getOffset()),e.wrap.append(a),r=setTimeout((function(){a.css(e._getOffset(!0)),r=setTimeout((function(){h(),setTimeout((function(){a.remove(),t=a=null,w("ZoomAnimationEnded")}),16)}),o)}),16)}})),b(l+n,(function(){if(e._allowZoom()){if(clearTimeout(r),e.st.removalDelay=o,!t){if(!(t=e._getItemToZoom()))return;a=c(t)}a.css(e._getOffset(!0)),e.wrap.append(a),e.content.css("visibility","hidden"),setTimeout((function(){a.css(e._getOffset())}),16)}})),b(s+n,(function(){e._allowZoom()&&(h(),a&&a.remove(),t=null)}))}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return!!e.currItem.hasSize&&e.currItem.img},_getOffset:function(i){var n,r=(n=i?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem)).offset(),a=parseInt(n.css("padding-top"),10),o=parseInt(n.css("padding-bottom"),10);r.top-=t(window).scrollTop()-a;var s={width:n.width(),height:(y?n.innerHeight():n[0].offsetHeight)-o-a};return void 0===N&&(N=void 0!==document.createElement("p").style.MozTransform),N?s["-moz-transform"]=s.transform="translate("+r.left+"px,"+r.top+"px)":(s.left=r.left,s.top=r.top),s}}});var k="iframe",F=function(t){if(e.currTemplate[k]){var i=e.currTemplate[k].find("iframe");i.length&&(t||(i[0].src="//about:blank"),e.isIE8&&i.css("display",t?"block":"none"))}};t.magnificPopup.registerModule(k,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push(k),b("BeforeChange",(function(t,e,i){e!==i&&(e===k?F():i===k&&F(!0))})),b(s+"."+k,(function(){F()}))},getIframe:function(i,n){var r=i.src,a=e.st.iframe;t.each(a.patterns,(function(){return r.indexOf(this.index)>-1?(this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1):void 0}));var o={};return a.srcAction&&(o[a.srcAction]=r),e._parseMarkup(n,o,i),e.updateStatus("ready"),n}}});var B=function(t){var i=e.items.length;return t>i-1?t-i:0>t?i+t:t},U=function(t,e,i){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,i)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=e.st.gallery,r=".mfp-gallery";return e.direction=!0,!(!i||!i.enabled)&&(a+=" mfp-gallery",b(h+r,(function(){i.navigateByImgClick&&e.wrap.on("click"+r,".mfp-img",(function(){return e.items.length>1?(e.next(),!1):void 0})),n.on("keydown"+r,(function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()}))})),b("UpdateStatus"+r,(function(t,i){i.text&&(i.text=U(i.text,e.currItem.index,e.items.length))})),b(c+r,(function(t,n,r,a){var o=e.items.length;r.counter=o>1?U(i.tCounter,a.index,o):""})),b("BuildControls"+r,(function(){if(e.items.length>1&&i.arrows&&!e.arrowLeft){var n=i.arrowMarkup,r=e.arrowLeft=t(n.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(g),a=e.arrowRight=t(n.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(g);r.click((function(){e.prev()})),a.click((function(){e.next()})),e.container.append(r.add(a))}})),b(u+r,(function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout((function(){e.preloadNearbyImages(),e._preloadTimeout=null}),16)})),void b(s+r,(function(){n.off(r),e.wrap.off("click"+r),e.arrowRight=e.arrowLeft=null})))},next:function(){e.direction=!0,e.index=B(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=B(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,i=e.st.gallery.preload,n=Math.min(i[0],e.items.length),r=Math.min(i[1],e.items.length);for(t=1;t<=(e.direction?r:n);t++)e._preloadItem(e.index+t);for(t=1;t<=(e.direction?n:r);t++)e._preloadItem(e.index-t)},_preloadItem:function(i){if(i=B(i),!e.items[i].preloaded){var n=e.items[i];n.parsed||(n=e.parseEl(i)),w("LazyLoad",n),"image"===n.type&&(n.img=t('<img class="mfp-img" />').on("load.mfploader",(function(){n.hasSize=!0})).on("error.mfploader",(function(){n.hasSize=!0,n.loadError=!0,w("LazyLoadError",n)})).attr("src",n.src)),n.preloaded=!0}}}});var H="retina";t.magnificPopup.registerModule(H,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,(function(t){return"@2x"+t}))},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,i=t.ratio;(i=isNaN(i)?i():i)>1&&(b("ImageHasSize."+H,(function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/i,width:"100%"})})),b("ElementParse."+H,(function(e,n){n.src=t.replaceSrc(n,i)})))}}}}),E()})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t||self).Lenis=e()}(this,(function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,"symbol"==typeof(r=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key))?r:String(r),n)}var r}function e(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(){return(i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function n(t,e,i){return Math.max(t,Math.min(e,i))}var r=function(){function t(){}var e=t.prototype;return e.advance=function(t){var e,i,r,a;if(this.isRunning){var o=!1;if(this.lerp)this.value=(i=this.value,r=this.to,(1-(a=1-Math.exp(-60*this.lerp*t)))*i+a*r),Math.round(this.value)===this.to&&(this.value=this.to,o=!0);else{this.currentTime+=t;var s=n(0,this.currentTime/this.duration,1),l=(o=s>=1)?1:this.easing(s);this.value=this.from+(this.to-this.from)*l}null==(e=this.onUpdate)||e.call(this,this.value,{completed:o}),o&&this.stop()}},e.stop=function(){this.isRunning=!1},e.fromTo=function(t,e,i){var n=i.lerp,r=void 0===n?.1:n,a=i.duration,o=void 0===a?1:a,s=i.easing,l=void 0===s?function(t){return t}:s,c=i.onUpdate;this.from=this.value=t,this.to=e,this.lerp=r,this.duration=o,this.easing=l,this.currentTime=0,this.isRunning=!0,this.onUpdate=c},t}(),a=function(){function t(t){var e,i,n=this,r=void 0===t?{}:t,a=r.wrapper,o=r.content,s=r.autoResize,l=void 0===s||s;if(this.resize=function(){n.onWrapperResize(),n.onContentResize()},this.onWrapperResize=function(){n.wrapper===window?(n.width=window.innerWidth,n.height=window.innerHeight):(n.width=n.wrapper.clientWidth,n.height=n.wrapper.clientHeight)},this.onContentResize=function(){n.scrollHeight=n.content.scrollHeight,n.scrollWidth=n.content.scrollWidth},this.wrapper=a,this.content=o,l){var c=(e=this.resize,function(){var t=arguments,n=this;clearTimeout(i),i=setTimeout((function(){e.apply(n,t)}),250)});this.wrapper!==window&&(this.wrapperResizeObserver=new ResizeObserver(c),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(c),this.contentResizeObserver.observe(this.content)}this.resize()}return t.prototype.destroy=function(){var t,e;null==(t=this.wrapperResizeObserver)||t.disconnect(),null==(e=this.contentResizeObserver)||e.disconnect()},e(t,[{key:"limit",get:function(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}]),t}(),o=function(){function t(){this.events={}}var e=t.prototype;return e.emit=function(t){for(var e=this.events[t]||[],i=0,n=e.length;i<n;i++)e[i].apply(e,[].slice.call(arguments,1))},e.on=function(t,e){var i,n=this;return(null==(i=this.events[t])?void 0:i.push(e))||(this.events[t]=[e]),function(){var i;n.events[t]=null==(i=n.events[t])?void 0:i.filter((function(t){return e!==t}))}},e.off=function(t,e){var i;this.events[t]=null==(i=this.events[t])?void 0:i.filter((function(t){return e!==t}))},e.destroy=function(){this.events={}},t}(),s=function(){function t(t,e){var i=this,r=e.wheelMultiplier,a=void 0===r?1:r,s=e.touchMultiplier,l=void 0===s?2:s,c=e.normalizeWheel,h=void 0!==c&&c;this.onTouchStart=function(t){var e=t.targetTouches?t.targetTouches[0]:t,n=e.clientY;i.touchStart.x=e.clientX,i.touchStart.y=n,i.lastDelta={x:0,y:0}},this.onTouchMove=function(t){var e=t.targetTouches?t.targetTouches[0]:t,n=e.clientX,r=e.clientY,a=-(n-i.touchStart.x)*i.touchMultiplier,o=-(r-i.touchStart.y)*i.touchMultiplier;i.touchStart.x=n,i.touchStart.y=r,i.lastDelta={x:a,y:o},i.emitter.emit("scroll",{deltaX:a,deltaY:o,event:t})},this.onTouchEnd=function(t){i.emitter.emit("scroll",{deltaX:i.lastDelta.x,deltaY:i.lastDelta.y,event:t})},this.onWheel=function(t){var e=t.deltaX,r=t.deltaY;i.normalizeWheel&&(e=n(-100,e,100),r=n(-100,r,100)),i.emitter.emit("scroll",{deltaX:e*=i.wheelMultiplier,deltaY:r*=i.wheelMultiplier,event:t})},this.element=t,this.wheelMultiplier=a,this.touchMultiplier=l,this.normalizeWheel=h,this.touchStart={x:null,y:null},this.emitter=new o,this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}var e=t.prototype;return e.on=function(t,e){return this.emitter.on(t,e)},e.destroy=function(){this.emitter.destroy(),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})},t}();return function(){function t(t){var e=this,n=void 0===t?{}:t,l=n.wrapper,c=void 0===l?window:l,h=n.content,u=void 0===h?document.documentElement:h,d=n.wheelEventsTarget,p=void 0===d?c:d,f=n.smoothWheel,m=void 0===f||f,g=n.smoothTouch,v=void 0!==g&&g,y=n.syncTouch,_=void 0!==y&&y,b=n.syncTouchLerp,x=void 0===b?.1:b,w=n.__iosNoInertiaSyncTouchLerp,M=void 0===w?.4:w,E=n.touchInertiaMultiplier,T=void 0===E?35:E,S=n.duration,A=n.easing,C=void 0===A?function(t){return Math.min(1,1.001-Math.pow(2,-10*t))}:A,L=n.lerp,D=void 0===L?S&&.1:L,P=n.infinite,R=void 0!==P&&P,O=n.orientation,I=void 0===O?"vertical":O,z=n.gestureOrientation,N=void 0===z?"vertical":z,k=n.touchMultiplier,F=void 0===k?1:k,B=n.wheelMultiplier,U=void 0===B?1:B,H=n.normalizeWheel,G=void 0!==H&&H,j=n.autoResize,V=void 0===j||j;this.onVirtualScroll=function(t){var n=t.deltaX,r=t.deltaY,a=t.event;if(!a.ctrlKey){var o=a.type.includes("touch"),s=a.type.includes("wheel");if(!("vertical"===e.options.gestureOrientation&&0===r||"horizontal"===e.options.gestureOrientation&&0===n||o&&"vertical"===e.options.gestureOrientation&&0===e.scroll&&!e.options.infinite&&r<=0)){var l=a.composedPath();if(!(l=l.slice(0,l.indexOf(e.rootElement))).find((function(t){var e;return(null==t.hasAttribute?void 0:t.hasAttribute("data-lenis-prevent"))||o&&(null==t.hasAttribute?void 0:t.hasAttribute("data-lenis-prevent-touch"))||s&&(null==t.hasAttribute?void 0:t.hasAttribute("data-lenis-prevent-wheel"))||(null==(e=t.classList)?void 0:e.contains("lenis"))})))if(e.isStopped||e.isLocked)a.preventDefault();else{if(e.isSmooth=(e.options.smoothTouch||e.options.syncTouch)&&o||e.options.smoothWheel&&s,!e.isSmooth)return e.isScrolling=!1,void e.animate.stop();a.preventDefault();var c=r;"both"===e.options.gestureOrientation?c=Math.abs(r)>Math.abs(n)?r:n:"horizontal"===e.options.gestureOrientation&&(c=n);var h=o&&e.options.syncTouch,u=o&&"touchend"===a.type&&Math.abs(c)>1;u&&(c=e.velocity*e.options.touchInertiaMultiplier),e.scrollTo(e.targetScroll+c,i({programmatic:!1},h&&{lerp:u?e.syncTouchLerp:e.options.__iosNoInertiaSyncTouchLerp}))}}}},this.onScroll=function(){if(!e.isScrolling){var t=e.animatedScroll;e.animatedScroll=e.targetScroll=e.actualScroll,e.velocity=0,e.direction=Math.sign(e.animatedScroll-t),e.emit()}},window.lenisVersion="1.0.23",c!==document.documentElement&&c!==document.body||(c=window),this.options={wrapper:c,content:u,wheelEventsTarget:p,smoothWheel:m,smoothTouch:v,syncTouch:_,syncTouchLerp:x,__iosNoInertiaSyncTouchLerp:M,touchInertiaMultiplier:T,duration:S,easing:C,lerp:D,infinite:R,gestureOrientation:N,orientation:I,touchMultiplier:F,wheelMultiplier:U,normalizeWheel:G,autoResize:V},this.dimensions=new a({wrapper:c,content:u,autoResize:V}),this.rootElement.classList.add("lenis"),this.velocity=0,this.isStopped=!1,this.isSmooth=m||v,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.animate=new r,this.emitter=new o,this.options.wrapper.addEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll=new s(p,{touchMultiplier:F,wheelMultiplier:U,normalizeWheel:G}),this.virtualScroll.on("scroll",this.onVirtualScroll)}var l=t.prototype;return l.destroy=function(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll.destroy(),this.dimensions.destroy(),this.rootElement.classList.remove("lenis"),this.rootElement.classList.remove("lenis-smooth"),this.rootElement.classList.remove("lenis-scrolling"),this.rootElement.classList.remove("lenis-stopped")},l.on=function(t,e){return this.emitter.on(t,e)},l.off=function(t,e){return this.emitter.off(t,e)},l.setScroll=function(t){this.isHorizontal?this.rootElement.scrollLeft=t:this.rootElement.scrollTop=t},l.resize=function(){this.dimensions.resize()},l.emit=function(){this.emitter.emit("scroll",this)},l.reset=function(){this.isLocked=!1,this.isScrolling=!1,this.velocity=0,this.animate.stop()},l.start=function(){this.isStopped=!1,this.reset()},l.stop=function(){this.isStopped=!0,this.animate.stop(),this.reset()},l.raf=function(t){var e=t-(this.time||t);this.time=t,this.animate.advance(.001*e)},l.scrollTo=function(t,e){var i=this,r=void 0===e?{}:e,a=r.offset,o=void 0===a?0:a,s=r.immediate,l=void 0!==s&&s,c=r.lock,h=void 0!==c&&c,u=r.duration,d=void 0===u?this.options.duration:u,p=r.easing,f=void 0===p?this.options.easing:p,m=r.lerp,g=void 0===m?!d&&this.options.lerp:m,v=r.onComplete,y=void 0===v?null:v,_=r.force,b=r.programmatic,x=void 0===b||b;if(!this.isStopped||void 0!==_&&_){if(["top","left","start"].includes(t))t=0;else if(["bottom","right","end"].includes(t))t=this.limit;else{var w,M;if("string"==typeof t?M=document.querySelector(t):null!=(w=t)&&w.nodeType&&(M=t),M){if(this.options.wrapper!==window){var E=this.options.wrapper.getBoundingClientRect();o-=this.isHorizontal?E.left:E.top}var T=M.getBoundingClientRect();t=(this.isHorizontal?T.left:T.top)+this.animatedScroll}}if("number"==typeof t){if(t+=o,t=Math.round(t),this.options.infinite?x&&(this.targetScroll=this.animatedScroll=this.scroll):t=n(0,t,this.limit),l)return this.animatedScroll=this.targetScroll=t,this.setScroll(this.scroll),this.reset(),this.emit(),void(null==y||y());if(!x){if(t===this.targetScroll)return;this.targetScroll=t}this.animate.fromTo(this.animatedScroll,t,{duration:d,easing:f,lerp:g,onUpdate:function(t,e){var n=e.completed;h&&(i.isLocked=!0),i.isScrolling=!0,i.velocity=t-i.animatedScroll,i.direction=Math.sign(i.velocity),i.animatedScroll=t,i.setScroll(i.scroll),x&&(i.targetScroll=t),n&&(h&&(i.isLocked=!1),requestAnimationFrame((function(){i.isScrolling=!1})),i.velocity=0,null==y||y()),i.emit()}})}}},e(t,[{key:"rootElement",get:function(){return this.options.wrapper===window?this.options.content:this.options.wrapper}},{key:"limit",get:function(){return this.dimensions.limit[this.isHorizontal?"x":"y"]}},{key:"isHorizontal",get:function(){return"horizontal"===this.options.orientation}},{key:"actualScroll",get:function(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}},{key:"scroll",get:function(){return this.options.infinite?(this.animatedScroll%(t=this.limit)+t)%t:this.animatedScroll;var t}},{key:"progress",get:function(){return 0===this.limit?1:this.scroll/this.limit}},{key:"isSmooth",get:function(){return this.__isSmooth},set:function(t){this.__isSmooth!==t&&(this.rootElement.classList.toggle("lenis-smooth",t),this.__isSmooth=t)}},{key:"isScrolling",get:function(){return this.__isScrolling},set:function(t){this.__isScrolling!==t&&(this.rootElement.classList.toggle("lenis-scrolling",t),this.__isScrolling=t)}},{key:"isStopped",get:function(){return this.__isStopped},set:function(t){this.__isStopped!==t&&(this.rootElement.classList.toggle("lenis-stopped",t),this.__isStopped=t)}},{key:"className",get:function(){var t="lenis";return this.isStopped&&(t+=" lenis-stopped"),this.isScrolling&&(t+=" lenis-scrolling"),this.isSmooth&&(t+=" lenis-smooth"),t}}]),t}()})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],e):e((t=t||self).PANOLENS={},t.THREE)}(this,(function(t,e){function i(t){this.constraints=Object.assign({video:{width:{ideal:1920},height:{ideal:1080},facingMode:{exact:"environment"}},audio:!1},t),this.element=this.scene=this.container=null,this.devices=[],this.stream=null,this.ratioScalar=1,this.videoDeviceIndex=0}function n(t,i,n){t=void 0===t?16777215:t,i=void 0===i||i,n=void 0===n?1500:n,this.dpr=window.devicePixelRatio;var r=this.createCanvas(),a=r.canvas;r=r.context;var o=new e.SpriteMaterial({color:t,map:this.createCanvasTexture(a)});e.Sprite.call(this,o),this.canvasWidth=a.width,this.canvasHeight=a.height,this.context=r,this.color=t instanceof e.Color?t:new e.Color(t),this.autoSelect=i,this.dwellTime=n,this.rippleDuration=500,this.position.z=-10,this.center.set(.5,.5),this.scale.set(.5,.5,1),this.callback=this.timerId=this.startTimestamp=null,this.frustumCulled=!1,this.updateCanvasArcByProgress(0)}function r(t,i,n){t=void 0===t?300:t,i=i||E.Info,e.Sprite.call(this),this.type="infospot",this.animated=void 0===n||n,this.frustumCulled=this.isHovering=!1,this.cursorStyle=this.toPanorama=this.element=null,this.mode=M.NORMAL,this.scale.set(t,t,1),this.rotation.y=Math.PI,this.container=null,this.originalRaycast=this.raycast,this.HANDLER_FOCUS=null,this.material.side=e.DoubleSide,this.material.depthTest=!1,this.material.transparent=!0,this.material.opacity=0,this.scaleUpAnimation=new L.Tween,this.scaleDownAnimation=new L.Tween,n=function(i){if(this.material){var n=i.image.width/i.image.height,r=new e.Vector3;i.image.width=i.image.naturalWidth||64,i.image.height=i.image.naturalHeight||64,this.scale.set(n*t,t,1),r.copy(this.scale),this.scaleUpAnimation=new L.Tween(this.scale).to({x:1.3*r.x,y:1.3*r.y},500).easing(L.Easing.Elastic.Out),this.scaleDownAnimation=new L.Tween(this.scale).to({x:r.x,y:r.y},500).easing(L.Easing.Elastic.Out),this.material.map=i,this.material.needsUpdate=!0}}.bind(this),this.showAnimation=new L.Tween(this.material).to({opacity:1},500).onStart(this.enableRaycast.bind(this,!0)).easing(L.Easing.Quartic.Out),this.hideAnimation=new L.Tween(this.material).to({opacity:0},500).onStart(this.enableRaycast.bind(this,!1)).easing(L.Easing.Quartic.Out),this.addEventListener("click",this.onClick),this.addEventListener("hover",this.onHover),this.addEventListener("hoverenter",this.onHoverStart),this.addEventListener("hoverleave",this.onHoverEnd),this.addEventListener("panolens-dual-eye-effect",this.onDualEyeEffect),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("dismiss",this.onDismiss),this.addEventListener("panolens-infospot-focus",this.setFocusMethod),S.load(i,n)}function a(t){t||console.warn("PANOLENS.Widget: No container specified"),e.EventDispatcher.call(this),this.DEFAULT_TRANSITION="all 0.27s ease",this.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),this.PREVENT_EVENT_HANDLER=function(t){t.preventDefault(),t.stopPropagation()},this.container=t,this.mask=this.activeSubMenu=this.activeMainItem=this.mainMenu=this.settingElement=this.videoElement=this.fullscreenElement=this.barElement=null}function o(t,i){e.Mesh.call(this,t,i),this.type="panorama",this.ImageQualityLow=1,this.ImageQualityFair=2,this.ImageQualityMedium=3,this.ImageQualityHigh=4,this.ImageQualitySuperHigh=5,this.animationDuration=1e3,this.defaultInfospotSize=350,this.container=void 0,this.loaded=!1,this.linkedSpots=[],this.isInfospotVisible=!1,this.linkingImageScale=this.linkingImageURL=void 0,this.material.side=e.BackSide,this.material.opacity=0,this.scale.x*=-1,this.renderOrder=-1,this.active=!1,this.infospotAnimation=new L.Tween(this).to({},this.animationDuration/2),this.addEventListener("load",this.fadeIn.bind(this)),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("click",this.onClick.bind(this)),this.setupTransitions()}function s(t,i,n){i=i||new e.SphereBufferGeometry(5e3,60,40),n=n||new e.MeshBasicMaterial({opacity:0,transparent:!0}),o.call(this,i,n),this.src=t,this.radius=5e3}function l(){var t=new e.BufferGeometry,i=new e.MeshBasicMaterial({color:0,opacity:0,transparent:!0});t.addAttribute("position",new e.BufferAttribute(new Float32Array,1)),o.call(this,t,i)}function c(t){t=void 0===t?[]:t;var i=Object.assign({},e.ShaderLib.cube),n=new e.BoxBufferGeometry(1e4,1e4,1e4);i=new e.ShaderMaterial({fragmentShader:i.fragmentShader,vertexShader:i.vertexShader,uniforms:i.uniforms,side:e.BackSide,transparent:!0}),o.call(this,n,i),this.images=t,this.edgeLength=1e4,this.material.uniforms.opacity.value=0}function h(){for(var t=[],e=0;6>e;e++)t.push(E.WhiteTile);c.call(this,t)}function u(t,i){i=void 0===i?{}:i;var n=new e.SphereBufferGeometry(5e3,60,40),r=new e.MeshBasicMaterial({opacity:0,transparent:!0});o.call(this,n,r),this.src=t,this.options={videoElement:document.createElement("video"),loop:!0,muted:!0,autoplay:!1,playsinline:!0,crossOrigin:"anonymous"},Object.assign(this.options,i),this.videoElement=this.options.videoElement,this.videoProgress=0,this.radius=5e3,this.addEventListener("leave",this.pauseVideo.bind(this)),this.addEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.addEventListener("video-toggle",this.toggleVideo.bind(this)),this.addEventListener("video-time",this.setVideoCurrentTime.bind(this))}function d(t){var e;this._parameters=t=void 0===t?{}:t,this._panoId=this._zoom=null,this._panoClient=new google.maps.StreetViewService,this._total=this._count=0,this._canvas=[],this._ctx=[],this._hc=this._wc=0,this.result=null,this.rotation=0,this.copyright="",this.onPanoramaLoad=this.onSizeChange=null,this.levelsW=[1,2,4,7,13,26],this.levelsH=[1,1,2,4,7,13],this.widths=[416,832,1664,3328,6656,13312],this.heights=[416,416,832,1664,3328,6656],this.maxH=this.maxW=6656;try{var i=document.createElement("canvas");(e=i.getContext("experimental-webgl"))||(e=i.getContext("webgl"))}catch(t){}this.maxW=Math.max(e.getParameter(e.MAX_TEXTURE_SIZE),this.maxW),this.maxH=Math.max(e.getParameter(e.MAX_TEXTURE_SIZE),this.maxH)}function p(t,e){s.call(this),this.panoId=t,this.gsvLoader=null,this.loadRequested=!1,this.setupGoogleMapAPI(e)}function f(t,i,n,r){n=void 0===n?1e4:n,r=void 0===r?.5:r,"image"===(void 0===t?"image":t)&&s.call(this,i,this.createGeometry(n,r),this.createMaterial(n)),this.size=n,this.ratio=r,this.EPS=1e-6,this.frameId=null,this.dragging=!1,this.userMouse=new e.Vector2,this.quatA=new e.Quaternion,this.quatB=new e.Quaternion,this.quatCur=new e.Quaternion,this.quatSlerp=new e.Quaternion,this.vectorX=new e.Vector3(1,0,0),this.vectorY=new e.Vector3(0,1,0),this.addEventListener("window-resize",this.onWindowResize)}function m(t,e,i){f.call(this,"image",t,e,i)}function g(t){var n=new e.SphereBufferGeometry(5e3,60,40),r=new e.MeshBasicMaterial({visible:!1});o.call(this,n,r),this.media=new i(t),this.radius=5e3,this.addEventListener("enter",this.start.bind(this)),this.addEventListener("leave",this.stop.bind(this)),this.addEventListener("panolens-container",this.onPanolensContainer.bind(this)),this.addEventListener("panolens-scene",this.onPanolensScene.bind(this))}function v(t,i){function n(t){if(B=!1,k=F=0,!1!==v.enabled){if(t.preventDefault(),t.button===v.mouseButtons.ORBIT){if(!0===v.noRotate)return;H=U.ROTATE,y.set(t.clientX,t.clientY)}else if(t.button===v.mouseButtons.ZOOM){if(!0===v.noZoom)return;H=U.DOLLY,S.set(t.clientX,t.clientY)}else if(t.button===v.mouseButtons.PAN){if(!0===v.noPan)return;H=U.PAN,x.set(t.clientX,t.clientY)}H!==U.NONE&&(document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",a,!1),v.dispatchEvent(W)),v.update()}}function r(t){if(!1!==v.enabled){t.preventDefault();var e=v.domElement===document?v.domElement.body:v.domElement;if(H===U.ROTATE){if(!0===v.noRotate)return;_.set(t.clientX,t.clientY),b.subVectors(_,y),v.rotateLeft(2*Math.PI*b.x/e.clientWidth*v.rotateSpeed),v.rotateUp(2*Math.PI*b.y/e.clientHeight*v.rotateSpeed),y.copy(_),d&&(k=t.clientX-d.clientX,F=t.clientY-d.clientY),d=t}else if(H===U.DOLLY){if(!0===v.noZoom)return;A.set(t.clientX,t.clientY),C.subVectors(A,S),0<C.y?v.dollyIn():0>C.y&&v.dollyOut(),S.copy(A)}else if(H===U.PAN){if(!0===v.noPan)return;w.set(t.clientX,t.clientY),M.subVectors(w,x),v.pan(M.x,M.y),x.copy(w)}H!==U.NONE&&v.update()}}function a(){B=!0,d=void 0,!1!==v.enabled&&(document.removeEventListener("mousemove",r,!1),document.removeEventListener("mouseup",a,!1),v.dispatchEvent(q),H=U.NONE)}function o(t){if(!1!==v.enabled&&!0!==v.noZoom&&H===U.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),0<e?(v.object.fov=v.object.fov<v.maxFov?v.object.fov+1:v.maxFov,v.object.updateProjectionMatrix()):0>e&&(v.object.fov=v.object.fov>v.minFov?v.object.fov-1:v.minFov,v.object.updateProjectionMatrix()),v.update(),v.dispatchEvent(V),v.dispatchEvent(W),v.dispatchEvent(q)}}function s(t){switch(t.keyCode){case v.keys.UP:p=!1;break;case v.keys.BOTTOM:f=!1;break;case v.keys.LEFT:m=!1;break;case v.keys.RIGHT:g=!1}}function l(t){if(!1!==v.enabled&&!0!==v.noKeys&&!0!==v.noRotate){switch(t.keyCode){case v.keys.UP:p=!0;break;case v.keys.BOTTOM:f=!0;break;case v.keys.LEFT:m=!0;break;case v.keys.RIGHT:g=!0}(p||f||m||g)&&(B=!0,p&&(F=-v.rotateSpeed*v.momentumKeydownFactor),f&&(F=v.rotateSpeed*v.momentumKeydownFactor),m&&(k=-v.rotateSpeed*v.momentumKeydownFactor),g&&(k=v.rotateSpeed*v.momentumKeydownFactor))}}function c(t){if(B=!1,k=F=0,!1!==v.enabled){switch(t.touches.length){case 1:if(!0===v.noRotate)return;H=U.TOUCH_ROTATE,y.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!0===v.noZoom)return;H=U.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX;t=t.touches[0].pageY-t.touches[1].pageY,S.set(0,Math.sqrt(e*e+t*t));break;case 3:if(!0===v.noPan)return;H=U.TOUCH_PAN,x.set(t.touches[0].pageX,t.touches[0].pageY);break;default:H=U.NONE}H!==U.NONE&&v.dispatchEvent(W)}}function h(t){if(!1!==v.enabled){t.preventDefault(),t.stopPropagation();var e=v.domElement===document?v.domElement.body:v.domElement;switch(t.touches.length){case 1:if(!0===v.noRotate)break;if(H!==U.TOUCH_ROTATE)break;_.set(t.touches[0].pageX,t.touches[0].pageY),b.subVectors(_,y),v.rotateLeft(2*Math.PI*b.x/e.clientWidth*v.rotateSpeed),v.rotateUp(2*Math.PI*b.y/e.clientHeight*v.rotateSpeed),y.copy(_),d&&(k=t.touches[0].pageX-d.pageX,F=t.touches[0].pageY-d.pageY),d={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},v.update();break;case 2:if(!0===v.noZoom)break;if(H!==U.TOUCH_DOLLY)break;e=t.touches[0].pageX-t.touches[1].pageX,t=t.touches[0].pageY-t.touches[1].pageY,A.set(0,Math.sqrt(e*e+t*t)),C.subVectors(A,S),0>C.y?(v.object.fov=v.object.fov<v.maxFov?v.object.fov+1:v.maxFov,v.object.updateProjectionMatrix()):0<C.y&&(v.object.fov=v.object.fov>v.minFov?v.object.fov-1:v.minFov,v.object.updateProjectionMatrix()),S.copy(A),v.update(),v.dispatchEvent(V);break;case 3:if(!0===v.noPan)break;if(H!==U.TOUCH_PAN)break;w.set(t.touches[0].pageX,t.touches[0].pageY),M.subVectors(w,x),v.pan(M.x,M.y),x.copy(w),v.update();break;default:H=U.NONE}}}function u(){B=!0,d=void 0,!1!==v.enabled&&(v.dispatchEvent(q),H=U.NONE)}this.object=t,this.domElement=void 0!==i?i:document,this.frameId=null,this.enabled=!0,this.center=this.target=new e.Vector3,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=-.15,this.noPan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.momentumDampingFactor=.9,this.momentumScalingFactor=-.005,this.momentumKeydownFactor=20,this.minFov=30,this.maxFov=120,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT};var d,p,f,m,g,v=this,y=new e.Vector2,_=new e.Vector2,b=new e.Vector2,x=new e.Vector2,w=new e.Vector2,M=new e.Vector2,E=new e.Vector3,T=new e.Vector3,S=new e.Vector2,A=new e.Vector2,C=new e.Vector2,L=0,D=0,P=0,R=0,O=1,I=new e.Vector3,z=new e.Vector3,N=new e.Quaternion,k=0,F=0,B=!1,U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},H=U.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var G=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),j=G.clone().inverse(),V={type:"change"},W={type:"start"},q={type:"end"};this.setLastQuaternion=function(t){N.copy(t),v.object.quaternion.copy(t)},this.getLastPosition=function(){return z},this.rotateLeft=function(t){void 0===t&&(t=2*Math.PI/60/60*v.autoRotateSpeed),R-=t},this.rotateUp=function(t){void 0===t&&(t=2*Math.PI/60/60*v.autoRotateSpeed),P-=t},this.panLeft=function(t){var e=this.object.matrix.elements;E.set(e[0],e[1],e[2]),E.multiplyScalar(-t),I.add(E)},this.panUp=function(t){var e=this.object.matrix.elements;E.set(e[4],e[5],e[6]),E.multiplyScalar(t),I.add(E)},this.pan=function(t,i){var n=v.domElement===document?v.domElement.body:v.domElement;if(v.object instanceof e.PerspectiveCamera){var r=v.object.position.clone().sub(v.target).length();r*=Math.tan(v.object.fov/2*Math.PI/180),v.panLeft(2*t*r/n.clientHeight),v.panUp(2*i*r/n.clientHeight)}else v.object instanceof e.OrthographicCamera?(v.panLeft(t*(v.object.right-v.object.left)/n.clientWidth),v.panUp(i*(v.object.top-v.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.momentum=function(){B&&(1e-4>Math.abs(k)&&1e-4>Math.abs(F)?B=!1:(F*=this.momentumDampingFactor,k*=this.momentumDampingFactor,R-=this.momentumScalingFactor*k,P-=this.momentumScalingFactor*F))},this.dollyIn=function(t){void 0===t&&(t=Math.pow(.95,v.zoomSpeed)),v.object instanceof e.PerspectiveCamera?O/=t:v.object instanceof e.OrthographicCamera?(v.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),v.object.updateProjectionMatrix(),v.dispatchEvent(V)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){void 0===t&&(t=Math.pow(.95,v.zoomSpeed)),v.object instanceof e.PerspectiveCamera?O*=t:v.object instanceof e.OrthographicCamera?(v.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),v.object.updateProjectionMatrix(),v.dispatchEvent(V)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(t){var e=this.object.position;T.copy(e).sub(this.target),T.applyQuaternion(G),L=Math.atan2(T.x,T.z),D=Math.atan2(Math.sqrt(T.x*T.x+T.z*T.z),T.y),this.autoRotate&&H===U.NONE&&this.rotateLeft(2*Math.PI/60/60*v.autoRotateSpeed),this.momentum(),L+=R,D+=P,L=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,L)),D=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,D)),D=Math.max(1e-7,Math.min(Math.PI-1e-7,D));var i=T.length()*O;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),this.target.add(I),T.x=i*Math.sin(D)*Math.sin(L),T.y=i*Math.cos(D),T.z=i*Math.sin(D)*Math.cos(L),T.applyQuaternion(j),e.copy(this.target).add(T),this.object.lookAt(this.target),P=R=0,O=1,I.set(0,0,0),(1e-7<z.distanceToSquared(this.object.position)||1e-7<8*(1-N.dot(this.object.quaternion)))&&(!0!==t&&this.dispatchEvent(V),z.copy(this.object.position),N.copy(this.object.quaternion))},this.reset=function(){H=U.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(V),this.update()},this.getPolarAngle=function(){return D},this.getAzimuthalAngle=function(){return L},this.dispose=function(){this.domElement.removeEventListener("mousedown",n),this.domElement.removeEventListener("mousewheel",o),this.domElement.removeEventListener("DOMMouseScroll",o),this.domElement.removeEventListener("touchstart",c),this.domElement.removeEventListener("touchend",u),this.domElement.removeEventListener("touchmove",h),window.removeEventListener("keyup",s),window.removeEventListener("keydown",l)},this.domElement.addEventListener("mousedown",n,{passive:!1}),this.domElement.addEventListener("mousewheel",o,{passive:!1}),this.domElement.addEventListener("DOMMouseScroll",o,{passive:!1}),this.domElement.addEventListener("touchstart",c,{passive:!1}),this.domElement.addEventListener("touchend",u,{passive:!1}),this.domElement.addEventListener("touchmove",h,{passive:!1}),window.addEventListener("keyup",s,{passive:!1}),window.addEventListener("keydown",l,{passive:!1}),this.update()}function y(t,i){var n=this,r={type:"change"},a=0,o=0,s=0,l=0;this.camera=t,this.camera.rotation.reorder("YXZ"),this.domElement=void 0!==i?i:document,this.enabled=!0,this.deviceOrientation={},this.alphaOffsetAngle=this.alpha=this.screenOrientation=0;var c=function(t){n.deviceOrientation=t},h=function(){n.screenOrientation=window.orientation||0},u=function(t){t.preventDefault(),t.stopPropagation(),s=t.touches[0].pageX,l=t.touches[0].pageY},d=function(t){t.preventDefault(),t.stopPropagation(),a+=e.Math.degToRad((t.touches[0].pageX-s)/4),o+=e.Math.degToRad((l-t.touches[0].pageY)/4),n.updateAlphaOffsetAngle(a),s=t.touches[0].pageX,l=t.touches[0].pageY};this.connect=function(){h(),window.addEventListener("orientationchange",h,{passive:!0}),window.addEventListener("deviceorientation",c,{passive:!0}),window.addEventListener("deviceorientation",this.update.bind(this),{passive:!0}),n.domElement.addEventListener("touchstart",u,{passive:!1}),n.domElement.addEventListener("touchmove",d,{passive:!1}),n.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",h,!1),window.removeEventListener("deviceorientation",c,!1),window.removeEventListener("deviceorientation",this.update.bind(this),!1),n.domElement.removeEventListener("touchstart",u,!1),n.domElement.removeEventListener("touchmove",d,!1),n.enabled=!1},this.update=function(t){if(!1!==n.enabled){var i=n.deviceOrientation.alpha?e.Math.degToRad(n.deviceOrientation.alpha)+n.alphaOffsetAngle:0,a=n.deviceOrientation.beta?e.Math.degToRad(n.deviceOrientation.beta):0,s=n.deviceOrientation.gamma?e.Math.degToRad(n.deviceOrientation.gamma):0,l=n.screenOrientation?e.Math.degToRad(n.screenOrientation):0,c=n.camera.quaternion,h=new e.Vector3(0,0,1),u=new e.Euler,d=new e.Quaternion,p=new e.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),f=new e.Quaternion,m=new e.Quaternion;if(0==n.screenOrientation){var g=new e.Vector3(1,0,0);f.setFromAxisAngle(g,-o)}else 180==n.screenOrientation?(g=new e.Vector3(1,0,0),f.setFromAxisAngle(g,o)):90==n.screenOrientation?(g=new e.Vector3(0,1,0),f.setFromAxisAngle(g,o)):-90==n.screenOrientation&&(g=new e.Vector3(0,1,0),f.setFromAxisAngle(g,-o));p.multiply(f),p.multiply(m),u.set(a,i,-s,"YXZ"),c.setFromEuler(u),c.multiply(p),c.multiply(d.setFromAxisAngle(h,-l)),n.alpha=i,!0!==t&&n.dispatchEvent(r)}},this.updateAlphaOffsetAngle=function(t){this.alphaOffsetAngle=t,this.update()},this.dispose=function(){this.disconnect()},this.connect()}function _(t){var i=new e.OrthographicCamera(-1,1,1,-1,0,1),n=new e.Scene,r=new e.StereoCamera;r.aspect=.5;var a=new e.WebGLRenderTarget(512,512,{minFilter:e.LinearFilter,magFilter:e.NearestFilter,format:e.RGBAFormat});a.scissorTest=!0,a.texture.generateMipmaps=!1;var o=new e.Vector2(.441,.156),s=new e.PlaneBufferGeometry(1,1,10,20).removeAttribute("normal").toNonIndexed(),l=s.attributes.position.array,c=s.attributes.uv.array;s.attributes.position.count*=2,s.attributes.uv.count*=2;var h=new Float32Array(2*l.length);h.set(l),h.set(l,l.length);var u=new Float32Array(2*c.length);u.set(c),u.set(c,c.length),c=new e.Vector2,l=l.length/3;for(var d=0,p=h.length/3;d<p;d++){c.x=h[3*d],c.y=h[3*d+1];var f=c.dot(c);f=1.5+(o.x+o.y*f)*f;var m=d<l?0:1;h[3*d]=c.x/f*1.5-.5+m,h[3*d+1]=c.y/f*3,u[2*d]=.5*(u[2*d]+m)}s.attributes.position.array=h,s.attributes.uv.array=u,o=new e.MeshBasicMaterial({map:a.texture}),s=new e.Mesh(s,o),n.add(s),this.setSize=function(e,i){t.setSize(e,i);var n=t.getPixelRatio();a.setSize(e*n,i*n)},this.render=function(e,o){e.updateMatrixWorld(),null===o.parent&&o.updateMatrixWorld(),r.update(o),o=a.width/2;var s=a.height;t.autoClear&&t.clear(),a.scissor.set(0,0,o,s),a.viewport.set(0,0,o,s),t.setRenderTarget(a),t.render(e,r.cameraL),t.clearDepth(),a.scissor.set(o,0,o,s),a.viewport.set(o,0,o,s),t.setRenderTarget(a),t.render(e,r.cameraR),t.clearDepth(),t.setRenderTarget(null),t.render(n,i)}}function b(t){if((t=t||{}).controlBar=void 0===t.controlBar||t.controlBar,t.controlButtons=t.controlButtons||["fullscreen","setting","video"],t.autoHideControlBar=void 0!==t.autoHideControlBar&&t.autoHideControlBar,t.autoHideInfospot=void 0===t.autoHideInfospot||t.autoHideInfospot,t.horizontalView=void 0!==t.horizontalView&&t.horizontalView,t.clickTolerance=t.clickTolerance||10,t.cameraFov=t.cameraFov||60,t.reverseDragging=t.reverseDragging||!1,t.enableReticle=t.enableReticle||!1,t.dwellTime=t.dwellTime||1500,t.autoReticleSelect=void 0===t.autoReticleSelect||t.autoReticleSelect,t.viewIndicator=void 0!==t.viewIndicator&&t.viewIndicator,t.indicatorSize=t.indicatorSize||30,t.output=t.output?t.output:"none",t.autoRotate=t.autoRotate||!1,t.autoRotateSpeed=t.autoRotateSpeed||2,t.autoRotateActivationDuration=t.autoRotateActivationDuration||5e3,this.options=t,t.container){var i=t.container;i._width=i.clientWidth,i._height=i.clientHeight}else(i=document.createElement("div")).classList.add("panolens-container"),i.style.width="100%",i.style.height="100%",i._width=window.innerWidth,i._height=window.innerHeight,document.body.appendChild(i);this.container=i,this.camera=t.camera||new e.PerspectiveCamera(this.options.cameraFov,this.container.clientWidth/this.container.clientHeight,1,1e4),this.scene=t.scene||new e.Scene,this.renderer=t.renderer||new e.WebGLRenderer({alpha:!0,antialias:!1}),this.sceneReticle=new e.Scene,this.viewIndicatorSize=this.options.indicatorSize,this.reticle={},this.tempEnableReticle=this.options.enableReticle,this.mode=M.NORMAL,this.pressObject=this.pressEntityObject=this.infospot=this.hoverObject=this.widget=this.panorama=null,this.raycaster=new e.Raycaster,this.raycasterPoint=new e.Vector2,this.userMouse=new e.Vector2,this.updateCallbacks=[],this.requestAnimationId=null,this.cameraFrustum=new e.Frustum,this.cameraViewProjectionMatrix=new e.Matrix4,this.outputDivElement=this.autoRotateRequestId=null,this.touchSupported="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,this.HANDLER_MOUSE_DOWN=this.onMouseDown.bind(this),this.HANDLER_MOUSE_UP=this.onMouseUp.bind(this),this.HANDLER_MOUSE_MOVE=this.onMouseMove.bind(this),this.HANDLER_WINDOW_RESIZE=this.onWindowResize.bind(this),this.HANDLER_KEY_DOWN=this.onKeyDown.bind(this),this.HANDLER_KEY_UP=this.onKeyUp.bind(this),this.HANDLER_TAP=this.onTap.bind(this,{clientX:this.container.clientWidth/2,clientY:this.container.clientHeight/2}),this.OUTPUT_INFOSPOT=!1,this.tweenLeftAnimation=new L.Tween,this.tweenUpAnimation=new L.Tween,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,0),this.renderer.autoClear=!1,this.renderer.domElement.classList.add("panolens-canvas"),this.renderer.domElement.style.display="block",this.container.style.backgroundColor="#000",this.container.appendChild(this.renderer.domElement),this.OrbitControls=new v(this.camera,this.container),this.OrbitControls.id="orbit",this.OrbitControls.minDistance=1,this.OrbitControls.noPan=!0,this.OrbitControls.autoRotate=this.options.autoRotate,this.OrbitControls.autoRotateSpeed=this.options.autoRotateSpeed,this.DeviceOrientationControls=new y(this.camera,this.container),this.DeviceOrientationControls.id="device-orientation",this.DeviceOrientationControls.enabled=!1,this.camera.position.z=1,this.options.passiveRendering&&console.warn("passiveRendering is now deprecated"),this.controls=[this.OrbitControls,this.DeviceOrientationControls],this.control=this.OrbitControls,this.CardboardEffect=new _(this.renderer),this.CardboardEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.StereoEffect=new P(this.renderer),this.StereoEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.effect=this.CardboardEffect,this.addReticle(),this.options.horizontalView&&(this.OrbitControls.minPolarAngle=Math.PI/2,this.OrbitControls.maxPolarAngle=Math.PI/2),!1!==this.options.controlBar&&this.addDefaultControlBar(this.options.controlButtons),this.options.viewIndicator&&this.addViewIndicator(),this.options.reverseDragging&&this.reverseDraggingDirection(),this.options.enableReticle?this.enableReticleControl():this.registerMouseAndTouchEvents(),"overlay"===this.options.output&&this.addOutputElement(),this.registerEventListeners(),this.animate.call(this)}var x="^0.105.2".replace(/[^0-9.]/g,""),w={ORBIT:0,DEVICEORIENTATION:1},M={UNKNOWN:0,NORMAL:1,CARDBOARD:2,STEREO:3},E={Info:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADBklEQVR42u2bP08UQRiHnzFaSYCI/xoksdBIqGwIiYWRUBISExpCQ0ej38FWOmlIKKhoMPEbaCxsrrHiYrQgOSlQEaICrT+LHSPZzNzt3s3c3Hn7lHvLzvv82L2dm30XKioqKgYY062BJF0HpoA7wARwBbhsPz4DjoEG8AnYNcZ8Sx1Op8IXJM1KWpdUV3nq9m9nJV1I7VNGfEzSM0mNNqR9NOwxx1L7NRMflbQm6SSgeJ4TO8Zoat+8/LKkg4jieQ4kLaf2RtKwpJ0uiufZkTScSn5S0l5C+b/sSZrstvyMpKPU5uc4kjTTjkvpeYCkaeA1/+7hvcIZMGuMqUULQNIU8Aa4ltrWwyHwyBizGzwASSPAe+B2assW7AH3jTE/i+xcZoa12Qfy2Bo3i+5cKABl99zF1GYlWFTBeULLS0DZrOsDcDNggTXgc27bLWA64BhfgHvGmB8dHUXZ1DM0S45xliKMs9bKr+klIOkqsBrwv9JtVq1DewEAT4Ch1BYdMGQdygeg7Df4SmqDAKyoyXpCszPgITCeuvoAjFuX0gE8jljUdv7bCtiOOJ7XpdUZ8L/gdXHOA5QtYH5NXXVgbrgWWn1nwFTqaiPgdPIFcDd1tRFwOl307DwRuZgXwLvctgfA04hjOp18AcReZ6sZY16e3yDpUuQxnU6+S2AkcjEpcDr1zxOXSPgCKLSa0mc4nXwB/EpdbQScTr4AGqmrjYDTyRfAx9TVRsDp5Aug8LJyH+F0cgZg58z11BUHpO5ruGh2G3ybuuqAeF2aBfAqddUB8bq0OgP2U1cegH3aOQOMMb+BrdTVB2DLupQLwLIOnKY26IBT6+ClaQDGmO/ARmqLDtiwDn7HVkcY+EdjNoTlCI+tYhO2iUppm6HKslPUq2qQKHpUe8AFsjaUXuUQWCgqXyoAG8IuME/WkNRrnAHzZfqDSgdgQ6gBc2Td3b3CMTBXtkOsIzTIjZLnQhjcVtlcEIPZLJ0LoVvt8s/Va+3yuSAG84UJRxB98cpM9dJURUVFxSDzBxKde4Lk3/h2AAAAAElFTkSuQmCC",Arrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADPklEQVR42u2bMUscQRiG30/SRaJEI1ZKUiRErNIELRUbQYSAnX8hpVUgkDYp0wgWVjYW+QcJaQzYpLojJIXhtDDEKBpj65ti58ixmdmb2ZvZ7+T2AUHudmfmeXf2bnb3O6CmpqZmgJGqOiI5AWAWwEMA0wDuArht3r4CcAagBeAbgIaI/NQOp1fhIZKLJN+SbDKcptl3keSQtk+I+BjJVyRbJaRdtEybY9p+ReKjJN+QvIwonufS9DGq7ZuXXyd5nFA8zzHJdW1vkLxDcrdC8Ty7JO9oyc+QPFCUb3NAcqZq+TmSp9rmHZySnCvjErwOIPkUwHv8+w7vF64ALIrIfrIASM4C+ADgnratgxMACyLSiB4AyREAnwE80LbswgGAJyJy4bNxyApr6wbIw4xxy3djrwCYfeeuaZsFsEbPdULXU4DZqusLgMkEA21P05EEbf8A8FhEzos28pkBLxLKL5s/r/M1kEkz9vKQHGeatf05yfmOfubNa7G5JDle5NhtBjwHMBz5yFwAWBaRT+0XzP8pZsKwcQiH2fX8Ycojb+kzxUw4ZJn7CSQXqpRPHMKCq7+iZJ71Mvdy/DftXSQ6HcJdSDaqPPKW/mPOBO+lcbvzCU35RCFM2PpwnQKzZQfdgfe0dxH5dLA6uQJ4pC2fIASrkyuA6X6QjxyC1ckVQNn7bNHlI4ZgdXIFUObiJJl8pBCsTjGfuIwA2Cv4FN7xbYjkjqsRAHuIePXoCiDF1Zk2VidXAL+1R5sAq5MrgJb2aBNgdXIF8FV7tAmwOrkCCFs73wysTtYATHFCU3vEEWm6Ci6KvgY/ao86Ik6XogDeaY86Ik6XbjPgSHvkEThCwQy45XpDRK5JbgN4GWkgUyR9H65MRQxgW0SunZ5FezK7pfwd8e8MV8UfAPdF5Jdrg8JrAbPjprZFD2wWyQP6j8ZSEufRmGlgQ9umBBvd5IOgbjFUKLu+XnWBhG+rpsFVZGUo/coJgFVf+aAATAgNACvICpL6jSsAKyH1QcEBmBD2ASwhq+7uF84ALIVWiPUEB7lQsiOEwS2VzQUxmMXSuRCqKpd/zX4rl88FMZg/mLAEcSN+MlP/aKqmpqZmkPkL0hSjwOpNKxwAAAAASUVORK5CYII=",FullscreenEnter:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=",FullscreenLeave:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=",VideoPlay:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==",VideoPause:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==",WhiteTile:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAACRQTFRFAAAAAAAABgYGBwcHHh4eKysrx8fHy8vLzMzM7OzsAAAABgYG+q7SZgAAAAp0Uk5TAP7+/v7+/v7+/iJx/a8AAAOwSURBVHja7d0hbsNAEAVQo6SFI6XEcALDcgNLvUBvEBQVhpkWVYWlhSsVFS7t5QIshRt695lEASZP+8c7a1kzDL1fz+/zyuvzp6FbvoddrL6uDd1yGZ5eXldeb18N3fIx7A+58prmhm65DfvDcd0952lu6JabFbD/zVprZj1lzcys+fj9z8xTZtbT8rv8yWlu6BYAIgAAAAAAAAAAAABAM6QXEAEAAAAAAAAAgJ2gnaAIiIA3Q2qAGgAAAAAAAAAAAAAAAAAAAAAAAAAAQJsADkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBVlfAcZ3aeZobusUKMGBhV6KUElHGKBERJR6/fxExRkQZl9/lT8S1oVsuhqyYMmPKjCkzvfcCpsxohrwY0Q06EAEAAAAAAAAAAACgGdILiAAAAAAAAAAAwE7QTlAERMCbITVADQAAAAAAAAAAAAAAAAAAAAAAAAAAwKmwQ1ERAAAAAACPQY9BERABERABERABERABERABAAAAAAAAAICdoJ2gCIiAT2bUADVADRABEQAAQBFUBEVABERgEyvAlJm+V4ApM6bMmDJjyowpM6bMdN0LmDKjGfJiRDfoQAQAAAAAAAAAAACAZkgvIAIAAAAAAAAAADtBO0EREAFvhtQANQAAAAAAAAAAAAAAAAAAAAAAAAAAAKfCDkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBTawAU2b6XgGmzJgyY8qMKTOmzJgy03UvYMqMZsiLEd2gAxEAAAAAAAAAAAAAmiG9gAgAAAAAAAAAAOwE7QRFQAS8GVID1AAAAAAAAAAAAAAAAAAAAAAAAAAAAJwKOxQVAQAAAADwGPQYFAEREAEREAEREAEREAERAAAAAAAAAADYCdoJioAI+GRGDVAD1AAREAEAABRBRVAEREAENrECTJnpewWYMmPKjCkzpsyYMmPKTNe9gCkzmiEvRnSDDkQAAAAAAAAAAAAAaIb0AiIAAAAAAAAAALATtBMUARHwZkgNUAMAAAAAAAAAAAAAAAAAAAAAAAAAAHAq7FBUBAAAAADAY9BjUAREQAREQAREQAREQAREAAAAAAAAAABgJ2gnKAIi4JMZNUANUANEQAQAAFAEFUEREAER2MQKMGWm7xVgyowpM50PWen9ugNGXz1XaocAFgAAAABJRU5ErkJggg==",Setting:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADn0lEQVR42u2bzUsVURjGnyO6CPzAMnTjppAo3LTwH1CqTfaxbeOiRS37A0wXtROFVi1aRBs3LWohSIGbQAQXViBGRhG0UIRKUCpK7q/FnOB2uc6cOXNmRnGe3eW+H8/7zLln3vNxpQoVKlQ4wjBFJAFOSRqX1O7osivpvjHmU1nChBZglvSYLYJbS0EanCvIJzWK+gnsyH34/8OuMaYjb265jwCgz6N4SWq3vodbAEmnS/KtBDgoAgyU5BteAOAkMAPcBroc7PskDWfgN+wyDwBdltMMcDI3tYBnde/pHeARMNTErgd4APzweP834oeN1dMkz5DlsFNn/yyv4kdiSK4At4AO4CqwGaDwRmza2B0210qM7YhrXU59ANAq6bWkwQTTn5KO5fIE0uVYlXTeGLOXFMx1DrjlULwKKN41x6DlnIjEEQCckPRe0okCiguJr5LOGGO+xhm5jICJQ1i8LOeJJKPYEQAMKvrtt5ZdjSf2FM0Fq/sZJI2A6UNcvCz36TiDfUcAcE1SPu/U6Mm8k/TFfu6XdFb5iX3dGPM8lQfwNod3+TowBnQ3yddtv1vPIe+b1JIBiwEJ1IAJ208k5W21trWA+V/5CHAcmAtU/A2P/DcCiTAHHE8tgCVhgLvAXgYCk17Jo/yTGfLuWe7Zd72AC8CWB4n3OAz7mLytNkZabAEXMhfeQKYfWEpJZCxA3rGUOZeA/qDF15FpAz47EvlNk9neI2e3jeWCz0BbmvipNkSMMX8kuSZYM8Z8zyqAjbHmaN5mOeYjgIXrU93MWrxHrNQjrqiDkQMLHwG+OdqF3NN3jeXKzU8AoF1SzdH8XKhJUO7HZDXLMbwAwICkJUULFxe0SbqSVQAbw3Xi7Ze0ZLmGAzAKbHs0JGU1QtvAaIjCW4B7ZOvJy2qFa5a730RPtBiaz0CgnkiZi6F5fBZDVMvho7EhcuS3xJJ2hV9IupgTqaLw0hhzab8vq23xOG/r+LDsKjLgYVzxUnU0ltwK2wDezUyJmEwqXgp/PL4rvxthaeCSI+zxuA10J8ZkWdJNSb2SLkvayKHwDRu71+ZajrG941J8agALDQ3GU/a/IvMkYCPzmCbtLNEVmacNtgs5iP9fYVNEV1Q6Hez7yNZSL+J2SarTcpqiyV2iUkG0IvPFvbz5FbEn+KEk3wMjwMeSfCsBXFBdly9CAPk9ydyffpECuB5tZfVJjaKWueOSfinln6YK4lahQoUKRxd/AcRPGTcQCAUQAAAAAElFTkSuQmCC",ChevronRight:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTguNTksMTYuNThMMTMuMTcsMTJMOC41OSw3LjQxTDEwLDZMMTYsMTJMMTAsMThMOC41OSwxNi41OFoiIC8+PC9zdmc+",Check:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTIxLDdMOSwxOUwzLjUsMTMuNUw0LjkxLDEyLjA5TDksMTYuMTdMMTkuNTksNS41OUwyMSw3WiIgLz48L3N2Zz4=",ViewIndicator:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0idmlldy1pbmRpY2F0b3IiIGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgdmlld0JveD0iLTIuNSAtMSAzMCAzMCI+Cgk8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7ZmlsbDpub25lO30uc3Qxe3N0cm9rZS13aWR0aDo2O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCTwvc3R5bGU+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNIDEyLjUgMCBBIDEyLjUgMTIuNSAwIDAgMCAtMTIuNSAwIEEgMTIuNSAxMi41IDAgMCAwIDEyLjUgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0gMTMgMCBMIDEwIDIgTCAxNiAyIFoiPjwvcGF0aD4KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNIDIgMCBBIDIgMiAwIDAgMCAtMiAwIEEgMiAyIDAgMCAwIDIgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGlkPSJpbmRpY2F0b3IiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMTMsMTUuNSkiPjwvcGF0aD4KCTwvZz4KPC9zdmc+"},T={load:function(t,i,n,r){var a,o,s,l;for(l in i=void 0===i?function(){}:i,n=void 0===n?function(){}:n,r=void 0===r?function(){}:r,e.Cache.enabled=!0,E)E.hasOwnProperty(l)&&t===E[l]&&(a=l);var c=e.Cache.get(a||t);if(void 0!==c)return i&&setTimeout((function(){n({loaded:1,total:1}),i(c)}),0),c;var h=window.URL||window.webkitURL,u=document.createElementNS("http://www.w3.org/1999/xhtml","img");e.Cache.add(a||t,u);var d=function(){h.revokeObjectURL(u.src),i(u)};if(0===t.indexOf("data:"))return u.addEventListener("load",d,!1),u.src=t,u;u.crossOrigin=void 0!==this.crossOrigin?this.crossOrigin:"",(a=new window.XMLHttpRequest).open("GET",t,!0),a.responseType="arraybuffer",a.addEventListener("error",r),a.addEventListener("progress",(function(t){if(t){var e=t.loaded,i=t.total;t.lengthComputable&&n({loaded:e,total:i})}})),a.addEventListener("loadend",(function(t){t&&(o=new Uint8Array(t.currentTarget.response),s=new window.Blob([o]),u.addEventListener("load",d,!1),u.src=h.createObjectURL(s))})),a.send(null)}},S={load:function(t,i,n,r){i=void 0===i?function(){}:i;var a=new e.Texture;return T.load(t,(function(n){a.image=n,n=0<t.search(/\.(jpg|jpeg)$/)||0===t.search(/^data:image\/jpeg/),a.format=n?e.RGBFormat:e.RGBAFormat,a.needsUpdate=!0,i(a)}),n,r),a}},A={load:function(t,i,n,r){var a;i=void 0===i?function(){}:i,n=void 0===n?function(){}:n;var o=new e.CubeTexture([]),s=0,l={},c={};return t.map((function(t,e){T.load(t,(function(t){o.images[e]=t,6===++s&&(o.needsUpdate=!0,i(o))}),(function(t){for(var i in l[e]={loaded:t.loaded,total:t.total},c.loaded=0,a=c.total=0,l)a++,c.loaded+=l[i].loaded,c.total+=l[i].total;6>a&&(c.total=c.total/a*6),n(c)}),r)})),o}};i.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{setContainer:function(t){this.container=t},setScene:function(t){this.scene=t},enumerateDevices:function(){var t=this.devices,e=new Promise((function(e){e(t)}));return 0<t.length?e:window.navigator.mediaDevices.enumerateDevices()},switchNextVideoDevice:function(){var t=this.stop.bind(this),e=this.start.bind(this),i=this.setVideDeviceIndex.bind(this),n=this.videoDeviceIndex;this.getDevices("video").then((function(r){t(),++n>=r.length?(i(0),n--):i(n),e(r[n])}))},getDevices:function(t){t=void 0===t?"video":t;var e=this.devices;return this.enumerateDevices().then((function(t){return t.map((function(t){return e.includes(t)||e.push(t),t}))})).then((function(e){var i=new RegExp(t,"i");return e.filter((function(t){return i.test(t.kind)}))}))},getUserMedia:function(t){var e=this.setMediaStream.bind(this),i=this.playVideo.bind(this);return window.navigator.mediaDevices.getUserMedia(t).then(e).then(i).catch((function(t){console.warn("PANOLENS.Media: "+t)}))},setVideDeviceIndex:function(t){this.videoDeviceIndex=t},start:function(t){var e=this.constraints,i=this.getUserMedia.bind(this);return this.element=this.createVideoElement(),this.getDevices().then((function(n){if(!n||0===n.length)throw Error("no video device found");return e.video.deviceId=(t||n[0]).deviceId,i(e)}))},stop:function(){var t=this.stream;t&&t.active&&(t.getTracks()[0].stop(),window.removeEventListener("resize",this.onWindowResize.bind(this)),this.stream=this.element=null)},setMediaStream:function(t){this.stream=t,this.element.srcObject=t,this.scene&&(this.scene.background=this.createVideoTexture()),window.addEventListener("resize",this.onWindowResize.bind(this))},playVideo:function(){var t=this.element;t&&(t.play(),this.dispatchEvent({type:"play"}))},pauseVideo:function(){var t=this.element;t&&(t.pause(),this.dispatchEvent({type:"pause"}))},createVideoTexture:function(){var t=this.element,i=new e.VideoTexture(t);return i.generateMipmaps=!1,i.minFilter=e.LinearFilter,i.magFilter=e.LinearFilter,i.format=e.RGBFormat,i.center.set(.5,.5),t.addEventListener("canplay",this.onWindowResize.bind(this)),i},createVideoElement:function(){var t=this.dispatchEvent.bind(this),e=document.createElement("video");return e.setAttribute("autoplay",""),e.setAttribute("muted",""),e.setAttribute("playsinline",""),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.objectPosition="center",e.style.objectFit="cover",e.style.display=this.scene?"none":"",e.addEventListener("canplay",(function(){return t({type:"canplay"})})),e},onWindowResize:function(){if(this.element&&this.element.videoWidth&&this.element.videoHeight&&this.scene){var t=this.container,e=t.clientWidth;t=t.clientHeight;var i=this.scene.background,n=this.element;n=n.videoHeight/n.videoWidth*(this.container?e/t:1)*this.ratioScalar,e>t?i.repeat.set(n,1):i.repeat.set(1,1/n)}}}),n.prototype=Object.assign(Object.create(e.Sprite.prototype),{constructor:n,setColor:function(t){this.material.color.copy(t instanceof e.Color?t:new e.Color(t))},createCanvasTexture:function(t){return(t=new e.CanvasTexture(t)).minFilter=e.LinearFilter,t.magFilter=e.LinearFilter,t.generateMipmaps=!1,t},createCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d"),i=this.dpr;return t.width=32*i,t.height=32*i,e.scale(i,i),e.shadowBlur=5,e.shadowColor="rgba(200,200,200,0.9)",{canvas:t,context:e}},updateCanvasArcByProgress:function(t){var e=this.context,i=this.canvasWidth,n=this.canvasHeight,r=this.material,a=this.dpr,o=t*Math.PI*2,s=this.color.getStyle(),l=.5*i/a;a=.5*n/a,e.clearRect(0,0,i,n),e.beginPath(),0===t?(e.arc(l,a,i/16,0,2*Math.PI),e.fillStyle=s,e.fill()):(e.arc(l,a,i/4-3,-Math.PI/2,-Math.PI/2+o),e.strokeStyle=s,e.lineWidth=3,e.stroke()),e.closePath(),r.map.needsUpdate=!0},ripple:function(){var t=this,e=this.context,i=this.canvasWidth,n=this.canvasHeight,r=this.material,a=this.rippleDuration,o=performance.now(),s=this.color,l=this.dpr,c=.5*i/l,h=.5*n/l,u=function(){var d=window.requestAnimationFrame(u),p=(performance.now()-o)/a,f=0<1-p?1-p:0,m=p*i*.5/l;e.clearRect(0,0,i,n),e.beginPath(),e.arc(c,h,m,0,2*Math.PI),e.fillStyle="rgba("+255*s.r+", "+255*s.g+", "+255*s.b+", "+f+")",e.fill(),e.closePath(),1<=p&&(window.cancelAnimationFrame(d),t.updateCanvasArcByProgress(0),t.dispatchEvent({type:"reticle-ripple-end"})),r.map.needsUpdate=!0};this.dispatchEvent({type:"reticle-ripple-start"}),u()},show:function(){this.visible=!0},hide:function(){this.visible=!1},start:function(t){this.autoSelect&&(this.dispatchEvent({type:"reticle-start"}),this.startTimestamp=performance.now(),this.callback=t,this.update())},end:function(){this.startTimestamp&&(window.cancelAnimationFrame(this.timerId),this.updateCanvasArcByProgress(0),this.startTimestamp=this.timerId=this.callback=null,this.dispatchEvent({type:"reticle-end"}))},update:function(){this.timerId=window.requestAnimationFrame(this.update.bind(this));var t=(performance.now()-this.startTimestamp)/this.dwellTime;this.updateCanvasArcByProgress(t),this.dispatchEvent({type:"reticle-update",progress:t}),1<=t&&(window.cancelAnimationFrame(this.timerId),this.callback&&this.callback(),this.end(),this.ripple())}});var C,L=(function(t,e){(e=function(){this._tweens={},this._tweensAddedDuringUpdate={}}).prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:i.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var a=this._tweens[n[r]];a&&!1===a.update(t)&&(a._isPlaying=!1,e||delete this._tweens[n[r]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var i=new e;i.Group=e,i._nextId=0,i.nextId=function(){return i._nextId++},i.now="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},i.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._reversed=this._isPlaying=this._yoyo=!1,this._delayTime=0,this._startTime=null,this._easingFunction=i.Easing.Linear.None,this._interpolationFunction=i.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onStopCallback=this._onCompleteCallback=this._onRepeatCallback=this._onUpdateCallback=null,this._group=e||i,this._id=i.nextId()},i.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?i.now()+parseFloat(t):t:i.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],0==this._valuesStart[e]instanceof Array&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e;if(t<this._startTime)return!0;!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0);var i=(t-this._startTime)/this._duration;i=0===this._duration||1<i?1:i;var n=this._easingFunction(i);for(e in this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,a=this._valuesEnd[e];a instanceof Array?this._object[e]=this._interpolationFunction(a,n):("string"==typeof a&&(a="+"===a.charAt(0)||"-"===a.charAt(0)?r+parseFloat(a):parseFloat(a)),"number"==typeof a&&(this._object[e]=r+(a-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(!(0<this._repeat)){for(null!==this._onCompleteCallback&&this._onCompleteCallback(this._object),t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].start(this._startTime+this._duration);return!1}for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)"string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]+=parseFloat(this._valuesEnd[e])),this._yoyo&&(i=this._valuesStartRepeat[e],this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=i),this._valuesStart[e]=this._valuesStartRepeat[e];this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0!==this._repeatDelayTime?t+this._repeatDelayTime:t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object)}return!0}},i.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return 1>(t*=2)?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return 1>(t*=2)?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:1>(t*=2)?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:1>(t*=2)?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){return 1>(t*=2)?.5*t*t*(3.5949095*t-2.5949095):.5*((t-=2)*t*(3.5949095*t+2.5949095)+2)}},Bounce:{In:function(t){return 1-i.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*i.Easing.Bounce.In(2*t):.5*i.Easing.Bounce.Out(2*t-1)+.5}}},i.Interpolation={Linear:function(t,e){var n=t.length-1,r=n*e,a=Math.floor(r),o=i.Interpolation.Utils.Linear;return 0>e?o(t[0],t[1],r):1<e?o(t[n],t[n-1],n-r):o(t[a],t[a+1>n?n:a+1],r-a)},Bezier:function(t,e){for(var n=0,r=t.length-1,a=Math.pow,o=i.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=a(1-e,r-s)*a(e,s)*t[s]*o(r,s);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,a=Math.floor(r),o=i.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(0>e&&(a=Math.floor(r=n*(1+e))),o(t[(a-1+n)%n],t[a],t[(a+1)%n],t[(a+2)%n],r-a)):0>e?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):1<e?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[a?a-1:0],t[a],t[n<a+1?n:a+1],t[n<a+2?n:a+2],r-a)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var n=i.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var i=1;if(t[e])return t[e];for(var n=e;1<n;n--)i*=n;return t[e]=i}}(),CatmullRom:function(t,e,i,n,r){var a=r*r;return(2*e-2*i+(t=.5*(i-t))+(n=.5*(n-e)))*r*a+(-3*e+3*i-2*t-n)*a+t*r+e}}},t.exports=i}(C={exports:{}},C.exports),C.exports);r.prototype=Object.assign(Object.create(e.Sprite.prototype),{constructor:r,setContainer:function(t){if(t instanceof HTMLElement)var e=t;else t&&t.container&&(e=t.container);e&&this.element&&e.appendChild(this.element),this.container=e},getContainer:function(){return this.container},onClick:function(t){this.element&&this.getContainer()&&(this.onHoverStart(t),this.lockHoverElement())},onDismiss:function(){this.element&&(this.unlockHoverElement(),this.onHoverEnd())},onHover:function(){},onHoverStart:function(t){if(this.getContainer()){var e=this.cursorStyle||(this.mode===M.NORMAL?"pointer":"default"),i=this.scaleDownAnimation,n=this.scaleUpAnimation,r=this.element;this.isHovering=!0,this.container.style.cursor=e,this.animated&&(i.stop(),n.start()),r&&0<=t.mouseEvent.clientX&&0<=t.mouseEvent.clientY&&(t=r.left,e=r.right,i=r.style,this.mode===M.CARDBOARD||this.mode===M.STEREO?(i.display="none",t.style.display="block",e.style.display="block",r._width=t.clientWidth,r._height=t.clientHeight):(i.display="block",t&&(t.style.display="none"),e&&(e.style.display="none"),r._width=r.clientWidth,r._height=r.clientHeight))}},onHoverEnd:function(){if(this.getContainer()){var t=this.scaleDownAnimation,e=this.scaleUpAnimation,i=this.element;this.isHovering=!1,this.container.style.cursor="default",this.animated&&(e.stop(),t.start()),i&&!this.element.locked&&(t=i.left,e=i.right,i.style.display="none",t&&(t.style.display="none"),e&&(e.style.display="none"),this.unlockHoverElement())}},onDualEyeEffect:function(t){if(this.getContainer()){this.mode=t.mode,t=this.element;var e=this.container.clientWidth/2,i=this.container.clientHeight/2;t&&(t.left||t.right||(t.left=t.cloneNode(!0),t.right=t.cloneNode(!0)),this.mode===M.CARDBOARD||this.mode===M.STEREO?(t.left.style.display=t.style.display,t.right.style.display=t.style.display,t.style.display="none"):(t.style.display=t.left.style.display,t.left.style.display="none",t.right.style.display="none"),this.translateElement(e,i),this.container.appendChild(t.left),this.container.appendChild(t.right))}},translateElement:function(t,e){if(this.element._width&&this.element._height&&this.getContainer()){var i=this.container,n=this.element,r=n._width/2,a=n._height/2,o=void 0!==n.verticalDelta?n.verticalDelta:40,s=t-r,l=e-a-o;this.mode!==M.CARDBOARD&&this.mode!==M.STEREO||!n.left||!n.right||t===i.clientWidth/2&&e===i.clientHeight/2?this.setElementStyle("transform",n,"translate("+s+"px, "+l+"px)"):(s=i.clientWidth/4-r+(t-i.clientWidth/2),l=i.clientHeight/2-a-o+(e-i.clientHeight/2),this.setElementStyle("transform",n.left,"translate("+s+"px, "+l+"px)"),s+=i.clientWidth/2,this.setElementStyle("transform",n.right,"translate("+s+"px, "+l+"px)"))}},setElementStyle:function(t,e,i){e=e.style,"transform"===t&&(e.webkitTransform=e.msTransform=e.transform=i)},setText:function(t){this.element&&(this.element.textContent=t)},setCursorHoverStyle:function(t){this.cursorStyle=t},addHoverText:function(t,e){e=void 0===e?40:e,this.element||(this.element=document.createElement("div"),this.element.style.display="none",this.element.style.color="#fff",this.element.style.top=0,this.element.style.maxWidth="50%",this.element.style.maxHeight="50%",this.element.style.textShadow="0 0 3px #000000",this.element.style.fontFamily='"Trebuchet MS", Helvetica, sans-serif',this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e),this.setText(t)},addHoverElement:function(t,e){e=void 0===e?40:e,this.element||(this.element=t.cloneNode(!0),this.element.style.display="none",this.element.style.top=0,this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e)},removeHoverElement:function(){this.element&&(this.element.left&&(this.container.removeChild(this.element.left),this.element.left=null),this.element.right&&(this.container.removeChild(this.element.right),this.element.right=null),this.container.removeChild(this.element),this.element=null)},lockHoverElement:function(){this.element&&(this.element.locked=!0)},unlockHoverElement:function(){this.element&&(this.element.locked=!1)},enableRaycast:function(t){this.raycast=void 0===t||t?this.originalRaycast:function(){}},show:function(t){t=void 0===t?0:t;var e=this.hideAnimation,i=this.showAnimation,n=this.material;this.animated?(e.stop(),i.delay(t).start()):(this.enableRaycast(!0),n.opacity=1)},hide:function(t){t=void 0===t?0:t;var e=this.hideAnimation,i=this.showAnimation,n=this.material;this.animated?(i.stop(),e.delay(t).start()):(this.enableRaycast(!1),n.opacity=0)},setFocusMethod:function(t){t&&(this.HANDLER_FOCUS=t.method)},focus:function(t,e){this.HANDLER_FOCUS&&(this.HANDLER_FOCUS(this.position,t,e),this.onDismiss())},dispose:function(){var t=this.geometry,e=this.material,i=e.map;this.removeHoverElement(),this.parent&&this.parent.remove(this),i&&(i.dispose(),e.map=null),t&&(t.dispose(),this.geometry=null),e&&(e.dispose(),this.material=null)}}),a.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:a,addControlBar:function(){if(this.container){var t,e,i=this,n=document.createElement("div");n.style.width="100%",n.style.height="44px",n.style.float="left",n.style.transform=n.style.webkitTransform=n.style.msTransform="translateY(-100%)",n.style.background="-webkit-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",n.style.background="-moz-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",n.style.background="-o-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",n.style.background="-ms-linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",n.style.background="linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",n.style.transition=this.DEFAULT_TRANSITION,n.style.pointerEvents="none",n.isHidden=!1,n.toggle=function(){n.isHidden=!n.isHidden,t=n.isHidden?"translateY(0)":"translateY(-100%)",e=n.isHidden?0:1,n.style.transform=n.style.webkitTransform=n.style.msTransform=t,n.style.opacity=e};var r=this.createDefaultMenu();this.mainMenu=this.createMainMenu(r),n.appendChild(this.mainMenu),this.mask=r=this.createMask(),this.container.appendChild(r),n.dispose=function(){i.fullscreenElement&&(n.removeChild(i.fullscreenElement),i.fullscreenElement.dispose(),i.fullscreenElement=null),i.settingElement&&(n.removeChild(i.settingElement),i.settingElement.dispose(),i.settingElement=null),i.videoElement&&(n.removeChild(i.videoElement),i.videoElement.dispose(),i.videoElement=null)},this.container.appendChild(n),this.mask.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener(i.TOUCH_ENABLED?"touchend":"click",(function(t){t.preventDefault(),t.stopPropagation(),i.mask.hide(),i.settingElement.deactivate()}),!1),this.addEventListener("control-bar-toggle",n.toggle),this.barElement=n}else console.warn("Widget container not set")},createDefaultMenu:function(){var t=this,e=function(e,i){return function(){t.dispatchEvent({type:"panolens-viewer-handler",method:e,data:i})}};return[{title:"Control",subMenu:[{title:this.TOUCH_ENABLED?"Touch":"Mouse",handler:e("enableControl",w.ORBIT)},{title:"Sensor",handler:e("enableControl",w.DEVICEORIENTATION)}]},{title:"Mode",subMenu:[{title:"Normal",handler:e("disableEffect")},{title:"Cardboard",handler:e("enableEffect",M.CARDBOARD)},{title:"Stereoscopic",handler:e("enableEffect",M.STEREO)}]}]},addControlButton:function(t){switch(t){case"fullscreen":this.fullscreenElement=t=this.createFullscreenButton();break;case"setting":this.settingElement=t=this.createSettingButton();break;case"video":this.videoElement=t=this.createVideoControl();break;default:return}t&&this.barElement.appendChild(t)},createMask:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.background="transparent",t.style.display="none",t.show=function(){this.style.display="block"},t.hide=function(){this.style.display="none"},t},createSettingButton:function(){var t=this,e=this.createCustomItem({style:{backgroundImage:'url("'+E.Setting+'")',webkitTransition:this.DEFAULT_TRANSITION,transition:this.DEFAULT_TRANSITION},onTap:function(e){e.preventDefault(),e.stopPropagation(),t.mainMenu.toggle(),this.activated?this.deactivate():this.activate()}});return e.activate=function(){this.style.transform="rotate3d(0,0,1,90deg)",this.activated=!0,t.mask.show()},e.deactivate=function(){this.style.transform="rotate3d(0,0,0,0)",this.activated=!1,t.mask.hide(),t.mainMenu&&t.mainMenu.visible&&t.mainMenu.hide(),t.activeSubMenu&&t.activeSubMenu.visible&&t.activeSubMenu.hide(),t.mainMenu&&t.mainMenu._width&&(t.mainMenu.changeSize(t.mainMenu._width),t.mainMenu.unslideAll())},e.activated=!1,e},createFullscreenButton:function(){function t(){n&&(i=!i,a.style.backgroundImage=i?'url("'+E.FullscreenLeave+'")':'url("'+E.FullscreenEnter+'")'),e.dispatchEvent({type:"panolens-viewer-handler",method:"onWindowResize"}),n=!0}var e=this,i=!1,n=!0,r=this.container;if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){document.addEventListener("fullscreenchange",t,!1),document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),document.addEventListener("MSFullscreenChange",t,!1);var a=this.createCustomItem({style:{backgroundImage:'url("'+E.FullscreenEnter+'")'},onTap:function(t){t.preventDefault(),t.stopPropagation(),n=!1,i?(document.exitFullscreen&&document.exitFullscreen(),document.msExitFullscreen&&document.msExitFullscreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen(),document.webkitExitFullscreen&&document.webkitExitFullscreen(),i=!1):(r.requestFullscreen&&r.requestFullscreen(),r.msRequestFullscreen&&r.msRequestFullscreen(),r.mozRequestFullScreen&&r.mozRequestFullScreen(),r.webkitRequestFullscreen&&r.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),i=!0),this.style.backgroundImage=i?'url("'+E.FullscreenLeave+'")':'url("'+E.FullscreenEnter+'")'}});if(!document.querySelector("panolens-style-addon")){var o=document.createElement("style");o.id="panolens-style-addon",o.innerHTML=":-webkit-full-screen { width: 100% !important; height: 100% !important }",document.body.appendChild(o)}return a}},createVideoControl:function(){var t=document.createElement("span");return t.style.display="none",t.show=function(){t.style.display=""},t.hide=function(){t.style.display="none",t.controlButton.paused=!0,t.controlButton.update()},t.controlButton=this.createVideoControlButton(),t.seekBar=this.createVideoControlSeekbar(),t.appendChild(t.controlButton),t.appendChild(t.seekBar),t.dispose=function(){t.removeChild(t.controlButton),t.removeChild(t.seekBar),t.controlButton.dispose(),t.controlButton=null,t.seekBar.dispose(),t.seekBar=null},this.addEventListener("video-control-show",t.show),this.addEventListener("video-control-hide",t.hide),t},createVideoControlButton:function(){var t=this,e=this.createCustomItem({style:{float:"left",backgroundImage:'url("'+E.VideoPlay+'")'},onTap:function(i){i.preventDefault(),i.stopPropagation(),t.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVideoPlay",data:!this.paused}),this.paused=!this.paused,e.update()}});return e.paused=!0,e.update=function(t){this.paused=void 0!==t?t:this.paused,this.style.backgroundImage='url("'+(this.paused?E.VideoPlay:E.VideoPause)+'")'},e},createVideoControlSeekbar:function(){function t(t){t.stopPropagation(),l=!0,r=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,a=parseInt(c.style.width)/100,s.container.addEventListener("mousemove",e,{passive:!0}),s.container.addEventListener("mouseup",i,{passive:!0}),s.container.addEventListener("touchmove",e,{passive:!0}),s.container.addEventListener("touchend",i,{passive:!0})}function e(t){l&&(o=((t.clientX||t.changedTouches&&t.changedTouches[0].clientX)-r)/u.clientWidth,o=1<(o=a+o)?1:0>o?0:o,u.setProgress(o),s.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:o}))}function i(t){t.stopPropagation(),l=!1,n()}function n(){s.container.removeEventListener("mousemove",e,!1),s.container.removeEventListener("mouseup",i,!1),s.container.removeEventListener("touchmove",e,!1),s.container.removeEventListener("touchend",i,!1)}var r,a,o,s=this,l=!1,c=document.createElement("div");c.style.width="0%",c.style.height="100%",c.style.backgroundColor="#fff";var h=document.createElement("div");h.style.float="right",h.style.width="14px",h.style.height="14px",h.style.transform="translate(7px, -5px)",h.style.borderRadius="50%",h.style.backgroundColor="#ddd",h.addEventListener("mousedown",t,{passive:!0}),h.addEventListener("touchstart",t,{passive:!0}),c.appendChild(h);var u=this.createCustomItem({style:{float:"left",width:"30%",height:"4px",marginTop:"20px",backgroundColor:"rgba(188,188,188,0.8)"},onTap:function(t){if(t.preventDefault(),t.stopPropagation(),t.target!==h){var e=t.changedTouches&&0<t.changedTouches.length?(t.changedTouches[0].pageX-t.target.getBoundingClientRect().left)/this.clientWidth:t.offsetX/this.clientWidth;s.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:e}),u.setProgress(t.offsetX/this.clientWidth)}},onDispose:function(){n(),h=c=null}});return u.appendChild(c),u.setProgress=function(t){c.style.width=100*t+"%"},this.addEventListener("video-update",(function(t){u.setProgress(t.percentage)})),u.progressElement=c,u.progressElementControl=h,u},createMenuItem:function(t){var e=this,i=document.createElement("a");return i.textContent=t,i.style.display="block",i.style.padding="10px",i.style.textDecoration="none",i.style.cursor="pointer",i.style.pointerEvents="auto",i.style.transition=this.DEFAULT_TRANSITION,i.slide=function(t){this.style.transform="translateX("+(t?"":"-")+"100%)"},i.unslide=function(){this.style.transform="translateX(0)"},i.setIcon=function(t){this.icon&&(this.icon.style.backgroundImage="url("+t+")")},i.setSelectionTitle=function(t){this.selection&&(this.selection.textContent=t)},i.addSelection=function(t){var e=document.createElement("span");return e.style.fontSize="13px",e.style.fontWeight="300",e.style.float="right",this.selection=e,this.setSelectionTitle(t),this.appendChild(e),this},i.addIcon=function(t,e,i){t=void 0===t?E.ChevronRight:t,e=void 0!==e&&e,i=void 0!==i&&i;var n=document.createElement("span");return n.style.float=e?"left":"right",n.style.width="17px",n.style.height="17px",n.style["margin"+(e?"Right":"Left")]="12px",n.style.backgroundSize="cover",i&&(n.style.transform="rotateZ(180deg)"),this.icon=n,this.setIcon(t),this.appendChild(n),this},i.addSubMenu=function(t,i){return this.subMenu=e.createSubMenu(t,i),this},i.addEventListener("mouseenter",(function(){this.style.backgroundColor="#e0e0e0"}),!1),i.addEventListener("mouseleave",(function(){this.style.backgroundColor="#fafafa"}),!1),i},createMenuItemHeader:function(t){return(t=this.createMenuItem(t)).style.borderBottom="1px solid #333",t.style.paddingBottom="15px",t},createMainMenu:function(t){function e(t){t.preventDefault(),t.stopPropagation();var e=i.mainMenu,n=this.subMenu;e.hide(),e.slideAll(),e.parentElement.appendChild(n),i.activeMainItem=this,i.activeSubMenu=n,window.requestAnimationFrame((function(){e.changeSize(n.clientWidth),n.show(),n.unslideAll()}))}var i=this,n=this.createMenu();n._width=200,n.changeSize(n._width);for(var r=0;r<t.length;r++){var a=n.addItem(t[r].title);a.style.paddingLeft="20px",a.addIcon().addEventListener(i.TOUCH_ENABLED?"touchend":"click",e,!1),t[r].subMenu&&0<t[r].subMenu.length&&a.addSelection(t[r].subMenu[0].title).addSubMenu(t[r].title,t[r].subMenu)}return n},createSubMenu:function(t,e){function i(t){t.preventDefault(),t.stopPropagation(),(n=r.mainMenu).changeSize(n._width),n.unslideAll(),n.show(),a.slideAll(!0),a.hide(),"header"!==this.type&&(a.setActiveItem(this),r.activeMainItem.setSelectionTitle(this.textContent),this.handler&&this.handler())}var n,r=this,a=this.createMenu();for(a.items=e,a.activeItem=null,a.addHeader(t).addIcon(void 0,!0,!0).addEventListener(r.TOUCH_ENABLED?"touchend":"click",i,!1),t=0;t<e.length;t++){var o=a.addItem(e[t].title);o.style.fontWeight=300,o.handler=e[t].handler,o.addIcon(" ",!0),o.addEventListener(r.TOUCH_ENABLED?"touchend":"click",i,!1),a.activeItem||a.setActiveItem(o)}return a.slideAll(!0),a},createMenu:function(){var t=this,e=document.createElement("span"),i=e.style;return i.padding="5px 0",i.position="fixed",i.bottom="100%",i.right="14px",i.backgroundColor="#fafafa",i.fontFamily="Helvetica Neue",i.fontSize="14px",i.visibility="hidden",i.opacity=0,i.boxShadow="0 0 12pt rgba(0,0,0,0.25)",i.borderRadius="2px",i.overflow="hidden",i.willChange="width, height, opacity",i.pointerEvents="auto",i.transition=this.DEFAULT_TRANSITION,e.visible=!1,e.changeSize=function(t,e){t&&(this.style.width=t+"px"),e&&(this.style.height=e+"px")},e.show=function(){this.style.opacity=1,this.style.visibility="visible",this.visible=!0},e.hide=function(){this.style.opacity=0,this.style.visibility="hidden",this.visible=!1},e.toggle=function(){this.visible?this.hide():this.show()},e.slideAll=function(t){for(var i=0;i<e.children.length;i++)e.children[i].slide&&e.children[i].slide(t)},e.unslideAll=function(){for(var t=0;t<e.children.length;t++)e.children[t].unslide&&e.children[t].unslide()},e.addHeader=function(e){return(e=t.createMenuItemHeader(e)).type="header",this.appendChild(e),e},e.addItem=function(e){return(e=t.createMenuItem(e)).type="item",this.appendChild(e),e},e.setActiveItem=function(t){this.activeItem&&this.activeItem.setIcon(" "),t.setIcon(E.Check),this.activeItem=t},e.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),e.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),e.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),e},createCustomItem:function(t){var e=this,i=(t=void 0===t?{}:t).element||document.createElement("span"),n=t.onDispose;return i.style.cursor="pointer",i.style.float="right",i.style.width="44px",i.style.height="100%",i.style.backgroundSize="60%",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="center",i.style.webkitUserSelect=i.style.MozUserSelect=i.style.userSelect="none",i.style.position="relative",i.style.pointerEvents="auto",i.addEventListener(e.TOUCH_ENABLED?"touchstart":"mouseenter",(function(){i.style.filter=i.style.webkitFilter="drop-shadow(0 0 5px rgba(255,255,255,1))"}),{passive:!0}),i.addEventListener(e.TOUCH_ENABLED?"touchend":"mouseleave",(function(){i.style.filter=i.style.webkitFilter=""}),{passive:!0}),this.mergeStyleOptions(i,t.style),t.onTap&&i.addEventListener(e.TOUCH_ENABLED?"touchend":"click",t.onTap,!1),i.dispose=function(){i.removeEventListener(e.TOUCH_ENABLED?"touchend":"click",t.onTap,!1),n&&t.onDispose()},i},mergeStyleOptions:function(t,e){for(var i in e=void 0===e?{}:e)e.hasOwnProperty(i)&&(t.style[i]=e[i]);return t},dispose:function(){this.barElement&&(this.container.removeChild(this.barElement),this.barElement.dispose(),this.barElement=null)}}),o.prototype=Object.assign(Object.create(e.Mesh.prototype),{constructor:o,add:function(t){var i;if(1<arguments.length){for(i=0;i<arguments.length;i++)this.add(arguments[i]);return this}if(t instanceof r){if(i=t,t.dispatchEvent){var n=this.container;n&&t.dispatchEvent({type:"panolens-container",container:n}),t.dispatchEvent({type:"panolens-infospot-focus",method:function(t,e,i){this.dispatchEvent({type:"panolens-viewer-handler",method:"tweenControlCenter",data:[t,e,i]})}.bind(this)})}}else(i=new e.Object3D).scale.x=-1,i.scalePlaceHolder=!0,i.add(t);e.Object3D.prototype.add.call(this,i)},load:function(){this.onLoad()},onClick:function(t){t.intersects&&0===t.intersects.length&&this.traverse((function(t){t.dispatchEvent({type:"dismiss"})}))},setContainer:function(t){if(t instanceof HTMLElement)var e=t;else t&&t.container&&(e=t.container);e&&(this.children.forEach((function(t){t instanceof r&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:e})})),this.container=e)},onLoad:function(){this.loaded=!0,this.dispatchEvent({type:"load"})},onProgress:function(t){this.dispatchEvent({type:"progress",progress:t})},onError:function(){this.dispatchEvent({type:"error"})},getZoomLevel:function(){return 800>=window.innerWidth?this.ImageQualityFair:800<window.innerWidth&&1280>=window.innerWidth?this.ImageQualityMedium:1280<window.innerWidth&&1920>=window.innerWidth?this.ImageQualityHigh:1920<window.innerWidth?this.ImageQualitySuperHigh:this.ImageQualityLow},updateTexture:function(t){this.material.map=t,this.material.needsUpdate=!0},toggleInfospotVisibility:function(t,e){e=void 0!==e?e:0;var i=void 0!==t?t:!this.isInfospotVisible;this.traverse((function(t){t instanceof r&&(i?t.show(e):t.hide(e))})),this.isInfospotVisible=i,this.infospotAnimation.onComplete(function(){this.dispatchEvent({type:"infospot-animation-complete",visible:i})}.bind(this)).delay(e).start()},setLinkingImage:function(t,e){this.linkingImageURL=t,this.linkingImageScale=e},link:function(t,e,i,n){this.visible=!0,e?((n=new r(i=void 0!==i?i:void 0!==t.linkingImageScale?t.linkingImageScale:300,n=n||(t.linkingImageURL?t.linkingImageURL:E.Arrow))).position.copy(e),n.toPanorama=t,n.addEventListener("click",function(){this.dispatchEvent({type:"panolens-viewer-handler",method:"setPanorama",data:t})}.bind(this)),this.linkedSpots.push(n),this.add(n),this.visible=!1):console.warn("Please specify infospot position for linking")},reset:function(){this.children.length=0},setupTransitions:function(){this.fadeInAnimation=new L.Tween(this.material).easing(L.Easing.Quartic.Out).onStart(function(){this.visible=!0,this.dispatchEvent({type:"enter-fade-start"})}.bind(this)),this.fadeOutAnimation=new L.Tween(this.material).easing(L.Easing.Quartic.Out).onComplete(function(){this.visible=!1,this.dispatchEvent({type:"leave-complete"})}.bind(this)),this.enterTransition=new L.Tween(this).easing(L.Easing.Quartic.Out).onComplete(function(){this.dispatchEvent({type:"enter-complete"})}.bind(this)).start(),this.leaveTransition=new L.Tween(this).easing(L.Easing.Quartic.Out)},onFadeAnimationUpdate:function(){var t=this.material.opacity,e=this.material.uniforms;e&&e.opacity&&(e.opacity.value=t)},fadeIn:function(t){t=0<=t?t:this.animationDuration,this.fadeOutAnimation.stop(),this.fadeInAnimation.to({opacity:1},t).onUpdate(this.onFadeAnimationUpdate.bind(this)).onComplete(function(){this.toggleInfospotVisibility(!0,t/2),this.dispatchEvent({type:"enter-fade-complete"})}.bind(this)).start()},fadeOut:function(t){t=0<=t?t:this.animationDuration,this.fadeInAnimation.stop(),this.fadeOutAnimation.to({opacity:0},t).onUpdate(this.onFadeAnimationUpdate.bind(this)).start()},onEnter:function(){var t=this.animationDuration;this.leaveTransition.stop(),this.enterTransition.to({},t).onStart(function(){this.dispatchEvent({type:"enter-start"}),this.loaded?this.fadeIn(t):this.load()}.bind(this)).start(),this.dispatchEvent({type:"enter"}),this.children.forEach((function(t){t.dispatchEvent({type:"panorama-enter"})})),this.active=!0},onLeave:function(){var t=this.animationDuration;this.enterTransition.stop(),this.leaveTransition.to({},t).onStart(function(){this.dispatchEvent({type:"leave-start"}),this.fadeOut(t),this.toggleInfospotVisibility(!1)}.bind(this)).start(),this.dispatchEvent({type:"leave"}),this.children.forEach((function(t){t.dispatchEvent({type:"panorama-leave"})})),this.active=!1},dispose:function(){this.infospotAnimation.stop(),this.fadeInAnimation.stop(),this.fadeOutAnimation.stop(),this.enterTransition.stop(),this.leaveTransition.stop(),this.dispatchEvent({type:"panolens-viewer-handler",method:"onPanoramaDispose",data:this}),function t(e){for(var i=e.geometry,n=e.material,a=e.children.length-1;0<=a;a--)t(e.children[a]),e.remove(e.children[a]);e instanceof r&&e.dispose(),i&&(i.dispose(),e.geometry=null),n&&(n.dispose(),e.material=null)}(this),this.parent&&this.parent.remove(this)}}),s.prototype=Object.assign(Object.create(o.prototype),{constructor:s,load:function(t){(t=t||this.src)?"string"==typeof t?S.load(t,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this)):t instanceof HTMLImageElement&&this.onLoad(new e.Texture(t)):console.warn("Image source undefined")},onLoad:function(t){t.minFilter=t.magFilter=e.LinearFilter,t.needsUpdate=!0,this.updateTexture(t),window.requestAnimationFrame(o.prototype.onLoad.bind(this))},reset:function(){o.prototype.reset.call(this)},dispose:function(){var t=this.material.map;e.Cache.remove(this.src),t&&t.dispose(),o.prototype.dispose.call(this)}}),l.prototype=Object.assign(Object.create(o.prototype),{constructor:l}),c.prototype=Object.assign(Object.create(o.prototype),{constructor:c,load:function(){A.load(this.images,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this))},onLoad:function(t){this.material.uniforms.tCube.value=t,o.prototype.onLoad.call(this)},dispose:function(){var t=this.material.uniforms.tCube.value;this.images.forEach((function(t){e.Cache.remove(t)})),t instanceof e.CubeTexture&&t.dispose(),o.prototype.dispose.call(this)}}),h.prototype=Object.assign(Object.create(c.prototype),{constructor:h}),u.prototype=Object.assign(Object.create(o.prototype),{constructor:u,isMobile:function(){var t=!1,e=window.navigator.userAgent||window.navigator.vendor||window.opera;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},load:function(){var t=this.options,e=t.muted,i=t.loop,n=t.autoplay,r=t.playsinline;t=t.crossOrigin;var a=this.videoElement,o=this.material,s=this.onProgress.bind(this),l=this.onLoad.bind(this);a.loop=i,a.autoplay=n,a.playsinline=r,a.crossOrigin=t,a.muted=e,r&&(a.setAttribute("playsinline",""),a.setAttribute("webkit-playsinline","")),r=function(){this.setVideoTexture(a),n&&this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}),this.isMobile()&&(a.pause(),n&&e?this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}):this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0})),window.requestAnimationFrame((function(){o.map.needsUpdate=!0,s({loaded:1,total:1}),l()}))},2<a.readyState?r.call(this):(0===a.querySelectorAll("source").length&&((t=document.createElement("source")).src=this.src,a.appendChild(t)),a.load()),a.addEventListener("loadeddata",r.bind(this)),a.addEventListener("timeupdate",function(){this.videoProgress=0<=a.duration?a.currentTime/a.duration:0,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:this.videoProgress})}.bind(this)),a.addEventListener("ended",function(){i||(this.resetVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}))}.bind(this),!1)},setVideoTexture:function(t){t&&((t=new e.VideoTexture(t)).minFilter=e.LinearFilter,t.magFilter=e.LinearFilter,t.format=e.RGBFormat,this.updateTexture(t))},reset:function(){this.videoElement=void 0,o.prototype.reset.call(this)},isVideoPaused:function(){return this.videoElement.paused},toggleVideo:function(){var t=this.videoElement;t&&t[t.paused?"play":"pause"]()},setVideoCurrentTime:function(t){t=t.percentage;var e=this.videoElement;e&&!Number.isNaN(t)&&1!==t&&(e.currentTime=e.duration*t,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:t}))},playVideo:function(){var t=this.videoElement,e=this.playVideo.bind(this),i=this.dispatchEvent.bind(this);t&&t.paused&&t.play().then((function(){i({type:"play"})})).catch((function(t){window.requestAnimationFrame(e),i({type:"play-error",error:t})}))},pauseVideo:function(){var t=this.videoElement;t&&!t.paused&&t.pause(),this.dispatchEvent({type:"pause"})},resumeVideoProgress:function(){var t=this.videoElement;4<=t.readyState&&t.autoplay&&!this.isMobile()?(this.playVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1})):(this.pauseVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0})),this.setVideoCurrentTime({percentage:this.videoProgress})},resetVideo:function(){this.videoElement&&this.setVideoCurrentTime({percentage:0})},isVideoMuted:function(){return this.videoElement.muted},muteVideo:function(){var t=this.videoElement;t&&!t.muted&&(t.muted=!0),this.dispatchEvent({type:"volumechange"})},unmuteVideo:function(){var t=this.videoElement;t&&this.isVideoMuted()&&(t.muted=!1),this.dispatchEvent({type:"volumechange"})},getVideoElement:function(){return this.videoElement},dispose:function(){var t=this.material.map;this.pauseVideo(),this.removeEventListener("leave",this.pauseVideo.bind(this)),this.removeEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.removeEventListener("video-toggle",this.toggleVideo.bind(this)),this.removeEventListener("video-time",this.setVideoCurrentTime.bind(this)),t&&t.dispose(),o.prototype.dispose.call(this)}}),Object.assign(d.prototype,{constructor:d,setProgress:function(t,e){this.onProgress&&this.onProgress({loaded:t,total:e})},adaptTextureToZoom:function(){var t=this.widths[this._zoom],e=this.heights[this._zoom],i=this.maxW,n=this.maxH;this._wc=Math.ceil(t/i),this._hc=Math.ceil(e/n);for(var r=0;r<this._hc;r++)for(var a=0;a<this._wc;a++){var o=document.createElement("canvas");o.width=a<this._wc-1?i:t-i*a,o.height=r<this._hc-1?n:e-n*r,this._canvas.push(o),this._ctx.push(o.getContext("2d"))}},composeFromTile:function(t,e,i){var n=this.maxW,r=this.maxH;t*=512,e*=512;var a=Math.floor(t/n),o=Math.floor(e/r);this._ctx[o*this._wc+a].drawImage(i,0,0,i.width,i.height,t-a*n,e-o*r,512,512),this.progress()},progress:function(){this._count++,this.setProgress(this._count,this._total),this._count===this._total&&(this.canvas=this._canvas,this.panoId=this._panoId,this.zoom=this._zoom,this.onPanoramaLoad)&&this.onPanoramaLoad(this._canvas[0])},composePanorama:function(){this.setProgress(0,1);var t=this.levelsW[this._zoom],e=this.levelsH[this._zoom],i=this;this._count=0,this._total=t*e;for(var n=this._parameters.useWebGL,r=0;r<e;r++)for(var a={},o=0;o<t;a={$jscomp$loop$prop$url$1:a.$jscomp$loop$prop$url$1},o++)a.$jscomp$loop$prop$url$1="https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom="+this._zoom+"&x="+o+"&y="+r+"&panoid="+this._panoId+"&nbt&fover=2",function(t){return function(e,r){if(n)var a=S.load(t.$jscomp$loop$prop$url$1,null,(function(){i.composeFromTile(e,r,a)}));else{var o=new Image;o.addEventListener("load",(function(){i.composeFromTile(e,r,this)})),o.crossOrigin="",o.src=t.$jscomp$loop$prop$url$1}}}(a)(o,r)},load:function(t){this.loadPano(t)},loadPano:function(t){var e=this;this._panoClient.getPanoramaById(t,(function(t,i){i===google.maps.StreetViewStatus.OK&&(e.result=t,e.copyright=t.copyright,e._panoId=t.location.pano,e.composePanorama())}))},setZoom:function(t){this._zoom=t,this.adaptTextureToZoom()}}),p.prototype=Object.assign(Object.create(s.prototype),{constructor:p,load:function(t){this.loadRequested=!0,t=t||this.panoId||{},this.gsvLoader&&this.loadGSVLoader(t)},setupGoogleMapAPI:function(t){var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?",e.src+=t?"key="+t:"",e.onreadystatechange=this.setGSVLoader.bind(this),e.onload=this.setGSVLoader.bind(this),document.querySelector("head").appendChild(e)},setGSVLoader:function(){this.gsvLoader=new d,this.loadRequested&&this.load()},getGSVLoader:function(){return this.gsvLoader},loadGSVLoader:function(t){this.loadRequested=!1,this.gsvLoader.onProgress=this.onProgress.bind(this),this.gsvLoader.onPanoramaLoad=this.onLoad.bind(this),this.gsvLoader.setZoom(this.getZoomLevel()),this.gsvLoader.load(t),this.gsvLoader.loaded=!0},onLoad:function(t){s.prototype.onLoad.call(this,new e.Texture(t))},reset:function(){this.gsvLoader=void 0,s.prototype.reset.call(this)}});var D={uniforms:{tDiffuse:{value:new e.Texture},resolution:{value:1},transform:{value:new e.Matrix4},zoom:{value:1},opacity:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform float resolution;\nuniform mat4 transform;\nuniform float zoom;\nuniform float opacity;\nvarying vec2 vUv;\nconst float PI = 3.141592653589793;\nvoid main(){\nvec2 position = -1.0 +  2.0 * vUv;\nposition *= vec2( zoom * resolution, zoom * 0.5 );\nfloat x2y2 = position.x * position.x + position.y * position.y;\nvec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );\nsphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );\nvec2 sampleUV = vec2(\n(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,\n(asin(sphere_pnt.z) / PI + 0.5)\n);\ngl_FragColor = texture2D( tDiffuse, sampleUV );\ngl_FragColor.a *= opacity;\n}"};f.prototype=Object.assign(Object.create(s.prototype),{constructor:f,add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}t instanceof r&&(t.material.depthTest=!1),s.prototype.add.call(this,t)},createGeometry:function(t,i){return new e.PlaneBufferGeometry(t,t*i)},createMaterial:function(t){var i=Object.assign({},D),n=i.uniforms;return n.zoom.value=t,n.opacity.value=0,new e.ShaderMaterial({uniforms:n,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:e.BackSide,transparent:!0})},registerMouseEvents:function(){this.container.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("touchstart",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("touchmove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("touchend",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("mousewheel",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("contextmenu",this.onContextMenu.bind(this),{passive:!0})},unregisterMouseEvents:function(){this.container.removeEventListener("mousedown",this.onMouseDown.bind(this),!1),this.container.removeEventListener("mousemove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("mouseup",this.onMouseUp.bind(this),!1),this.container.removeEventListener("touchstart",this.onMouseDown.bind(this),!1),this.container.removeEventListener("touchmove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("touchend",this.onMouseUp.bind(this),!1),this.container.removeEventListener("mousewheel",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("contextmenu",this.onContextMenu.bind(this),!1)},onMouseDown:function(t){switch(t.touches&&t.touches.length||1){case 1:var e=0<=t.clientX?t.clientX:t.touches[0].clientX;t=0<=t.clientY?t.clientY:t.touches[0].clientY,this.dragging=!0,this.userMouse.set(e,t);break;case 2:e=t.touches[0].pageX-t.touches[1].pageX,t=t.touches[0].pageY-t.touches[1].pageY,this.userMouse.pinchDistance=Math.sqrt(e*e+t*t)}this.onUpdateCallback()},onMouseMove:function(t){switch(t.touches&&t.touches.length||1){case 1:var i=0<=t.clientX?t.clientX:t.touches[0].clientX;t=0<=t.clientY?t.clientY:t.touches[0].clientY;var n=.4*e.Math.degToRad(i-this.userMouse.x),r=.4*e.Math.degToRad(t-this.userMouse.y);this.dragging&&(this.quatA.setFromAxisAngle(this.vectorY,n),this.quatB.setFromAxisAngle(this.vectorX,r),this.quatCur.multiply(this.quatA).multiply(this.quatB),this.userMouse.set(i,t));break;case 2:i=t.touches[0].pageX-t.touches[1].pageX,t=t.touches[0].pageY-t.touches[1].pageY,this.addZoomDelta(this.userMouse.pinchDistance-Math.sqrt(i*i+t*t))}},onMouseUp:function(){this.dragging=!1},onMouseWheel:function(t){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),this.addZoomDelta(e),this.onUpdateCallback()},addZoomDelta:function(t){var e=this.material.uniforms,i=.1*this.size,n=10*this.size;e.zoom.value+=t,e.zoom.value<=i?e.zoom.value=i:e.zoom.value>=n&&(e.zoom.value=n)},onUpdateCallback:function(){this.frameId=window.requestAnimationFrame(this.onUpdateCallback.bind(this)),this.quatSlerp.slerp(this.quatCur,.1),this.material&&this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp),!this.dragging&&1-this.quatSlerp.clone().dot(this.quatCur)<this.EPS&&window.cancelAnimationFrame(this.frameId)},reset:function(){this.quatCur.set(0,0,0,1),this.quatSlerp.set(0,0,0,1),this.onUpdateCallback()},onLoad:function(t){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight,this.registerMouseEvents(),this.onUpdateCallback(),this.dispatchEvent({type:"panolens-viewer-handler",method:"disableControl"}),s.prototype.onLoad.call(this,t)},onLeave:function(){this.unregisterMouseEvents(),this.dispatchEvent({type:"panolens-viewer-handler",method:"enableControl",data:w.ORBIT}),window.cancelAnimationFrame(this.frameId),s.prototype.onLeave.call(this)},onWindowResize:function(){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight},onContextMenu:function(){this.dragging=!1},dispose:function(){this.unregisterMouseEvents(),s.prototype.dispose.call(this)}}),m.prototype=Object.assign(Object.create(f.prototype),{constructor:m,onLoad:function(t){this.updateTexture(t),f.prototype.onLoad.call(this,t)},updateTexture:function(t){t.minFilter=t.magFilter=e.LinearFilter,this.material.uniforms.tDiffuse.value=t},dispose:function(){var t=this.material.uniforms.tDiffuse;t&&t.value&&t.value.dispose(),f.prototype.dispose.call(this)}}),g.prototype=Object.assign(Object.create(o.prototype),{constructor:g,onPanolensContainer:function(t){this.media.setContainer(t.container)},onPanolensScene:function(t){this.media.setScene(t.scene)},start:function(){return this.media.start()},stop:function(){this.media.stop()}}),v.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:v}),y.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:y});var P=function(t){var i=new e.StereoCamera;i.aspect=.5;var n=new e.Vector2;this.setEyeSeparation=function(t){i.eyeSep=t},this.setSize=function(e,i){t.setSize(e,i)},this.render=function(e,r){e.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),i.update(r),t.getSize(n),t.autoClear&&t.clear(),t.setScissorTest(!0),t.setScissor(0,0,n.width/2,n.height),t.setViewport(0,0,n.width/2,n.height),t.render(e,i.cameraL),t.setScissor(n.width/2,0,n.width/2,n.height),t.setViewport(n.width/2,0,n.width/2,n.height),t.render(e,i.cameraR),t.setScissorTest(!1)}};b.prototype=Object.assign(Object.create(e.EventDispatcher.prototype),{constructor:b,add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}this.scene.add(t),t.addEventListener&&t.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),t instanceof o&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:this.container}),t instanceof g&&t.dispatchEvent({type:"panolens-scene",scene:this.scene}),"panorama"===t.type&&(this.addPanoramaEventListener(t),this.panorama||this.setPanorama(t))},remove:function(t){t.removeEventListener&&t.removeEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),this.scene.remove(t)},addDefaultControlBar:function(t){if(this.widget)console.warn("Default control bar exists");else{var e=new a(this.container);e.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),e.addControlBar(),t.forEach((function(t){e.addControlButton(t)})),this.widget=e}},setPanorama:function(t){var e=this.panorama;if("panorama"===t.type&&e!==t){this.hideInfospot();var i=function(){e&&e.onLeave(),t.removeEventListener("enter-fade-start",i)};t.addEventListener("enter-fade-start",i),(this.panorama=t).onEnter()}},eventHandler:function(t){t.method&&this[t.method]&&this[t.method](t.data)},dispatchEventToChildren:function(t){this.scene.traverse((function(e){e.dispatchEvent&&e.dispatchEvent(t)}))},activateWidgetItem:function(t,e){var i=this.widget.mainMenu,n=i.children[0];if(i=i.children[1],void 0!==t){switch(t){case 0:t=n.subMenu.children[1];break;case 1:t=n.subMenu.children[2];break;default:t=n.subMenu.children[1]}n.subMenu.setActiveItem(t),n.setSelectionTitle(t.textContent)}if(void 0!==e){switch(e){case M.CARDBOARD:t=i.subMenu.children[2];break;case M.STEREO:t=i.subMenu.children[3];break;default:t=i.subMenu.children[1]}i.subMenu.setActiveItem(t),i.setSelectionTitle(t.textContent)}},enableEffect:function(t){if(this.mode!==t)if(t===M.NORMAL)this.disableEffect();else{this.mode=t;var e=this.camera.fov;switch(t){case M.CARDBOARD:this.effect=this.CardboardEffect,this.enableReticleControl();break;case M.STEREO:this.effect=this.StereoEffect,this.enableReticleControl();break;default:this.effect=null,this.disableReticleControl()}this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.camera.fov=e+.01,this.effect.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.camera.fov=e,this.dispatchEvent({type:"mode-change",mode:this.mode})}},disableEffect:function(){this.mode!==M.NORMAL&&(this.mode=M.NORMAL,this.disableReticleControl(),this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.dispatchEvent({type:"mode-change",mode:this.mode}))},enableReticleControl:function(){this.reticle.visible||(this.tempEnableReticle=!0,this.unregisterMouseAndTouchEvents(),this.reticle.show(),this.registerReticleEvent(),this.updateReticleEvent())},disableReticleControl:function(){this.tempEnableReticle=!1,this.options.enableReticle?this.updateReticleEvent():(this.reticle.hide(),this.unregisterReticleEvent(),this.registerMouseAndTouchEvents())},enableAutoRate:function(){this.options.autoRotate=!0,this.OrbitControls.autoRotate=!0},disableAutoRate:function(){clearTimeout(this.autoRotateRequestId),this.options.autoRotate=!1,this.OrbitControls.autoRotate=!1},toggleVideoPlay:function(t){this.panorama instanceof u&&this.panorama.dispatchEvent({type:"video-toggle",pause:t})},setVideoCurrentTime:function(t){this.panorama instanceof u&&this.panorama.dispatchEvent({type:"video-time",percentage:t})},onVideoUpdate:function(t){var e=this.widget;e&&e.dispatchEvent({type:"video-update",percentage:t})},addUpdateCallback:function(t){t&&this.updateCallbacks.push(t)},removeUpdateCallback:function(t){var e=this.updateCallbacks.indexOf(t);t&&0<=e&&this.updateCallbacks.splice(e,1)},showVideoWidget:function(){var t=this.widget;t&&t.dispatchEvent({type:"video-control-show"})},hideVideoWidget:function(){var t=this.widget;t&&t.dispatchEvent({type:"video-control-hide"})},updateVideoPlayButton:function(t){var e=this.widget;e&&e.videoElement&&e.videoElement.controlButton&&e.videoElement.controlButton.update(t)},addPanoramaEventListener:function(t){t.addEventListener("enter-fade-start",this.setCameraControl.bind(this)),t instanceof u&&(t.addEventListener("enter-fade-start",this.showVideoWidget.bind(this)),t.addEventListener("leave",function(){this.panorama instanceof u||this.hideVideoWidget.call(this)}.bind(this)))},setCameraControl:function(){this.OrbitControls.target.copy(this.panorama.position)},getControl:function(){return this.control},getScene:function(){return this.scene},getCamera:function(){return this.camera},getRenderer:function(){return this.renderer},getContainer:function(){return this.container},getControlId:function(){return this.control.id},getNextControlId:function(){return this.controls[this.getNextControlIndex()].id},getNextControlIndex:function(){var t=this.controls,e=t.indexOf(this.control)+1;return e>=t.length?0:e},setCameraFov:function(t){this.camera.fov=t,this.camera.updateProjectionMatrix()},enableControl:function(t){switch(t=0<=t&&t<this.controls.length?t:0,this.control.enabled=!1,this.control=this.controls[t],this.control.enabled=!0,t){case w.ORBIT:this.camera.position.copy(this.panorama.position),this.camera.position.z+=1;break;case w.DEVICEORIENTATION:this.camera.position.copy(this.panorama.position)}this.control.update(),this.activateWidgetItem(t,void 0)},disableControl:function(){this.control.enabled=!1},toggleNextControl:function(){this.enableControl(this.getNextControlIndex())},getScreenVector:function(t){t=t.clone();var e=this.container.clientWidth/2,i=this.container.clientHeight/2;return t.project(this.camera),t.x=t.x*e+e,t.y=-t.y*i+i,t.z=0,t},checkSpriteInViewport:function(t){return this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld),this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix),t.visible&&this.cameraFrustum.intersectsSprite(t)},reverseDraggingDirection:function(){this.OrbitControls.rotateSpeed*=-1,this.OrbitControls.momentumScalingFactor*=-1},addReticle:function(){this.reticle=new n(16777215,!0,this.options.dwellTime),this.reticle.hide(),this.camera.add(this.reticle),this.sceneReticle.add(this.camera)},tweenControlCenter:function(t,i,n){var r;if(this.control===this.OrbitControls){t instanceof Array&&(i=t[1],n=t[2],t=t[0]),i=void 0!==i?i:1e3,n=n||L.Easing.Exponential.Out;var a=this,o=this.camera.getWorldDirection(new e.Vector3),s=o.clone(),l=this.panorama.getWorldPosition(new e.Vector3).sub(this.camera.getWorldPosition(new e.Vector3));(t=t.clone()).x*=-1,t.add(l).normalize();var c=t.clone();o.y=0,t.y=0,l=(l=(l=Math.atan2(t.z,t.x)-Math.atan2(o.z,o.x))>Math.PI?l-2*Math.PI:l)<-Math.PI?l+2*Math.PI:l,o=Math.abs(s.angleTo(o)+(0>=s.y*c.y?c.angleTo(t):-c.angleTo(t))),o*=c.y<s.y?1:-1,s={left:0,up:0};var h=r=0;this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.tweenLeftAnimation=new L.Tween(s).to({left:l},i).easing(n).onUpdate((function(t){a.control.rotateLeft(t.left-r),r=t.left})).start(),this.tweenUpAnimation=new L.Tween(s).to({up:o},i).easing(n).onUpdate((function(t){a.control.rotateUp(t.up-h),h=t.up})).start()}},tweenControlCenterByObject:function(t,i,n){var r=!1;if(t.traverseAncestors((function(t){t.scalePlaceHolder&&(r=!0)})),r){var a=new e.Vector3(-1,1,1);this.tweenControlCenter(t.getWorldPosition(new e.Vector3).multiply(a),i,n)}else this.tweenControlCenter(t.getWorldPosition(new e.Vector3),i,n)},onWindowResize:function(t,e){var i=this.container.classList.contains("panolens-container")||this.container.isFullscreen;if(void 0!==t&&void 0!==e){var n=t,r=e;this.container._width=t,this.container._height=e}else t=(e=/(android)/i.test(window.navigator.userAgent))?Math.min(document.documentElement.clientWidth,window.innerWidth||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),e=e?Math.min(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=i?t:this.container.clientWidth,r=i?e:this.container.clientHeight,this.container._width=n,this.container._height=r;this.camera.aspect=n/r,this.camera.updateProjectionMatrix(),this.renderer.setSize(n,r),(this.options.enableReticle||this.tempEnableReticle)&&this.updateReticleEvent(),this.dispatchEvent({type:"window-resize",width:n,height:r}),this.scene.traverse((function(t){t.dispatchEvent&&t.dispatchEvent({type:"window-resize",width:n,height:r})}))},addOutputElement:function(){var t=document.createElement("div");t.style.position="absolute",t.style.right="10px",t.style.top="10px",t.style.color="#fff",this.container.appendChild(t),this.outputDivElement=t},outputPosition:function(){var t=this.raycaster.intersectObject(this.panorama,!0);if(0<t.length){t=t[0].point.clone();var i=new e.Vector3(-1,1,1),n=this.panorama.getWorldPosition(new e.Vector3);if(t.sub(n).multiply(i),i=t.x.toFixed(2)+", "+t.y.toFixed(2)+", "+t.z.toFixed(2),0!==t.length())switch(this.options.output){case"console":console.info(i);break;case"overlay":this.outputDivElement.textContent=i}}},onMouseDown:function(t){t.preventDefault(),this.userMouse.x=0<=t.clientX?t.clientX:t.touches[0].clientX,this.userMouse.y=0<=t.clientY?t.clientY:t.touches[0].clientY,this.userMouse.type="mousedown",this.onTap(t)},onMouseMove:function(t){t.preventDefault(),this.userMouse.type="mousemove",this.onTap(t)},onMouseUp:function(t){this.userMouse.type="mouseup";var e=this.userMouse.x>=t.clientX-this.options.clickTolerance&&this.userMouse.x<=t.clientX+this.options.clickTolerance&&this.userMouse.y>=t.clientY-this.options.clickTolerance&&this.userMouse.y<=t.clientY+this.options.clickTolerance||t.changedTouches&&this.userMouse.x>=t.changedTouches[0].clientX-this.options.clickTolerance&&this.userMouse.x<=t.changedTouches[0].clientX+this.options.clickTolerance&&this.userMouse.y>=t.changedTouches[0].clientY-this.options.clickTolerance&&this.userMouse.y<=t.changedTouches[0].clientY+this.options.clickTolerance?"click":void 0;if((!t||!t.target||t.target.classList.contains("panolens-canvas"))&&(t.preventDefault(),t=t.changedTouches&&1===t.changedTouches.length?this.onTap({clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY},e):this.onTap(t,e),this.userMouse.type="none",!t&&"click"===e)){t=(e=this.options).autoHideControlBar;var i=this.panorama,n=this.toggleControlBar;e.autoHideInfospot&&i&&i.toggleInfospotVisibility(),t&&n()}},onTap:function(t,e){var i=this.container.getBoundingClientRect(),n=i.top,a=this.container,o=a.clientHeight;if(this.raycasterPoint.x=(t.clientX-i.left)/a.clientWidth*2-1,this.raycasterPoint.y=-(t.clientY-n)/o*2+1,this.raycaster.setFromCamera(this.raycasterPoint,this.camera),this.panorama){if(("mousedown"!==t.type&&this.touchSupported||this.OUTPUT_INFOSPOT)&&this.outputPosition(),i=this.raycaster.intersectObjects(this.panorama.children,!0),n=this.getConvertedIntersect(i),a=0<i.length?i[0].object:void 0,"mouseup"===this.userMouse.type&&(n&&this.pressEntityObject===n&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),"mouseup"===this.userMouse.type&&(a&&this.pressObject===a&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0),"click"===e?(this.panorama.dispatchEvent({type:"click",intersects:i,mouseEvent:t}),n&&n.dispatchEvent&&n.dispatchEvent({type:"click-entity",mouseEvent:t}),a&&a.dispatchEvent&&a.dispatchEvent({type:"click",mouseEvent:t})):(this.panorama.dispatchEvent({type:"hover",intersects:i,mouseEvent:t}),(this.hoverObject&&0<i.length&&this.hoverObject!==n||this.hoverObject&&0===i.length)&&(this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverleave",mouseEvent:t}),this.reticle.end()),this.hoverObject=void 0),n&&0<i.length&&(this.hoverObject!==n&&(this.hoverObject=n,this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverenter",mouseEvent:t}),(this.options.autoReticleSelect&&this.options.enableReticle||this.tempEnableReticle)&&this.reticle.start(this.onTap.bind(this,t,"click")))),"mousedown"===this.userMouse.type&&this.pressEntityObject!=n&&(this.pressEntityObject=n,this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstart-entity",mouseEvent:t})),"mousedown"===this.userMouse.type&&this.pressObject!=a&&(this.pressObject=a,this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstart",mouseEvent:t})),"mousemove"===this.userMouse.type||this.options.enableReticle)&&(a&&a.dispatchEvent&&a.dispatchEvent({type:"hover",mouseEvent:t}),this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressmove-entity",mouseEvent:t}),this.pressObject&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressmove",mouseEvent:t})),!n&&this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&(this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),!a&&this.pressObject&&this.pressObject.dispatchEvent&&(this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0)),a&&a instanceof r){if(this.infospot=a,"click"===e)return!0}else this.infospot&&this.hideInfospot();this.options.autoRotate&&"mousemove"!==this.userMouse.type&&(clearTimeout(this.autoRotateRequestId),this.control===this.OrbitControls&&(this.OrbitControls.autoRotate=!1,this.autoRotateRequestId=window.setTimeout(this.enableAutoRate.bind(this),this.options.autoRotateActivationDuration)))}},getConvertedIntersect:function(t){for(var e,i=0;i<t.length;i++)if(0<=t[i].distance&&t[i].object&&!t[i].object.passThrough&&(!t[i].object.entity||!t[i].object.entity.passThrough)){e=t[i].object.entity&&!t[i].object.entity.passThrough?t[i].object.entity:t[i].object;break}return e},hideInfospot:function(){this.infospot&&(this.infospot.onHoverEnd(),this.infospot=void 0)},toggleControlBar:function(){var t=this.widget;t&&t.dispatchEvent({type:"control-bar-toggle"})},onKeyDown:function(t){this.options.output&&"none"!==this.options.output&&"Control"===t.key&&(this.OUTPUT_INFOSPOT=!0)},onKeyUp:function(){this.OUTPUT_INFOSPOT=!1},update:function(){L.update(),this.updateCallbacks.forEach((function(t){t()})),this.control.update(),this.scene.traverse(function(t){if(t instanceof r&&t.element&&(this.hoverObject===t||"none"!==t.element.style.display||t.element.left&&"none"!==t.element.left.style.display||t.element.right&&"none"!==t.element.right.style.display))if(this.checkSpriteInViewport(t)){var i=this.getScreenVector(t.getWorldPosition(new e.Vector3));t.translateElement(i.x,i.y)}else t.onDismiss()}.bind(this))},render:function(){this.mode===M.CARDBOARD||this.mode===M.STEREO?(this.renderer.clear(),this.effect.render(this.scene,this.camera),this.effect.render(this.sceneReticle,this.camera)):(this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),this.renderer.render(this.sceneReticle,this.camera))},animate:function(){this.requestAnimationId=window.requestAnimationFrame(this.animate.bind(this)),this.onChange()},onChange:function(){this.update(),this.render()},registerMouseAndTouchEvents:function(){var t={passive:!1};this.container.addEventListener("mousedown",this.HANDLER_MOUSE_DOWN,t),this.container.addEventListener("mousemove",this.HANDLER_MOUSE_MOVE,t),this.container.addEventListener("mouseup",this.HANDLER_MOUSE_UP,t),this.container.addEventListener("touchstart",this.HANDLER_MOUSE_DOWN,t),this.container.addEventListener("touchend",this.HANDLER_MOUSE_UP,t)},unregisterMouseAndTouchEvents:function(){this.container.removeEventListener("mousedown",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("mousemove",this.HANDLER_MOUSE_MOVE,!1),this.container.removeEventListener("mouseup",this.HANDLER_MOUSE_UP,!1),this.container.removeEventListener("touchstart",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("touchend",this.HANDLER_MOUSE_UP,!1)},registerReticleEvent:function(){this.addUpdateCallback(this.HANDLER_TAP)},unregisterReticleEvent:function(){this.removeUpdateCallback(this.HANDLER_TAP)},updateReticleEvent:function(){var t=this.container.clientWidth/2+this.container.offsetLeft,e=this.container.clientHeight/2;this.removeUpdateCallback(this.HANDLER_TAP),this.HANDLER_TAP=this.onTap.bind(this,{clientX:t,clientY:e}),this.addUpdateCallback(this.HANDLER_TAP)},registerEventListeners:function(){window.addEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.addEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.addEventListener("keyup",this.HANDLER_KEY_UP,!0)},unregisterEventListeners:function(){window.removeEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.removeEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.removeEventListener("keyup",this.HANDLER_KEY_UP,!0)},dispose:function(){this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.unregisterEventListeners(),function t(e){for(var i=e.children.length-1;0<=i;i--)t(e.children[i]),e.remove(e.children[i]);e instanceof o||e instanceof r?e.dispose():e.dispatchEvent&&e.dispatchEvent("dispose")}(this.scene),this.widget&&(this.widget.dispose(),this.widget=null),e.Cache&&e.Cache.enabled&&e.Cache.clear()},destroy:function(){this.dispose(),this.render(),window.cancelAnimationFrame(this.requestAnimationId)},onPanoramaDispose:function(t){t instanceof u&&this.hideVideoWidget(),t===this.panorama&&(this.panorama=null)},loadAsyncRequest:function(t,e){e=void 0===e?function(){}:e;var i=new window.XMLHttpRequest;i.onloadend=function(t){e(t)},i.open("GET",t,!0),i.send(null)},addViewIndicator:function(){var t=this;this.loadAsyncRequest(E.ViewIndicator,(function(i){if(0!==i.loaded){(i=i.target.responseXML.documentElement).style.width=t.viewIndicatorSize+"px",i.style.height=t.viewIndicatorSize+"px",i.style.position="absolute",i.style.top="10px",i.style.left="10px",i.style.opacity="0.5",i.style.cursor="pointer",i.id="panolens-view-indicator-container",t.container.appendChild(i);var n=i.querySelector("#indicator");t.addUpdateCallback((function(){t.radius=.225*t.viewIndicatorSize,t.currentPanoAngle=t.camera.rotation.y-e.Math.degToRad(90),t.fovAngle=e.Math.degToRad(t.camera.fov),t.leftAngle=-t.currentPanoAngle-t.fovAngle/2,t.rightAngle=-t.currentPanoAngle+t.fovAngle/2,t.leftX=t.radius*Math.cos(t.leftAngle),t.leftY=t.radius*Math.sin(t.leftAngle),t.rightX=t.radius*Math.cos(t.rightAngle),t.rightY=t.radius*Math.sin(t.rightAngle),t.indicatorD="M "+t.leftX+" "+t.leftY+" A "+t.radius+" "+t.radius+" 0 0 1 "+t.rightX+" "+t.rightY,t.leftX&&t.leftY&&t.rightX&&t.rightY&&t.radius&&n.setAttribute("d",t.indicatorD)})),i.addEventListener("mouseenter",(function(){this.style.opacity="1"})),i.addEventListener("mouseleave",(function(){this.style.opacity="0.5"}))}}))},appendControlItem:function(t){var e=this.widget.createCustomItem(t);return"video"===t.group?this.widget.videoElement.appendChild(e):this.widget.barElement.appendChild(e),e},clearAllCache:function(){e.Cache.clear()}}),"105"!=e.REVISION&&console.warn("three.js version is not matched. Please consider use the target revision 105"),window.TWEEN=L,t.BasicPanorama=h,t.CONTROLS=w,t.CameraPanorama=g,t.CubePanorama=c,t.CubeTextureLoader=A,t.DataImage=E,t.EmptyPanorama=l,t.GoogleStreetviewPanorama=p,t.ImageLittlePlanet=m,t.ImageLoader=T,t.ImagePanorama=s,t.Infospot=r,t.LittlePlanet=f,t.MODES=M,t.Media=i,t.Panorama=o,t.REVISION="11",t.Reticle=n,t.THREE_REVISION="105",t.THREE_VERSION=x,t.TextureLoader=S,t.VERSION="0.11.0",t.VideoPanorama=u,t.Viewer=b,t.Widget=a,Object.defineProperty(t,"__esModule",{value:!0})})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";function e(){return m||"undefined"!=typeof window&&(m=window.gsap)&&m.registerPlugin&&m}function i(t,e){return~P.indexOf(t)&&P[P.indexOf(t)+1][e]}function n(t){return!!~E.indexOf(t)}function r(t,e,i,n,r){return t.addEventListener(e,i,{passive:!n,capture:!!r})}function a(t,e,i,n){return t.removeEventListener(e,i,!!n)}function o(){return T&&T.isPressed||D.cache++}function s(t,e){function i(n){if(n||0===n){C&&(v.history.scrollRestoration="manual");var r=T&&T.isPressed;n=i.v=Math.round(n)||(T&&T.iOS?1:0),t(n),i.cacheID=D.cache,r&&O("ss",n)}else(e||D.cache!==i.cacheID||O("ref"))&&(i.cacheID=D.cache,i.v=t());return i.v+i.offset}return i.offset=0,t&&i}function l(t){return m.utils.toArray(t)[0]||("string"==typeof t&&!1!==m.config().nullTargetWarn?console.warn("Element not found:",t):null)}function c(t,e){var r=e.s,a=e.sc;n(t)&&(t=y.scrollingElement||_);var l=D.indexOf(t),c=a===k.sc?1:2;~l||(l=D.push(t)-1),D[l+c]||t.addEventListener("scroll",o);var h=D[l+c],u=h||(D[l+c]=s(i(t,r),!0)||(n(t)?a:s((function(e){return arguments.length?t[r]=e:t[r]}))));return u.target=t,h||(u.smooth="smooth"===m.getProperty(t,"scrollBehavior")),u}function h(t,e,i){function n(t,e){var n=R();e||l<n-o?(a=r,r=t,s=o,o=n):i?r+=t:r=a+(t-a)/(n-s)*(o-s)}var r=t,a=t,o=R(),s=o,l=e||50,c=Math.max(500,3*l);return{update:n,reset:function(){a=r=i?0:r,s=o=0},getVelocity:function(t){var e=s,l=a,h=R();return!t&&0!==t||t===r||n(t),o===s||c<h-s?0:(r+(i?l:-l))/((i?h:o)-e)*1e3}}}function u(t,e){return e&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t}function d(t){var e=Math.max.apply(Math,t),i=Math.min.apply(Math,t);return Math.abs(e)>=Math.abs(i)?e:i}function p(){(M=m.core.globals().ScrollTrigger)&&M.core&&function(){var t=M.core,e=t.bridge||{},i=t._scrollers,n=t._proxies;i.push.apply(i,D),n.push.apply(n,P),D=i,P=n,O=function(t,i){return e[t](i)}}()}function f(t){return(m=t||e())&&"undefined"!=typeof document&&document.body&&(v=window,_=(y=document).documentElement,b=y.body,E=[v,y,_,b],m.utils.clamp,A=m.core.context||function(){},w="onpointerenter"in b?"pointer":"mouse",x=F.isTouch=v.matchMedia&&v.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in v||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints?2:0,S=F.eventTypes=("ontouchstart"in _?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in _?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return C=0}),500),p(),g=1),g}var m,g,v,y,_,b,x,w,M,E,T,S,A,C=1,L=[],D=[],P=[],R=Date.now,O=function(t,e){return e},I="scrollLeft",z="scrollTop",N={s:I,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:s((function(t){return arguments.length?v.scrollTo(t,k.sc()):v.pageXOffset||y[I]||_[I]||b[I]||0}))},k={s:z,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:N,sc:s((function(t){return arguments.length?v.scrollTo(N.sc(),t):v.pageYOffset||y[z]||_[z]||b[z]||0}))};N.op=k,D.cache=0;var F=(B.prototype.init=function(t){g||f(m)||console.warn("Please gsap.registerPlugin(Observer)"),M||p();var e=t.tolerance,i=t.dragMinimum,s=t.type,E=t.target,C=t.lineHeight,D=t.debounce,P=t.preventDefault,O=t.onStop,I=t.onStopDelay,z=t.ignore,F=t.wheelSpeed,B=t.event,U=t.onDragStart,H=t.onDragEnd,G=t.onDrag,j=t.onPress,V=t.onRelease,W=t.onRight,q=t.onLeft,X=t.onUp,Y=t.onDown,Z=t.onChangeX,J=t.onChangeY,Q=t.onChange,K=t.onToggleX,$=t.onToggleY,tt=t.onHover,et=t.onHoverEnd,it=t.onMove,nt=t.ignoreCheck,rt=t.isNormalizer,at=t.onGestureStart,ot=t.onGestureEnd,st=t.onWheel,lt=t.onEnable,ct=t.onDisable,ht=t.onClick,ut=t.scrollSpeed,dt=t.capture,pt=t.allowClicks,ft=t.lockAxis,mt=t.onLockAxis;function gt(){return Jt=R()}function vt(t,e){return(Ft.event=t)&&z&&~z.indexOf(t.target)||e&&Wt&&"touch"!==t.pointerType||nt&&nt(t,e)}function yt(){var t=Ft.deltaX=d(Yt),i=Ft.deltaY=d(Zt),n=Math.abs(t)>=e,r=Math.abs(i)>=e;Q&&(n||r)&&Q(Ft,t,i,Yt,Zt),n&&(W&&0<Ft.deltaX&&W(Ft),q&&Ft.deltaX<0&&q(Ft),Z&&Z(Ft),K&&Ft.deltaX<0!=Bt<0&&K(Ft),Bt=Ft.deltaX,Yt[0]=Yt[1]=Yt[2]=0),r&&(Y&&0<Ft.deltaY&&Y(Ft),X&&Ft.deltaY<0&&X(Ft),J&&J(Ft),$&&Ft.deltaY<0!=Ut<0&&$(Ft),Ut=Ft.deltaY,Zt[0]=Zt[1]=Zt[2]=0),(It||Ot)&&(it&&it(Ft),Ot&&(G(Ft),Ot=!1),It=!1),Nt&&!(Nt=!1)&&mt&&mt(Ft),zt&&(st(Ft),zt=!1),Pt=0}function _t(t,e,i){Yt[i]+=t,Zt[i]+=e,Ft._vx.update(t),Ft._vy.update(e),D?Pt=Pt||requestAnimationFrame(yt):yt()}function bt(t,e){ft&&!kt&&(Ft.axis=kt=Math.abs(t)>Math.abs(e)?"x":"y",Nt=!0),"y"!==kt&&(Yt[2]+=t,Ft._vx.update(t,!0)),"x"!==kt&&(Zt[2]+=e,Ft._vy.update(e,!0)),D?Pt=Pt||requestAnimationFrame(yt):yt()}function xt(t){if(!vt(t,1)){var e=(t=u(t,P)).clientX,n=t.clientY,r=e-Ft.x,a=n-Ft.y,o=Ft.isDragging;Ft.x=e,Ft.y=n,(o||Math.abs(Ft.startX-e)>=i||Math.abs(Ft.startY-n)>=i)&&(G&&(Ot=!0),o||(Ft.isDragging=!0),bt(r,a),o||U&&U(Ft))}}function wt(t){if(!vt(t,1)){a(rt?E:Xt,S[1],xt,!0);var e=!isNaN(Ft.y-Ft.startY),i=Ft.isDragging&&(3<Math.abs(Ft.x-Ft.startX)||3<Math.abs(Ft.y-Ft.startY)),n=u(t);!i&&e&&(Ft._vx.reset(),Ft._vy.reset(),P&&pt&&m.delayedCall(.08,(function(){if(300<R()-Jt&&!t.defaultPrevented)if(t.target.click)t.target.click();else if(Xt.createEvent){var e=Xt.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,v,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(e)}}))),Ft.isDragging=Ft.isGesturing=Ft.isPressed=!1,O&&!rt&&Rt.restart(!0),H&&i&&H(Ft),V&&V(Ft,i)}}function Mt(t){return t.touches&&1<t.touches.length&&(Ft.isGesturing=!0)&&at(t,Ft.isDragging)}function Et(){return(Ft.isGesturing=!1)||ot(Ft)}function Tt(t){if(!vt(t)){var e=Ht(),i=Gt();_t((e-jt)*ut,(i-Vt)*ut,1),jt=e,Vt=i,O&&Rt.restart(!0)}}function St(t){if(!vt(t)){t=u(t,P),st&&(zt=!0);var e=(1===t.deltaMode?C:2===t.deltaMode?v.innerHeight:1)*F;_t(t.deltaX*e,t.deltaY*e,0),O&&!rt&&Rt.restart(!0)}}function At(t){if(!vt(t)){var e=t.clientX,i=t.clientY,n=e-Ft.x,r=i-Ft.y;Ft.x=e,Ft.y=i,It=!0,(n||r)&&bt(n,r)}}function Ct(t){Ft.event=t,tt(Ft)}function Lt(t){Ft.event=t,et(Ft)}function Dt(t){return vt(t)||u(t,P)&&ht(Ft)}this.target=E=l(E)||_,this.vars=t,z=z&&m.utils.toArray(z),e=e||1e-9,i=i||0,F=F||1,ut=ut||1,s=s||"wheel,touch,pointer",D=!1!==D,C=C||parseFloat(v.getComputedStyle(b).lineHeight)||22;var Pt,Rt,Ot,It,zt,Nt,kt,Ft=this,Bt=0,Ut=0,Ht=c(E,N),Gt=c(E,k),jt=Ht(),Vt=Gt(),Wt=~s.indexOf("touch")&&!~s.indexOf("pointer")&&"pointerdown"===S[0],qt=n(E),Xt=E.ownerDocument||y,Yt=[0,0,0],Zt=[0,0,0],Jt=0,Qt=Ft.onPress=function(t){vt(t,1)||(Ft.axis=kt=null,Rt.pause(),Ft.isPressed=!0,t=u(t),Bt=Ut=0,Ft.startX=Ft.x=t.clientX,Ft.startY=Ft.y=t.clientY,Ft._vx.reset(),Ft._vy.reset(),r(rt?E:Xt,S[1],xt,P,!0),Ft.deltaX=Ft.deltaY=0,j&&j(Ft))};Rt=Ft._dc=m.delayedCall(I||.25,(function(){Ft._vx.reset(),Ft._vy.reset(),Rt.pause(),O&&O(Ft)})).pause(),Ft.deltaX=Ft.deltaY=0,Ft._vx=h(0,50,!0),Ft._vy=h(0,50,!0),Ft.scrollX=Ht,Ft.scrollY=Gt,Ft.isDragging=Ft.isGesturing=Ft.isPressed=!1,A(this),Ft.enable=function(t){return Ft.isEnabled||(r(qt?Xt:E,"scroll",o),0<=s.indexOf("scroll")&&r(qt?Xt:E,"scroll",Tt,P,dt),0<=s.indexOf("wheel")&&r(E,"wheel",St,P,dt),(0<=s.indexOf("touch")&&x||0<=s.indexOf("pointer"))&&(r(E,S[0],Qt,P,dt),r(Xt,S[2],wt),r(Xt,S[3],wt),pt&&r(E,"click",gt,!1,!0),ht&&r(E,"click",Dt),at&&r(Xt,"gesturestart",Mt),ot&&r(Xt,"gestureend",Et),tt&&r(E,w+"enter",Ct),et&&r(E,w+"leave",Lt),it&&r(E,w+"move",At)),Ft.isEnabled=!0,t&&t.type&&Qt(t),lt&&lt(Ft)),Ft},Ft.disable=function(){Ft.isEnabled&&(L.filter((function(t){return t!==Ft&&n(t.target)})).length||a(qt?Xt:E,"scroll",o),Ft.isPressed&&(Ft._vx.reset(),Ft._vy.reset(),a(rt?E:Xt,S[1],xt,!0)),a(qt?Xt:E,"scroll",Tt,dt),a(E,"wheel",St,dt),a(E,S[0],Qt,dt),a(Xt,S[2],wt),a(Xt,S[3],wt),a(E,"click",gt,!0),a(E,"click",Dt),a(Xt,"gesturestart",Mt),a(Xt,"gestureend",Et),a(E,w+"enter",Ct),a(E,w+"leave",Lt),a(E,w+"move",At),Ft.isEnabled=Ft.isPressed=Ft.isDragging=!1,ct&&ct(Ft))},Ft.kill=Ft.revert=function(){Ft.disable();var t=L.indexOf(Ft);0<=t&&L.splice(t,1),T===Ft&&(T=0)},L.push(Ft),rt&&n(E)&&(T=Ft),Ft.enable(B)},function(t,e,i){e&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e)}(B,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),B);function B(t){this.init(t)}function U(){return Bt=1}function H(){return Bt=0}function G(t){return t}function j(t){return Math.round(1e5*t)/1e5||0}function V(){return"undefined"!=typeof window}function W(){return St||V()&&(St=window.gsap)&&St.registerPlugin&&St}function q(t){return!!~Rt.indexOf(t)}function X(t){return i(t,"getBoundingClientRect")||(q(t)?function(){return Ve.width=Ct.innerWidth,Ve.height=Ct.innerHeight,Ve}:function(){return Ee(t)})}function Y(t,e){var n=e.s,r=e.d2,a=e.d,o=e.a;return(n="scroll"+r)&&(o=i(t,n))?o()-X(t)()[a]:q(t)?(Dt[n]||Pt[n])-(Ct["inner"+r]||Dt["client"+r]||Pt["client"+r]):t[n]-t["offset"+r]}function Z(t,e){for(var i=0;i<Vt.length;i+=3)e&&!~e.indexOf(Vt[i+1])||t(Vt[i],Vt[i+1],Vt[i+2])}function J(t){return"string"==typeof t}function Q(t){return"function"==typeof t}function K(t){return"number"==typeof t}function $(t){return"object"==typeof t}function tt(t,e,i){return t&&t.progress(e?0:1)&&i&&t.pause()}function et(t,e){if(t.enabled){var i=e(t);i&&i.totalTime&&(t.callbackAnimation=i)}}function it(t){return Ct.getComputedStyle(t)}function nt(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}function rt(t,e){var i=e.d2;return t["offset"+i]||t["client"+i]||0}function at(t){var e,i=[],n=t.labels,r=t.duration();for(e in n)i.push(n[e]/r);return i}function ot(t){var e=St.utils.snap(t),i=Array.isArray(t)&&t.slice(0).sort((function(t,e){return t-e}));return i?function(t,n,r){var a;if(void 0===r&&(r=.001),!n)return e(t);if(0<n){for(t-=r,a=0;a<i.length;a++)if(i[a]>=t)return i[a];return i[a-1]}for(a=i.length,t+=r;a--;)if(i[a]<=t)return i[a];return i[0]}:function(i,n,r){void 0===r&&(r=.001);var a=e(i);return!n||Math.abs(a-i)<r||a-i<0==n<0?a:e(n<0?i-t:i+t)}}function st(t,e,i,n){return i.split(",").forEach((function(i){return t(e,i,n)}))}function lt(t,e,i,n,r){return t.addEventListener(e,i,{passive:!n,capture:!!r})}function ct(t,e,i,n){return t.removeEventListener(e,i,!!n)}function ht(t,e,i){return i&&i.wheelHandler&&t(e,"wheel",i)}function ut(t,e){if(J(t)){var i=t.indexOf("="),n=~i?(t.charAt(i-1)+1)*parseFloat(t.substr(i+1)):0;~i&&(t.indexOf("%")>i&&(n*=e/100),t=t.substr(0,i-1)),t=n+(t in Ae?Ae[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t}function dt(t,e,n,r,a,o,s,l){var c=a.startColor,h=a.endColor,u=a.fontSize,d=a.indent,p=a.fontWeight,f=Lt.createElement("div"),m=q(n)||"fixed"===i(n,"pinType"),g=-1!==t.indexOf("scroller"),v=m?Pt:n,y=-1!==t.indexOf("start"),_=y?c:h,b="border-color:"+_+";font-size:"+u+";color:"+_+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((g||l)&&m?"fixed;":"absolute;"),!g&&!l&&m||(b+=(r===k?de:pe)+":"+(o+parseFloat(d))+"px;"),s&&(b+="box-sizing:border-box;text-align:left;width:"+s.offsetWidth+"px;"),f._isStart=y,f.setAttribute("class","gsap-marker-"+t+(e?" marker-"+e:"")),f.style.cssText=b,f.innerText=e||0===e?t+"-"+e:t,v.children[0]?v.insertBefore(f,v.children[0]):v.appendChild(f),f._offset=f["offset"+r.op.d2],Ce(f,0,r,y),f}function pt(){return 34<se()-ce&&(ie=ie||requestAnimationFrame(Be))}function ft(){Yt&&Yt.isPressed&&!(Yt.startX>Pt.clientWidth)||(D.cache++,Yt?ie=ie||requestAnimationFrame(Be):Be(),ce||Oe("scrollStart"),ce=se())}function mt(){Qt=Ct.innerWidth,Jt=Ct.innerHeight}function gt(){D.cache++,Ft||Xt||Lt.fullscreenElement||Lt.webkitFullscreenElement||Zt&&Qt===Ct.innerWidth&&!(Math.abs(Ct.innerHeight-Jt)>.25*Ct.innerHeight)||Ot.restart(!0)}function vt(){return ct(qe,"scrollEnd",vt)||Ne(!0)}function yt(t){for(var e=0;e<Ie.length;e+=5)(!t||Ie[e+4]&&Ie[e+4].query===t)&&(Ie[e].style.cssText=Ie[e+1],Ie[e].getBBox&&Ie[e].setAttribute("transform",Ie[e+2]||""),Ie[e+3].uncache=1)}function _t(t,e){var i;for(Ht=0;Ht<Le.length;Ht++)!(i=Le[Ht])||e&&i._ctx!==e||(t?i.kill(1):i.revert(!0,!0));e&&yt(e),e||Oe("revert")}function bt(t,e){D.cache++,!e&&ne||D.forEach((function(t){return Q(t)&&t.cacheID++&&(t.rec=0)})),J(t)&&(Ct.history.scrollRestoration=te=t)}function xt(t,e,i,n){if(!t._gsap.swappedIn){for(var r,a=Ue.length,o=e.style,s=t.style;a--;)o[r=Ue[a]]=i[r];o.position="absolute"===i.position?"absolute":"relative","inline"===i.display&&(o.display="inline-block"),s[pe]=s[de]="auto",o.flexBasis=i.flexBasis||"auto",o.overflow="visible",o.boxSizing="border-box",o[fe]=rt(t,N)+Me,o[me]=rt(t,k)+Me,o[be]=s[xe]=s.top=s.left="0",je(n),s[fe]=s.maxWidth=i[fe],s[me]=s.maxHeight=i[me],s[be]=i[be],t.parentNode!==e&&(t.parentNode.insertBefore(e,t),e.appendChild(t)),t._gsap.swappedIn=!0}}function wt(t){for(var e=He.length,i=t.style,n=[],r=0;r<e;r++)n.push(He[r],i[He[r]]);return n.t=t,n}function Mt(t,e,i,n,r,a,o,s,c,h,u,d,p){Q(t)&&(t=t(s)),J(t)&&"max"===t.substr(0,3)&&(t=d+("="===t.charAt(4)?ut("0"+t.substr(3),i):0));var f,m,g,v=p?p.time():0;if(p&&p.seek(0),K(t))o&&Ce(o,i,n,!0);else{Q(e)&&(e=e(s));var y,_,b,x,w=(t||"0").split(" ");g=l(e)||Pt,(y=Ee(g)||{})&&(y.left||y.top)||"none"!==it(g).display||(x=g.style.display,g.style.display="block",y=Ee(g),x?g.style.display=x:g.style.removeProperty("display")),_=ut(w[0],y[n.d]),b=ut(w[1]||"0",i),t=y[n.p]-c[n.p]-h+_+r-b,o&&Ce(o,b,n,i-b<20||o._isStart&&20<b),i-=i-b}if(a){var M=t+i,E=a._isStart;f="scroll"+n.d2,Ce(a,M,n,E&&20<M||!E&&(u?Math.max(Pt[f],Dt[f]):a.parentNode[f])<=M+1),u&&(c=Ee(o),u&&(a.style[n.op.p]=c[n.op.p]-n.op.m-a._offset+Me))}return p&&g&&(f=Ee(g),p.seek(d),m=Ee(g),p._caScrollDist=f[n.p]-m[n.p],t=t/p._caScrollDist*d),p&&p.seek(v),p?t:Math.round(t)}function Et(t,e,i,n){if(t.parentNode!==e){var r,a,o=t.style;if(e===Pt){for(r in t._stOrig=o.cssText,a=it(t))+r||We.test(r)||!a[r]||"string"!=typeof o[r]||"0"===r||(o[r]=a[r]);o.top=i,o.left=n}else o.cssText=t._stOrig;St.core.getCache(t).uncache=1,e.appendChild(t)}}function Tt(t,e){function i(e,s,l,c,h){var u=i.tween,d=s.onComplete;return l=l||a(),h=c&&h||0,c=c||e-l,u&&u.kill(),n=Math.round(l),s[o]=e,(s.modifiers={})[o]=function(t){return(t=Math.round(a()))!==n&&t!==r&&3<Math.abs(t-n)&&3<Math.abs(t-r)?(u.kill(),i.tween=0):t=l+c*u.ratio+h*u.ratio*u.ratio,r=n,n=Math.round(t)},s.onUpdate=function(){D.cache++,Be()},s.onComplete=function(){i.tween=0,d&&d.call(u)},u=i.tween=St.to(t,s)}var n,r,a=c(t,e),o="_scroll"+e.p2;return(t[o]=a).wheelHandler=function(){return i.tween&&i.tween.kill()&&(i.tween=0)},lt(t,"wheel",a.wheelHandler),i}F.version="3.11.4",F.create=function(t){return new F(t)},F.register=f,F.getAll=function(){return L.slice()},F.getById=function(t){return L.filter((function(e){return e.vars.id===t}))[0]},e()&&m.registerPlugin(F);var St,At,Ct,Lt,Dt,Pt,Rt,Ot,It,zt,Nt,kt,Ft,Bt,Ut,Ht,Gt,jt,Vt,Wt,qt,Xt,Yt,Zt,Jt,Qt,Kt,$t,te,ee,ie,ne,re,ae,oe=1,se=Date.now,le=se(),ce=0,he=0,ue=Math.abs,de="right",pe="bottom",fe="width",me="height",ge="Right",ve="Left",ye="Top",_e="Bottom",be="padding",xe="margin",we="Width",Me="px",Ee=function(t,e){var i=e&&"matrix(1, 0, 0, 1, 0, 0)"!==it(t)[Ut]&&St.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=t.getBoundingClientRect();return i&&i.progress(0).kill(),n},Te={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Se={toggleActions:"play",anticipatePin:0},Ae={top:0,left:0,center:.5,bottom:1,right:1},Ce=function(t,e,i,n){var r={display:"block"},a=i[n?"os2":"p2"],o=i[n?"p2":"os2"];t._isFlipped=n,r[i.a+"Percent"]=n?-100:0,r[i.a]=n?"1px":0,r["border"+a+we]=1,r["border"+o+we]=0,r[i.p]=e+"px",St.set(t,r)},Le=[],De={},Pe={},Re=[],Oe=function(t){return Pe[t]&&Pe[t].map((function(t){return t()}))||Re},Ie=[],ze=0,Ne=function(t,e){if(!ce||t){ne=qe.isRefreshing=!0,D.forEach((function(t){return Q(t)&&t.cacheID++&&(t.rec=t())}));var i=Oe("refreshInit");Wt&&qe.sort(),e||_t(),D.forEach((function(t){Q(t)&&(t.smooth&&(t.target.style.scrollBehavior="auto"),t(0))})),Le.slice(0).forEach((function(t){return t.refresh()})),Le.forEach((function(t,e){if(t._subPinOffset&&t.pin){var i=t.vars.horizontal?"offsetWidth":"offsetHeight",n=t.pin[i];t.revert(!0,1),t.adjustPinSpacing(t.pin[i]-n),t.revert(!1,1)}})),Le.forEach((function(t){return"max"===t.vars.end&&t.setPositions(t.start,Math.max(t.start+1,Y(t.scroller,t._dir)))})),i.forEach((function(t){return t&&t.render&&t.render(-1)})),D.forEach((function(t){Q(t)&&(t.smooth&&requestAnimationFrame((function(){return t.target.style.scrollBehavior="smooth"})),t.rec&&t(t.rec))})),bt(te,1),Ot.pause(),ze++,Be(2),Le.forEach((function(t){return Q(t.vars.onRefresh)&&t.vars.onRefresh(t)})),ne=qe.isRefreshing=!1,Oe("refresh")}else lt(qe,"scrollEnd",vt)},ke=0,Fe=1,Be=function(t){if(!ne||2===t){qe.isUpdating=!0,ae&&ae.update(0);var e=Le.length,i=se(),n=50<=i-le,r=e&&Le[0].scroll();if(Fe=r<ke?-1:1,ke=r,n&&(ce&&!Bt&&200<i-ce&&(ce=0,Oe("scrollEnd")),Nt=le,le=i),Fe<0){for(Ht=e;0<Ht--;)Le[Ht]&&Le[Ht].update(0,n);Fe=1}else for(Ht=0;Ht<e;Ht++)Le[Ht]&&Le[Ht].update(0,n);qe.isUpdating=!1}ie=0},Ue=["left","top",pe,de,xe+_e,xe+ge,xe+ye,xe+ve,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],He=Ue.concat([fe,me,"boxSizing","max"+we,"maxHeight","position",xe,be,be+ye,be+ge,be+_e,be+ve]),Ge=/([A-Z])/g,je=function(t){if(t){var e,i,n=t.t.style,r=t.length,a=0;for((t.t._gsap||St.core.getCache(t.t)).uncache=1;a<r;a+=2)i=t[a+1],e=t[a],i?n[e]=i:n[e]&&n.removeProperty(e.replace(Ge,"-$1").toLowerCase())}},Ve={left:0,top:0},We=/(webkit|moz|length|cssText|inset)/i,qe=(Xe.prototype.init=function(t,e){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),he){var n,r,a,o,s,h,u,d,p,f,m,g,v,y,_,b,x,w,M,E,T,S,A,C,L,R,O,I,z,F,B,U,H,V,W,Z,st,ht,pt,mt=(t=nt(J(t)||K(t)||t.nodeType?{trigger:t}:t,Se)).onUpdate,yt=t.toggleClass,_t=t.id,bt=t.onToggle,At=t.onRefresh,Rt=t.scrub,Ot=t.trigger,kt=t.pin,Ut=t.pinSpacing,Gt=t.invalidateOnRefresh,jt=t.anticipatePin,Vt=t.onScrubComplete,Xt=t.onSnapComplete,Yt=t.once,Zt=t.snap,Jt=t.pinReparent,Qt=t.pinSpacer,Kt=t.containerAnimation,te=t.fastScrollEnd,ie=t.preventOverlaps,le=t.horizontal||t.containerAnimation&&!1!==t.horizontal?N:k,de=!Rt&&0!==Rt,pe=l(t.scroller||Ct),Ae=St.core.getCache(pe),Ce=q(pe),Pe="fixed"===("pinType"in t?t.pinType:i(pe,"pinType")||Ce&&"fixed"),Re=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],Oe=de&&t.toggleActions.split(" "),Ie="markers"in t?t.markers:Se.markers,ke=Ce?0:parseFloat(it(pe)["border"+le.p2+we])||0,Be=this,Ue=t.onRefreshInit&&function(){return t.onRefreshInit(Be)},He=function(t,e,n){var r=n.d,a=n.d2,o=n.a;return(o=i(t,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(e?Ct["inner"+a]:t["client"+a])||0}}(pe,Ce,le),Ge=function(t,e){return!e||~P.indexOf(t)?X(t):function(){return Ve}}(pe,Ce),We=0,qe=0,Ye=c(pe,le);if($t(Be),Be._dir=le,jt*=45,Be.scroller=pe,Be.scroll=Kt?Kt.time.bind(Kt):Ye,o=Ye(),Be.vars=t,e=e||t.animation,"refreshPriority"in t&&(Wt=1,-9999===t.refreshPriority&&(ae=Be)),Ae.tweenScroll=Ae.tweenScroll||{top:Tt(pe,k),left:Tt(pe,N)},Be.tweenTo=n=Ae.tweenScroll[le.p],Be.scrubDuration=function(t){(U=K(t)&&t)?B?B.duration(t):B=St.to(e,{ease:"expo",totalProgress:"+=0.001",duration:U,paused:!0,onComplete:function(){return Vt&&Vt(Be)}}):(B&&B.progress(1).kill(),B=0)},e&&(e.vars.lazy=!1,e._initted||!1!==e.vars.immediateRender&&!1!==t.immediateRender&&e.duration()&&e.render(0,!0,!0),Be.animation=e.pause(),(e.scrollTrigger=Be).scrubDuration(Rt),z=0,_t=_t||e.vars.id),Le.push(Be),Zt&&($(Zt)&&!Zt.push||(Zt={snapTo:Zt}),"scrollBehavior"in Pt.style&&St.set(Ce?[Pt,Dt]:pe,{scrollBehavior:"auto"}),D.forEach((function(t){return Q(t)&&t.target===(Ce?Lt.scrollingElement||Dt:pe)&&(t.smooth=!1)})),a=Q(Zt.snapTo)?Zt.snapTo:"labels"===Zt.snapTo?function(t){return function(e){return St.utils.snap(at(t),e)}}(e):"labelsDirectional"===Zt.snapTo?function(t){return function(e,i){return ot(at(t))(e,i.direction)}}(e):!1!==Zt.directional?function(t,e){return ot(Zt.snapTo)(t,se()-qe<500?0:e.direction)}:St.utils.snap(Zt.snapTo),H=$(H=Zt.duration||{min:.1,max:2})?zt(H.min,H.max):zt(H,H),V=St.delayedCall(Zt.delay||U/2||.1,(function(){var t=Ye(),i=se()-qe<500,r=n.tween;if(!(i||Math.abs(Be.getVelocity())<10)||r||Bt||We===t)Be.isActive&&We!==t&&V.restart(!0);else{var o=(t-h)/v,s=e&&!de?e.totalProgress():o,l=i?0:(s-F)/(se()-Nt)*1e3||0,c=St.utils.clamp(-o,1-o,ue(l/2)*l/.185),d=o+(!1===Zt.inertia?0:c),p=zt(0,1,a(d,Be)),f=Math.round(h+p*v),m=Zt.onStart,g=Zt.onInterrupt,y=Zt.onComplete;if(t<=u&&h<=t&&f!==t){if(r&&!r._initted&&r.data<=ue(f-t))return;!1===Zt.inertia&&(c=p-o),n(f,{duration:H(ue(.185*Math.max(ue(d-s),ue(p-s))/l/.05||0)),ease:Zt.ease||"power3",data:ue(f-t),onInterrupt:function(){return V.restart(!0)&&g&&g(Be)},onComplete:function(){Be.update(),We=Ye(),z=F=e&&!de?e.totalProgress():Be.progress,Xt&&Xt(Be),y&&y(Be)}},t,c*v,f-t-c*v),m&&m(Be,n.tween)}}})).pause()),_t&&(De[_t]=Be),pt=(pt=(Ot=Be.trigger=l(Ot||kt))&&Ot._gsap&&Ot._gsap.stRevert)&&pt(Be),kt=!0===kt?Ot:l(kt),J(yt)&&(yt={targets:Ot,className:yt}),kt&&(!1===Ut||Ut===xe||(Ut=!(!Ut&&kt.parentNode&&kt.parentNode.style&&"flex"===it(kt.parentNode).display)&&be),Be.pin=kt,(r=St.core.getCache(kt)).spacer?y=r.pinState:(Qt&&((Qt=l(Qt))&&!Qt.nodeType&&(Qt=Qt.current||Qt.nativeElement),r.spacerIsNative=!!Qt,Qt&&(r.spacerState=wt(Qt))),r.spacer=x=Qt||Lt.createElement("div"),x.classList.add("pin-spacer"),_t&&x.classList.add("pin-spacer-"+_t),r.pinState=y=wt(kt)),!1!==t.force3D&&St.set(kt,{force3D:!0}),Be.spacer=x=r.spacer,I=it(kt),A=I[Ut+le.os2],M=St.getProperty(kt),E=St.quickSetter(kt,le.a,Me),xt(kt,x,I),b=wt(kt)),Ie){g=$(Ie)?nt(Ie,Te):Te,f=dt("scroller-start",_t,pe,le,g,0),m=dt("scroller-end",_t,pe,le,g,0,f),w=f["offset"+le.op.d2];var Ze=l(i(pe,"content")||pe);d=this.markerStart=dt("start",_t,Ze,le,g,w,0,Kt),p=this.markerEnd=dt("end",_t,Ze,le,g,w,0,Kt),Kt&&(ht=St.quickSetter([d,p],le.a,Me)),Pe||P.length&&!0===i(pe,"fixedMarkers")||(function(t){var e=it(t).position;t.style.position="absolute"===e||"fixed"===e?e:"relative"}(Ce?Pt:pe),St.set([f,m],{force3D:!0}),L=St.quickSetter(f,le.a,Me),O=St.quickSetter(m,le.a,Me))}if(Kt){var Je=Kt.vars.onUpdate,Qe=Kt.vars.onUpdateParams;Kt.eventCallback("onUpdate",(function(){Be.update(0,0,1),Je&&Je.apply(Qe||[])}))}Be.previous=function(){return Le[Le.indexOf(Be)-1]},Be.next=function(){return Le[Le.indexOf(Be)+1]},Be.revert=function(t,i){if(!i)return Be.kill(!0);var n=!1!==t||!Be.enabled,r=Ft;n!==Be.isReverted&&(n&&(Z=Math.max(Ye(),Be.scroll.rec||0),W=Be.progress,st=e&&e.progress()),d&&[d,p,f,m].forEach((function(t){return t.style.display=n?"none":"block"})),n&&(Ft=1,Be.update(n)),!kt||Jt&&Be.isActive||(n?function(t,e,i){je(i);var n=t._gsap;if(n.spacerIsNative)je(n.spacerState);else if(t._gsap.swappedIn){var r=e.parentNode;r&&(r.insertBefore(t,e),r.removeChild(e))}t._gsap.swappedIn=!1}(kt,x,y):xt(kt,x,it(kt),C)),n||Be.update(n),Ft=r,Be.isReverted=n)},Be.refresh=function(i,r){if(!Ft&&Be.enabled||r)if(kt&&i&&ce)lt(Xe,"scrollEnd",vt);else{!ne&&Ue&&Ue(Be),Ft=1,qe=se(),n.tween&&(n.tween.kill(),n.tween=0),B&&B.pause(),Gt&&e&&e.revert({kill:!1}).invalidate(),Be.isReverted||Be.revert(!0,!0),Be._subPinOffset=!1;for(var a,g,w,E,A,L,D,P,O,I,z,F=He(),U=Ge(),H=Kt?Kt.duration():Y(pe,le),G=0,j=0,q=t.end,X=t.endTrigger||Ot,$=t.start||(0!==t.start&&Ot?kt?"0 0":"0 100%":0),tt=Be.pinnedContainer=t.pinnedContainer&&l(t.pinnedContainer),et=Ot&&Math.max(0,Le.indexOf(Be))||0,nt=et;nt--;)(L=Le[nt]).end||L.refresh(0,1)||(Ft=1),!(D=L.pin)||D!==Ot&&D!==kt||L.isReverted||((I=I||[]).unshift(L),L.revert(!0,!0)),L!==Le[nt]&&(et--,nt--);for(Q($)&&($=$(Be)),h=Mt($,Ot,F,le,Ye(),d,f,Be,U,ke,Pe,H,Kt)||(kt?-.001:0),Q(q)&&(q=q(Be)),J(q)&&!q.indexOf("+=")&&(~q.indexOf(" ")?q=(J($)?$.split(" ")[0]:"")+q:(G=ut(q.substr(2),F),q=J($)?$:h+G,X=Ot)),u=Math.max(h,Mt(q||(X?"100% 0":H),X,F,le,Ye()+G,p,m,Be,U,ke,Pe,H,Kt))||-.001,v=u-h||(h-=.01)&&.001,G=0,nt=et;nt--;)(D=(L=Le[nt]).pin)&&L.start-L._pinPush<=h&&!Kt&&0<L.end&&(a=L.end-L.start,(D===Ot&&L.start-L._pinPush<h||D===tt)&&!K($)&&(G+=a*(1-L.progress)),D===kt&&(j+=a));if(h+=G,u+=G,Be._pinPush=j,d&&G&&((a={})[le.a]="+="+G,tt&&(a[le.p]="-="+Ye()),St.set([d,p],a)),kt)a=it(kt),E=le===k,w=Ye(),T=parseFloat(M(le.a))+j,!H&&1<u&&((z={style:z=(Ce?Lt.scrollingElement||Dt:pe).style,value:z["overflow"+le.a.toUpperCase()]})["overflow"+le.a.toUpperCase()]="scroll"),xt(kt,x,a),b=wt(kt),g=Ee(kt,!0),P=Pe&&c(pe,E?N:k)(),Ut&&((C=[Ut+le.os2,v+j+Me]).t=x,(nt=Ut===be?rt(kt,le)+v+j:0)&&C.push(le.d,nt+Me),je(C),tt&&Le.forEach((function(t){t.pin===tt&&!1!==t.vars.pinSpacing&&(t._subPinOffset=!0)})),Pe&&Ye(Z)),Pe&&((A={top:g.top+(E?w-h:P)+Me,left:g.left+(E?P:w-h)+Me,boxSizing:"border-box",position:"fixed"})[fe]=A.maxWidth=Math.ceil(g.width)+Me,A[me]=A.maxHeight=Math.ceil(g.height)+Me,A[xe]=A[xe+ye]=A[xe+ge]=A[xe+_e]=A[xe+ve]="0",A[be]=a[be],A[be+ye]=a[be+ye],A[be+ge]=a[be+ge],A[be+_e]=a[be+_e],A[be+ve]=a[be+ve],_=function(t,e,i){for(var n,r=[],a=t.length,o=i?8:0;o<a;o+=2)n=t[o],r.push(n,n in e?e[n]:t[o+1]);return r.t=t.t,r}(y,A,Jt),ne&&Ye(0)),e?(O=e._initted,qt(1),e.render(e.duration(),!0,!0),S=M(le.a)-T+v+j,R=1<Math.abs(v-S),Pe&&R&&_.splice(_.length-2,2),e.render(0,!0,!0),O||e.invalidate(!0),e.parent||e.totalTime(e.totalTime()),qt(0)):S=v,z&&(z.value?z.style["overflow"+le.a.toUpperCase()]=z.value:z.style.removeProperty("overflow-"+le.a));else if(Ot&&Ye()&&!Kt)for(g=Ot.parentNode;g&&g!==Pt;)g._pinOffset&&(h-=g._pinOffset,u-=g._pinOffset),g=g.parentNode;I&&I.forEach((function(t){return t.revert(!1,!0)})),Be.start=h,Be.end=u,o=s=ne?Z:Ye(),Kt||ne||(o<Z&&Ye(Z),Be.scroll.rec=0),Be.revert(!1,!0),V&&(We=-1,Be.isActive&&Ye(h+v*W),V.restart(!0)),Ft=0,e&&de&&(e._initted||st)&&e.progress()!==st&&e.progress(st,!0).render(e.time(),!0,!0),W===Be.progress&&!Kt||(e&&!de&&e.totalProgress(W,!0),Be.progress=(o-h)/v===W?0:W),kt&&Ut&&(x._pinOffset=Math.round(Be.progress*S)),At&&!ne&&At(Be)}},Be.getVelocity=function(){return(Ye()-s)/(se()-Nt)*1e3||0},Be.endAnimation=function(){tt(Be.callbackAnimation),e&&(B?B.progress(1):e.paused()?de||tt(e,Be.direction<0,1):tt(e,e.reversed()))},Be.labelToScroll=function(t){return e&&e.labels&&(h||Be.refresh()||h)+e.labels[t]/e.duration()*v||0},Be.getTrailing=function(t){var e=Le.indexOf(Be),i=0<Be.direction?Le.slice(0,e).reverse():Le.slice(e+1);return(J(t)?i.filter((function(e){return e.vars.preventOverlaps===t})):i).filter((function(t){return 0<Be.direction?t.end<=h:t.start>=u}))},Be.update=function(t,i,r){if(!Kt||r||t){var a,l,c,d,p,m,g,y=ne?Z:Be.scroll(),w=t?0:(y-h)/v,M=w<0?0:1<w?1:w||0,C=Be.progress;if(i&&(s=o,o=Kt?Ye():y,Zt&&(F=z,z=e&&!de?e.totalProgress():M)),jt&&!M&&kt&&!Ft&&!oe&&ce&&h<y+(y-s)/(se()-Nt)*jt&&(M=1e-4),M!==C&&Be.enabled){if(d=(p=(a=Be.isActive=!!M&&M<1)!=(!!C&&C<1))||!!M!=!!C,Be.direction=C<M?1:-1,Be.progress=M,d&&!Ft&&(l=M&&!C?0:1===M?1:1===C?2:3,de&&(c=!p&&"none"!==Oe[l+1]&&Oe[l+1]||Oe[l],g=e&&("complete"===c||"reset"===c||c in e))),ie&&(p||g)&&(g||Rt||!e)&&(Q(ie)?ie(Be):Be.getTrailing(ie).forEach((function(t){return t.endAnimation()}))),de||(!B||Ft||oe?e&&e.totalProgress(M,!!Ft):(B._dp._time-B._start!==B._time&&B.render(B._dp._time-B._start),B.resetTo?B.resetTo("totalProgress",M,e._tTime/e._tDur):(B.vars.totalProgress=M,B.invalidate().restart()))),kt)if(t&&Ut&&(x.style[Ut+le.os2]=A),Pe){if(d){if(m=!t&&C<M&&y<u+1&&y+1>=Y(pe,le),Jt)if(t||!a&&!m)Et(kt,x);else{var D=Ee(kt,!0),P=y-h;Et(kt,Pt,D.top+(le===k?P:0)+Me,D.left+(le===k?0:P)+Me)}je(a||m?_:b),R&&M<1&&a||E(T+(1!==M||m?0:S))}}else E(j(T+S*M));!Zt||n.tween||Ft||oe||V.restart(!0),yt&&(p||Yt&&M&&(M<1||!ee))&&It(yt.targets).forEach((function(t){return t.classList[a||Yt?"add":"remove"](yt.className)})),!mt||de||t||mt(Be),d&&!Ft?(de&&(g&&("complete"===c?e.pause().totalProgress(1):"reset"===c?e.restart(!0).pause():"restart"===c?e.restart(!0):e[c]()),mt&&mt(Be)),!p&&ee||(bt&&p&&et(Be,bt),Re[l]&&et(Be,Re[l]),Yt&&(1===M?Be.kill(!1,1):Re[l]=0),p||Re[l=1===M?1:3]&&et(Be,Re[l])),te&&!a&&Math.abs(Be.getVelocity())>(K(te)?te:2500)&&(tt(Be.callbackAnimation),B?B.progress(1):tt(e,"reverse"===c?1:!M,1))):de&&mt&&!Ft&&mt(Be)}if(O){var I=Kt?y/Kt.duration()*(Kt._caScrollDist||0):y;L(I+(f._isFlipped?1:0)),O(I)}ht&&ht(-y/Kt.duration()*(Kt._caScrollDist||0))}},Be.enable=function(t,e){Be.enabled||(Be.enabled=!0,lt(pe,"resize",gt),lt(Ce?Lt:pe,"scroll",ft),Ue&&lt(Xe,"refreshInit",Ue),!1!==t&&(Be.progress=W=0,o=s=We=Ye()),!1!==e&&Be.refresh())},Be.getTween=function(t){return t&&n?n.tween:B},Be.setPositions=function(t,e){kt&&(T+=t-h,S+=e-t-v,Ut===be&&Be.adjustPinSpacing(e-t-v)),Be.start=h=t,Be.end=u=e,v=e-t,Be.update()},Be.adjustPinSpacing=function(t){if(C){var e=C.indexOf(le.d)+1;C[e]=parseFloat(C[e])+t+Me,C[1]=parseFloat(C[1])+t+Me,je(C)}},Be.disable=function(t,e){if(Be.enabled&&(!1!==t&&Be.revert(!0,!0),Be.enabled=Be.isActive=!1,e||B&&B.pause(),Z=0,r&&(r.uncache=1),Ue&&ct(Xe,"refreshInit",Ue),V&&(V.pause(),n.tween&&n.tween.kill()&&(n.tween=0)),!Ce)){for(var i=Le.length;i--;)if(Le[i].scroller===pe&&Le[i]!==Be)return;ct(pe,"resize",gt),ct(pe,"scroll",ft)}},Be.kill=function(i,n){Be.disable(i,n),B&&!n&&B.kill(),_t&&delete De[_t];var a=Le.indexOf(Be);0<=a&&Le.splice(a,1),a===Ht&&0<Fe&&Ht--,a=0,Le.forEach((function(t){return t.scroller===Be.scroller&&(a=1)})),a||ne||(Be.scroll.rec=0),e&&(e.scrollTrigger=null,i&&e.revert({kill:!1}),n||e.kill()),d&&[d,p,f,m].forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),ae===Be&&(ae=0),kt&&(r&&(r.uncache=1),a=0,Le.forEach((function(t){return t.pin===kt&&a++})),a||(r.spacer=0)),t.onKill&&t.onKill(Be)},Be.enable(!1,!1),pt&&pt(Be),e&&e.add&&!v?St.delayedCall(.01,(function(){return h||u||Be.refresh()}))&&(v=.01)&&(h=u=0):Be.refresh(),kt&&function(){if(re!==ze){var t=re=ze;requestAnimationFrame((function(){return t===ze&&Ne(!0)}))}}()}else this.update=this.refresh=this.kill=G},Xe.register=function(t){return At||(St=t||W(),V()&&window.document&&Xe.enable(),At=he),At},Xe.defaults=function(t){if(t)for(var e in t)Se[e]=t[e];return Se},Xe.disable=function(t,e){he=0,Le.forEach((function(i){return i[e?"kill":"disable"](t)})),ct(Ct,"wheel",ft),ct(Lt,"scroll",ft),clearInterval(kt),ct(Lt,"touchcancel",G),ct(Pt,"touchstart",G),st(ct,Lt,"pointerdown,touchstart,mousedown",U),st(ct,Lt,"pointerup,touchend,mouseup",H),Ot.kill(),Z(ct);for(var i=0;i<D.length;i+=3)ht(ct,D[i],D[i+1]),ht(ct,D[i],D[i+2])},Xe.enable=function(){if(Ct=window,Lt=document,Dt=Lt.documentElement,Pt=Lt.body,St&&(It=St.utils.toArray,zt=St.utils.clamp,$t=St.core.context||G,qt=St.core.suppressOverwrites||G,te=Ct.history.scrollRestoration||"auto",St.core.globals("ScrollTrigger",Xe),Pt)){he=1,F.register(St),Xe.isTouch=F.isTouch,Kt=F.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),lt(Ct,"wheel",ft),Rt=[Ct,Lt,Dt,Pt],St.matchMedia?(Xe.matchMedia=function(t){var e,i=St.matchMedia();for(e in t)i.add(e,t[e]);return i},St.addEventListener("matchMediaInit",(function(){return _t()})),St.addEventListener("matchMediaRevert",(function(){return yt()})),St.addEventListener("matchMedia",(function(){Ne(0,1),Oe("matchMedia")})),St.matchMedia("(orientation: portrait)",(function(){return mt(),mt}))):console.warn("Requires GSAP 3.11.0 or later"),mt(),lt(Lt,"scroll",ft);var t,e,i=Pt.style,n=i.borderTopStyle,r=St.core.Animation.prototype;for(r.revert||Object.defineProperty(r,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",t=Ee(Pt),k.m=Math.round(t.top+k.sc())||0,N.m=Math.round(t.left+N.sc())||0,n?i.borderTopStyle=n:i.removeProperty("border-top-style"),kt=setInterval(pt,250),St.delayedCall(.5,(function(){return oe=0})),lt(Lt,"touchcancel",G),lt(Pt,"touchstart",G),st(lt,Lt,"pointerdown,touchstart,mousedown",U),st(lt,Lt,"pointerup,touchend,mouseup",H),Ut=St.utils.checkPrefix("transform"),He.push(Ut),At=se(),Ot=St.delayedCall(.2,Ne).pause(),Vt=[Lt,"visibilitychange",function(){var t=Ct.innerWidth,e=Ct.innerHeight;Lt.hidden?(Gt=t,jt=e):Gt===t&&jt===e||gt()},Lt,"DOMContentLoaded",Ne,Ct,"load",Ne,Ct,"resize",gt],Z(lt),Le.forEach((function(t){return t.enable(0,1)})),e=0;e<D.length;e+=3)ht(ct,D[e],D[e+1]),ht(ct,D[e],D[e+2])}},Xe.config=function(t){"limitCallbacks"in t&&(ee=!!t.limitCallbacks);var e=t.syncInterval;e&&clearInterval(kt)||(kt=e)&&setInterval(pt,e),"ignoreMobileResize"in t&&(Zt=1===Xe.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(Z(ct)||Z(lt,t.autoRefreshEvents||"none"),Xt=-1===(t.autoRefreshEvents+"").indexOf("resize"))},Xe.scrollerProxy=function(t,e){var i=l(t),n=D.indexOf(i),r=q(i);~n&&D.splice(n,r?6:2),e&&(r?P.unshift(Ct,e,Pt,e,Dt,e):P.unshift(i,e))},Xe.clearMatchMedia=function(t){Le.forEach((function(e){return e._ctx&&e._ctx.query===t&&e._ctx.kill(!0,!0)}))},Xe.isInViewport=function(t,e,i){var n=(J(t)?l(t):t).getBoundingClientRect(),r=n[i?fe:me]*e||0;return i?0<n.right-r&&n.left+r<Ct.innerWidth:0<n.bottom-r&&n.top+r<Ct.innerHeight},Xe.positionInViewport=function(t,e,i){J(t)&&(t=l(t));var n=t.getBoundingClientRect(),r=n[i?fe:me],a=null==e?r/2:e in Ae?Ae[e]*r:~e.indexOf("%")?parseFloat(e)*r/100:parseFloat(e)||0;return i?(n.left+a)/Ct.innerWidth:(n.top+a)/Ct.innerHeight},Xe.killAll=function(t){if(Le.slice(0).forEach((function(t){return"ScrollSmoother"!==t.vars.id&&t.kill()})),!0!==t){var e=Pe.killAll||[];Pe={},e.forEach((function(t){return t()}))}},Xe);function Xe(t,e){At||Xe.register(St)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(t,e)}function Ye(t,e,i,n){return n<e?t(n):e<0&&t(0),n<i?(n-e)/(i-e):i<0?e/(e-i):1}function Ze(t,e){!0===e?t.style.removeProperty("touch-action"):t.style.touchAction=!0===e?"auto":e?"pan-"+e+(F.isTouch?" pinch-zoom":""):"none",t===Dt&&Ze(Pt,e)}function Je(t){var e,i=t.event,n=t.target,r=t.axis,a=(i.changedTouches?i.changedTouches[0]:i).target,o=a._gsap||St.core.getCache(a),s=se();if(!o._isScrollT||2e3<s-o._isScrollT){for(;a&&a!==Pt&&(a.scrollHeight<=a.clientHeight&&a.scrollWidth<=a.clientWidth||!$e[(e=it(a)).overflowY]&&!$e[e.overflowX]);)a=a.parentNode;o._isScroll=a&&a!==n&&!q(a)&&($e[(e=it(a)).overflowY]||$e[e.overflowX]),o._isScrollT=s}!o._isScroll&&"x"!==r||(i.stopPropagation(),i._gsapAllow=!0)}function Qe(t,e,i,n){return F.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:e,onWheel:n=n&&Je,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&lt(Lt,F.eventTypes[0],ei,!1,!0)},onDisable:function(){return ct(Lt,F.eventTypes[0],ei,!0)}})}qe.version="3.11.4",qe.saveStyles=function(t){return t?It(t).forEach((function(t){if(t&&t.style){var e=Ie.indexOf(t);0<=e&&Ie.splice(e,5),Ie.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),St.core.getCache(t),$t())}})):Ie},qe.revert=function(t,e){return _t(!t,e)},qe.create=function(t,e){return new qe(t,e)},qe.refresh=function(t){return t?gt():(At||qe.register())&&Ne(!0)},qe.update=function(t){return++D.cache&&Be(!0===t?2:0)},qe.clearScrollMemory=bt,qe.maxScroll=function(t,e){return Y(t,e?N:k)},qe.getScrollFunc=function(t,e){return c(l(t),e?N:k)},qe.getById=function(t){return De[t]},qe.getAll=function(){return Le.filter((function(t){return"ScrollSmoother"!==t.vars.id}))},qe.isScrolling=function(){return!!ce},qe.snapDirectional=ot,qe.addEventListener=function(t,e){var i=Pe[t]||(Pe[t]=[]);~i.indexOf(e)||i.push(e)},qe.removeEventListener=function(t,e){var i=Pe[t],n=i&&i.indexOf(e);0<=n&&i.splice(n,1)},qe.batch=function(t,e){function i(t,e){var i=[],n=[],r=St.delayedCall(o,(function(){e(i,n),i=[],n=[]})).pause();return function(t){i.length||r.restart(!0),i.push(t.trigger),n.push(t),s<=i.length&&r.progress(1)}}var n,r=[],a={},o=e.interval||.016,s=e.batchMax||1e9;for(n in e)a[n]="on"===n.substr(0,2)&&Q(e[n])&&"onRefreshInit"!==n?i(0,e[n]):e[n];return Q(s)&&(s=s(),lt(qe,"refresh",(function(){return s=e.batchMax()}))),It(t).forEach((function(t){var e={};for(n in a)e[n]=a[n];e.trigger=t,r.push(qe.create(e))})),r};var Ke,$e={auto:1,scroll:1},ti=/(input|label|select|textarea)/i,ei=function(t){var e=ti.test(t.target.tagName);(e||Ke)&&(t._gsapAllow=!0,Ke=e)};qe.sort=function(t){return Le.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+t.start-(e.start+-1e6*(e.vars.refreshPriority||0))})},qe.observe=function(t){return new F(t)},qe.normalizeScroll=function(t){if(void 0===t)return Yt;if(!0===t&&Yt)return Yt.enable();if(!1===t)return Yt&&Yt.kill();var e=t instanceof F?t:function(t){function e(){return h=!1}function i(){o=Y(y,k),P=zt(Kt?1:0,o),m&&(L=zt(0,Y(y,N))),s=ze}function n(){x._gsap.y=j(parseFloat(x._gsap.y)+w.offset)+"px",x.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(x._gsap.y)+", 0, 1)",w.offset=w.cacheID=0}function r(){i(),u.isActive()&&u.vars.scrollY>o&&(w()>o?u.progress(1)&&w(o):u.resetTo("scrollY",o))}$(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var a,o,s,h,u,d,p,f,m=t.normalizeScrollX,g=t.momentum,v=t.allowNestedScroll,y=l(t.target)||Dt,_=St.core.globals().ScrollSmoother,b=_&&_.get(),x=Kt&&(t.content&&l(t.content)||b&&!1!==t.content&&!b.smooth()&&b.content()),w=c(y,k),M=c(y,N),E=1,T=(F.isTouch&&Ct.visualViewport?Ct.visualViewport.scale*Ct.visualViewport.width:Ct.outerWidth)/Ct.innerWidth,S=0,A=Q(g)?function(){return g(a)}:function(){return g||2.8},C=Qe(y,t.type,!0,v),L=G,P=G;return x&&St.set(x,{y:"+=0"}),t.ignoreCheck=function(t){return Kt&&"touchmove"===t.type&&function(){if(h){requestAnimationFrame(e);var t=j(a.deltaY/2),i=P(w.v-t);if(x&&i!==w.v+w.offset){w.offset=i-w.v;var r=j((parseFloat(x&&x._gsap.y)||0)-w.offset);x.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+r+", 0, 1)",x._gsap.y=r+"px",w.cacheID=D.cache,Be()}return!0}w.offset&&n(),h=!0}()||1.05<E&&"touchstart"!==t.type||a.isGesturing||t.touches&&1<t.touches.length},t.onPress=function(){var t=E;E=j((Ct.visualViewport&&Ct.visualViewport.scale||1)/T),u.pause(),t!==E&&Ze(y,1.01<E||!m&&"x"),d=M(),p=w(),i(),s=ze},t.onRelease=t.onGestureStart=function(t,e){if(w.offset&&n(),e){D.cache++;var i,a,s=A();m&&(a=(i=M())+.05*s*-t.velocityX/.227,s*=Ye(M,i,a,Y(y,N)),u.vars.scrollX=L(a)),a=(i=w())+.05*s*-t.velocityY/.227,s*=Ye(w,i,a,Y(y,k)),u.vars.scrollY=P(a),u.invalidate().duration(s).play(.01),(Kt&&u.vars.scrollY>=o||o-1<=i)&&St.to({},{onUpdate:r,duration:s})}else f.restart(!0)},t.onWheel=function(){u._ts&&u.pause(),1e3<se()-S&&(s=0,S=se())},t.onChange=function(t,e,r,a,o){if(ze!==s&&i(),e&&m&&M(L(a[2]===e?d+(t.startX-t.x):M()+e-a[1])),r){w.offset&&n();var l=o[2]===r,c=l?p+t.startY-t.y:w()+r-o[1],h=P(c);l&&c!==h&&(p+=h-c),w(h)}(r||e)&&Be()},t.onEnable=function(){Ze(y,!m&&"x"),qe.addEventListener("refresh",r),lt(Ct,"resize",r),w.smooth&&(w.target.style.scrollBehavior="auto",w.smooth=M.smooth=!1),C.enable()},t.onDisable=function(){Ze(y,!0),ct(Ct,"resize",r),qe.removeEventListener("refresh",r),C.kill()},t.lockAxis=!1!==t.lockAxis,((a=new F(t)).iOS=Kt)&&!w()&&w(1),Kt&&St.ticker.add(G),f=a._dc,u=St.to(a,{ease:"power4",paused:!0,scrollX:m?"+=0.1":"+=0",scrollY:"+=0.1",onComplete:f.vars.onComplete}),a}(t);return Yt&&Yt.target===e.target&&Yt.kill(),q(e.target)&&(Yt=e),e},qe.core={_getVelocityProp:h,_inputObserver:Qe,_scrollers:D,_proxies:P,bridge:{ss:function(){ce||Oe("scrollStart"),ce=se()},ref:function(){return Ft}}},W()&&St.registerPlugin(qe),t.ScrollTrigger=qe,t.default=qe,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,(function(t){"use strict";var e=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function i(t){return g.getComputedStyle(t)}function n(t,e){var i;return x(t)?t:"string"==(i=typeof t)&&!e&&t?w.call(m.querySelectorAll(t),0):t&&"object"==i&&"length"in t?w.call(t,0):t?[t]:[]}function r(t){return"absolute"===t.position||!0===t.absolute}function a(t,e){for(var i,n=e.length;-1<--n;)if(i=e[n],t.substr(0,i.length)===i)return i.length}function o(t,e){void 0===t&&(t="");var i=~t.indexOf("++"),n=1;return i&&(t=t.split("++").join("")),function(){return"<"+e+" style='position:relative;display:inline-block;'"+(t?" class='"+t+(i?n++:"")+"'>":">")}}function s(t,e,i){var n=t.nodeType;if(1===n||9===n||11===n)for(t=t.firstChild;t;t=t.nextSibling)s(t,e,i);else 3!==n&&4!==n||(t.nodeValue=t.nodeValue.split(e).join(i))}function l(t,e){for(var i=e.length;-1<--i;)t.push(e[i])}function c(t,e,i){for(var n;t&&t!==e;){if(n=t._next||t.nextSibling)return n.textContent.charAt(0)===i;t=t.parentNode||t._parent}}function h(t){var e,i,r=n(t.childNodes),a=r.length;for(e=0;e<a;e++)(i=r[e])._isSplit?h(i):e&&i.previousSibling&&3===i.previousSibling.nodeType?(i.previousSibling.nodeValue+=3===i.nodeType?i.nodeValue:i.firstChild.nodeValue,t.removeChild(i)):3!==i.nodeType&&(t.insertBefore(i.firstChild,i),t.removeChild(i))}function u(t,e){return parseFloat(e[t])||0}function d(t,e,n,a,o,d,p){var f,g,v,y,_,b,x,w,M,E,T,S,A=i(t),C=u("paddingLeft",A),L=-999,D=u("borderBottomWidth",A)+u("borderTopWidth",A),P=u("borderLeftWidth",A)+u("borderRightWidth",A),R=u("paddingTop",A)+u("paddingBottom",A),O=u("paddingLeft",A)+u("paddingRight",A),I=u("fontSize",A)*(e.lineThreshold||.2),z=A.textAlign,N=[],k=[],F=[],B=e.wordDelimiter||" ",U=e.tag?e.tag:e.span?"span":"div",H=e.type||e.split||"chars,words,lines",G=o&&~H.indexOf("lines")?[]:null,j=~H.indexOf("words"),V=~H.indexOf("chars"),W=r(e),q=e.linesClass,X=~(q||"").indexOf("++"),Y=[],Z="flex"===A.display,J=t.style.display;for(X&&(q=q.split("++").join("")),Z&&(t.style.display="block"),v=(g=t.getElementsByTagName("*")).length,_=[],f=0;f<v;f++)_[f]=g[f];if(G||W)for(f=0;f<v;f++)((b=(y=_[f]).parentNode===t)||W||V&&!j)&&(S=y.offsetTop,G&&b&&Math.abs(S-L)>I&&("BR"!==y.nodeName||0===f)&&(x=[],G.push(x),L=S),W&&(y._x=y.offsetLeft,y._y=S,y._w=y.offsetWidth,y._h=y.offsetHeight),G&&((y._isSplit&&b||!V&&b||j&&b||!j&&y.parentNode.parentNode===t&&!y.parentNode._isSplit)&&(x.push(y),y._x-=C,c(y,t,B)&&(y._wordEnd=!0)),"BR"===y.nodeName&&(y.nextSibling&&"BR"===y.nextSibling.nodeName||0===f)&&G.push([])));for(f=0;f<v;f++)if(b=(y=_[f]).parentNode===t,"BR"!==y.nodeName)if(W&&(M=y.style,j||b||(y._x+=y.parentNode._x,y._y+=y.parentNode._y),M.left=y._x+"px",M.top=y._y+"px",M.position="absolute",M.display="block",M.width=y._w+1+"px",M.height=y._h+"px"),!j&&V)if(y._isSplit)for(y._next=g=y.nextSibling,y.parentNode.appendChild(y);g&&3===g.nodeType&&" "===g.textContent;)y._next=g.nextSibling,y.parentNode.appendChild(g),g=g.nextSibling;else y.parentNode._isSplit?(y._parent=y.parentNode,!y.previousSibling&&y.firstChild&&(y.firstChild._isFirst=!0),y.nextSibling&&" "===y.nextSibling.textContent&&!y.nextSibling.nextSibling&&Y.push(y.nextSibling),y._next=y.nextSibling&&y.nextSibling._isFirst?null:y.nextSibling,y.parentNode.removeChild(y),_.splice(f--,1),v--):b||(S=!y.nextSibling&&c(y.parentNode,t,B),y.parentNode._parent&&y.parentNode._parent.appendChild(y),S&&y.parentNode.appendChild(m.createTextNode(" ")),"span"===U&&(y.style.display="inline"),N.push(y));else y.parentNode._isSplit&&!y._isSplit&&""!==y.innerHTML?k.push(y):V&&!y._isSplit&&("span"===U&&(y.style.display="inline"),N.push(y));else G||W?(y.parentNode&&y.parentNode.removeChild(y),_.splice(f--,1),v--):j||t.appendChild(y);for(f=Y.length;-1<--f;)Y[f].parentNode.removeChild(Y[f]);if(G){for(W&&(E=m.createElement(U),t.appendChild(E),T=E.offsetWidth+"px",S=E.offsetParent===t?0:t.offsetLeft,t.removeChild(E)),M=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(w=" "===B&&(!W||!j&&!V),f=0;f<G.length;f++){for(x=G[f],(E=m.createElement(U)).style.cssText="display:block;text-align:"+z+";position:"+(W?"absolute;":"relative;"),q&&(E.className=q+(X?f+1:"")),F.push(E),v=x.length,g=0;g<v;g++)"BR"!==x[g].nodeName&&(y=x[g],E.appendChild(y),w&&y._wordEnd&&E.appendChild(m.createTextNode(" ")),W&&(0===g&&(E.style.top=y._y+"px",E.style.left=C+S+"px"),y.style.top="0px",S&&(y.style.left=y._x-S+"px")));0===v?E.innerHTML="&nbsp;":j||V||(h(E),s(E,String.fromCharCode(160)," ")),W&&(E.style.width=T,E.style.height=y._h+"px"),t.appendChild(E)}t.style.cssText=M}W&&(p>t.clientHeight&&(t.style.height=p-R+"px",t.clientHeight<p&&(t.style.height=p+D+"px")),d>t.clientWidth&&(t.style.width=d-O+"px",t.clientWidth<d&&(t.style.width=d+P+"px"))),Z&&(J?t.style.display=J:t.style.removeProperty("display")),l(n,N),j&&l(a,k),l(o,F)}function p(t,i,n,o){var l,c,h,u,d,p,f,g,v=i.tag?i.tag:i.span?"span":"div",y=~(i.type||i.split||"chars,words,lines").indexOf("chars"),x=r(i),w=i.wordDelimiter||" ",M=" "!==w?"":x?"&#173; ":" ",E="</"+v+">",T=1,S=i.specialChars?"function"==typeof i.specialChars?i.specialChars:a:null,A=m.createElement("div"),C=t.parentNode;for(C.insertBefore(A,t),A.textContent=t.nodeValue,C.removeChild(t),f=-1!==(l=function t(e){var i=e.nodeType,n="";if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=t(e)}else if(3===i||4===i)return e.nodeValue;return n}(t=A)).indexOf("<"),!1!==i.reduceWhiteSpace&&(l=l.replace(b," ").replace(_,"")),f&&(l=l.split("<").join("{{LT}}")),d=l.length,c=(" "===l.charAt(0)?M:"")+n(),h=0;h<d;h++)if(p=l.charAt(h),S&&(g=S(l.substr(h),i.specialChars)))p=l.substr(h,g||1),c+=y&&" "!==p?o()+p+"</"+v+">":p,h+=g-1;else if(p===w&&l.charAt(h-1)!==w&&h){for(c+=T?E:"",T=0;l.charAt(h+1)===w;)c+=M,h++;h===d-1?c+=M:")"!==l.charAt(h+1)&&(c+=M+n(),T=1)}else"{"===p&&"{{LT}}"===l.substr(h,6)?(c+=y?o()+"{{LT}}</"+v+">":"{{LT}}",h+=5):55296<=p.charCodeAt(0)&&p.charCodeAt(0)<=56319||65024<=l.charCodeAt(h+1)&&l.charCodeAt(h+1)<=65039?(u=((l.substr(h,12).split(e)||[])[1]||"").length||2,c+=y&&" "!==p?o()+l.substr(h,u)+"</"+v+">":l.substr(h,u),h+=u-1):c+=y&&" "!==p?o()+p+"</"+v+">":p;t.outerHTML=c+(T?E:""),f&&s(C,"{{LT}}","<")}function f(t,e,a,o){var s,l,c=n(t.childNodes),h=c.length,u=r(e);if(3!==t.nodeType||1<h){for(e.absolute=!1,s=0;s<h;s++)(l=c[s])._next=l._isFirst=l._parent=l._wordEnd=null,3===l.nodeType&&!/\S+/.test(l.nodeValue)||(u&&3!==l.nodeType&&"inline"===i(l).display&&(l.style.display="inline-block",l.style.position="relative"),l._isSplit=!0,f(l,e,a,o));return e.absolute=u,void(t._isSplit=!0)}p(t,e,a,o)}var m,g,v,y,_=/(?:\r|\n|\t\t)/g,b=/(?:\s\s+)/g,x=Array.isArray,w=[].slice,M=((y=E.prototype).split=function(t){this.isSplit&&this.revert(),this.vars=t=t||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var e,i,n,r=this.elements.length,a=t.tag?t.tag:t.span?"span":"div",s=o(t.wordsClass,a),l=o(t.charsClass,a);-1<--r;)n=this.elements[r],this._originals[r]=n.innerHTML,e=n.clientHeight,i=n.clientWidth,f(n,t,s,l),d(n,t,this.chars,this.words,this.lines,i,e);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},y.revert=function(){var t=this._originals;if(!t)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(e,i){return e.innerHTML=t[i]})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},E.create=function(t,e){return new E(t,e)},E);function E(t,e){v||(m=document,g=window,v=1),this.elements=n(t),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},this.split(e)}M.version="3.11.2",t.SplitText=M,t.default=M,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete t.default}));var Swiper=function(){"use strict";function t(t){return null!==t&&"object"==typeof t&&"constructor"in t&&t.constructor===Object}function e(i,n){void 0===i&&(i={}),void 0===n&&(n={});const r=["__proto__","constructor","prototype"];Object.keys(n).filter(t=>r.indexOf(t)<0).forEach(r=>{void 0===i[r]?i[r]=n[r]:t(n[r])&&t(i[r])&&Object.keys(n[r]).length>0&&e(i[r],n[r])})}const i={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function n(){const t="undefined"!=typeof document?document:{};return e(t,i),t}const r={document:i,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:t=>"undefined"==typeof setTimeout?(t(),null):setTimeout(t,0),cancelAnimationFrame(t){"undefined"!=typeof setTimeout&&clearTimeout(t)}};function a(){const t="undefined"!=typeof window?window:{};return e(t,r),t}function o(t){return void 0===t&&(t=""),t.trim().split(" ").filter(t=>!!t.trim())}function s(t,e){return void 0===e&&(e=0),setTimeout(t,e)}function l(){return Date.now()}function c(t,e){void 0===e&&(e="x");const i=a();let n,r,o;const s=function(t){const e=a();let i;return e.getComputedStyle&&(i=e.getComputedStyle(t,null)),!i&&t.currentStyle&&(i=t.currentStyle),i||(i=t.style),i}(t);return i.WebKitCSSMatrix?(r=s.transform||s.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(t=>t.replace(",",".")).join(", ")),o=new i.WebKitCSSMatrix("none"===r?"":r)):(o=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=o.toString().split(",")),"x"===e&&(r=i.WebKitCSSMatrix?o.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===e&&(r=i.WebKitCSSMatrix?o.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0}function h(t){return"object"==typeof t&&null!==t&&t.constructor&&"Object"===Object.prototype.toString.call(t).slice(8,-1)}function u(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const r=n<0||arguments.length<=n?void 0:arguments[n];if(null!=r&&(i=r,!("undefined"!=typeof window&&void 0!==window.HTMLElement?i instanceof HTMLElement:i&&(1===i.nodeType||11===i.nodeType)))){const i=Object.keys(Object(r)).filter(t=>e.indexOf(t)<0);for(let e=0,n=i.length;e<n;e+=1){const n=i[e],a=Object.getOwnPropertyDescriptor(r,n);void 0!==a&&a.enumerable&&(h(t[n])&&h(r[n])?r[n].__swiper__?t[n]=r[n]:u(t[n],r[n]):!h(t[n])&&h(r[n])?(t[n]={},r[n].__swiper__?t[n]=r[n]:u(t[n],r[n])):t[n]=r[n])}}}var i;return t}function d(t,e,i){t.style.setProperty(e,i)}function p(t){let{swiper:e,targetPosition:i,side:n}=t;const r=a(),o=-e.translate;let s,l=null;const c=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const h=i>o?"next":"prev",u=(t,e)=>"next"===h&&t>=e||"prev"===h&&t<=e,d=()=>{s=(new Date).getTime(),null===l&&(l=s);const t=Math.max(Math.min((s-l)/c,1),0),a=.5-Math.cos(t*Math.PI)/2;let h=o+a*(i-o);if(u(h,i)&&(h=i),e.wrapperEl.scrollTo({[n]:h}),u(h,i))return e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:h})}),void r.cancelAnimationFrame(e.cssModeFrameID);e.cssModeFrameID=r.requestAnimationFrame(d)};d()}function f(t){return t.querySelector(".swiper-slide-transform")||t.shadowRoot&&t.shadowRoot.querySelector(".swiper-slide-transform")||t}function m(t,e){void 0===e&&(e="");const i=a(),n=[...t.children];return i.HTMLSlotElement&&t instanceof HTMLSlotElement&&n.push(...t.assignedElements()),e?n.filter(t=>t.matches(e)):n}function g(t){try{return void console.warn(t)}catch(t){}}function v(t,e){void 0===e&&(e=[]);const i=document.createElement(t);return i.classList.add(...Array.isArray(e)?e:o(e)),i}function y(t){const e=a(),i=n(),r=t.getBoundingClientRect(),o=i.body,s=t.clientTop||o.clientTop||0,l=t.clientLeft||o.clientLeft||0,c=t===e?e.scrollY:t.scrollTop,h=t===e?e.scrollX:t.scrollLeft;return{top:r.top+c-s,left:r.left+h-l}}function _(t,e){return a().getComputedStyle(t,null).getPropertyValue(e)}function b(t){let e,i=t;if(i){for(e=0;null!==(i=i.previousSibling);)1===i.nodeType&&(e+=1);return e}}function x(t,e){const i=[];let n=t.parentElement;for(;n;)e?n.matches(e)&&i.push(n):i.push(n),n=n.parentElement;return i}function w(t,e){e&&t.addEventListener("transitionend",(function i(n){n.target===t&&(e.call(t,n),t.removeEventListener("transitionend",i))}))}function M(t,e,i){const n=a();return i?t["width"===e?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(t,null).getPropertyValue("width"===e?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(t,null).getPropertyValue("width"===e?"margin-left":"margin-bottom")):t.offsetWidth}function E(t){return(Array.isArray(t)?t:[t]).filter(t=>!!t)}function T(t){return e=>Math.abs(e)>0&&t.browser&&t.browser.need3dFix&&Math.abs(e)%90==0?e+.001:e}let S,A,C;function L(){return S||(S=function(){const t=a(),e=n();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}()),S}function D(t){return void 0===t&&(t={}),A||(A=function(t){let{userAgent:e}=void 0===t?{}:t;const i=L(),n=a(),r=n.navigator.platform,o=e||n.navigator.userAgent,s={ios:!1,android:!1},l=n.screen.width,c=n.screen.height,h=o.match(/(Android);?[\s\/]+([\d.]+)?/);let u=o.match(/(iPad).*OS\s([\d_]+)/);const d=o.match(/(iPod)(.*OS\s([\d_]+))?/),p=!u&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="Win32"===r;let m="MacIntel"===r;return!u&&m&&i.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${l}x${c}`)>=0&&(u=o.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),m=!1),h&&!f&&(s.os="android",s.android=!0),(u||p||d)&&(s.os="ios",s.ios=!0),s}(t)),A}function P(){return C||(C=function(){const t=a(),e=D();let i=!1;function n(){const e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}if(n()){const e=String(t.navigator.userAgent);if(e.includes("Version/")){const[t,n]=e.split("Version/")[1].split(" ")[0].split(".").map(t=>Number(t));i=t<16||16===t&&n<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),o=n();return{isSafari:i||o,needPerspectiveFix:i,need3dFix:o||r&&e.ios,isWebView:r}}()),C}const R=(t,e,i)=>{e&&!t.classList.contains(i)?t.classList.add(i):!e&&t.classList.contains(i)&&t.classList.remove(i)},O=(t,e,i)=>{e&&!t.classList.contains(i)?t.classList.add(i):!e&&t.classList.contains(i)&&t.classList.remove(i)},I=(t,e)=>{if(!t||t.destroyed||!t.params)return;const i=e.closest(t.isElement?"swiper-slide":"."+t.params.slideClass);if(i){let e=i.querySelector("."+t.params.lazyPreloaderClass);!e&&t.isElement&&(i.shadowRoot?e=i.shadowRoot.querySelector("."+t.params.lazyPreloaderClass):requestAnimationFrame(()=>{i.shadowRoot&&(e=i.shadowRoot.querySelector("."+t.params.lazyPreloaderClass),e&&e.remove())})),e&&e.remove()}},z=(t,e)=>{if(!t.slides[e])return;const i=t.slides[e].querySelector('[loading="lazy"]');i&&i.removeAttribute("loading")},N=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const i=t.slides.length;if(!i||!e||e<0)return;e=Math.min(e,i);const n="auto"===t.params.slidesPerView?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),r=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const i=r,a=[i-e];return a.push(...Array.from({length:e}).map((t,e)=>i+n+e)),void t.slides.forEach((e,i)=>{a.includes(e.column)&&z(t,i)})}const a=r+n-1;if(t.params.rewind||t.params.loop)for(let n=r-e;n<=a+e;n+=1){const e=(n%i+i)%i;(e<r||e>a)&&z(t,e)}else for(let n=Math.max(r-e,0);n<=Math.min(a+e,i-1);n+=1)n!==r&&(n>a||n<r)&&z(t,n)};function k(t){let{swiper:e,runCallbacks:i,direction:n,step:r}=t;const{activeIndex:a,previousIndex:o}=e;let s=n;if(s||(s=a>o?"next":a<o?"prev":"reset"),e.emit("transition"+r),i&&a!==o){if("reset"===s)return void e.emit("slideResetTransition"+r);e.emit("slideChangeTransition"+r),"next"===s?e.emit("slideNextTransition"+r):e.emit("slidePrevTransition"+r)}}function F(t,e,i){const n=a(),{params:r}=t,o=r.edgeSwipeDetection,s=r.edgeSwipeThreshold;return!o||!(i<=s||i>=n.innerWidth-s)||"prevent"===o&&(e.preventDefault(),!0)}function B(t){const e=this,i=n();let r=t;r.originalEvent&&(r=r.originalEvent);const o=e.touchEventsData;if("pointerdown"===r.type){if(null!==o.pointerId&&o.pointerId!==r.pointerId)return;o.pointerId=r.pointerId}else"touchstart"===r.type&&1===r.targetTouches.length&&(o.touchId=r.targetTouches[0].identifier);if("touchstart"===r.type)return void F(e,r,r.targetTouches[0].pageX);const{params:s,touches:c,enabled:h}=e;if(!h)return;if(!s.simulateTouch&&"mouse"===r.pointerType)return;if(e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let u=r.target;if("wrapper"===s.touchEventsTarget&&!function(t,e){const i=a();let n=e.contains(t);return!n&&i.HTMLSlotElement&&e instanceof HTMLSlotElement&&(n=[...e.assignedElements()].includes(t),n||(n=function(t,e){const i=[e];for(;i.length>0;){const e=i.shift();if(t===e)return!0;i.push(...e.children,...e.shadowRoot?e.shadowRoot.children:[],...e.assignedElements?e.assignedElements():[])}}(t,e))),n}(u,e.wrapperEl))return;if("which"in r&&3===r.which)return;if("button"in r&&r.button>0)return;if(o.isTouched&&o.isMoved)return;const d=!!s.noSwipingClass&&""!==s.noSwipingClass,p=r.composedPath?r.composedPath():r.path;d&&r.target&&r.target.shadowRoot&&p&&(u=p[0]);const f=s.noSwipingSelector?s.noSwipingSelector:"."+s.noSwipingClass,m=!(!r.target||!r.target.shadowRoot);if(s.noSwiping&&(m?function(t,e){return void 0===e&&(e=this),function e(i){if(!i||i===n()||i===a())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(t);return r||i.getRootNode?r||e(i.getRootNode().host):null}(e)}(f,u):u.closest(f)))return void(e.allowClick=!0);if(s.swipeHandler&&!u.closest(s.swipeHandler))return;c.currentX=r.pageX,c.currentY=r.pageY;const g=c.currentX,v=c.currentY;if(!F(e,r,g))return;Object.assign(o,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),c.startX=g,c.startY=v,o.touchStartTime=l(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(o.allowThresholdMove=!1);let y=!0;u.matches(o.focusableElements)&&(y=!1,"SELECT"===u.nodeName&&(o.isTouched=!1)),i.activeElement&&i.activeElement.matches(o.focusableElements)&&i.activeElement!==u&&("mouse"===r.pointerType||"mouse"!==r.pointerType&&!u.matches(o.focusableElements))&&i.activeElement.blur();const _=y&&e.allowTouchMove&&s.touchStartPreventDefault;!s.touchStartForcePreventDefault&&!_||u.isContentEditable||r.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function U(t){const e=n(),i=this,r=i.touchEventsData,{params:a,touches:o,rtlTranslate:s,enabled:c}=i;if(!c)return;if(!a.simulateTouch&&"mouse"===t.pointerType)return;let h,u=t;if(u.originalEvent&&(u=u.originalEvent),"pointermove"===u.type){if(null!==r.touchId)return;if(u.pointerId!==r.pointerId)return}if("touchmove"===u.type){if(h=[...u.changedTouches].find(t=>t.identifier===r.touchId),!h||h.identifier!==r.touchId)return}else h=u;if(!r.isTouched)return void(r.startMoving&&r.isScrolling&&i.emit("touchMoveOpposite",u));const d=h.pageX,p=h.pageY;if(u.preventedByNestedSwiper)return o.startX=d,void(o.startY=p);if(!i.allowTouchMove)return u.target.matches(r.focusableElements)||(i.allowClick=!1),void(r.isTouched&&(Object.assign(o,{startX:d,startY:p,currentX:d,currentY:p}),r.touchStartTime=l()));if(a.touchReleaseOnEdges&&!a.loop)if(i.isVertical()){if(p<o.startY&&i.translate<=i.maxTranslate()||p>o.startY&&i.translate>=i.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(d<o.startX&&i.translate<=i.maxTranslate()||d>o.startX&&i.translate>=i.minTranslate())return;if(e.activeElement&&e.activeElement.matches(r.focusableElements)&&e.activeElement!==u.target&&"mouse"!==u.pointerType&&e.activeElement.blur(),e.activeElement&&u.target===e.activeElement&&u.target.matches(r.focusableElements))return r.isMoved=!0,void(i.allowClick=!1);r.allowTouchCallbacks&&i.emit("touchMove",u),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=d,o.currentY=p;const f=o.currentX-o.startX,m=o.currentY-o.startY;if(i.params.threshold&&Math.sqrt(f**2+m**2)<i.params.threshold)return;if(void 0===r.isScrolling){let t;i.isHorizontal()&&o.currentY===o.startY||i.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:f*f+m*m>=25&&(t=180*Math.atan2(Math.abs(m),Math.abs(f))/Math.PI,r.isScrolling=i.isHorizontal()?t>a.touchAngle:90-t>a.touchAngle)}if(r.isScrolling&&i.emit("touchMoveOpposite",u),void 0===r.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(r.startMoving=!0)),r.isScrolling||"touchmove"===u.type&&r.preventTouchMoveFromPointerMove)return void(r.isTouched=!1);if(!r.startMoving)return;i.allowClick=!1,!a.cssMode&&u.cancelable&&u.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&u.stopPropagation();let g=i.isHorizontal()?f:m,v=i.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;a.oneWayMovement&&(g=Math.abs(g)*(s?1:-1),v=Math.abs(v)*(s?1:-1)),o.diff=g,g*=a.touchRatio,s&&(g=-g,v=-v);const y=i.touchesDirection;i.swipeDirection=g>0?"prev":"next",i.touchesDirection=v>0?"prev":"next";const _=i.params.loop&&!a.cssMode,b="next"===i.touchesDirection&&i.allowSlideNext||"prev"===i.touchesDirection&&i.allowSlidePrev;if(!r.isMoved){if(_&&b&&i.loopFix({direction:i.swipeDirection}),r.startTranslate=i.getTranslate(),i.setTransition(0),i.animating){const t=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});i.wrapperEl.dispatchEvent(t)}r.allowMomentumBounce=!1,!a.grabCursor||!0!==i.allowSlideNext&&!0!==i.allowSlidePrev||i.setGrabCursor(!0),i.emit("sliderFirstMove",u)}if((new Date).getTime(),!1!==a._loopSwapReset&&r.isMoved&&r.allowThresholdMove&&y!==i.touchesDirection&&_&&b&&Math.abs(g)>=1)return Object.assign(o,{startX:d,startY:p,currentX:d,currentY:p,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,void(r.startTranslate=r.currentTranslate);i.emit("sliderMove",u),r.isMoved=!0,r.currentTranslate=g+r.startTranslate;let x=!0,w=a.resistanceRatio;if(a.touchReleaseOnEdges&&(w=0),g>0?(_&&b&&r.allowThresholdMove&&r.currentTranslate>(a.centeredSlides?i.minTranslate()-i.slidesSizesGrid[i.activeIndex+1]-("auto"!==a.slidesPerView&&i.slides.length-a.slidesPerView>=2?i.slidesSizesGrid[i.activeIndex+1]+i.params.spaceBetween:0)-i.params.spaceBetween:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>i.minTranslate()&&(x=!1,a.resistance&&(r.currentTranslate=i.minTranslate()-1+(-i.minTranslate()+r.startTranslate+g)**w))):g<0&&(_&&b&&r.allowThresholdMove&&r.currentTranslate<(a.centeredSlides?i.maxTranslate()+i.slidesSizesGrid[i.slidesSizesGrid.length-1]+i.params.spaceBetween+("auto"!==a.slidesPerView&&i.slides.length-a.slidesPerView>=2?i.slidesSizesGrid[i.slidesSizesGrid.length-1]+i.params.spaceBetween:0):i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-("auto"===a.slidesPerView?i.slidesPerViewDynamic():Math.ceil(parseFloat(a.slidesPerView,10)))}),r.currentTranslate<i.maxTranslate()&&(x=!1,a.resistance&&(r.currentTranslate=i.maxTranslate()+1-(i.maxTranslate()-r.startTranslate-g)**w))),x&&(u.preventedByNestedSwiper=!0),!i.allowSlideNext&&"next"===i.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&"prev"===i.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),i.allowSlidePrev||i.allowSlideNext||(r.currentTranslate=r.startTranslate),a.threshold>0){if(!(Math.abs(g)>a.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,void(o.diff=i.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}a.followFinger&&!a.cssMode&&((a.freeMode&&a.freeMode.enabled&&i.freeMode||a.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),a.freeMode&&a.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(r.currentTranslate),i.setTranslate(r.currentTranslate))}function H(t){const e=this,i=e.touchEventsData;let n,r=t;if(r.originalEvent&&(r=r.originalEvent),"touchend"===r.type||"touchcancel"===r.type){if(n=[...r.changedTouches].find(t=>t.identifier===i.touchId),!n||n.identifier!==i.touchId)return}else{if(null!==i.touchId)return;if(r.pointerId!==i.pointerId)return;n=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&(!["pointercancel","contextmenu"].includes(r.type)||!e.browser.isSafari&&!e.browser.isWebView))return;i.pointerId=null,i.touchId=null;const{params:a,touches:o,rtlTranslate:c,slidesGrid:h,enabled:u}=e;if(!u)return;if(!a.simulateTouch&&"mouse"===r.pointerType)return;if(i.allowTouchCallbacks&&e.emit("touchEnd",r),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&a.grabCursor&&e.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);a.grabCursor&&i.isMoved&&i.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);const d=l(),p=d-i.touchStartTime;if(e.allowClick){const t=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(t&&t[0]||r.target,t),e.emit("tap click",r),p<300&&d-i.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(i.lastClickTime=l(),s(()=>{e.destroyed||(e.allowClick=!0)}),!i.isTouched||!i.isMoved||!e.swipeDirection||0===o.diff&&!i.loopSwapReset||i.currentTranslate===i.startTranslate&&!i.loopSwapReset)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);let f;if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,f=a.followFinger?c?e.translate:-e.translate:-i.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled)return void e.freeMode.onTouchEnd({currentPos:f});const m=f>=-e.maxTranslate()&&!e.params.loop;let g=0,v=e.slidesSizesGrid[0];for(let t=0;t<h.length;t+=t<a.slidesPerGroupSkip?1:a.slidesPerGroup){const e=t<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;void 0!==h[t+e]?(m||f>=h[t]&&f<h[t+e])&&(g=t,v=h[t+e]-h[t]):(m||f>=h[t])&&(g=t,v=h[h.length-1]-h[h.length-2])}let y=null,_=null;a.rewind&&(e.isBeginning?_=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(y=0));const b=(f-h[g])/v,x=g<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(p>a.longSwipesMs){if(!a.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(b>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?y:g+x):e.slideTo(g)),"prev"===e.swipeDirection&&(b>1-a.longSwipesRatio?e.slideTo(g+x):null!==_&&b<0&&Math.abs(b)>a.longSwipesRatio?e.slideTo(_):e.slideTo(g))}else{if(!a.shortSwipes)return void e.slideTo(e.activeIndex);!e.navigation||r.target!==e.navigation.nextEl&&r.target!==e.navigation.prevEl?("next"===e.swipeDirection&&e.slideTo(null!==y?y:g+x),"prev"===e.swipeDirection&&e.slideTo(null!==_?_:g)):r.target===e.navigation.nextEl?e.slideTo(g+x):e.slideTo(g)}}function G(){const t=this,{params:e,el:i}=t;if(i&&0===i.offsetWidth)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:r,snapGrid:a}=t,o=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const s=o&&e.loop;!("auto"===e.slidesPerView||e.slidesPerView>1)||!t.isEnd||t.isBeginning||t.params.centeredSlides||s?t.params.loop&&!o?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0):t.slideTo(t.slides.length-1,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=r,t.allowSlideNext=n,t.params.watchOverflow&&a!==t.snapGrid&&t.checkOverflow()}function j(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function V(){const t=this,{wrapperEl:e,rtlTranslate:i,enabled:n}=t;if(!n)return;let r;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,0===t.translate&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();const a=t.maxTranslate()-t.minTranslate();r=0===a?0:(t.translate-t.minTranslate())/a,r!==t.progress&&t.updateProgress(i?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function W(t){const e=this;I(e,t.target),e.params.cssMode||"auto"!==e.params.slidesPerView&&!e.params.autoHeight||e.update()}function q(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const X=(t,e)=>{const i=n(),{params:r,el:a,wrapperEl:o,device:s}=t,l=!!r.nested,c="on"===e?"addEventListener":"removeEventListener",h=e;a&&"string"!=typeof a&&(i[c]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:l}),a[c]("touchstart",t.onTouchStart,{passive:!1}),a[c]("pointerdown",t.onTouchStart,{passive:!1}),i[c]("touchmove",t.onTouchMove,{passive:!1,capture:l}),i[c]("pointermove",t.onTouchMove,{passive:!1,capture:l}),i[c]("touchend",t.onTouchEnd,{passive:!0}),i[c]("pointerup",t.onTouchEnd,{passive:!0}),i[c]("pointercancel",t.onTouchEnd,{passive:!0}),i[c]("touchcancel",t.onTouchEnd,{passive:!0}),i[c]("pointerout",t.onTouchEnd,{passive:!0}),i[c]("pointerleave",t.onTouchEnd,{passive:!0}),i[c]("contextmenu",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&a[c]("click",t.onClick,!0),r.cssMode&&o[c]("scroll",t.onScroll),r.updateOnWindowResize?t[h](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",G,!0):t[h]("observerUpdate",G,!0),a[c]("load",t.onLoad,{capture:!0}))},Y=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;var Z={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function J(t,e){return function(i){void 0===i&&(i={});const n=Object.keys(i)[0],r=i[n];"object"==typeof r&&null!==r?(!0===t[n]&&(t[n]={enabled:!0}),"navigation"===n&&t[n]&&t[n].enabled&&!t[n].prevEl&&!t[n].nextEl&&(t[n].auto=!0),["pagination","scrollbar"].indexOf(n)>=0&&t[n]&&t[n].enabled&&!t[n].el&&(t[n].auto=!0),n in t&&"enabled"in r?("object"!=typeof t[n]||"enabled"in t[n]||(t[n].enabled=!0),t[n]||(t[n]={enabled:!1}),u(e,i)):u(e,i)):u(e,i)}}const Q={eventsEmitter:{on(t,e,i){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof e)return n;const r=i?"unshift":"push";return t.split(" ").forEach(t=>{n.eventsListeners[t]||(n.eventsListeners[t]=[]),n.eventsListeners[t][r](e)}),n},once(t,e,i){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof e)return n;function r(){n.off(t,r),r.__emitterProxy&&delete r.__emitterProxy;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e.apply(n,a)}return r.__emitterProxy=e,n.on(t,r,i)},onAny(t,e){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!=typeof t)return i;const n=e?"unshift":"push";return i.eventsAnyListeners.indexOf(t)<0&&i.eventsAnyListeners[n](t),i},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsAnyListeners)return e;const i=e.eventsAnyListeners.indexOf(t);return i>=0&&e.eventsAnyListeners.splice(i,1),e},off(t,e){const i=this;return!i.eventsListeners||i.destroyed?i:i.eventsListeners?(t.split(" ").forEach(t=>{void 0===e?i.eventsListeners[t]=[]:i.eventsListeners[t]&&i.eventsListeners[t].forEach((n,r)=>{(n===e||n.__emitterProxy&&n.__emitterProxy===e)&&i.eventsListeners[t].splice(r,1)})}),i):i},emit(){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsListeners)return t;let e,i,n;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return"string"==typeof a[0]||Array.isArray(a[0])?(e=a[0],i=a.slice(1,a.length),n=t):(e=a[0].events,i=a[0].data,n=a[0].context||t),i.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(e=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(t=>{t.apply(n,[e,...i])}),t.eventsListeners&&t.eventsListeners[e]&&t.eventsListeners[e].forEach(t=>{t.apply(n,i)})}),t}},update:{updateSize:function(){const t=this;let e,i;const n=t.el;e=void 0!==t.params.width&&null!==t.params.width?t.params.width:n.clientWidth,i=void 0!==t.params.height&&null!==t.params.height?t.params.height:n.clientHeight,0===e&&t.isHorizontal()||0===i&&t.isVertical()||(e=e-parseInt(_(n,"padding-left")||0,10)-parseInt(_(n,"padding-right")||0,10),i=i-parseInt(_(n,"padding-top")||0,10)-parseInt(_(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(i)&&(i=0),Object.assign(t,{width:e,height:i,size:t.isHorizontal()?e:i}))},updateSlides:function(){const t=this;function e(e,i){return parseFloat(e.getPropertyValue(t.getDirectionLabel(i))||0)}const i=t.params,{wrapperEl:n,slidesEl:r,size:a,rtlTranslate:o,wrongRTL:s}=t,l=t.virtual&&i.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,h=m(r,`.${t.params.slideClass}, swiper-slide`),u=l?t.virtual.slides.length:h.length;let p=[];const f=[],g=[];let v=i.slidesOffsetBefore;"function"==typeof v&&(v=i.slidesOffsetBefore.call(t));let y=i.slidesOffsetAfter;"function"==typeof y&&(y=i.slidesOffsetAfter.call(t));const b=t.snapGrid.length,x=t.slidesGrid.length;let w=i.spaceBetween,E=-v,T=0,S=0;if(void 0===a)return;"string"==typeof w&&w.indexOf("%")>=0?w=parseFloat(w.replace("%",""))/100*a:"string"==typeof w&&(w=parseFloat(w)),t.virtualSize=-w,h.forEach(t=>{o?t.style.marginLeft="":t.style.marginRight="",t.style.marginBottom="",t.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(d(n,"--swiper-centered-offset-before",""),d(n,"--swiper-centered-offset-after",""));const A=i.grid&&i.grid.rows>1&&t.grid;let C;A?t.grid.initSlides(h):t.grid&&t.grid.unsetSlides();const L="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter(t=>void 0!==i.breakpoints[t].slidesPerView).length>0;for(let n=0;n<u;n+=1){let r;if(C=0,h[n]&&(r=h[n]),A&&t.grid.updateSlide(n,r,h),!h[n]||"none"!==_(r,"display")){if("auto"===i.slidesPerView){L&&(h[n].style[t.getDirectionLabel("width")]="");const a=getComputedStyle(r),o=r.style.transform,s=r.style.webkitTransform;if(o&&(r.style.transform="none"),s&&(r.style.webkitTransform="none"),i.roundLengths)C=t.isHorizontal()?M(r,"width",!0):M(r,"height",!0);else{const t=e(a,"width"),i=e(a,"padding-left"),n=e(a,"padding-right"),o=e(a,"margin-left"),s=e(a,"margin-right"),l=a.getPropertyValue("box-sizing");if(l&&"border-box"===l)C=t+o+s;else{const{clientWidth:e,offsetWidth:a}=r;C=t+i+n+o+s+(a-e)}}o&&(r.style.transform=o),s&&(r.style.webkitTransform=s),i.roundLengths&&(C=Math.floor(C))}else C=(a-(i.slidesPerView-1)*w)/i.slidesPerView,i.roundLengths&&(C=Math.floor(C)),h[n]&&(h[n].style[t.getDirectionLabel("width")]=C+"px");h[n]&&(h[n].swiperSlideSize=C),g.push(C),i.centeredSlides?(E=E+C/2+T/2+w,0===T&&0!==n&&(E=E-a/2-w),0===n&&(E=E-a/2-w),Math.abs(E)<.001&&(E=0),i.roundLengths&&(E=Math.floor(E)),S%i.slidesPerGroup==0&&p.push(E),f.push(E)):(i.roundLengths&&(E=Math.floor(E)),(S-Math.min(t.params.slidesPerGroupSkip,S))%t.params.slidesPerGroup==0&&p.push(E),f.push(E),E=E+C+w),t.virtualSize+=C+w,T=C,S+=1}}if(t.virtualSize=Math.max(t.virtualSize,a)+y,o&&s&&("slide"===i.effect||"coverflow"===i.effect)&&(n.style.width=t.virtualSize+w+"px"),i.setWrapperSize&&(n.style[t.getDirectionLabel("width")]=t.virtualSize+w+"px"),A&&t.grid.updateWrapperSize(C,p),!i.centeredSlides){const e=[];for(let n=0;n<p.length;n+=1){let r=p[n];i.roundLengths&&(r=Math.floor(r)),p[n]<=t.virtualSize-a&&e.push(r)}p=e,Math.floor(t.virtualSize-a)-Math.floor(p[p.length-1])>1&&p.push(t.virtualSize-a)}if(l&&i.loop){const e=g[0]+w;if(i.slidesPerGroup>1){const n=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/i.slidesPerGroup),r=e*i.slidesPerGroup;for(let t=0;t<n;t+=1)p.push(p[p.length-1]+r)}for(let n=0;n<t.virtual.slidesBefore+t.virtual.slidesAfter;n+=1)1===i.slidesPerGroup&&p.push(p[p.length-1]+e),f.push(f[f.length-1]+e),t.virtualSize+=e}if(0===p.length&&(p=[0]),0!==w){const e=t.isHorizontal()&&o?"marginLeft":t.getDirectionLabel("marginRight");h.filter((t,e)=>!(i.cssMode&&!i.loop)||e!==h.length-1).forEach(t=>{t.style[e]=w+"px"})}if(i.centeredSlides&&i.centeredSlidesBounds){let t=0;g.forEach(e=>{t+=e+(w||0)}),t-=w;const e=t>a?t-a:0;p=p.map(t=>t<=0?-v:t>e?e+y:t)}if(i.centerInsufficientSlides){let t=0;g.forEach(e=>{t+=e+(w||0)}),t-=w;const e=(i.slidesOffsetBefore||0)+(i.slidesOffsetAfter||0);if(t+e<a){const i=(a-t-e)/2;p.forEach((t,e)=>{p[e]=t-i}),f.forEach((t,e)=>{f[e]=t+i})}}if(Object.assign(t,{slides:h,snapGrid:p,slidesGrid:f,slidesSizesGrid:g}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){d(n,"--swiper-centered-offset-before",-p[0]+"px"),d(n,"--swiper-centered-offset-after",t.size/2-g[g.length-1]/2+"px");const e=-t.snapGrid[0],i=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(t=>t+e),t.slidesGrid=t.slidesGrid.map(t=>t+i)}if(u!==c&&t.emit("slidesLengthChange"),p.length!==b&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),f.length!==x&&t.emit("slidesGridLengthChange"),i.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!(l||i.cssMode||"slide"!==i.effect&&"fade"!==i.effect)){const e=i.containerModifierClass+"backface-hidden",n=t.el.classList.contains(e);u<=i.maxBackfaceHiddenSlides?n||t.el.classList.add(e):n&&t.el.classList.remove(e)}},updateAutoHeight:function(t){const e=this,i=[],n=e.virtual&&e.params.virtual.enabled;let r,a=0;"number"==typeof t?e.setTransition(t):!0===t&&e.setTransition(e.params.speed);const o=t=>n?e.slides[e.getSlideIndexByData(t)]:e.slides[t];if("auto"!==e.params.slidesPerView&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(t=>{i.push(t)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){const t=e.activeIndex+r;if(t>e.slides.length&&!n)break;i.push(o(t))}else i.push(o(e.activeIndex));for(r=0;r<i.length;r+=1)if(void 0!==i[r]){const t=i[r].offsetHeight;a=t>a?t:a}(a||0===a)&&(e.wrapperEl.style.height=a+"px")},updateSlidesOffset:function(){const t=this,e=t.slides,i=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(t.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-i-t.cssOverflowAdjustment()},updateSlidesProgress:function(t){void 0===t&&(t=this&&this.translate||0);const e=this,i=e.params,{slides:n,rtlTranslate:r,snapGrid:a}=e;if(0===n.length)return;void 0===n[0].swiperSlideOffset&&e.updateSlidesOffset();let o=-t;r&&(o=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let s=i.spaceBetween;"string"==typeof s&&s.indexOf("%")>=0?s=parseFloat(s.replace("%",""))/100*e.size:"string"==typeof s&&(s=parseFloat(s));for(let t=0;t<n.length;t+=1){const l=n[t];let c=l.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(c-=n[0].swiperSlideOffset);const h=(o+(i.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+s),u=(o-a[0]+(i.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+s),d=-(o-c),p=d+e.slidesSizesGrid[t],f=d>=0&&d<=e.size-e.slidesSizesGrid[t],m=d>=0&&d<e.size-1||p>1&&p<=e.size||d<=0&&p>=e.size;m&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(t)),R(l,m,i.slideVisibleClass),R(l,f,i.slideFullyVisibleClass),l.progress=r?-h:h,l.originalProgress=r?-u:u}},updateProgress:function(t){const e=this;if(void 0===t){const i=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*i||0}const i=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:a,isEnd:o,progressLoop:s}=e;const l=a,c=o;if(0===n)r=0,a=!0,o=!0;else{r=(t-e.minTranslate())/n;const i=Math.abs(t-e.minTranslate())<1,s=Math.abs(t-e.maxTranslate())<1;a=i||r<=0,o=s||r>=1,i&&(r=0),s&&(r=1)}if(i.loop){const i=e.getSlideIndexByData(0),n=e.getSlideIndexByData(e.slides.length-1),r=e.slidesGrid[i],a=e.slidesGrid[n],o=e.slidesGrid[e.slidesGrid.length-1],l=Math.abs(t);s=l>=r?(l-r)/o:(l+o-a)/o,s>1&&(s-=1)}Object.assign(e,{progress:r,progressLoop:s,isBeginning:a,isEnd:o}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&e.updateSlidesProgress(t),a&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!a||c&&!o)&&e.emit("fromEdge"),e.emit("progress",r)},updateSlidesClasses:function(){const t=this,{slides:e,params:i,slidesEl:n,activeIndex:r}=t,a=t.virtual&&i.virtual.enabled,o=t.grid&&i.grid&&i.grid.rows>1,s=t=>m(n,`.${i.slideClass}${t}, swiper-slide${t}`)[0];let l,c,h;if(a)if(i.loop){let e=r-t.virtual.slidesBefore;e<0&&(e=t.virtual.slides.length+e),e>=t.virtual.slides.length&&(e-=t.virtual.slides.length),l=s(`[data-swiper-slide-index="${e}"]`)}else l=s(`[data-swiper-slide-index="${r}"]`);else o?(l=e.find(t=>t.column===r),h=e.find(t=>t.column===r+1),c=e.find(t=>t.column===r-1)):l=e[r];l&&(o||(h=function(t,e){const i=[];for(;t.nextElementSibling;){const n=t.nextElementSibling;e?n.matches(e)&&i.push(n):i.push(n),t=n}return i}(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&!h&&(h=e[0]),c=function(t,e){const i=[];for(;t.previousElementSibling;){const n=t.previousElementSibling;e?n.matches(e)&&i.push(n):i.push(n),t=n}return i}(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&0===!c&&(c=e[e.length-1]))),e.forEach(t=>{O(t,t===l,i.slideActiveClass),O(t,t===h,i.slideNextClass),O(t,t===c,i.slidePrevClass)}),t.emitSlidesClasses()},updateActiveIndex:function(t){const e=this,i=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:r,activeIndex:a,realIndex:o,snapIndex:s}=e;let l,c=t;const h=t=>{let i=t-e.virtual.slidesBefore;return i<0&&(i=e.virtual.slides.length+i),i>=e.virtual.slides.length&&(i-=e.virtual.slides.length),i};if(void 0===c&&(c=function(t){const{slidesGrid:e,params:i}=t,n=t.rtlTranslate?t.translate:-t.translate;let r;for(let t=0;t<e.length;t+=1)void 0!==e[t+1]?n>=e[t]&&n<e[t+1]-(e[t+1]-e[t])/2?r=t:n>=e[t]&&n<e[t+1]&&(r=t+1):n>=e[t]&&(r=t);return i.normalizeSlideIndex&&(r<0||void 0===r)&&(r=0),r}(e)),n.indexOf(i)>=0)l=n.indexOf(i);else{const t=Math.min(r.slidesPerGroupSkip,c);l=t+Math.floor((c-t)/r.slidesPerGroup)}if(l>=n.length&&(l=n.length-1),c===a&&!e.params.loop)return void(l!==s&&(e.snapIndex=l,e.emit("snapIndexChange")));if(c===a&&e.params.loop&&e.virtual&&e.params.virtual.enabled)return void(e.realIndex=h(c));const u=e.grid&&r.grid&&r.grid.rows>1;let d;if(e.virtual&&r.virtual.enabled&&r.loop)d=h(c);else if(u){const t=e.slides.find(t=>t.column===c);let i=parseInt(t.getAttribute("data-swiper-slide-index"),10);Number.isNaN(i)&&(i=Math.max(e.slides.indexOf(t),0)),d=Math.floor(i/r.grid.rows)}else if(e.slides[c]){const t=e.slides[c].getAttribute("data-swiper-slide-index");d=t?parseInt(t,10):c}else d=c;Object.assign(e,{previousSnapIndex:s,snapIndex:l,previousRealIndex:o,realIndex:d,previousIndex:a,activeIndex:c}),e.initialized&&N(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==d&&e.emit("realIndexChange"),e.emit("slideChange"))},updateClickedSlide:function(t,e){const i=this,n=i.params;let r=t.closest(`.${n.slideClass}, swiper-slide`);!r&&i.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(t=>{!r&&t.matches&&t.matches(`.${n.slideClass}, swiper-slide`)&&(r=t)});let a,o=!1;if(r)for(let t=0;t<i.slides.length;t+=1)if(i.slides[t]===r){o=!0,a=t;break}if(!r||!o)return i.clickedSlide=void 0,void(i.clickedIndex=void 0);i.clickedSlide=r,i.virtual&&i.params.virtual.enabled?i.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):i.clickedIndex=a,n.slideToClickedSlide&&void 0!==i.clickedIndex&&i.clickedIndex!==i.activeIndex&&i.slideToClickedSlide()}},translate:{getTranslate:function(t){void 0===t&&(t=this.isHorizontal()?"x":"y");const{params:e,rtlTranslate:i,translate:n,wrapperEl:r}=this;if(e.virtualTranslate)return i?-n:n;if(e.cssMode)return n;let a=c(r,t);return a+=this.cssOverflowAdjustment(),i&&(a=-a),a||0},setTranslate:function(t,e){const i=this,{rtlTranslate:n,params:r,wrapperEl:a,progress:o}=i;let s,l=0,c=0;i.isHorizontal()?l=n?-t:t:c=t,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?l:c,r.cssMode?a[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-l:-c:r.virtualTranslate||(i.isHorizontal()?l-=i.cssOverflowAdjustment():c-=i.cssOverflowAdjustment(),a.style.transform=`translate3d(${l}px, ${c}px, 0px)`);const h=i.maxTranslate()-i.minTranslate();s=0===h?0:(t-i.minTranslate())/h,s!==o&&i.updateProgress(t),i.emit("setTranslate",i.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===i&&(i=!0),void 0===n&&(n=!0);const a=this,{params:o,wrapperEl:s}=a;if(a.animating&&o.preventInteractionOnTransition)return!1;const l=a.minTranslate(),c=a.maxTranslate();let h;if(h=n&&t>l?l:n&&t<c?c:t,a.updateProgress(h),o.cssMode){const t=a.isHorizontal();if(0===e)s[t?"scrollLeft":"scrollTop"]=-h;else{if(!a.support.smoothScroll)return p({swiper:a,targetPosition:-h,side:t?"left":"top"}),!0;s.scrollTo({[t?"left":"top"]:-h,behavior:"smooth"})}return!0}return 0===e?(a.setTransition(0),a.setTranslate(h),i&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(h),i&&(a.emit("beforeTransitionStart",e,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,i&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(t,e){const i=this;i.params.cssMode||(i.wrapperEl.style.transitionDuration=t+"ms",i.wrapperEl.style.transitionDelay=0===t?"0ms":""),i.emit("setTransition",t,e)},transitionStart:function(t,e){void 0===t&&(t=!0);const i=this,{params:n}=i;n.cssMode||(n.autoHeight&&i.updateAutoHeight(),k({swiper:i,runCallbacks:t,direction:e,step:"Start"}))},transitionEnd:function(t,e){void 0===t&&(t=!0);const i=this,{params:n}=i;i.animating=!1,n.cssMode||(i.setTransition(0),k({swiper:i,runCallbacks:t,direction:e,step:"End"}))}},slide:{slideTo:function(t,e,i,n,r){void 0===t&&(t=0),void 0===i&&(i=!0),"string"==typeof t&&(t=parseInt(t,10));const a=this;let o=t;o<0&&(o=0);const{params:s,snapGrid:l,slidesGrid:c,previousIndex:h,activeIndex:u,rtlTranslate:d,wrapperEl:f,enabled:m}=a;if(!m&&!n&&!r||a.destroyed||a.animating&&s.preventInteractionOnTransition)return!1;void 0===e&&(e=a.params.speed);const g=Math.min(a.params.slidesPerGroupSkip,o);let v=g+Math.floor((o-g)/a.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const y=-l[v];if(s.normalizeSlideIndex)for(let t=0;t<c.length;t+=1){const e=-Math.floor(100*y),i=Math.floor(100*c[t]),n=Math.floor(100*c[t+1]);void 0!==c[t+1]?e>=i&&e<n-(n-i)/2?o=t:e>=i&&e<n&&(o=t+1):e>=i&&(o=t)}if(a.initialized&&o!==u){if(!a.allowSlideNext&&(d?y>a.translate&&y>a.minTranslate():y<a.translate&&y<a.minTranslate()))return!1;if(!a.allowSlidePrev&&y>a.translate&&y>a.maxTranslate()&&(u||0)!==o)return!1}let _;o!==(h||0)&&i&&a.emit("beforeSlideChangeStart"),a.updateProgress(y),_=o>u?"next":o<u?"prev":"reset";const b=a.virtual&&a.params.virtual.enabled;if((!b||!r)&&(d&&-y===a.translate||!d&&y===a.translate))return a.updateActiveIndex(o),s.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==s.effect&&a.setTranslate(y),"reset"!==_&&(a.transitionStart(i,_),a.transitionEnd(i,_)),!1;if(s.cssMode){const t=a.isHorizontal(),i=d?y:-y;if(0===e)b&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),b&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[t?"scrollLeft":"scrollTop"]=i})):f[t?"scrollLeft":"scrollTop"]=i,b&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1});else{if(!a.support.smoothScroll)return p({swiper:a,targetPosition:i,side:t?"left":"top"}),!0;f.scrollTo({[t?"left":"top"]:i,behavior:"smooth"})}return!0}const x=P().isSafari;return b&&!r&&x&&a.isElement&&a.virtual.update(!1,!1,o),a.setTransition(e),a.setTranslate(y),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,n),a.transitionStart(i,_),0===e?a.transitionEnd(i,_):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(i,_))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(t,e,i,n){void 0===t&&(t=0),void 0===i&&(i=!0),"string"==typeof t&&(t=parseInt(t,10));const r=this;if(r.destroyed)return;void 0===e&&(e=r.params.speed);const a=r.grid&&r.params.grid&&r.params.grid.rows>1;let o=t;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o+=r.virtual.slidesBefore;else{let t;if(a){const e=o*r.params.grid.rows;t=r.slides.find(t=>1*t.getAttribute("data-swiper-slide-index")===e).column}else t=r.getSlideIndexByData(o);const e=a?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:i}=r.params;let s=r.params.slidesPerView;"auto"===s?s=r.slidesPerViewDynamic():(s=Math.ceil(parseFloat(r.params.slidesPerView,10)),i&&s%2==0&&(s+=1));let l=e-t<s;if(i&&(l=l||t<Math.ceil(s/2)),n&&i&&"auto"!==r.params.slidesPerView&&!a&&(l=!1),l){const n=i?t<r.activeIndex?"prev":"next":t-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:n,slideTo:!0,activeSlideIndex:"next"===n?t+1:t-e+1,slideRealIndex:"next"===n?r.realIndex:void 0})}if(a){const t=o*r.params.grid.rows;o=r.slides.find(e=>1*e.getAttribute("data-swiper-slide-index")===t).column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,e,i,n)}),r},slideNext:function(t,e,i){void 0===e&&(e=!0);const n=this,{enabled:r,params:a,animating:o}=n;if(!r||n.destroyed)return n;void 0===t&&(t=n.params.speed);let s=a.slidesPerGroup;"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(s=Math.max(n.slidesPerViewDynamic("current",!0),1));const l=n.activeIndex<a.slidesPerGroupSkip?1:s,c=n.virtual&&a.virtual.enabled;if(a.loop){if(o&&!c&&a.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+l,t,e,i)}),!0}return a.rewind&&n.isEnd?n.slideTo(0,t,e,i):n.slideTo(n.activeIndex+l,t,e,i)},slidePrev:function(t,e,i){void 0===e&&(e=!0);const n=this,{params:r,snapGrid:a,slidesGrid:o,rtlTranslate:s,enabled:l,animating:c}=n;if(!l||n.destroyed)return n;void 0===t&&(t=n.params.speed);const h=n.virtual&&r.virtual.enabled;if(r.loop){if(c&&!h&&r.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}function u(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}const d=u(s?n.translate:-n.translate),p=a.map(t=>u(t)),f=r.freeMode&&r.freeMode.enabled;let m=a[p.indexOf(d)-1];if(void 0===m&&(r.cssMode||f)){let t;a.forEach((e,i)=>{d>=e&&(t=i)}),void 0!==t&&(m=f?a[t]:a[t>0?t-1:t])}let g=0;if(void 0!==m&&(g=o.indexOf(m),g<0&&(g=n.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(g=g-n.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),r.rewind&&n.isBeginning){const r=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(r,t,e,i)}return r.loop&&0===n.activeIndex&&r.cssMode?(requestAnimationFrame(()=>{n.slideTo(g,t,e,i)}),!0):n.slideTo(g,t,e,i)},slideReset:function(t,e,i){void 0===e&&(e=!0);const n=this;if(!n.destroyed)return void 0===t&&(t=n.params.speed),n.slideTo(n.activeIndex,t,e,i)},slideToClosest:function(t,e,i,n){void 0===e&&(e=!0),void 0===n&&(n=.5);const r=this;if(r.destroyed)return;void 0===t&&(t=r.params.speed);let a=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,a),s=o+Math.floor((a-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[s]){const t=r.snapGrid[s];l-t>(r.snapGrid[s+1]-t)*n&&(a+=r.params.slidesPerGroup)}else{const t=r.snapGrid[s-1];l-t<=(r.snapGrid[s]-t)*n&&(a-=r.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,r.slidesGrid.length-1),r.slideTo(a,t,e,i)},slideToClickedSlide:function(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:i}=t,n="auto"===e.slidesPerView?t.slidesPerViewDynamic():e.slidesPerView;let r,a=t.clickedIndex;const o=t.isElement?"swiper-slide":"."+e.slideClass;if(e.loop){if(t.animating)return;r=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?a<t.loopedSlides-n/2||a>t.slides.length-t.loopedSlides+n/2?(t.loopFix(),a=t.getSlideIndex(m(i,`${o}[data-swiper-slide-index="${r}"]`)[0]),s(()=>{t.slideTo(a)})):t.slideTo(a):a>t.slides.length-n?(t.loopFix(),a=t.getSlideIndex(m(i,`${o}[data-swiper-slide-index="${r}"]`)[0]),s(()=>{t.slideTo(a)})):t.slideTo(a)}else t.slideTo(a)}},loop:{loopCreate:function(t){const e=this,{params:i,slidesEl:n}=e;if(!i.loop||e.virtual&&e.params.virtual.enabled)return;const r=()=>{m(n,`.${i.slideClass}, swiper-slide`).forEach((t,e)=>{t.setAttribute("data-swiper-slide-index",e)})},a=e.grid&&i.grid&&i.grid.rows>1,o=i.slidesPerGroup*(a?i.grid.rows:1),s=e.slides.length%o!=0,l=a&&e.slides.length%i.grid.rows!=0,c=t=>{for(let n=0;n<t;n+=1){const t=e.isElement?v("swiper-slide",[i.slideBlankClass]):v("div",[i.slideClass,i.slideBlankClass]);e.slidesEl.append(t)}};s?(i.loopAddBlankSlides?(c(o-e.slides.length%o),e.recalcSlides(),e.updateSlides()):g("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),r()):l?(i.loopAddBlankSlides?(c(i.grid.rows-e.slides.length%i.grid.rows),e.recalcSlides(),e.updateSlides()):g("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),r()):r(),e.loopFix({slideRealIndex:t,direction:i.centeredSlides?void 0:"next"})},loopFix:function(t){let{slideRealIndex:e,slideTo:i=!0,direction:n,setTranslate:r,activeSlideIndex:a,byController:o,byMousewheel:s}=void 0===t?{}:t;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:h,allowSlideNext:u,slidesEl:d,params:p}=l,{centeredSlides:f}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled)return i&&(p.centeredSlides||0!==l.snapIndex?p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0):l.slideTo(l.virtual.slides.length,0,!1,!0)),l.allowSlidePrev=h,l.allowSlideNext=u,void l.emit("loopFix");let m=p.slidesPerView;"auto"===m?m=l.slidesPerViewDynamic():(m=Math.ceil(parseFloat(p.slidesPerView,10)),f&&m%2==0&&(m+=1));const v=p.slidesPerGroupAuto?m:p.slidesPerGroup;let y=v;y%v!=0&&(y+=v-y%v),y+=p.loopAdditionalSlides,l.loopedSlides=y;const _=l.grid&&p.grid&&p.grid.rows>1;c.length<m+y?g("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):_&&"row"===p.grid.fill&&g("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const b=[],x=[];let w=l.activeIndex;void 0===a?a=l.getSlideIndex(c.find(t=>t.classList.contains(p.slideActiveClass))):w=a;const M="next"===n||!n,E="prev"===n||!n;let T=0,S=0;const A=_?Math.ceil(c.length/p.grid.rows):c.length,C=(_?c[a].column:a)+(f&&void 0===r?-m/2+.5:0);if(C<y){T=Math.max(y-C,v);for(let t=0;t<y-C;t+=1){const e=t-Math.floor(t/A)*A;if(_){const t=A-e-1;for(let e=c.length-1;e>=0;e-=1)c[e].column===t&&b.push(e)}else b.push(A-e-1)}}else if(C+m>A-y){S=Math.max(C-(A-2*y),v);for(let t=0;t<S;t+=1){const e=t-Math.floor(t/A)*A;_?c.forEach((t,i)=>{t.column===e&&x.push(i)}):x.push(e)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),E&&b.forEach(t=>{c[t].swiperLoopMoveDOM=!0,d.prepend(c[t]),c[t].swiperLoopMoveDOM=!1}),M&&x.forEach(t=>{c[t].swiperLoopMoveDOM=!0,d.append(c[t]),c[t].swiperLoopMoveDOM=!1}),l.recalcSlides(),"auto"===p.slidesPerView?l.updateSlides():_&&(b.length>0&&E||x.length>0&&M)&&l.slides.forEach((t,e)=>{l.grid.updateSlide(e,t,l.slides)}),p.watchSlidesProgress&&l.updateSlidesOffset(),i)if(b.length>0&&E){if(void 0===e){const t=l.slidesGrid[w],e=l.slidesGrid[w+T]-t;s?l.setTranslate(l.translate-e):(l.slideTo(w+Math.ceil(T),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-e,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-e))}else if(r){const t=_?b.length/p.grid.rows:b.length;l.slideTo(l.activeIndex+t,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(x.length>0&&M)if(void 0===e){const t=l.slidesGrid[w],e=l.slidesGrid[w-S]-t;s?l.setTranslate(l.translate-e):(l.slideTo(w-S,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-e,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-e))}else{const t=_?x.length/p.grid.rows:x.length;l.slideTo(l.activeIndex-t,0,!1,!0)}if(l.allowSlidePrev=h,l.allowSlideNext=u,l.controller&&l.controller.control&&!o){const t={slideRealIndex:e,direction:n,setTranslate:r,activeSlideIndex:a,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(e=>{!e.destroyed&&e.params.loop&&e.loopFix({...t,slideTo:e.params.slidesPerView===p.slidesPerView&&i})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...t,slideTo:l.controller.control.params.slidesPerView===p.slidesPerView&&i})}l.emit("loopFix")},loopDestroy:function(){const t=this,{params:e,slidesEl:i}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const n=[];t.slides.forEach(t=>{const e=void 0===t.swiperSlideIndex?1*t.getAttribute("data-swiper-slide-index"):t.swiperSlideIndex;n[e]=t}),t.slides.forEach(t=>{t.removeAttribute("data-swiper-slide-index")}),n.forEach(t=>{i.append(t)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}},grabCursor:{setGrabCursor:function(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const i="container"===e.params.touchEventsTarget?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),i.style.cursor="move",i.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})},unsetGrabCursor:function(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t["container"===t.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}},events:{attachEvents:function(){const t=this,{params:e}=t;t.onTouchStart=B.bind(t),t.onTouchMove=U.bind(t),t.onTouchEnd=H.bind(t),t.onDocumentTouchStart=q.bind(t),e.cssMode&&(t.onScroll=V.bind(t)),t.onClick=j.bind(t),t.onLoad=W.bind(t),X(t,"on")},detachEvents:function(){X(this,"off")}},breakpoints:{setBreakpoint:function(){const t=this,{realIndex:e,initialized:i,params:r,el:a}=t,o=r.breakpoints;if(!o||o&&0===Object.keys(o).length)return;const s=n(),l="window"!==r.breakpointsBase&&r.breakpointsBase?"container":r.breakpointsBase,c=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?t.el:s.querySelector(r.breakpointsBase),h=t.getBreakpoint(o,l,c);if(!h||t.currentBreakpoint===h)return;const d=(h in o?o[h]:void 0)||t.originalParams,p=Y(t,r),f=Y(t,d),m=t.params.grabCursor,g=d.grabCursor,v=r.enabled;p&&!f?(a.classList.remove(r.containerModifierClass+"grid",r.containerModifierClass+"grid-column"),t.emitContainerClasses()):!p&&f&&(a.classList.add(r.containerModifierClass+"grid"),(d.grid.fill&&"column"===d.grid.fill||!d.grid.fill&&"column"===r.grid.fill)&&a.classList.add(r.containerModifierClass+"grid-column"),t.emitContainerClasses()),m&&!g?t.unsetGrabCursor():!m&&g&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(e=>{if(void 0===d[e])return;const i=r[e]&&r[e].enabled,n=d[e]&&d[e].enabled;i&&!n&&t[e].disable(),!i&&n&&t[e].enable()});const y=d.direction&&d.direction!==r.direction,_=r.loop&&(d.slidesPerView!==r.slidesPerView||y),b=r.loop;y&&i&&t.changeDirection(),u(t.params,d);const x=t.params.enabled,w=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),v&&!x?t.disable():!v&&x&&t.enable(),t.currentBreakpoint=h,t.emit("_beforeBreakpoint",d),i&&(_?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!b&&w?(t.loopCreate(e),t.updateSlides()):b&&!w&&t.loopDestroy()),t.emit("breakpoint",d)},getBreakpoint:function(t,e,i){if(void 0===e&&(e="window"),!t||"container"===e&&!i)return;let n=!1;const r=a(),o="window"===e?r.innerHeight:i.clientHeight,s=Object.keys(t).map(t=>{if("string"==typeof t&&0===t.indexOf("@")){const e=parseFloat(t.substr(1));return{value:o*e,point:t}}return{value:t,point:t}});s.sort((t,e)=>parseInt(t.value,10)-parseInt(e.value,10));for(let t=0;t<s.length;t+=1){const{point:a,value:o}=s[t];"window"===e?r.matchMedia(`(min-width: ${o}px)`).matches&&(n=a):o<=i.clientWidth&&(n=a)}return n||"max"}},checkOverflow:{checkOverflow:function(){const t=this,{isLocked:e,params:i}=t,{slidesOffsetBefore:n}=i;if(n){const e=t.slides.length-1,i=t.slidesGrid[e]+t.slidesSizesGrid[e]+2*n;t.isLocked=t.size>i}else t.isLocked=1===t.snapGrid.length;!0===i.allowSlideNext&&(t.allowSlideNext=!t.isLocked),!0===i.allowSlidePrev&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}},classes:{addClasses:function(){const t=this,{classNames:e,params:i,rtl:n,el:r,device:a}=t,o=function(t,e){const i=[];return t.forEach(t=>{"object"==typeof t?Object.keys(t).forEach(n=>{t[n]&&i.push(e+n)}):"string"==typeof t&&i.push(e+t)}),i}(["initialized",i.direction,{"free-mode":t.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:n},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&"column"===i.grid.fill},{android:a.android},{ios:a.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);e.push(...o),r.classList.add(...e),t.emitContainerClasses()},removeClasses:function(){const{el:t,classNames:e}=this;t&&"string"!=typeof t&&(t.classList.remove(...e),this.emitContainerClasses())}}},K={};class ${constructor(){let t,e;for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?e=r[0]:[t,e]=r,e||(e={}),e=u({},e),t&&!e.el&&(e.el=t);const o=n();if(e.el&&"string"==typeof e.el&&o.querySelectorAll(e.el).length>1){const t=[];return o.querySelectorAll(e.el).forEach(i=>{const n=u({},e,{el:i});t.push(new $(n))}),t}const s=this;s.__swiper__=!0,s.support=L(),s.device=D({userAgent:e.userAgent}),s.browser=P(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],e.modules&&Array.isArray(e.modules)&&s.modules.push(...e.modules);const l={};s.modules.forEach(t=>{t({params:e,swiper:s,extendParams:J(e,l),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const c=u({},Z,l);return s.params=u({},c,K,e),s.originalParams=u({},s.params),s.passedParams=u({},e),s.params&&s.params.on&&Object.keys(s.params.on).forEach(t=>{s.on(t,s.params.on[t])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===s.params.direction,isVertical:()=>"vertical"===s.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:e,params:i}=this,n=b(m(e,`.${i.slideClass}, swiper-slide`)[0]);return b(t)-n}getSlideIndexByData(t){return this.getSlideIndex(this.slides.find(e=>1*e.getAttribute("data-swiper-slide-index")===t))}recalcSlides(){const{slidesEl:t,params:e}=this;this.slides=m(t,`.${e.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,e){const i=this;t=Math.min(Math.max(t,0),1);const n=i.minTranslate(),r=(i.maxTranslate()-n)*t+n;i.translateTo(r,void 0===e?0:e),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=t.el.className.split(" ").filter(e=>0===e.indexOf("swiper")||0===e.indexOf(t.params.containerModifierClass));t.emit("_containerClasses",e.join(" "))}getSlideClasses(t){const e=this;return e.destroyed?"":t.className.split(" ").filter(t=>0===t.indexOf("swiper-slide")||0===t.indexOf(e.params.slideClass)).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=[];t.slides.forEach(i=>{const n=t.getSlideClasses(i);e.push({slideEl:i,classNames:n}),t.emit("_slideClass",i,n)}),t.emit("_slideClasses",e)}slidesPerViewDynamic(t,e){void 0===t&&(t="current"),void 0===e&&(e=!1);const{params:i,slides:n,slidesGrid:r,slidesSizesGrid:a,size:o,activeIndex:s}=this;let l=1;if("number"==typeof i.slidesPerView)return i.slidesPerView;if(i.centeredSlides){let t,e=n[s]?Math.ceil(n[s].swiperSlideSize):0;for(let i=s+1;i<n.length;i+=1)n[i]&&!t&&(e+=Math.ceil(n[i].swiperSlideSize),l+=1,e>o&&(t=!0));for(let i=s-1;i>=0;i-=1)n[i]&&!t&&(e+=n[i].swiperSlideSize,l+=1,e>o&&(t=!0))}else if("current"===t)for(let t=s+1;t<n.length;t+=1)(e?r[t]+a[t]-r[s]<o:r[t]-r[s]<o)&&(l+=1);else for(let t=s-1;t>=0;t-=1)r[s]-r[t]<o&&(l+=1);return l}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:e,params:i}=t;function n(){const e=t.rtlTranslate?-1*t.translate:t.translate,i=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(i),t.updateActiveIndex(),t.updateSlidesClasses()}let r;if(i.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(e=>{e.complete&&I(t,e)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),i.freeMode&&i.freeMode.enabled&&!i.cssMode)n(),i.autoHeight&&t.updateAutoHeight();else{if(("auto"===i.slidesPerView||i.slidesPerView>1)&&t.isEnd&&!i.centeredSlides){const e=t.virtual&&i.virtual.enabled?t.virtual.slides:t.slides;r=t.slideTo(e.length-1,0,!1,!0)}else r=t.slideTo(t.activeIndex,0,!1,!0);r||n()}i.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,e){void 0===e&&(e=!0);const i=this,n=i.params.direction;return t||(t="horizontal"===n?"vertical":"horizontal"),t===n||"horizontal"!==t&&"vertical"!==t||(i.el.classList.remove(`${i.params.containerModifierClass}${n}`),i.el.classList.add(`${i.params.containerModifierClass}${t}`),i.emitContainerClasses(),i.params.direction=t,i.slides.forEach(e=>{"vertical"===t?e.style.width="":e.style.height=""}),i.emit("changeDirection"),e&&i.update()),i}changeLanguageDirection(t){const e=this;e.rtl&&"rtl"===t||!e.rtl&&"ltr"===t||(e.rtl="rtl"===t,e.rtlTranslate="horizontal"===e.params.direction&&e.rtl,e.rtl?(e.el.classList.add(e.params.containerModifierClass+"rtl"),e.el.dir="rtl"):(e.el.classList.remove(e.params.containerModifierClass+"rtl"),e.el.dir="ltr"),e.update())}mount(t){const e=this;if(e.mounted)return!0;let i=t||e.params.el;if("string"==typeof i&&(i=document.querySelector(i)),!i)return!1;i.swiper=e,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===e.params.swiperElementNodeName.toUpperCase()&&(e.isElement=!0);const n=()=>"."+(e.params.wrapperClass||"").trim().split(" ").join(".");let r=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(n()):m(i,n())[0];return!r&&e.params.createElements&&(r=v("div",e.params.wrapperClass),i.append(r),m(i,"."+e.params.slideClass).forEach(t=>{r.append(t)})),Object.assign(e,{el:i,wrapperEl:r,slidesEl:e.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:r,hostEl:e.isElement?i.parentNode.host:i,mounted:!0,rtl:"rtl"===i.dir.toLowerCase()||"rtl"===_(i,"direction"),rtlTranslate:"horizontal"===e.params.direction&&("rtl"===i.dir.toLowerCase()||"rtl"===_(i,"direction")),wrongRTL:"-webkit-box"===_(r,"display")}),!0}init(t){const e=this;if(e.initialized)return e;if(!1===e.mount(t))return e;e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.enabled&&e.setGrabCursor(),e.params.loop&&e.virtual&&e.params.virtual.enabled?e.slideTo(e.params.initialSlide+e.virtual.slidesBefore,0,e.params.runCallbacksOnInit,!1,!0):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit,!1,!0),e.params.loop&&e.loopCreate(),e.attachEvents();const i=[...e.el.querySelectorAll('[loading="lazy"]')];return e.isElement&&i.push(...e.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(t=>{t.complete?I(e,t):t.addEventListener("load",t=>{I(e,t.target)})}),N(e),e.initialized=!0,N(e),e.emit("init"),e.emit("afterInit"),e}destroy(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);const i=this,{params:n,el:r,wrapperEl:a,slides:o}=i;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),e&&(i.removeClasses(),r&&"string"!=typeof r&&r.removeAttribute("style"),a&&a.removeAttribute("style"),o&&o.length&&o.forEach(t=>{t.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),t.removeAttribute("style"),t.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(t=>{i.off(t)}),!1!==t&&(i.el&&"string"!=typeof i.el&&(i.el.swiper=null),function(t){const e=t;Object.keys(e).forEach(t=>{try{e[t]=null}catch(t){}try{delete e[t]}catch(t){}})}(i)),i.destroyed=!0),null}static extendDefaults(t){u(K,t)}static get extendedDefaults(){return K}static get defaults(){return Z}static installModule(t){$.prototype.__modules__||($.prototype.__modules__=[]);const e=$.prototype.__modules__;"function"==typeof t&&e.indexOf(t)<0&&e.push(t)}static use(t){return Array.isArray(t)?(t.forEach(t=>$.installModule(t)),$):($.installModule(t),$)}}function tt(t,e,i,n){return t.params.createElements&&Object.keys(n).forEach(r=>{if(!i[r]&&!0===i.auto){let a=m(t.el,"."+n[r])[0];a||(a=v("div",n[r]),a.className=n[r],t.el.append(a)),i[r]=a,e[r]=a}}),i}function et(t){return void 0===t&&(t=""),"."+t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}function it(t){const e=this,{params:i,slidesEl:n}=e;i.loop&&e.loopDestroy();const r=t=>{if("string"==typeof t){const e=document.createElement("div");e.innerHTML=t,n.append(e.children[0]),e.innerHTML=""}else n.append(t)};if("object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&r(t[e]);else r(t);e.recalcSlides(),i.loop&&e.loopCreate(),i.observer&&!e.isElement||e.update()}function nt(t){const e=this,{params:i,activeIndex:n,slidesEl:r}=e;i.loop&&e.loopDestroy();let a=n+1;const o=t=>{if("string"==typeof t){const e=document.createElement("div");e.innerHTML=t,r.prepend(e.children[0]),e.innerHTML=""}else r.prepend(t)};if("object"==typeof t&&"length"in t){for(let e=0;e<t.length;e+=1)t[e]&&o(t[e]);a=n+t.length}else o(t);e.recalcSlides(),i.loop&&e.loopCreate(),i.observer&&!e.isElement||e.update(),e.slideTo(a,0,!1)}function rt(t,e){const i=this,{params:n,activeIndex:r,slidesEl:a}=i;let o=r;n.loop&&(o-=i.loopedSlides,i.loopDestroy(),i.recalcSlides());const s=i.slides.length;if(t<=0)return void i.prependSlide(e);if(t>=s)return void i.appendSlide(e);let l=o>t?o+1:o;const c=[];for(let e=s-1;e>=t;e-=1){const t=i.slides[e];t.remove(),c.unshift(t)}if("object"==typeof e&&"length"in e){for(let t=0;t<e.length;t+=1)e[t]&&a.append(e[t]);l=o>t?o+e.length:o}else a.append(e);for(let t=0;t<c.length;t+=1)a.append(c[t]);i.recalcSlides(),n.loop&&i.loopCreate(),n.observer&&!i.isElement||i.update(),n.loop?i.slideTo(l+i.loopedSlides,0,!1):i.slideTo(l,0,!1)}function at(t){const e=this,{params:i,activeIndex:n}=e;let r=n;i.loop&&(r-=e.loopedSlides,e.loopDestroy());let a,o=r;if("object"==typeof t&&"length"in t){for(let i=0;i<t.length;i+=1)a=t[i],e.slides[a]&&e.slides[a].remove(),a<o&&(o-=1);o=Math.max(o,0)}else a=t,e.slides[a]&&e.slides[a].remove(),a<o&&(o-=1),o=Math.max(o,0);e.recalcSlides(),i.loop&&e.loopCreate(),i.observer&&!e.isElement||e.update(),i.loop?e.slideTo(o+e.loopedSlides,0,!1):e.slideTo(o,0,!1)}function ot(){const t=this,e=[];for(let i=0;i<t.slides.length;i+=1)e.push(i);t.removeSlide(e)}function st(t){const{effect:e,swiper:i,on:n,setTranslate:r,setTransition:a,overwriteParams:o,perspective:s,recreateShadows:l,getEffectParams:c}=t;let h;n("beforeInit",()=>{if(i.params.effect!==e)return;i.classNames.push(`${i.params.containerModifierClass}${e}`),s&&s()&&i.classNames.push(i.params.containerModifierClass+"3d");const t=o?o():{};Object.assign(i.params,t),Object.assign(i.originalParams,t)}),n("setTranslate",()=>{i.params.effect===e&&r()}),n("setTransition",(t,n)=>{i.params.effect===e&&a(n)}),n("transitionEnd",()=>{if(i.params.effect===e&&l){if(!c||!c().slideShadows)return;i.slides.forEach(t=>{t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(t=>t.remove())}),l()}}),n("virtualUpdate",()=>{i.params.effect===e&&(i.slides.length||(h=!0),requestAnimationFrame(()=>{h&&i.slides&&i.slides.length&&(r(),h=!1)}))})}function lt(t,e){const i=f(e);return i!==e&&(i.style.backfaceVisibility="hidden",i.style["-webkit-backface-visibility"]="hidden"),i}function ct(t){let{swiper:e,duration:i,transformElements:n,allSlides:r}=t;const{activeIndex:a}=e;if(e.params.virtualTranslate&&0!==i){let t,i=!1;t=r?n:n.filter(t=>{const i=t.classList.contains("swiper-slide-transform")?(t=>t.parentElement?t.parentElement:e.slides.find(e=>e.shadowRoot&&e.shadowRoot===t.parentNode))(t):t;return e.getSlideIndex(i)===a}),t.forEach(t=>{w(t,()=>{if(i)return;if(!e||e.destroyed)return;i=!0,e.animating=!1;const t=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(t)})})}}function ht(t,e,i){const n=`swiper-slide-shadow${i?"-"+i:""}${t?" swiper-slide-shadow-"+t:""}`,r=f(e);let a=r.querySelector("."+n.split(" ").join("."));return a||(a=v("div",n.split(" ")),r.append(a)),a}Object.keys(Q).forEach(t=>{Object.keys(Q[t]).forEach(e=>{$.prototype[e]=Q[t][e]})}),$.use([function(t){let{swiper:e,on:i,emit:n}=t;const r=a();let o=null,s=null;const l=()=>{e&&!e.destroyed&&e.initialized&&(n("beforeResize"),n("resize"))},c=()=>{e&&!e.destroyed&&e.initialized&&n("orientationchange")};i("init",()=>{e.params.resizeObserver&&void 0!==r.ResizeObserver?e&&!e.destroyed&&e.initialized&&(o=new ResizeObserver(t=>{s=r.requestAnimationFrame(()=>{const{width:i,height:n}=e;let r=i,a=n;t.forEach(t=>{let{contentBoxSize:i,contentRect:n,target:o}=t;o&&o!==e.el||(r=n?n.width:(i[0]||i).inlineSize,a=n?n.height:(i[0]||i).blockSize)}),r===i&&a===n||l()})}),o.observe(e.el)):(r.addEventListener("resize",l),r.addEventListener("orientationchange",c))}),i("destroy",()=>{s&&r.cancelAnimationFrame(s),o&&o.unobserve&&e.el&&(o.unobserve(e.el),o=null),r.removeEventListener("resize",l),r.removeEventListener("orientationchange",c)})},function(t){let{swiper:e,extendParams:i,on:n,emit:r}=t;const o=[],s=a(),l=function(t,i){void 0===i&&(i={});const n=new(s.MutationObserver||s.WebkitMutationObserver)(t=>{if(e.__preventObserver__)return;if(1===t.length)return void r("observerUpdate",t[0]);const i=function(){r("observerUpdate",t[0])};s.requestAnimationFrame?s.requestAnimationFrame(i):s.setTimeout(i,0)});n.observe(t,{attributes:void 0===i.attributes||i.attributes,childList:e.isElement||(void 0===i.childList||i).childList,characterData:void 0===i.characterData||i.characterData}),o.push(n)};i({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",()=>{if(e.params.observer){if(e.params.observeParents){const t=x(e.hostEl);for(let e=0;e<t.length;e+=1)l(t[e])}l(e.hostEl,{childList:e.params.observeSlideChildren}),l(e.wrapperEl,{attributes:!1})}}),n("destroy",()=>{o.forEach(t=>{t.disconnect()}),o.splice(0,o.length)})}]);const ut=[function(t){let e,{swiper:i,extendParams:r,on:a,emit:o}=t;r({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});const s=n();i.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const l=s.createElement("div");function c(t,e){const n=i.params.virtual;if(n.cache&&i.virtual.cache[e])return i.virtual.cache[e];let r;return n.renderSlide?(r=n.renderSlide.call(i,t,e),"string"==typeof r&&(l.innerHTML=r,r=l.children[0])):r=i.isElement?v("swiper-slide"):v("div",i.params.slideClass),r.setAttribute("data-swiper-slide-index",e),n.renderSlide||(r.innerHTML=t),n.cache&&(i.virtual.cache[e]=r),r}function h(t,e,n){const{slidesPerView:r,slidesPerGroup:a,centeredSlides:s,loop:l,initialSlide:h}=i.params;if(e&&!l&&h>0)return;const{addSlidesBefore:u,addSlidesAfter:d}=i.params.virtual,{from:p,to:f,slides:g,slidesGrid:v,offset:y}=i.virtual;i.params.cssMode||i.updateActiveIndex();const _=void 0===n?i.activeIndex||0:n;let b,x,w;b=i.rtlTranslate?"right":i.isHorizontal()?"left":"top",s?(x=Math.floor(r/2)+a+d,w=Math.floor(r/2)+a+u):(x=r+(a-1)+d,w=(l?r:a)+u);let M=_-w,E=_+x;l||(M=Math.max(M,0),E=Math.min(E,g.length-1));let T=(i.slidesGrid[M]||0)-(i.slidesGrid[0]||0);function S(){i.updateSlides(),i.updateProgress(),i.updateSlidesClasses(),o("virtualUpdate")}if(l&&_>=w?(M-=w,s||(T+=i.slidesGrid[0])):l&&_<w&&(M=-w,s&&(T+=i.slidesGrid[0])),Object.assign(i.virtual,{from:M,to:E,offset:T,slidesGrid:i.slidesGrid,slidesBefore:w,slidesAfter:x}),p===M&&f===E&&!t)return i.slidesGrid!==v&&T!==y&&i.slides.forEach(t=>{t.style[b]=T-Math.abs(i.cssOverflowAdjustment())+"px"}),i.updateProgress(),void o("virtualUpdate");if(i.params.virtual.renderExternal)return i.params.virtual.renderExternal.call(i,{offset:T,from:M,to:E,slides:function(){const t=[];for(let e=M;e<=E;e+=1)t.push(g[e]);return t}()}),void(i.params.virtual.renderExternalUpdate?S():o("virtualUpdate"));const A=[],C=[],L=t=>{let e=t;return t<0?e=g.length+t:e>=g.length&&(e-=g.length),e};if(t)i.slides.filter(t=>t.matches(`.${i.params.slideClass}, swiper-slide`)).forEach(t=>{t.remove()});else for(let t=p;t<=f;t+=1)if(t<M||t>E){const e=L(t);i.slides.filter(t=>t.matches(`.${i.params.slideClass}[data-swiper-slide-index="${e}"], swiper-slide[data-swiper-slide-index="${e}"]`)).forEach(t=>{t.remove()})}const D=l?-g.length:0,P=l?2*g.length:g.length;for(let e=D;e<P;e+=1)if(e>=M&&e<=E){const i=L(e);void 0===f||t?C.push(i):(e>f&&C.push(i),e<p&&A.push(i))}if(C.forEach(t=>{i.slidesEl.append(c(g[t],t))}),l)for(let t=A.length-1;t>=0;t-=1){const e=A[t];i.slidesEl.prepend(c(g[e],e))}else A.sort((t,e)=>e-t),A.forEach(t=>{i.slidesEl.prepend(c(g[t],t))});m(i.slidesEl,".swiper-slide, swiper-slide").forEach(t=>{t.style[b]=T-Math.abs(i.cssOverflowAdjustment())+"px"}),S()}a("beforeInit",()=>{if(!i.params.virtual.enabled)return;let t;if(void 0===i.passedParams.virtual.slides){const e=[...i.slidesEl.children].filter(t=>t.matches(`.${i.params.slideClass}, swiper-slide`));e&&e.length&&(i.virtual.slides=[...e],t=!0,e.forEach((t,e)=>{t.setAttribute("data-swiper-slide-index",e),i.virtual.cache[e]=t,t.remove()}))}t||(i.virtual.slides=i.params.virtual.slides),i.classNames.push(i.params.containerModifierClass+"virtual"),i.params.watchSlidesProgress=!0,i.originalParams.watchSlidesProgress=!0,h(!1,!0)}),a("setTranslate",()=>{i.params.virtual.enabled&&(i.params.cssMode&&!i._immediateVirtual?(clearTimeout(e),e=setTimeout(()=>{h()},100)):h())}),a("init update resize",()=>{i.params.virtual.enabled&&i.params.cssMode&&d(i.wrapperEl,"--swiper-virtual-size",i.virtualSize+"px")}),Object.assign(i.virtual,{appendSlide:function(t){if("object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&i.virtual.slides.push(t[e]);else i.virtual.slides.push(t);h(!0)},prependSlide:function(t){const e=i.activeIndex;let n=e+1,r=1;if(Array.isArray(t)){for(let e=0;e<t.length;e+=1)t[e]&&i.virtual.slides.unshift(t[e]);n=e+t.length,r=t.length}else i.virtual.slides.unshift(t);if(i.params.virtual.cache){const t=i.virtual.cache,e={};Object.keys(t).forEach(i=>{const n=t[i],a=n.getAttribute("data-swiper-slide-index");a&&n.setAttribute("data-swiper-slide-index",parseInt(a,10)+r),e[parseInt(i,10)+r]=n}),i.virtual.cache=e}h(!0),i.slideTo(n,0)},removeSlide:function(t){if(null==t)return;let e=i.activeIndex;if(Array.isArray(t))for(let n=t.length-1;n>=0;n-=1)i.params.virtual.cache&&(delete i.virtual.cache[t[n]],Object.keys(i.virtual.cache).forEach(e=>{e>t&&(i.virtual.cache[e-1]=i.virtual.cache[e],i.virtual.cache[e-1].setAttribute("data-swiper-slide-index",e-1),delete i.virtual.cache[e])})),i.virtual.slides.splice(t[n],1),t[n]<e&&(e-=1),e=Math.max(e,0);else i.params.virtual.cache&&(delete i.virtual.cache[t],Object.keys(i.virtual.cache).forEach(e=>{e>t&&(i.virtual.cache[e-1]=i.virtual.cache[e],i.virtual.cache[e-1].setAttribute("data-swiper-slide-index",e-1),delete i.virtual.cache[e])})),i.virtual.slides.splice(t,1),t<e&&(e-=1),e=Math.max(e,0);h(!0),i.slideTo(e,0)},removeAllSlides:function(){i.virtual.slides=[],i.params.virtual.cache&&(i.virtual.cache={}),h(!0),i.slideTo(0,0)},update:h})},function(t){let{swiper:e,extendParams:i,on:r,emit:o}=t;const s=n(),l=a();function c(t){if(!e.enabled)return;const{rtlTranslate:i}=e;let n=t;n.originalEvent&&(n=n.originalEvent);const r=n.keyCode||n.charCode,a=e.params.keyboard.pageUpDown,c=a&&33===r,h=a&&34===r,u=37===r,d=39===r,p=38===r,f=40===r;if(!e.allowSlideNext&&(e.isHorizontal()&&d||e.isVertical()&&f||h))return!1;if(!e.allowSlidePrev&&(e.isHorizontal()&&u||e.isVertical()&&p||c))return!1;if(!(n.shiftKey||n.altKey||n.ctrlKey||n.metaKey||s.activeElement&&s.activeElement.nodeName&&("input"===s.activeElement.nodeName.toLowerCase()||"textarea"===s.activeElement.nodeName.toLowerCase()))){if(e.params.keyboard.onlyInViewport&&(c||h||u||d||p||f)){let t=!1;if(x(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&0===x(e.el,"."+e.params.slideActiveClass).length)return;const n=e.el,r=n.clientWidth,a=n.clientHeight,o=l.innerWidth,s=l.innerHeight,c=y(n);i&&(c.left-=n.scrollLeft);const h=[[c.left,c.top],[c.left+r,c.top],[c.left,c.top+a],[c.left+r,c.top+a]];for(let e=0;e<h.length;e+=1){const i=h[e];if(i[0]>=0&&i[0]<=o&&i[1]>=0&&i[1]<=s){if(0===i[0]&&0===i[1])continue;t=!0}}if(!t)return}e.isHorizontal()?((c||h||u||d)&&(n.preventDefault?n.preventDefault():n.returnValue=!1),((h||d)&&!i||(c||u)&&i)&&e.slideNext(),((c||u)&&!i||(h||d)&&i)&&e.slidePrev()):((c||h||p||f)&&(n.preventDefault?n.preventDefault():n.returnValue=!1),(h||f)&&e.slideNext(),(c||p)&&e.slidePrev()),o("keyPress",r)}}function h(){e.keyboard.enabled||(s.addEventListener("keydown",c),e.keyboard.enabled=!0)}function u(){e.keyboard.enabled&&(s.removeEventListener("keydown",c),e.keyboard.enabled=!1)}e.keyboard={enabled:!1},i({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),r("init",()=>{e.params.keyboard.enabled&&h()}),r("destroy",()=>{e.keyboard.enabled&&u()}),Object.assign(e.keyboard,{enable:h,disable:u})},function(t){let{swiper:e,extendParams:i,on:n,emit:r}=t;const o=a();let c;i({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let h,u=l();const d=[];function p(){e.enabled&&(e.mouseEntered=!0)}function f(){e.enabled&&(e.mouseEntered=!1)}function m(t){return!(e.params.mousewheel.thresholdDelta&&t.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&l()-u<e.params.mousewheel.thresholdTime||!(t.delta>=6&&l()-u<60)&&(t.direction<0?e.isEnd&&!e.params.loop||e.animating||(e.slideNext(),r("scroll",t.raw)):e.isBeginning&&!e.params.loop||e.animating||(e.slidePrev(),r("scroll",t.raw)),u=(new o.Date).getTime(),1))}function g(t){let i=t,n=!0;if(!e.enabled)return;if(t.target.closest("."+e.params.mousewheel.noMousewheelClass))return;const a=e.params.mousewheel;e.params.cssMode&&i.preventDefault();let o=e.el;"container"!==e.params.mousewheel.eventsTarget&&(o=document.querySelector(e.params.mousewheel.eventsTarget));const u=o&&o.contains(i.target);if(!e.mouseEntered&&!u&&!a.releaseOnEdges)return!0;i.originalEvent&&(i=i.originalEvent);let p=0;const f=e.rtlTranslate?-1:1,g=function(t){let e=0,i=0,n=0,r=0;return"detail"in t&&(i=t.detail),"wheelDelta"in t&&(i=-t.wheelDelta/120),"wheelDeltaY"in t&&(i=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=i,i=0),n=10*e,r=10*i,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(n=t.deltaX),t.shiftKey&&!n&&(n=r,r=0),(n||r)&&t.deltaMode&&(1===t.deltaMode?(n*=40,r*=40):(n*=800,r*=800)),n&&!e&&(e=n<1?-1:1),r&&!i&&(i=r<1?-1:1),{spinX:e,spinY:i,pixelX:n,pixelY:r}}(i);if(a.forceToAxis)if(e.isHorizontal()){if(!(Math.abs(g.pixelX)>Math.abs(g.pixelY)))return!0;p=-g.pixelX*f}else{if(!(Math.abs(g.pixelY)>Math.abs(g.pixelX)))return!0;p=-g.pixelY}else p=Math.abs(g.pixelX)>Math.abs(g.pixelY)?-g.pixelX*f:-g.pixelY;if(0===p)return!0;a.invert&&(p=-p);let v=e.getTranslate()+p*a.sensitivity;if(v>=e.minTranslate()&&(v=e.minTranslate()),v<=e.maxTranslate()&&(v=e.maxTranslate()),n=!!e.params.loop||!(v===e.minTranslate()||v===e.maxTranslate()),n&&e.params.nested&&i.stopPropagation(),e.params.freeMode&&e.params.freeMode.enabled){const t={time:l(),delta:Math.abs(p),direction:Math.sign(p)},n=h&&t.time<h.time+500&&t.delta<=h.delta&&t.direction===h.direction;if(!n){h=void 0;let o=e.getTranslate()+p*a.sensitivity;const l=e.isBeginning,u=e.isEnd;if(o>=e.minTranslate()&&(o=e.minTranslate()),o<=e.maxTranslate()&&(o=e.maxTranslate()),e.setTransition(0),e.setTranslate(o),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!l&&e.isBeginning||!u&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:t.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(c),c=void 0,d.length>=15&&d.shift();const i=d.length?d[d.length-1]:void 0,n=d[0];if(d.push(t),i&&(t.delta>i.delta||t.direction!==i.direction))d.splice(0);else if(d.length>=15&&t.time-n.time<500&&n.delta-t.delta>=1&&t.delta<=6){const i=p>0?.8:.2;h=t,d.splice(0),c=s(()=>{!e.destroyed&&e.params&&e.slideToClosest(e.params.speed,!0,void 0,i)},0)}c||(c=s(()=>{!e.destroyed&&e.params&&(h=t,d.splice(0),e.slideToClosest(e.params.speed,!0,void 0,.5))},500))}if(n||r("scroll",i),e.params.autoplay&&e.params.autoplay.disableOnInteraction&&e.autoplay.stop(),a.releaseOnEdges&&(o===e.minTranslate()||o===e.maxTranslate()))return!0}}else{const i={time:l(),delta:Math.abs(p),direction:Math.sign(p),raw:t};d.length>=2&&d.shift();const n=d.length?d[d.length-1]:void 0;if(d.push(i),n?(i.direction!==n.direction||i.delta>n.delta||i.time>n.time+150)&&m(i):m(i),function(t){const i=e.params.mousewheel;if(t.direction<0){if(e.isEnd&&!e.params.loop&&i.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&i.releaseOnEdges)return!0;return!1}(i))return!0}return i.preventDefault?i.preventDefault():i.returnValue=!1,!1}function v(t){let i=e.el;"container"!==e.params.mousewheel.eventsTarget&&(i=document.querySelector(e.params.mousewheel.eventsTarget)),i[t]("mouseenter",p),i[t]("mouseleave",f),i[t]("wheel",g)}function y(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",g),!0):!e.mousewheel.enabled&&(v("addEventListener"),e.mousewheel.enabled=!0,!0)}function _(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,g),!0):!!e.mousewheel.enabled&&(v("removeEventListener"),e.mousewheel.enabled=!1,!0)}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&_(),e.params.mousewheel.enabled&&y()}),n("destroy",()=>{e.params.cssMode&&y(),e.mousewheel.enabled&&_()}),Object.assign(e.mousewheel,{enable:y,disable:_})},function(t){let{swiper:e,extendParams:i,on:n,emit:r}=t;function a(t){let i;return t&&"string"==typeof t&&e.isElement&&(i=e.el.querySelector(t)||e.hostEl.querySelector(t),i)?i:(t&&("string"==typeof t&&(i=[...document.querySelectorAll(t)]),e.params.uniqueNavElements&&"string"==typeof t&&i&&i.length>1&&1===e.el.querySelectorAll(t).length?i=e.el.querySelector(t):i&&1===i.length&&(i=i[0])),t&&!i?t:i)}function o(t,i){const n=e.params.navigation;(t=E(t)).forEach(t=>{t&&(t.classList[i?"add":"remove"](...n.disabledClass.split(" ")),"BUTTON"===t.tagName&&(t.disabled=i),e.params.watchOverflow&&e.enabled&&t.classList[e.isLocked?"add":"remove"](n.lockClass))})}function s(){const{nextEl:t,prevEl:i}=e.navigation;if(e.params.loop)return o(i,!1),void o(t,!1);o(i,e.isBeginning&&!e.params.rewind),o(t,e.isEnd&&!e.params.rewind)}function l(t){t.preventDefault(),(!e.isBeginning||e.params.loop||e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function c(t){t.preventDefault(),(!e.isEnd||e.params.loop||e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function h(){const t=e.params.navigation;if(e.params.navigation=tt(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!t.nextEl&&!t.prevEl)return;let i=a(t.nextEl),n=a(t.prevEl);Object.assign(e.navigation,{nextEl:i,prevEl:n}),i=E(i),n=E(n);const r=(i,n)=>{i&&i.addEventListener("click","next"===n?c:l),!e.enabled&&i&&i.classList.add(...t.lockClass.split(" "))};i.forEach(t=>r(t,"next")),n.forEach(t=>r(t,"prev"))}function u(){let{nextEl:t,prevEl:i}=e.navigation;t=E(t),i=E(i);const n=(t,i)=>{t.removeEventListener("click","next"===i?c:l),t.classList.remove(...e.params.navigation.disabledClass.split(" "))};t.forEach(t=>n(t,"next")),i.forEach(t=>n(t,"prev"))}i({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null},n("init",()=>{!1===e.params.navigation.enabled?d():(h(),s())}),n("toEdge fromEdge lock unlock",()=>{s()}),n("destroy",()=>{u()}),n("enable disable",()=>{let{nextEl:t,prevEl:i}=e.navigation;t=E(t),i=E(i),e.enabled?s():[...t,...i].filter(t=>!!t).forEach(t=>t.classList.add(e.params.navigation.lockClass))}),n("click",(t,i)=>{let{nextEl:n,prevEl:a}=e.navigation;n=E(n),a=E(a);const o=i.target;let s=a.includes(o)||n.includes(o);if(e.isElement&&!s){const t=i.path||i.composedPath&&i.composedPath();t&&(s=t.find(t=>n.includes(t)||a.includes(t)))}if(e.params.navigation.hideOnClick&&!s){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===o||e.pagination.el.contains(o)))return;let t;n.length?t=n[0].classList.contains(e.params.navigation.hiddenClass):a.length&&(t=a[0].classList.contains(e.params.navigation.hiddenClass)),r(!0===t?"navigationShow":"navigationHide"),[...n,...a].filter(t=>!!t).forEach(t=>t.classList.toggle(e.params.navigation.hiddenClass))}});const d=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(e.navigation,{enable:()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),h(),s()},disable:d,update:s,init:h,destroy:u})},function(t){let{swiper:e,extendParams:i,on:n,emit:r}=t;const a="swiper-pagination";let o;i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:t=>t,formatFractionTotal:t=>t,bulletClass:a+"-bullet",bulletActiveClass:a+"-bullet-active",modifierClass:a+"-",currentClass:a+"-current",totalClass:a+"-total",hiddenClass:a+"-hidden",progressbarFillClass:a+"-progressbar-fill",progressbarOppositeClass:a+"-progressbar-opposite",clickableClass:a+"-clickable",lockClass:a+"-lock",horizontalClass:a+"-horizontal",verticalClass:a+"-vertical",paginationDisabledClass:a+"-disabled"}}),e.pagination={el:null,bullets:[]};let s=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&0===e.pagination.el.length}function c(t,i){const{bulletActiveClass:n}=e.params.pagination;t&&(t=t[("prev"===i?"previous":"next")+"ElementSibling"])&&(t.classList.add(`${n}-${i}`),(t=t[("prev"===i?"previous":"next")+"ElementSibling"])&&t.classList.add(`${n}-${i}-${i}`))}function h(t){const i=t.target.closest(et(e.params.pagination.bulletClass));if(!i)return;t.preventDefault();const n=b(i)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===n)return;const t=(r=e.realIndex,a=n,(a%=o=e.slides.length)==1+(r%=o)?"next":a===r-1?"previous":void 0);"next"===t?e.slideNext():"previous"===t?e.slidePrev():e.slideToLoop(n)}else e.slideTo(n);var r,a,o}function u(){const t=e.rtl,i=e.params.pagination;if(l())return;let n,a,h=e.pagination.el;h=E(h);const u=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,d=e.params.loop?Math.ceil(u/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(a=e.previousRealIndex||0,n=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):void 0!==e.snapIndex?(n=e.snapIndex,a=e.previousSnapIndex):(a=e.previousIndex||0,n=e.activeIndex||0),"bullets"===i.type&&e.pagination.bullets&&e.pagination.bullets.length>0){const r=e.pagination.bullets;let l,u,d;if(i.dynamicBullets&&(o=M(r[0],e.isHorizontal()?"width":"height",!0),h.forEach(t=>{t.style[e.isHorizontal()?"width":"height"]=o*(i.dynamicMainBullets+4)+"px"}),i.dynamicMainBullets>1&&void 0!==a&&(s+=n-(a||0),s>i.dynamicMainBullets-1?s=i.dynamicMainBullets-1:s<0&&(s=0)),l=Math.max(n-s,0),u=l+(Math.min(r.length,i.dynamicMainBullets)-1),d=(u+l)/2),r.forEach(t=>{const e=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(t=>`${i.bulletActiveClass}${t}`)].map(t=>"string"==typeof t&&t.includes(" ")?t.split(" "):t).flat();t.classList.remove(...e)}),h.length>1)r.forEach(t=>{const r=b(t);r===n?t.classList.add(...i.bulletActiveClass.split(" ")):e.isElement&&t.setAttribute("part","bullet"),i.dynamicBullets&&(r>=l&&r<=u&&t.classList.add(...(i.bulletActiveClass+"-main").split(" ")),r===l&&c(t,"prev"),r===u&&c(t,"next"))});else{const t=r[n];if(t&&t.classList.add(...i.bulletActiveClass.split(" ")),e.isElement&&r.forEach((t,e)=>{t.setAttribute("part",e===n?"bullet-active":"bullet")}),i.dynamicBullets){const t=r[l],e=r[u];for(let t=l;t<=u;t+=1)r[t]&&r[t].classList.add(...(i.bulletActiveClass+"-main").split(" "));c(t,"prev"),c(e,"next")}}if(i.dynamicBullets){const n=Math.min(r.length,i.dynamicMainBullets+4),a=(o*n-o)/2-d*o,s=t?"right":"left";r.forEach(t=>{t.style[e.isHorizontal()?s:"top"]=a+"px"})}}h.forEach((t,a)=>{if("fraction"===i.type&&(t.querySelectorAll(et(i.currentClass)).forEach(t=>{t.textContent=i.formatFractionCurrent(n+1)}),t.querySelectorAll(et(i.totalClass)).forEach(t=>{t.textContent=i.formatFractionTotal(d)})),"progressbar"===i.type){let r;r=i.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";const a=(n+1)/d;let o=1,s=1;"horizontal"===r?o=a:s=a,t.querySelectorAll(et(i.progressbarFillClass)).forEach(t=>{t.style.transform=`translate3d(0,0,0) scaleX(${o}) scaleY(${s})`,t.style.transitionDuration=e.params.speed+"ms"})}"custom"===i.type&&i.renderCustom?(t.innerHTML=i.renderCustom(e,n+1,d),0===a&&r("paginationRender",t)):(0===a&&r("paginationRender",t),r("paginationUpdate",t)),e.params.watchOverflow&&e.enabled&&t.classList[e.isLocked?"add":"remove"](i.lockClass)})}function d(){const t=e.params.pagination;if(l())return;const i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let n=e.pagination.el;n=E(n);let a="";if("bullets"===t.type){let n=e.params.loop?Math.ceil(i/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&n>i&&(n=i);for(let i=0;i<n;i+=1)t.renderBullet?a+=t.renderBullet.call(e,i,t.bulletClass):a+=`<${t.bulletElement} ${e.isElement?'part="bullet"':""} class="${t.bulletClass}"></${t.bulletElement}>`}"fraction"===t.type&&(a=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`),"progressbar"===t.type&&(a=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):`<span class="${t.progressbarFillClass}"></span>`),e.pagination.bullets=[],n.forEach(i=>{"custom"!==t.type&&(i.innerHTML=a||""),"bullets"===t.type&&e.pagination.bullets.push(...i.querySelectorAll(et(t.bulletClass)))}),"custom"!==t.type&&r("paginationRender",n[0])}function p(){e.params.pagination=tt(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let i;"string"==typeof t.el&&e.isElement&&(i=e.el.querySelector(t.el)),i||"string"!=typeof t.el||(i=[...document.querySelectorAll(t.el)]),i||(i=t.el),i&&0!==i.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&Array.isArray(i)&&i.length>1&&(i=[...e.el.querySelectorAll(t.el)],i.length>1&&(i=i.find(t=>x(t,".swiper")[0]===e.el))),Array.isArray(i)&&1===i.length&&(i=i[0]),Object.assign(e.pagination,{el:i}),i=E(i),i.forEach(i=>{"bullets"===t.type&&t.clickable&&i.classList.add(...(t.clickableClass||"").split(" ")),i.classList.add(t.modifierClass+t.type),i.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass),"bullets"===t.type&&t.dynamicBullets&&(i.classList.add(`${t.modifierClass}${t.type}-dynamic`),s=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&i.classList.add(t.progressbarOppositeClass),t.clickable&&i.addEventListener("click",h),e.enabled||i.classList.add(t.lockClass)}))}function f(){const t=e.params.pagination;if(l())return;let i=e.pagination.el;i&&(i=E(i),i.forEach(i=>{i.classList.remove(t.hiddenClass),i.classList.remove(t.modifierClass+t.type),i.classList.remove(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.clickable&&(i.classList.remove(...(t.clickableClass||"").split(" ")),i.removeEventListener("click",h))})),e.pagination.bullets&&e.pagination.bullets.forEach(e=>e.classList.remove(...t.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const t=e.params.pagination;let{el:i}=e.pagination;i=E(i),i.forEach(i=>{i.classList.remove(t.horizontalClass,t.verticalClass),i.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass)})}),n("init",()=>{!1===e.params.pagination.enabled?m():(p(),d(),u())}),n("activeIndexChange",()=>{void 0===e.snapIndex&&u()}),n("snapIndexChange",()=>{u()}),n("snapGridLengthChange",()=>{d(),u()}),n("destroy",()=>{f()}),n("enable disable",()=>{let{el:t}=e.pagination;t&&(t=E(t),t.forEach(t=>t.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{u()}),n("click",(t,i)=>{const n=i.target,a=E(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&a&&a.length>0&&!n.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&n===e.navigation.nextEl||e.navigation.prevEl&&n===e.navigation.prevEl))return;const t=a[0].classList.contains(e.params.pagination.hiddenClass);r(!0===t?"paginationShow":"paginationHide"),a.forEach(t=>t.classList.toggle(e.params.pagination.hiddenClass))}});const m=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=E(t),t.forEach(t=>t.classList.add(e.params.pagination.paginationDisabledClass))),f()};Object.assign(e.pagination,{enable:()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=E(t),t.forEach(t=>t.classList.remove(e.params.pagination.paginationDisabledClass))),p(),d(),u()},disable:m,render:d,update:u,init:p,destroy:f})},function(t){let{swiper:e,extendParams:i,on:r,emit:a}=t;const l=n();let c,h,u,d,p=!1,f=null,m=null;function g(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:t,rtlTranslate:i}=e,{dragEl:n,el:r}=t,a=e.params.scrollbar,o=e.params.loop?e.progressLoop:e.progress;let s=h,l=(u-h)*o;i?(l=-l,l>0?(s=h-l,l=0):-l+h>u&&(s=u+l)):l<0?(s=h+l,l=0):l+h>u&&(s=u-l),e.isHorizontal()?(n.style.transform=`translate3d(${l}px, 0, 0)`,n.style.width=s+"px"):(n.style.transform=`translate3d(0px, ${l}px, 0)`,n.style.height=s+"px"),a.hide&&(clearTimeout(f),r.style.opacity=1,f=setTimeout(()=>{r.style.opacity=0,r.style.transitionDuration="400ms"},1e3))}function _(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:t}=e,{dragEl:i,el:n}=t;i.style.width="",i.style.height="",u=e.isHorizontal()?n.offsetWidth:n.offsetHeight,d=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),h="auto"===e.params.scrollbar.dragSize?u*d:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?i.style.width=h+"px":i.style.height=h+"px",n.style.display=d>=1?"none":"",e.params.scrollbar.hide&&(n.style.opacity=0),e.params.watchOverflow&&e.enabled&&t.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function b(t){return e.isHorizontal()?t.clientX:t.clientY}function x(t){const{scrollbar:i,rtlTranslate:n}=e,{el:r}=i;let a;a=(b(t)-y(r)[e.isHorizontal()?"left":"top"]-(null!==c?c:h/2))/(u-h),a=Math.max(Math.min(a,1),0),n&&(a=1-a);const o=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*a;e.updateProgress(o),e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}function w(t){const i=e.params.scrollbar,{scrollbar:n,wrapperEl:r}=e,{el:o,dragEl:s}=n;p=!0,c=t.target===s?b(t)-t.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,t.preventDefault(),t.stopPropagation(),r.style.transitionDuration="100ms",s.style.transitionDuration="100ms",x(t),clearTimeout(m),o.style.transitionDuration="0ms",i.hide&&(o.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),a("scrollbarDragStart",t)}function M(t){const{scrollbar:i,wrapperEl:n}=e,{el:r,dragEl:o}=i;p&&(t.preventDefault&&t.cancelable?t.preventDefault():t.returnValue=!1,x(t),n.style.transitionDuration="0ms",r.style.transitionDuration="0ms",o.style.transitionDuration="0ms",a("scrollbarDragMove",t))}function T(t){const i=e.params.scrollbar,{scrollbar:n,wrapperEl:r}=e,{el:o}=n;p&&(p=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",r.style.transitionDuration=""),i.hide&&(clearTimeout(m),m=s(()=>{o.style.opacity=0,o.style.transitionDuration="400ms"},1e3)),a("scrollbarDragEnd",t),i.snapOnRelease&&e.slideToClosest())}function S(t){const{scrollbar:i,params:n}=e,r=i.el;if(!r)return;const a=r,o=!!n.passiveListeners&&{passive:!1,capture:!1},s=!!n.passiveListeners&&{passive:!0,capture:!1};if(!a)return;const c="on"===t?"addEventListener":"removeEventListener";a[c]("pointerdown",w,o),l[c]("pointermove",M,o),l[c]("pointerup",T,s)}function A(){const{scrollbar:t,el:i}=e;e.params.scrollbar=tt(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const n=e.params.scrollbar;if(!n.el)return;let r,a;if("string"==typeof n.el&&e.isElement&&(r=e.el.querySelector(n.el)),r||"string"!=typeof n.el)r||(r=n.el);else if(r=l.querySelectorAll(n.el),!r.length)return;e.params.uniqueNavElements&&"string"==typeof n.el&&r.length>1&&1===i.querySelectorAll(n.el).length&&(r=i.querySelector(n.el)),r.length>0&&(r=r[0]),r.classList.add(e.isHorizontal()?n.horizontalClass:n.verticalClass),r&&(a=r.querySelector(et(e.params.scrollbar.dragClass)),a||(a=v("div",e.params.scrollbar.dragClass),r.append(a))),Object.assign(t,{el:r,dragEl:a}),n.draggable&&e.params.scrollbar.el&&e.scrollbar.el&&S("on"),r&&r.classList[e.enabled?"remove":"add"](...o(e.params.scrollbar.lockClass))}function C(){const t=e.params.scrollbar,i=e.scrollbar.el;i&&i.classList.remove(...o(e.isHorizontal()?t.horizontalClass:t.verticalClass)),e.params.scrollbar.el&&e.scrollbar.el&&S("off")}i({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null},r("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const t=e.params.scrollbar;let{el:i}=e.scrollbar;i=E(i),i.forEach(i=>{i.classList.remove(t.horizontalClass,t.verticalClass),i.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass)})}),r("init",()=>{!1===e.params.scrollbar.enabled?L():(A(),_(),g())}),r("update resize observerUpdate lock unlock changeDirection",()=>{_()}),r("setTranslate",()=>{g()}),r("setTransition",(t,i)=>{!function(t){e.params.scrollbar.el&&e.scrollbar.el&&(e.scrollbar.dragEl.style.transitionDuration=t+"ms")}(i)}),r("enable disable",()=>{const{el:t}=e.scrollbar;t&&t.classList[e.enabled?"remove":"add"](...o(e.params.scrollbar.lockClass))}),r("destroy",()=>{C()});const L=()=>{e.el.classList.add(...o(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...o(e.params.scrollbar.scrollbarDisabledClass)),C()};Object.assign(e.scrollbar,{enable:()=>{e.el.classList.remove(...o(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...o(e.params.scrollbar.scrollbarDisabledClass)),A(),_(),g()},disable:L,updateSize:_,setTranslate:g,init:A,destroy:C})},function(t){let{swiper:e,extendParams:i,on:n}=t;i({parallax:{enabled:!1}});const r="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",a=(t,i)=>{const{rtl:n}=e,r=n?-1:1,a=t.getAttribute("data-swiper-parallax")||"0";let o=t.getAttribute("data-swiper-parallax-x"),s=t.getAttribute("data-swiper-parallax-y");const l=t.getAttribute("data-swiper-parallax-scale"),c=t.getAttribute("data-swiper-parallax-opacity"),h=t.getAttribute("data-swiper-parallax-rotate");if(o||s?(o=o||"0",s=s||"0"):e.isHorizontal()?(o=a,s="0"):(s=a,o="0"),o=o.indexOf("%")>=0?parseInt(o,10)*i*r+"%":o*i*r+"px",s=s.indexOf("%")>=0?parseInt(s,10)*i+"%":s*i+"px",null!=c){const e=c-(c-1)*(1-Math.abs(i));t.style.opacity=e}let u=`translate3d(${o}, ${s}, 0px)`;null!=l&&(u+=` scale(${l-(l-1)*(1-Math.abs(i))})`),h&&null!=h&&(u+=` rotate(${h*i*-1}deg)`),t.style.transform=u},o=()=>{const{el:t,slides:i,progress:n,snapGrid:o,isElement:s}=e,l=m(t,r);e.isElement&&l.push(...m(e.hostEl,r)),l.forEach(t=>{a(t,n)}),i.forEach((t,i)=>{let s=t.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(s+=Math.ceil(i/2)-n*(o.length-1)),s=Math.min(Math.max(s,-1),1),t.querySelectorAll(r+", [data-swiper-parallax-rotate]").forEach(t=>{a(t,s)})})};n("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),n("init",()=>{e.params.parallax.enabled&&o()}),n("setTranslate",()=>{e.params.parallax.enabled&&o()}),n("setTransition",(t,i)=>{e.params.parallax.enabled&&function(t){void 0===t&&(t=e.params.speed);const{el:i,hostEl:n}=e,a=[...i.querySelectorAll(r)];e.isElement&&a.push(...n.querySelectorAll(r)),a.forEach(e=>{let i=parseInt(e.getAttribute("data-swiper-parallax-duration"),10)||t;0===t&&(i=0),e.style.transitionDuration=i+"ms"})}(i)})},function(t){let{swiper:e,extendParams:i,on:n,emit:r}=t;const o=a();i({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,panOnMouseMove:!1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let s=1,l=!1,h=!1,u={x:0,y:0};let d,p;const f=[],g={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},v={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},_={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let b,w=1;function M(){if(f.length<2)return 1;const t=f[0].pageX,e=f[0].pageY,i=f[1].pageX,n=f[1].pageY;return Math.sqrt((i-t)**2+(n-e)**2)}function E(){const t=e.params.zoom,i=g.imageWrapEl.getAttribute("data-swiper-zoom")||t.maxRatio;if(t.limitToOriginalSize&&g.imageEl&&g.imageEl.naturalWidth){const t=g.imageEl.naturalWidth/g.imageEl.offsetWidth;return Math.min(t,i)}return i}function T(t){const i=e.isElement?"swiper-slide":"."+e.params.slideClass;return!!t.target.matches(i)||e.slides.filter(e=>e.contains(t.target)).length>0}function S(t){const i="."+e.params.zoom.containerClass;return!!t.target.matches(i)||[...e.hostEl.querySelectorAll(i)].filter(e=>e.contains(t.target)).length>0}function A(t){if("mouse"===t.pointerType&&f.splice(0,f.length),!T(t))return;const i=e.params.zoom;if(d=!1,p=!1,f.push(t),!(f.length<2)){if(d=!0,g.scaleStart=M(),!g.slideEl){g.slideEl=t.target.closest(`.${e.params.slideClass}, swiper-slide`),g.slideEl||(g.slideEl=e.slides[e.activeIndex]);let n=g.slideEl.querySelector("."+i.containerClass);if(n&&(n=n.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),g.imageEl=n,g.imageWrapEl=n?x(g.imageEl,"."+i.containerClass)[0]:void 0,!g.imageWrapEl)return void(g.imageEl=void 0);g.maxRatio=E()}if(g.imageEl){const[t,e]=function(){if(f.length<2)return{x:null,y:null};const t=g.imageEl.getBoundingClientRect();return[(f[0].pageX+(f[1].pageX-f[0].pageX)/2-t.x-o.scrollX)/s,(f[0].pageY+(f[1].pageY-f[0].pageY)/2-t.y-o.scrollY)/s]}();g.originX=t,g.originY=e,g.imageEl.style.transitionDuration="0ms"}l=!0}}function C(t){if(!T(t))return;const i=e.params.zoom,n=e.zoom,r=f.findIndex(e=>e.pointerId===t.pointerId);r>=0&&(f[r]=t),f.length<2||(p=!0,g.scaleMove=M(),g.imageEl&&(n.scale=g.scaleMove/g.scaleStart*s,n.scale>g.maxRatio&&(n.scale=g.maxRatio-1+(n.scale-g.maxRatio+1)**.5),n.scale<i.minRatio&&(n.scale=i.minRatio+1-(i.minRatio-n.scale+1)**.5),g.imageEl.style.transform=`translate3d(0,0,0) scale(${n.scale})`))}function L(t){if(!T(t))return;if("mouse"===t.pointerType&&"pointerout"===t.type)return;const i=e.params.zoom,n=e.zoom,r=f.findIndex(e=>e.pointerId===t.pointerId);r>=0&&f.splice(r,1),d&&p&&(d=!1,p=!1,g.imageEl&&(n.scale=Math.max(Math.min(n.scale,g.maxRatio),i.minRatio),g.imageEl.style.transitionDuration=e.params.speed+"ms",g.imageEl.style.transform=`translate3d(0,0,0) scale(${n.scale})`,s=n.scale,l=!1,n.scale>1&&g.slideEl?g.slideEl.classList.add(""+i.zoomedSlideClass):n.scale<=1&&g.slideEl&&g.slideEl.classList.remove(""+i.zoomedSlideClass),1===n.scale&&(g.originX=0,g.originY=0,g.slideEl=void 0)))}function D(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function P(t){const i="mouse"===t.pointerType&&e.params.zoom.panOnMouseMove;if(!T(t)||!S(t))return;const n=e.zoom;if(!g.imageEl)return;if(!v.isTouched||!g.slideEl)return void(i&&O(t));if(i)return void O(t);v.isMoved||(v.width=g.imageEl.offsetWidth||g.imageEl.clientWidth,v.height=g.imageEl.offsetHeight||g.imageEl.clientHeight,v.startX=c(g.imageWrapEl,"x")||0,v.startY=c(g.imageWrapEl,"y")||0,g.slideWidth=g.slideEl.offsetWidth,g.slideHeight=g.slideEl.offsetHeight,g.imageWrapEl.style.transitionDuration="0ms");const r=v.width*n.scale,a=v.height*n.scale;if(v.minX=Math.min(g.slideWidth/2-r/2,0),v.maxX=-v.minX,v.minY=Math.min(g.slideHeight/2-a/2,0),v.maxY=-v.minY,v.touchesCurrent.x=f.length>0?f[0].pageX:t.pageX,v.touchesCurrent.y=f.length>0?f[0].pageY:t.pageY,Math.max(Math.abs(v.touchesCurrent.x-v.touchesStart.x),Math.abs(v.touchesCurrent.y-v.touchesStart.y))>5&&(e.allowClick=!1),!v.isMoved&&!l){if(e.isHorizontal()&&(Math.floor(v.minX)===Math.floor(v.startX)&&v.touchesCurrent.x<v.touchesStart.x||Math.floor(v.maxX)===Math.floor(v.startX)&&v.touchesCurrent.x>v.touchesStart.x))return v.isTouched=!1,void D();if(!e.isHorizontal()&&(Math.floor(v.minY)===Math.floor(v.startY)&&v.touchesCurrent.y<v.touchesStart.y||Math.floor(v.maxY)===Math.floor(v.startY)&&v.touchesCurrent.y>v.touchesStart.y))return v.isTouched=!1,void D()}t.cancelable&&t.preventDefault(),t.stopPropagation(),clearTimeout(b),e.touchEventsData.preventTouchMoveFromPointerMove=!0,b=setTimeout(()=>{e.destroyed||D()}),v.isMoved=!0;const o=(n.scale-s)/(g.maxRatio-e.params.zoom.minRatio),{originX:h,originY:u}=g;v.currentX=v.touchesCurrent.x-v.touchesStart.x+v.startX+o*(v.width-2*h),v.currentY=v.touchesCurrent.y-v.touchesStart.y+v.startY+o*(v.height-2*u),v.currentX<v.minX&&(v.currentX=v.minX+1-(v.minX-v.currentX+1)**.8),v.currentX>v.maxX&&(v.currentX=v.maxX-1+(v.currentX-v.maxX+1)**.8),v.currentY<v.minY&&(v.currentY=v.minY+1-(v.minY-v.currentY+1)**.8),v.currentY>v.maxY&&(v.currentY=v.maxY-1+(v.currentY-v.maxY+1)**.8),_.prevPositionX||(_.prevPositionX=v.touchesCurrent.x),_.prevPositionY||(_.prevPositionY=v.touchesCurrent.y),_.prevTime||(_.prevTime=Date.now()),_.x=(v.touchesCurrent.x-_.prevPositionX)/(Date.now()-_.prevTime)/2,_.y=(v.touchesCurrent.y-_.prevPositionY)/(Date.now()-_.prevTime)/2,Math.abs(v.touchesCurrent.x-_.prevPositionX)<2&&(_.x=0),Math.abs(v.touchesCurrent.y-_.prevPositionY)<2&&(_.y=0),_.prevPositionX=v.touchesCurrent.x,_.prevPositionY=v.touchesCurrent.y,_.prevTime=Date.now(),g.imageWrapEl.style.transform=`translate3d(${v.currentX}px, ${v.currentY}px,0)`}function R(){const t=e.zoom;g.slideEl&&e.activeIndex!==e.slides.indexOf(g.slideEl)&&(g.imageEl&&(g.imageEl.style.transform="translate3d(0,0,0) scale(1)"),g.imageWrapEl&&(g.imageWrapEl.style.transform="translate3d(0,0,0)"),g.slideEl.classList.remove(""+e.params.zoom.zoomedSlideClass),t.scale=1,s=1,g.slideEl=void 0,g.imageEl=void 0,g.imageWrapEl=void 0,g.originX=0,g.originY=0)}function O(t){if(s<=1||!g.imageWrapEl)return;if(!T(t)||!S(t))return;const e=o.getComputedStyle(g.imageWrapEl).transform,i=new o.DOMMatrix(e);if(!h)return h=!0,u.x=t.clientX,u.y=t.clientY,v.startX=i.e,v.startY=i.f,v.width=g.imageEl.offsetWidth||g.imageEl.clientWidth,v.height=g.imageEl.offsetHeight||g.imageEl.clientHeight,g.slideWidth=g.slideEl.offsetWidth,void(g.slideHeight=g.slideEl.offsetHeight);const n=-3*(t.clientX-u.x),r=-3*(t.clientY-u.y),a=v.width*s,l=v.height*s,c=g.slideWidth,d=g.slideHeight,p=Math.min(c/2-a/2,0),f=-p,m=Math.min(d/2-l/2,0),y=-m,_=Math.max(Math.min(v.startX+n,f),p),b=Math.max(Math.min(v.startY+r,y),m);g.imageWrapEl.style.transitionDuration="0ms",g.imageWrapEl.style.transform=`translate3d(${_}px, ${b}px, 0)`,u.x=t.clientX,u.y=t.clientY,v.startX=_,v.startY=b}function I(t){const i=e.zoom,n=e.params.zoom;if(!g.slideEl){t&&t.target&&(g.slideEl=t.target.closest(`.${e.params.slideClass}, swiper-slide`)),g.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?g.slideEl=m(e.slidesEl,"."+e.params.slideActiveClass)[0]:g.slideEl=e.slides[e.activeIndex]);let i=g.slideEl.querySelector("."+n.containerClass);i&&(i=i.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),g.imageEl=i,g.imageWrapEl=i?x(g.imageEl,"."+n.containerClass)[0]:void 0}if(!g.imageEl||!g.imageWrapEl)return;let r,a,l,c,h,u,d,p,f,_,b,w,M,T,S,A,C,L;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),g.slideEl.classList.add(""+n.zoomedSlideClass),void 0===v.touchesStart.x&&t?(r=t.pageX,a=t.pageY):(r=v.touchesStart.x,a=v.touchesStart.y);const D="number"==typeof t?t:null;1===s&&D&&(r=void 0,a=void 0,v.touchesStart.x=void 0,v.touchesStart.y=void 0);const P=E();i.scale=D||P,s=D||P,!t||1===s&&D?(d=0,p=0):(C=g.slideEl.offsetWidth,L=g.slideEl.offsetHeight,l=y(g.slideEl).left+o.scrollX,c=y(g.slideEl).top+o.scrollY,h=l+C/2-r,u=c+L/2-a,f=g.imageEl.offsetWidth||g.imageEl.clientWidth,_=g.imageEl.offsetHeight||g.imageEl.clientHeight,b=f*i.scale,w=_*i.scale,M=Math.min(C/2-b/2,0),T=Math.min(L/2-w/2,0),S=-M,A=-T,d=h*i.scale,p=u*i.scale,d<M&&(d=M),d>S&&(d=S),p<T&&(p=T),p>A&&(p=A)),D&&1===i.scale&&(g.originX=0,g.originY=0),g.imageWrapEl.style.transitionDuration="300ms",g.imageWrapEl.style.transform=`translate3d(${d}px, ${p}px,0)`,g.imageEl.style.transitionDuration="300ms",g.imageEl.style.transform=`translate3d(0,0,0) scale(${i.scale})`}function z(){const t=e.zoom,i=e.params.zoom;if(!g.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?g.slideEl=m(e.slidesEl,"."+e.params.slideActiveClass)[0]:g.slideEl=e.slides[e.activeIndex];let t=g.slideEl.querySelector("."+i.containerClass);t&&(t=t.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),g.imageEl=t,g.imageWrapEl=t?x(g.imageEl,"."+i.containerClass)[0]:void 0}g.imageEl&&g.imageWrapEl&&(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),t.scale=1,s=1,v.touchesStart.x=void 0,v.touchesStart.y=void 0,g.imageWrapEl.style.transitionDuration="300ms",g.imageWrapEl.style.transform="translate3d(0,0,0)",g.imageEl.style.transitionDuration="300ms",g.imageEl.style.transform="translate3d(0,0,0) scale(1)",g.slideEl.classList.remove(""+i.zoomedSlideClass),g.slideEl=void 0,g.originX=0,g.originY=0,e.params.zoom.panOnMouseMove&&(u={x:0,y:0},h&&(h=!1,v.startX=0,v.startY=0)))}function N(t){const i=e.zoom;i.scale&&1!==i.scale?z():I(t)}function k(){return{passiveListener:!!e.params.passiveListeners&&{passive:!0,capture:!1},activeListenerWithCapture:!e.params.passiveListeners||{passive:!1,capture:!0}}}function F(){const t=e.zoom;if(t.enabled)return;t.enabled=!0;const{passiveListener:i,activeListenerWithCapture:n}=k();e.wrapperEl.addEventListener("pointerdown",A,i),e.wrapperEl.addEventListener("pointermove",C,n),["pointerup","pointercancel","pointerout"].forEach(t=>{e.wrapperEl.addEventListener(t,L,i)}),e.wrapperEl.addEventListener("pointermove",P,n)}function B(){const t=e.zoom;if(!t.enabled)return;t.enabled=!1;const{passiveListener:i,activeListenerWithCapture:n}=k();e.wrapperEl.removeEventListener("pointerdown",A,i),e.wrapperEl.removeEventListener("pointermove",C,n),["pointerup","pointercancel","pointerout"].forEach(t=>{e.wrapperEl.removeEventListener(t,L,i)}),e.wrapperEl.removeEventListener("pointermove",P,n)}Object.defineProperty(e.zoom,"scale",{get:()=>w,set(t){if(w!==t){const e=g.imageEl,i=g.slideEl;r("zoomChange",t,e,i)}w=t}}),n("init",()=>{e.params.zoom.enabled&&F()}),n("destroy",()=>{B()}),n("touchStart",(t,i)=>{e.zoom.enabled&&function(t){const i=e.device;if(!g.imageEl)return;if(v.isTouched)return;i.android&&t.cancelable&&t.preventDefault(),v.isTouched=!0;const n=f.length>0?f[0]:t;v.touchesStart.x=n.pageX,v.touchesStart.y=n.pageY}(i)}),n("touchEnd",(t,i)=>{e.zoom.enabled&&function(){const t=e.zoom;if(f.length=0,!g.imageEl)return;if(!v.isTouched||!v.isMoved)return v.isTouched=!1,void(v.isMoved=!1);v.isTouched=!1,v.isMoved=!1;let i=300,n=300;const r=_.x*i,a=v.currentX+r,o=_.y*n,s=v.currentY+o;0!==_.x&&(i=Math.abs((a-v.currentX)/_.x)),0!==_.y&&(n=Math.abs((s-v.currentY)/_.y));const l=Math.max(i,n);v.currentX=a,v.currentY=s;const c=v.width*t.scale,h=v.height*t.scale;v.minX=Math.min(g.slideWidth/2-c/2,0),v.maxX=-v.minX,v.minY=Math.min(g.slideHeight/2-h/2,0),v.maxY=-v.minY,v.currentX=Math.max(Math.min(v.currentX,v.maxX),v.minX),v.currentY=Math.max(Math.min(v.currentY,v.maxY),v.minY),g.imageWrapEl.style.transitionDuration=l+"ms",g.imageWrapEl.style.transform=`translate3d(${v.currentX}px, ${v.currentY}px,0)`}()}),n("doubleTap",(t,i)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&N(i)}),n("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&R()}),n("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&R()}),Object.assign(e.zoom,{enable:F,disable:B,in:I,out:z,toggle:N})},function(t){let{swiper:e,extendParams:i,on:n}=t;function r(t,e){const i=function(){let t,e,i;return(n,r)=>{for(e=-1,t=n.length;t-e>1;)i=t+e>>1,n[i]<=r?e=i:t=i;return t}}();let n,r;return this.x=t,this.y=e,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(r=i(this.x,t),n=r-1,(t-this.x[n])*(this.y[r]-this.y[n])/(this.x[r]-this.x[n])+this.y[n]):0},this}function a(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}i({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0},n("beforeInit",()=>{"undefined"!=typeof window&&("string"==typeof e.params.controller.control||e.params.controller.control instanceof HTMLElement)?("string"==typeof e.params.controller.control?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(t=>{if(e.controller.control||(e.controller.control=[]),t&&t.swiper)e.controller.control.push(t.swiper);else if(t){const i=e.params.eventsPrefix+"init",n=r=>{e.controller.control.push(r.detail[0]),e.update(),t.removeEventListener(i,n)};t.addEventListener(i,n)}}):e.controller.control=e.params.controller.control}),n("update",()=>{a()}),n("resize",()=>{a()}),n("observerUpdate",()=>{a()}),n("setTranslate",(t,i,n)=>{e.controller.control&&!e.controller.control.destroyed&&e.controller.setTranslate(i,n)}),n("setTransition",(t,i,n)=>{e.controller.control&&!e.controller.control.destroyed&&e.controller.setTransition(i,n)}),Object.assign(e.controller,{setTranslate:function(t,i){const n=e.controller.control;let a,o;const s=e.constructor;function l(t){if(t.destroyed)return;const i=e.rtlTranslate?-e.translate:e.translate;"slide"===e.params.controller.by&&(function(t){e.controller.spline=e.params.loop?new r(e.slidesGrid,t.slidesGrid):new r(e.snapGrid,t.snapGrid)}(t),o=-e.controller.spline.interpolate(-i)),o&&"container"!==e.params.controller.by||(a=(t.maxTranslate()-t.minTranslate())/(e.maxTranslate()-e.minTranslate()),!Number.isNaN(a)&&Number.isFinite(a)||(a=1),o=(i-e.minTranslate())*a+t.minTranslate()),e.params.controller.inverse&&(o=t.maxTranslate()-o),t.updateProgress(o),t.setTranslate(o,e),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(n))for(let t=0;t<n.length;t+=1)n[t]!==i&&n[t]instanceof s&&l(n[t]);else n instanceof s&&i!==n&&l(n)},setTransition:function(t,i){const n=e.constructor,r=e.controller.control;let a;function o(i){i.destroyed||(i.setTransition(t,e),0!==t&&(i.transitionStart(),i.params.autoHeight&&s(()=>{i.updateAutoHeight()}),w(i.wrapperEl,()=>{r&&i.transitionEnd()})))}if(Array.isArray(r))for(a=0;a<r.length;a+=1)r[a]!==i&&r[a]instanceof n&&o(r[a]);else r instanceof n&&i!==r&&o(r)}})},function(t){let{swiper:e,extendParams:i,on:r}=t;i({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0}}),e.a11y={clicked:!1};let a,o,s=null,l=(new Date).getTime();function c(t){const e=s;0!==e.length&&(e.innerHTML="",e.innerHTML=t)}function h(t){(t=E(t)).forEach(t=>{t.setAttribute("tabIndex","0")})}function u(t){(t=E(t)).forEach(t=>{t.setAttribute("tabIndex","-1")})}function d(t,e){(t=E(t)).forEach(t=>{t.setAttribute("role",e)})}function p(t,e){(t=E(t)).forEach(t=>{t.setAttribute("aria-roledescription",e)})}function f(t,e){(t=E(t)).forEach(t=>{t.setAttribute("aria-label",e)})}function m(t){(t=E(t)).forEach(t=>{t.setAttribute("aria-disabled",!0)})}function g(t){(t=E(t)).forEach(t=>{t.setAttribute("aria-disabled",!1)})}function y(t){if(13!==t.keyCode&&32!==t.keyCode)return;const i=e.params.a11y,n=t.target;if(!e.pagination||!e.pagination.el||n!==e.pagination.el&&!e.pagination.el.contains(t.target)||t.target.matches(et(e.params.pagination.bulletClass))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){const t=E(e.navigation.prevEl);E(e.navigation.nextEl).includes(n)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?c(i.lastSlideMessage):c(i.nextSlideMessage)),t.includes(n)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?c(i.firstSlideMessage):c(i.prevSlideMessage))}e.pagination&&n.matches(et(e.params.pagination.bulletClass))&&n.click()}}function _(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function x(){return _()&&e.params.pagination.clickable}const w=(t,e,i)=>{h(t),"BUTTON"!==t.tagName&&(d(t,"button"),t.addEventListener("keydown",y)),f(t,i),function(t,e){(t=E(t)).forEach(t=>{t.setAttribute("aria-controls",e)})}(t,e)},M=t=>{o&&o!==t.target&&!o.contains(t.target)&&(a=!0),e.a11y.clicked=!0},T=()=>{a=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},S=t=>{l=(new Date).getTime()},A=t=>{if(e.a11y.clicked||!e.params.a11y.scrollOnFocus)return;if((new Date).getTime()-l<100)return;const i=t.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!i||!e.slides.includes(i))return;o=i;const n=e.slides.indexOf(i)===e.activeIndex,r=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(i);n||r||t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{a||(e.params.loop?e.slideToLoop(parseInt(i.getAttribute("data-swiper-slide-index")),0):e.slideTo(e.slides.indexOf(i),0),a=!1)}))},C=()=>{const t=e.params.a11y;t.itemRoleDescriptionMessage&&p(e.slides,t.itemRoleDescriptionMessage),t.slideRole&&d(e.slides,t.slideRole);const i=e.slides.length;t.slideLabelMessage&&e.slides.forEach((n,r)=>{const a=e.params.loop?parseInt(n.getAttribute("data-swiper-slide-index"),10):r;f(n,t.slideLabelMessage.replace(/\{\{index\}\}/,a+1).replace(/\{\{slidesLength\}\}/,i))})};r("beforeInit",()=>{s=v("span",e.params.a11y.notificationClass),s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true")}),r("afterInit",()=>{e.params.a11y.enabled&&(()=>{const t=e.params.a11y;e.el.append(s);const i=e.el;t.containerRoleDescriptionMessage&&p(i,t.containerRoleDescriptionMessage),t.containerMessage&&f(i,t.containerMessage),t.containerRole&&d(i,t.containerRole);const r=e.wrapperEl,a=t.id||r.getAttribute("id")||"swiper-wrapper-"+(void 0===(o=16)&&(o=16),"x".repeat(o).replace(/x/g,()=>Math.round(16*Math.random()).toString(16)));var o;const l=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";var c;c=a,E(r).forEach(t=>{t.setAttribute("id",c)}),function(t,e){(t=E(t)).forEach(t=>{t.setAttribute("aria-live",e)})}(r,l),C();let{nextEl:h,prevEl:u}=e.navigation?e.navigation:{};h=E(h),u=E(u),h&&h.forEach(e=>w(e,a,t.nextSlideMessage)),u&&u.forEach(e=>w(e,a,t.prevSlideMessage)),x()&&E(e.pagination.el).forEach(t=>{t.addEventListener("keydown",y)}),n().addEventListener("visibilitychange",S),e.el.addEventListener("focus",A,!0),e.el.addEventListener("focus",A,!0),e.el.addEventListener("pointerdown",M,!0),e.el.addEventListener("pointerup",T,!0)})()}),r("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&C()}),r("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&function(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:t,prevEl:i}=e.navigation;i&&(e.isBeginning?(m(i),u(i)):(g(i),h(i))),t&&(e.isEnd?(m(t),u(t)):(g(t),h(t)))}()}),r("paginationUpdate",()=>{e.params.a11y.enabled&&function(){const t=e.params.a11y;_()&&e.pagination.bullets.forEach(i=>{e.params.pagination.clickable&&(h(i),e.params.pagination.renderBullet||(d(i,"button"),f(i,t.paginationBulletMessage.replace(/\{\{index\}\}/,b(i)+1)))),i.matches(et(e.params.pagination.bulletActiveClass))?i.setAttribute("aria-current","true"):i.removeAttribute("aria-current")})}()}),r("destroy",()=>{e.params.a11y.enabled&&function(){s&&s.remove();let{nextEl:t,prevEl:i}=e.navigation?e.navigation:{};t=E(t),i=E(i),t&&t.forEach(t=>t.removeEventListener("keydown",y)),i&&i.forEach(t=>t.removeEventListener("keydown",y)),x()&&E(e.pagination.el).forEach(t=>{t.removeEventListener("keydown",y)}),n().removeEventListener("visibilitychange",S),e.el&&"string"!=typeof e.el&&(e.el.removeEventListener("focus",A,!0),e.el.removeEventListener("pointerdown",M,!0),e.el.removeEventListener("pointerup",T,!0))}()})},function(t){let{swiper:e,extendParams:i,on:n}=t;i({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let r=!1,o={};const s=t=>t.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),l=t=>{const e=a();let i;i=t?new URL(t):e.location;const n=i.pathname.slice(1).split("/").filter(t=>""!==t),r=n.length;return{key:n[r-2],value:n[r-1]}},c=(t,i)=>{const n=a();if(!r||!e.params.history.enabled)return;let o;o=e.params.url?new URL(e.params.url):n.location;const l=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${i}"]`):e.slides[i];let c=s(l.getAttribute("data-history"));if(e.params.history.root.length>0){let i=e.params.history.root;"/"===i[i.length-1]&&(i=i.slice(0,i.length-1)),c=`${i}/${t?t+"/":""}${c}`}else o.pathname.includes(t)||(c=`${t?t+"/":""}${c}`);e.params.history.keepQuery&&(c+=o.search);const h=n.history.state;h&&h.value===c||(e.params.history.replaceState?n.history.replaceState({value:c},null,c):n.history.pushState({value:c},null,c))},h=(t,i,n)=>{if(i)for(let r=0,a=e.slides.length;r<a;r+=1){const a=e.slides[r];if(s(a.getAttribute("data-history"))===i){const i=e.getSlideIndex(a);e.slideTo(i,t,n)}}else e.slideTo(0,t,n)},u=()=>{o=l(e.params.url),h(e.params.speed,o.value,!1)};n("init",()=>{e.params.history.enabled&&(()=>{const t=a();if(e.params.history){if(!t.history||!t.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);r=!0,o=l(e.params.url),o.key||o.value?(h(0,o.value,e.params.runCallbacksOnInit),e.params.history.replaceState||t.addEventListener("popstate",u)):e.params.history.replaceState||t.addEventListener("popstate",u)}})()}),n("destroy",()=>{e.params.history.enabled&&(()=>{const t=a();e.params.history.replaceState||t.removeEventListener("popstate",u)})()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{r&&c(e.params.history.key,e.activeIndex)}),n("slideChange",()=>{r&&e.params.cssMode&&c(e.params.history.key,e.activeIndex)})},function(t){let{swiper:e,extendParams:i,emit:r,on:o}=t,s=!1;const l=n(),c=a();i({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(t,i){if(e.virtual&&e.params.virtual.enabled){const t=e.slides.find(t=>t.getAttribute("data-hash")===i);return t?parseInt(t.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(m(e.slidesEl,`.${e.params.slideClass}[data-hash="${i}"], swiper-slide[data-hash="${i}"]`)[0])}}});const h=()=>{r("hashChange");const t=l.location.hash.replace("#",""),i=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex];if(t!==(i?i.getAttribute("data-hash"):"")){const i=e.params.hashNavigation.getSlideIndex(e,t);if(void 0===i||Number.isNaN(i))return;e.slideTo(i)}},u=()=>{if(!s||!e.params.hashNavigation.enabled)return;const t=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],i=t?t.getAttribute("data-hash")||t.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&c.history&&c.history.replaceState?(c.history.replaceState(null,null,"#"+i||""),r("hashSet")):(l.location.hash=i||"",r("hashSet"))};o("init",()=>{e.params.hashNavigation.enabled&&(()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;s=!0;const t=l.location.hash.replace("#","");if(t){const i=0,n=e.params.hashNavigation.getSlideIndex(e,t);e.slideTo(n||0,i,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&c.addEventListener("hashchange",h)})()}),o("destroy",()=>{e.params.hashNavigation.enabled&&e.params.hashNavigation.watchState&&c.removeEventListener("hashchange",h)}),o("transitionEnd _freeModeNoMomentumRelease",()=>{s&&u()}),o("slideChange",()=>{s&&e.params.cssMode&&u()})},function(t){let e,i,{swiper:r,extendParams:a,on:o,emit:s,params:l}=t;r.autoplay={running:!1,paused:!1,timeLeft:0},a({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let c,h,u,d,p,f,m,g,v=l&&l.autoplay?l.autoplay.delay:3e3,y=l&&l.autoplay?l.autoplay.delay:3e3,_=(new Date).getTime();function b(t){r&&!r.destroyed&&r.wrapperEl&&t.target===r.wrapperEl&&(r.wrapperEl.removeEventListener("transitionend",b),g||t.detail&&t.detail.bySwiperTouchMove||S())}const x=()=>{if(r.destroyed||!r.autoplay.running)return;r.autoplay.paused?h=!0:h&&(y=c,h=!1);const t=r.autoplay.paused?c:_+y-(new Date).getTime();r.autoplay.timeLeft=t,s("autoplayTimeLeft",t,t/v),i=requestAnimationFrame(()=>{x()})},w=t=>{if(r.destroyed||!r.autoplay.running)return;cancelAnimationFrame(i),x();let n=void 0===t?r.params.autoplay.delay:t;v=r.params.autoplay.delay,y=r.params.autoplay.delay;const a=(()=>{let t;if(t=r.virtual&&r.params.virtual.enabled?r.slides.find(t=>t.classList.contains("swiper-slide-active")):r.slides[r.activeIndex],t)return parseInt(t.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(a)&&a>0&&void 0===t&&(n=a,v=a,y=a),c=n;const o=r.params.speed,l=()=>{r&&!r.destroyed&&(r.params.autoplay.reverseDirection?!r.isBeginning||r.params.loop||r.params.rewind?(r.slidePrev(o,!0,!0),s("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(r.slides.length-1,o,!0,!0),s("autoplay")):!r.isEnd||r.params.loop||r.params.rewind?(r.slideNext(o,!0,!0),s("autoplay")):r.params.autoplay.stopOnLastSlide||(r.slideTo(0,o,!0,!0),s("autoplay")),r.params.cssMode&&(_=(new Date).getTime(),requestAnimationFrame(()=>{w()})))};return n>0?(clearTimeout(e),e=setTimeout(()=>{l()},n)):requestAnimationFrame(()=>{l()}),n},M=()=>{_=(new Date).getTime(),r.autoplay.running=!0,w(),s("autoplayStart")},E=()=>{r.autoplay.running=!1,clearTimeout(e),cancelAnimationFrame(i),s("autoplayStop")},T=(t,i)=>{if(r.destroyed||!r.autoplay.running)return;clearTimeout(e),t||(m=!0);const n=()=>{s("autoplayPause"),r.params.autoplay.waitForTransition?r.wrapperEl.addEventListener("transitionend",b):S()};if(r.autoplay.paused=!0,i)return f&&(c=r.params.autoplay.delay),f=!1,void n();const a=c||r.params.autoplay.delay;c=a-((new Date).getTime()-_),r.isEnd&&c<0&&!r.params.loop||(c<0&&(c=0),n())},S=()=>{r.isEnd&&c<0&&!r.params.loop||r.destroyed||!r.autoplay.running||(_=(new Date).getTime(),m?(m=!1,w(c)):w(),r.autoplay.paused=!1,s("autoplayResume"))},A=()=>{if(r.destroyed||!r.autoplay.running)return;const t=n();"hidden"===t.visibilityState&&(m=!0,T(!0)),"visible"===t.visibilityState&&S()},C=t=>{"mouse"===t.pointerType&&(m=!0,g=!0,r.animating||r.autoplay.paused||T(!0))},L=t=>{"mouse"===t.pointerType&&(g=!1,r.autoplay.paused&&S())};o("init",()=>{r.params.autoplay.enabled&&(r.params.autoplay.pauseOnMouseEnter&&(r.el.addEventListener("pointerenter",C),r.el.addEventListener("pointerleave",L)),n().addEventListener("visibilitychange",A),M())}),o("destroy",()=>{r.el&&"string"!=typeof r.el&&(r.el.removeEventListener("pointerenter",C),r.el.removeEventListener("pointerleave",L)),n().removeEventListener("visibilitychange",A),r.autoplay.running&&E()}),o("_freeModeStaticRelease",()=>{(d||m)&&S()}),o("_freeModeNoMomentumRelease",()=>{r.params.autoplay.disableOnInteraction?E():T(!0,!0)}),o("beforeTransitionStart",(t,e,i)=>{!r.destroyed&&r.autoplay.running&&(i||!r.params.autoplay.disableOnInteraction?T(!0,!0):E())}),o("sliderFirstMove",()=>{!r.destroyed&&r.autoplay.running&&(r.params.autoplay.disableOnInteraction?E():(u=!0,d=!1,m=!1,p=setTimeout(()=>{m=!0,d=!0,T(!0)},200)))}),o("touchEnd",()=>{if(!r.destroyed&&r.autoplay.running&&u){if(clearTimeout(p),clearTimeout(e),r.params.autoplay.disableOnInteraction)return d=!1,void(u=!1);d&&r.params.cssMode&&S(),d=!1,u=!1}}),o("slideChange",()=>{!r.destroyed&&r.autoplay.running&&(f=!0)}),Object.assign(r.autoplay,{start:M,stop:E,pause:T,resume:S})},function(t){let{swiper:e,extendParams:i,on:r}=t;i({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let a=!1,o=!1;function s(){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const i=t.clickedIndex,n=t.clickedSlide;if(n&&n.classList.contains(e.params.thumbs.slideThumbActiveClass))return;if(null==i)return;let r;r=t.params.loop?parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10):i,e.params.loop?e.slideToLoop(r):e.slideTo(r)}function l(){const{thumbs:t}=e.params;if(a)return!1;a=!0;const i=e.constructor;if(t.swiper instanceof i)e.thumbs.swiper=t.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(h(t.swiper)){const n=Object.assign({},t.swiper);Object.assign(n,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new i(n),o=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",s),!0}function c(t){const i=e.thumbs.swiper;if(!i||i.destroyed)return;const n="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():i.params.slidesPerView;let r=1;const a=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(r=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(r=1),r=Math.floor(r),i.slides.forEach(t=>t.classList.remove(a)),i.params.loop||i.params.virtual&&i.params.virtual.enabled)for(let t=0;t<r;t+=1)m(i.slidesEl,`[data-swiper-slide-index="${e.realIndex+t}"]`).forEach(t=>{t.classList.add(a)});else for(let t=0;t<r;t+=1)i.slides[e.realIndex+t]&&i.slides[e.realIndex+t].classList.add(a);const o=e.params.thumbs.autoScrollOffset,s=o&&!i.params.loop;if(e.realIndex!==i.realIndex||s){const r=i.activeIndex;let a,l;if(i.params.loop){const t=i.slides.find(t=>t.getAttribute("data-swiper-slide-index")===""+e.realIndex);a=i.slides.indexOf(t),l=e.activeIndex>e.previousIndex?"next":"prev"}else a=e.realIndex,l=a>e.previousIndex?"next":"prev";s&&(a+="next"===l?o:-1*o),i.visibleSlidesIndexes&&i.visibleSlidesIndexes.indexOf(a)<0&&(i.params.centeredSlides?a=a>r?a-Math.floor(n/2)+1:a+Math.floor(n/2)-1:a>r&&i.params.slidesPerGroup,i.slideTo(a,t?0:void 0))}}e.thumbs={swiper:null},r("beforeInit",()=>{const{thumbs:t}=e.params;if(t&&t.swiper)if("string"==typeof t.swiper||t.swiper instanceof HTMLElement){const i=n(),r=()=>{const n="string"==typeof t.swiper?i.querySelector(t.swiper):t.swiper;if(n&&n.swiper)t.swiper=n.swiper,l(),c(!0);else if(n){const i=e.params.eventsPrefix+"init",r=a=>{t.swiper=a.detail[0],n.removeEventListener(i,r),l(),c(!0),t.swiper.update(),e.update()};n.addEventListener(i,r)}return n},a=()=>{e.destroyed||r()||requestAnimationFrame(a)};requestAnimationFrame(a)}else l(),c(!0)}),r("slideChange update resize observerUpdate",()=>{c()}),r("setTransition",(t,i)=>{const n=e.thumbs.swiper;n&&!n.destroyed&&n.setTransition(i)}),r("beforeDestroy",()=>{const t=e.thumbs.swiper;t&&!t.destroyed&&o&&t.destroy()}),Object.assign(e.thumbs,{init:l,update:c})},function(t){let{swiper:e,extendParams:i,emit:n,once:r}=t;i({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}}),Object.assign(e,{freeMode:{onTouchStart:function(){if(e.params.cssMode)return;const t=e.getTranslate();e.setTranslate(t),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})},onTouchMove:function(){if(e.params.cssMode)return;const{touchEventsData:t,touches:i}=e;0===t.velocities.length&&t.velocities.push({position:i[e.isHorizontal()?"startX":"startY"],time:t.touchStartTime}),t.velocities.push({position:i[e.isHorizontal()?"currentX":"currentY"],time:l()})},onTouchEnd:function(t){let{currentPos:i}=t;if(e.params.cssMode)return;const{params:a,wrapperEl:o,rtlTranslate:s,snapGrid:c,touchEventsData:h}=e,u=l()-h.touchStartTime;if(i<-e.minTranslate())e.slideTo(e.activeIndex);else if(i>-e.maxTranslate())e.slides.length<c.length?e.slideTo(c.length-1):e.slideTo(e.slides.length-1);else{if(a.freeMode.momentum){if(h.velocities.length>1){const t=h.velocities.pop(),i=h.velocities.pop(),n=t.position-i.position,r=t.time-i.time;e.velocity=n/r,e.velocity/=2,Math.abs(e.velocity)<a.freeMode.minimumVelocity&&(e.velocity=0),(r>150||l()-t.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=a.freeMode.momentumVelocityRatio,h.velocities.length=0;let t=1e3*a.freeMode.momentumRatio;const i=e.velocity*t;let u=e.translate+i;s&&(u=-u);let d,p=!1;const f=20*Math.abs(e.velocity)*a.freeMode.momentumBounceRatio;let m;if(u<e.maxTranslate())a.freeMode.momentumBounce?(u+e.maxTranslate()<-f&&(u=e.maxTranslate()-f),d=e.maxTranslate(),p=!0,h.allowMomentumBounce=!0):u=e.maxTranslate(),a.loop&&a.centeredSlides&&(m=!0);else if(u>e.minTranslate())a.freeMode.momentumBounce?(u-e.minTranslate()>f&&(u=e.minTranslate()+f),d=e.minTranslate(),p=!0,h.allowMomentumBounce=!0):u=e.minTranslate(),a.loop&&a.centeredSlides&&(m=!0);else if(a.freeMode.sticky){let t;for(let e=0;e<c.length;e+=1)if(c[e]>-u){t=e;break}u=Math.abs(c[t]-u)<Math.abs(c[t-1]-u)||"next"===e.swipeDirection?c[t]:c[t-1],u=-u}if(m&&r("transitionEnd",()=>{e.loopFix()}),0!==e.velocity){if(t=s?Math.abs((-u-e.translate)/e.velocity):Math.abs((u-e.translate)/e.velocity),a.freeMode.sticky){const i=Math.abs((s?-u:u)-e.translate),n=e.slidesSizesGrid[e.activeIndex];t=i<n?a.speed:i<2*n?1.5*a.speed:2.5*a.speed}}else if(a.freeMode.sticky)return void e.slideToClosest();a.freeMode.momentumBounce&&p?(e.updateProgress(d),e.setTransition(t),e.setTranslate(u),e.transitionStart(!0,e.swipeDirection),e.animating=!0,w(o,()=>{e&&!e.destroyed&&h.allowMomentumBounce&&(n("momentumBounce"),e.setTransition(a.speed),setTimeout(()=>{e.setTranslate(d),w(o,()=>{e&&!e.destroyed&&e.transitionEnd()})},0))})):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(u),e.setTransition(t),e.setTranslate(u),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,w(o,()=>{e&&!e.destroyed&&e.transitionEnd()}))):e.updateProgress(u),e.updateActiveIndex(),e.updateSlidesClasses()}else{if(a.freeMode.sticky)return void e.slideToClosest();a.freeMode&&n("_freeModeNoMomentumRelease")}(!a.freeMode.momentum||u>=a.longSwipesMs)&&(n("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}}}})},function(t){let e,i,n,r,{swiper:a,extendParams:o,on:s}=t;o({grid:{rows:1,fill:"column"}});const l=()=>{let t=a.params.spaceBetween;return"string"==typeof t&&t.indexOf("%")>=0?t=parseFloat(t.replace("%",""))/100*a.size:"string"==typeof t&&(t=parseFloat(t)),t};s("init",()=>{r=a.params.grid&&a.params.grid.rows>1}),s("update",()=>{const{params:t,el:e}=a,i=t.grid&&t.grid.rows>1;r&&!i?(e.classList.remove(t.containerModifierClass+"grid",t.containerModifierClass+"grid-column"),n=1,a.emitContainerClasses()):!r&&i&&(e.classList.add(t.containerModifierClass+"grid"),"column"===t.grid.fill&&e.classList.add(t.containerModifierClass+"grid-column"),a.emitContainerClasses()),r=i}),a.grid={initSlides:t=>{const{slidesPerView:r}=a.params,{rows:o,fill:s}=a.params.grid,l=a.virtual&&a.params.virtual.enabled?a.virtual.slides.length:t.length;n=Math.floor(l/o),e=Math.floor(l/o)===l/o?l:Math.ceil(l/o)*o,"auto"!==r&&"row"===s&&(e=Math.max(e,r*o)),i=e/o},unsetSlides:()=>{a.slides&&a.slides.forEach(t=>{t.swiperSlideGridSet&&(t.style.height="",t.style[a.getDirectionLabel("margin-top")]="")})},updateSlide:(t,r,o)=>{const{slidesPerGroup:s}=a.params,c=l(),{rows:h,fill:u}=a.params.grid,d=a.virtual&&a.params.virtual.enabled?a.virtual.slides.length:o.length;let p,f,m;if("row"===u&&s>1){const i=Math.floor(t/(s*h)),n=t-h*s*i,a=0===i?s:Math.min(Math.ceil((d-i*h*s)/h),s);m=Math.floor(n/a),f=n-m*a+i*s,p=f+m*e/h,r.style.order=p}else"column"===u?(f=Math.floor(t/h),m=t-f*h,(f>n||f===n&&m===h-1)&&(m+=1,m>=h&&(m=0,f+=1))):(m=Math.floor(t/i),f=t-m*i);r.row=m,r.column=f,r.style.height=`calc((100% - ${(h-1)*c}px) / ${h})`,r.style[a.getDirectionLabel("margin-top")]=0!==m?c&&c+"px":"",r.swiperSlideGridSet=!0},updateWrapperSize:(t,i)=>{const{centeredSlides:n,roundLengths:r}=a.params,o=l(),{rows:s}=a.params.grid;if(a.virtualSize=(t+o)*e,a.virtualSize=Math.ceil(a.virtualSize/s)-o,a.params.cssMode||(a.wrapperEl.style[a.getDirectionLabel("width")]=a.virtualSize+o+"px"),n){const t=[];for(let e=0;e<i.length;e+=1){let n=i[e];r&&(n=Math.floor(n)),i[e]<a.virtualSize+i[0]&&t.push(n)}i.splice(0,i.length),i.push(...t)}}}},function(t){let{swiper:e}=t;Object.assign(e,{appendSlide:it.bind(e),prependSlide:nt.bind(e),addSlide:rt.bind(e),removeSlide:at.bind(e),removeAllSlides:ot.bind(e)})},function(t){let{swiper:e,extendParams:i,on:n}=t;i({fadeEffect:{crossFade:!1}}),st({effect:"fade",swiper:e,on:n,setTranslate:()=>{const{slides:t}=e;e.params.fadeEffect;for(let i=0;i<t.length;i+=1){const t=e.slides[i];let n=-t.swiperSlideOffset;e.params.virtualTranslate||(n-=e.translate);let r=0;e.isHorizontal()||(r=n,n=0);const a=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(t.progress),0):1+Math.min(Math.max(t.progress,-1),0),o=lt(0,t);o.style.opacity=a,o.style.transform=`translate3d(${n}px, ${r}px, 0px)`}},setTransition:t=>{const i=e.slides.map(t=>f(t));i.forEach(e=>{e.style.transitionDuration=t+"ms"}),ct({swiper:e,duration:t,transformElements:i,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})},function(t){let{swiper:e,extendParams:i,on:n}=t;i({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const r=(t,e,i)=>{let n=i?t.querySelector(".swiper-slide-shadow-left"):t.querySelector(".swiper-slide-shadow-top"),r=i?t.querySelector(".swiper-slide-shadow-right"):t.querySelector(".swiper-slide-shadow-bottom");n||(n=v("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(i?"left":"top")).split(" ")),t.append(n)),r||(r=v("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(i?"right":"bottom")).split(" ")),t.append(r)),n&&(n.style.opacity=Math.max(-e,0)),r&&(r.style.opacity=Math.max(e,0))};st({effect:"cube",swiper:e,on:n,setTranslate:()=>{const{el:t,wrapperEl:i,slides:n,width:a,height:o,rtlTranslate:s,size:l,browser:c}=e,h=T(e),u=e.params.cubeEffect,d=e.isHorizontal(),p=e.virtual&&e.params.virtual.enabled;let f,m=0;u.shadow&&(d?(f=e.wrapperEl.querySelector(".swiper-cube-shadow"),f||(f=v("div","swiper-cube-shadow"),e.wrapperEl.append(f)),f.style.height=a+"px"):(f=t.querySelector(".swiper-cube-shadow"),f||(f=v("div","swiper-cube-shadow"),t.append(f))));for(let t=0;t<n.length;t+=1){const e=n[t];let i=t;p&&(i=parseInt(e.getAttribute("data-swiper-slide-index"),10));let a=90*i,o=Math.floor(a/360);s&&(a=-a,o=Math.floor(-a/360));const c=Math.max(Math.min(e.progress,1),-1);let f=0,g=0,v=0;i%4==0?(f=4*-o*l,v=0):(i-1)%4==0?(f=0,v=4*-o*l):(i-2)%4==0?(f=l+4*o*l,v=l):(i-3)%4==0&&(f=-l,v=3*l+4*l*o),s&&(f=-f),d||(g=f,f=0);const y=`rotateX(${h(d?0:-a)}deg) rotateY(${h(d?a:0)}deg) translate3d(${f}px, ${g}px, ${v}px)`;c<=1&&c>-1&&(m=90*i+90*c,s&&(m=90*-i-90*c)),e.style.transform=y,u.slideShadows&&r(e,c,d)}if(i.style.transformOrigin=`50% 50% -${l/2}px`,i.style["-webkit-transform-origin"]=`50% 50% -${l/2}px`,u.shadow)if(d)f.style.transform=`translate3d(0px, ${a/2+u.shadowOffset}px, ${-a/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${u.shadowScale})`;else{const t=Math.abs(m)-90*Math.floor(Math.abs(m)/90),e=1.5-(Math.sin(2*t*Math.PI/360)/2+Math.cos(2*t*Math.PI/360)/2),i=u.shadowScale,n=u.shadowScale/e,r=u.shadowOffset;f.style.transform=`scale3d(${i}, 1, ${n}) translate3d(0px, ${o/2+r}px, ${-o/2/n}px) rotateX(-89.99deg)`}const g=(c.isSafari||c.isWebView)&&c.needPerspectiveFix?-l/2:0;i.style.transform=`translate3d(0px,0,${g}px) rotateX(${h(e.isHorizontal()?0:m)}deg) rotateY(${h(e.isHorizontal()?-m:0)}deg)`,i.style.setProperty("--swiper-cube-translate-z",g+"px")},setTransition:t=>{const{el:i,slides:n}=e;if(n.forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>{e.style.transitionDuration=t+"ms"})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){const e=i.querySelector(".swiper-cube-shadow");e&&(e.style.transitionDuration=t+"ms")}},recreateShadows:()=>{const t=e.isHorizontal();e.slides.forEach(e=>{const i=Math.max(Math.min(e.progress,1),-1);r(e,i,t)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})},function(t){let{swiper:e,extendParams:i,on:n}=t;i({flipEffect:{slideShadows:!0,limitRotation:!0}});const r=(t,i)=>{let n=e.isHorizontal()?t.querySelector(".swiper-slide-shadow-left"):t.querySelector(".swiper-slide-shadow-top"),r=e.isHorizontal()?t.querySelector(".swiper-slide-shadow-right"):t.querySelector(".swiper-slide-shadow-bottom");n||(n=ht("flip",t,e.isHorizontal()?"left":"top")),r||(r=ht("flip",t,e.isHorizontal()?"right":"bottom")),n&&(n.style.opacity=Math.max(-i,0)),r&&(r.style.opacity=Math.max(i,0))};st({effect:"flip",swiper:e,on:n,setTranslate:()=>{const{slides:t,rtlTranslate:i}=e,n=e.params.flipEffect,a=T(e);for(let o=0;o<t.length;o+=1){const s=t[o];let l=s.progress;e.params.flipEffect.limitRotation&&(l=Math.max(Math.min(s.progress,1),-1));const c=s.swiperSlideOffset;let h=-180*l,u=0,d=e.params.cssMode?-c-e.translate:-c,p=0;e.isHorizontal()?i&&(h=-h):(p=d,d=0,u=-h,h=0),s.style.zIndex=-Math.abs(Math.round(l))+t.length,n.slideShadows&&r(s,l);const f=`translate3d(${d}px, ${p}px, 0px) rotateX(${a(u)}deg) rotateY(${a(h)}deg)`;lt(0,s).style.transform=f}},setTransition:t=>{const i=e.slides.map(t=>f(t));i.forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>{e.style.transitionDuration=t+"ms"})}),ct({swiper:e,duration:t,transformElements:i})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(t=>{let i=t.progress;e.params.flipEffect.limitRotation&&(i=Math.max(Math.min(t.progress,1),-1)),r(t,i)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})},function(t){let{swiper:e,extendParams:i,on:n}=t;i({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),st({effect:"coverflow",swiper:e,on:n,setTranslate:()=>{const{width:t,height:i,slides:n,slidesSizesGrid:r}=e,a=e.params.coverflowEffect,o=e.isHorizontal(),s=e.translate,l=o?t/2-s:i/2-s,c=o?a.rotate:-a.rotate,h=a.depth,u=T(e);for(let t=0,e=n.length;t<e;t+=1){const e=n[t],i=r[t],s=(l-e.swiperSlideOffset-i/2)/i,d="function"==typeof a.modifier?a.modifier(s):s*a.modifier;let p=o?c*d:0,f=o?0:c*d,m=-h*Math.abs(d),g=a.stretch;"string"==typeof g&&-1!==g.indexOf("%")&&(g=parseFloat(a.stretch)/100*i);let v=o?0:g*d,y=o?g*d:0,_=1-(1-a.scale)*Math.abs(d);Math.abs(y)<.001&&(y=0),Math.abs(v)<.001&&(v=0),Math.abs(m)<.001&&(m=0),Math.abs(p)<.001&&(p=0),Math.abs(f)<.001&&(f=0),Math.abs(_)<.001&&(_=0);const b=`translate3d(${y}px,${v}px,${m}px)  rotateX(${u(f)}deg) rotateY(${u(p)}deg) scale(${_})`;if(lt(0,e).style.transform=b,e.style.zIndex=1-Math.abs(Math.round(d)),a.slideShadows){let t=o?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),i=o?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");t||(t=ht("coverflow",e,o?"left":"top")),i||(i=ht("coverflow",e,o?"right":"bottom")),t&&(t.style.opacity=d>0?d:0),i&&(i.style.opacity=-d>0?-d:0)}}},setTransition:t=>{e.slides.map(t=>f(t)).forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>{e.style.transitionDuration=t+"ms"})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})},function(t){let{swiper:e,extendParams:i,on:n}=t;i({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const r=t=>"string"==typeof t?t:t+"px";st({effect:"creative",swiper:e,on:n,setTranslate:()=>{const{slides:t,wrapperEl:i,slidesSizesGrid:n}=e,a=e.params.creativeEffect,{progressMultiplier:o}=a,s=e.params.centeredSlides,l=T(e);if(s){const t=n[0]/2-e.params.slidesOffsetBefore||0;i.style.transform=`translateX(calc(50% - ${t}px))`}for(let i=0;i<t.length;i+=1){const n=t[i],c=n.progress,h=Math.min(Math.max(n.progress,-a.limitProgress),a.limitProgress);let u=h;s||(u=Math.min(Math.max(n.originalProgress,-a.limitProgress),a.limitProgress));const d=n.swiperSlideOffset,p=[e.params.cssMode?-d-e.translate:-d,0,0],f=[0,0,0];let m=!1;e.isHorizontal()||(p[1]=p[0],p[0]=0);let g={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};h<0?(g=a.next,m=!0):h>0&&(g=a.prev,m=!0),p.forEach((t,e)=>{p[e]=`calc(${t}px + (${r(g.translate[e])} * ${Math.abs(h*o)}))`}),f.forEach((t,e)=>{let i=g.rotate[e]*Math.abs(h*o);f[e]=i}),n.style.zIndex=-Math.abs(Math.round(c))+t.length;const v=p.join(", "),y=`rotateX(${l(f[0])}deg) rotateY(${l(f[1])}deg) rotateZ(${l(f[2])}deg)`,_=u<0?`scale(${1+(1-g.scale)*u*o})`:`scale(${1-(1-g.scale)*u*o})`,b=u<0?1+(1-g.opacity)*u*o:1-(1-g.opacity)*u*o,x=`translate3d(${v}) ${y} ${_}`;if(m&&g.shadow||!m){let t=n.querySelector(".swiper-slide-shadow");if(!t&&g.shadow&&(t=ht("creative",n)),t){const e=a.shadowPerProgress?h*(1/a.limitProgress):h;t.style.opacity=Math.min(Math.max(Math.abs(e),0),1)}}const w=lt(0,n);w.style.transform=x,w.style.opacity=b,g.origin&&(w.style.transformOrigin=g.origin)}},setTransition:t=>{const i=e.slides.map(t=>f(t));i.forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow").forEach(e=>{e.style.transitionDuration=t+"ms"})}),ct({swiper:e,duration:t,transformElements:i,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})},function(t){let{swiper:e,extendParams:i,on:n}=t;i({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),st({effect:"cards",swiper:e,on:n,setTranslate:()=>{const{slides:t,activeIndex:i,rtlTranslate:n}=e,r=e.params.cardsEffect,{startTranslate:a,isTouched:o}=e.touchEventsData,s=n?-e.translate:e.translate;for(let l=0;l<t.length;l+=1){const c=t[l],h=c.progress,u=Math.min(Math.max(h,-4),4);let d=c.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(d-=t[0].swiperSlideOffset);let p=e.params.cssMode?-d-e.translate:-d,f=0;const m=-100*Math.abs(u);let g=1,v=-r.perSlideRotate*u,y=r.perSlideOffset-.75*Math.abs(u);const _=e.virtual&&e.params.virtual.enabled?e.virtual.from+l:l,b=(_===i||_===i-1)&&u>0&&u<1&&(o||e.params.cssMode)&&s<a,x=(_===i||_===i+1)&&u<0&&u>-1&&(o||e.params.cssMode)&&s>a;if(b||x){const t=(1-Math.abs((Math.abs(u)-.5)/.5))**.5;v+=-28*u*t,g+=-.5*t,y+=96*t,f=-25*t*Math.abs(u)+"%"}if(p=u<0?`calc(${p}px ${n?"-":"+"} (${y*Math.abs(u)}%))`:u>0?`calc(${p}px ${n?"-":"+"} (-${y*Math.abs(u)}%))`:p+"px",!e.isHorizontal()){const t=f;f=p,p=t}const w=u<0?""+(1+(1-g)*u):""+(1-(1-g)*u),M=`\n        translate3d(${p}, ${f}, ${m}px)\n        rotateZ(${r.rotate?n?-v:v:0}deg)\n        scale(${w})\n      `;if(r.slideShadows){let t=c.querySelector(".swiper-slide-shadow");t||(t=ht("cards",c)),t&&(t.style.opacity=Math.min(Math.max((Math.abs(u)-.5)/.5,0),1))}c.style.zIndex=-Math.abs(Math.round(h))+t.length,lt(0,c).style.transform=M}},setTransition:t=>{const i=e.slides.map(t=>f(t));i.forEach(e=>{e.style.transitionDuration=t+"ms",e.querySelectorAll(".swiper-slide-shadow").forEach(e=>{e.style.transitionDuration=t+"ms"})}),ct({swiper:e,duration:t,transformElements:i})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:3,centeredSlides:!0,virtualTranslate:!e.params.cssMode})})}];return $.use(ut),$}();!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).THREE={})}(this,(function(t){function e(){}function i(t,e){this.x=t||0,this.y=e||0}function n(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function r(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function a(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function o(t,e,n,r,s,l,c,h,u,d){Object.defineProperty(this,"id",{value:fa++}),this.uuid=ua.generateUUID(),this.name="",this.image=void 0!==t?t:o.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:o.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==s?s:1006,this.minFilter=void 0!==l?l:1008,this.anisotropy=void 0!==u?u:1,this.format=void 0!==c?c:1023,this.type=void 0!==h?h:1009,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new a,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:3e3,this.version=0,this.onUpdate=null}function s(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function l(t,e,i){this.width=t,this.height=e,this.scissor=new s(0,0,t,e),this.scissorTest=!1,this.viewport=new s(0,0,t,e),i=i||{},this.texture=new o(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function c(t,e,i){l.call(this,t,e,i),this.samples=4}function h(t,e,i){l.call(this,t,e,i)}function u(t,e,i,n,r,a,s,l,c,h,u,d){o.call(this,null,a,s,l,c,h,n,r,u,d),this.image={data:t,width:e,height:i},this.magFilter=void 0!==c?c:1003,this.minFilter=void 0!==h?h:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function d(t,e){this.min=void 0!==t?t:new r(1/0,1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0,-1/0)}function p(t,e){this.center=void 0!==t?t:new r,this.radius=void 0!==e?e:0}function f(t,e){this.normal=void 0!==t?t:new r(1,0,0),this.constant=void 0!==e?e:0}function m(t,e,i,n,r,a){this.planes=[void 0!==t?t:new f,void 0!==e?e:new f,void 0!==i?i:new f,void 0!==n?n:new f,void 0!==r?r:new f,void 0!==a?a:new f]}function g(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function v(t){var e,i={};for(e in t)for(var n in i[e]={},t[e]){var r=t[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?i[e][n]=r.clone():Array.isArray(r)?i[e][n]=r.slice():i[e][n]=r}return i}function y(t){for(var e={},i=0;i<t.length;i++){var n,r=v(t[i]);for(n in r)e[n]=r[n]}return e}function _(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function b(){function t(r,a){!1!==i&&(n(r,a),e.requestAnimationFrame(t))}var e=null,i=!1,n=null;return{start:function(){!0!==i&&null!==n&&(e.requestAnimationFrame(t),i=!0)},stop:function(){i=!1},setAnimationLoop:function(t){n=t},setContext:function(t){e=t}}}function x(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=e.get(i);n&&(t.deleteBuffer(n.buffer),e.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r=e.get(i);if(void 0===r)e.set(i,function(e,i){var n=e.array,r=e.dynamic?35048:35044,a=t.createBuffer();return t.bindBuffer(i,a),t.bufferData(i,n,r),e.onUploadCallback(),i=5126,n instanceof Float32Array?i=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?i=5123:n instanceof Int16Array?i=5122:n instanceof Uint32Array?i=5125:n instanceof Int32Array?i=5124:n instanceof Int8Array?i=5120:n instanceof Uint8Array&&(i=5121),{buffer:a,type:i,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(i,n));else if(r.version<i.version){var a=i,o=a.array,s=a.updateRange;t.bindBuffer(n,r.buffer),!1===a.dynamic?t.bufferData(n,o,35044):-1===s.count?t.bufferSubData(n,0,o):0===s.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(n,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),r.version=i.version}}}}function w(t,e,i,n,a,o){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new r,this.vertexNormals=Array.isArray(n)?n:[],this.color=a&&a.isColor?a:new _,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=void 0!==o?o:0}function M(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||M.DefaultOrder}function E(){this.mask=1}function T(){Object.defineProperty(this,"id",{value:ba++}),this.uuid=ua.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=T.DefaultUp.clone();var t=new r,e=new M,i=new n,o=new r(1,1,1);e.onChange((function(){i.setFromEuler(e,!1)})),i.onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new g},normalMatrix:{value:new a}}),this.matrix=new g,this.matrixWorld=new g,this.matrixAutoUpdate=T.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new E,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function S(){Object.defineProperty(this,"id",{value:xa+=2}),this.uuid=ua.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function A(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function C(t,e,i){A.call(this,new Int8Array(t),e,i)}function L(t,e,i){A.call(this,new Uint8Array(t),e,i)}function D(t,e,i){A.call(this,new Uint8ClampedArray(t),e,i)}function P(t,e,i){A.call(this,new Int16Array(t),e,i)}function R(t,e,i){A.call(this,new Uint16Array(t),e,i)}function O(t,e,i){A.call(this,new Int32Array(t),e,i)}function I(t,e,i){A.call(this,new Uint32Array(t),e,i)}function z(t,e,i){A.call(this,new Float32Array(t),e,i)}function N(t,e,i){A.call(this,new Float64Array(t),e,i)}function k(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function F(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}function B(){Object.defineProperty(this,"id",{value:wa+=2}),this.uuid=ua.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function U(t,e,i,n,r,a){S.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new H(t,e,i,n,r,a)),this.mergeVertices()}function H(t,e,i,n,a,o){function s(t,e,i,n,a,o,s,m,g,v,y){var _=o/g,b=s/v,x=o/2,w=s/2,M=m/2;s=g+1;var E,T,S=v+1,A=o=0,C=new r;for(T=0;T<S;T++){var L=T*b-w;for(E=0;E<s;E++)C[t]=(E*_-x)*n,C[e]=L*a,C[i]=M,h.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[i]=0<m?1:-1,u.push(C.x,C.y,C.z),d.push(E/g),d.push(1-T/v),o+=1}for(T=0;T<v;T++)for(E=0;E<g;E++)t=p+E+s*(T+1),e=p+(E+1)+s*(T+1),i=p+(E+1)+s*T,c.push(p+E+s*T,t,i),c.push(t,e,i),A+=6;l.addGroup(f,A,y),f+=A,p+=o}B.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:a,depthSegments:o};var l=this;t=t||1,e=e||1,i=i||1,n=Math.floor(n)||1,a=Math.floor(a)||1,o=Math.floor(o)||1;var c=[],h=[],u=[],d=[],p=0,f=0;s("z","y","x",-1,-1,i,e,t,o,a,0),s("z","y","x",1,-1,i,e,-t,o,a,1),s("x","z","y",1,1,t,i,e,n,o,2),s("x","z","y",1,-1,t,i,-e,n,o,3),s("x","y","z",1,-1,t,e,i,n,a,4),s("x","y","z",-1,-1,t,e,-i,n,a,5),this.setIndex(c),this.addAttribute("position",new z(h,3)),this.addAttribute("normal",new z(u,3)),this.addAttribute("uv",new z(d,2))}function G(t,e,i,n){S.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new j(t,e,i,n)),this.mergeVertices()}function j(t,e,i,n){B.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r=(t=t||1)/2,a=(e=e||1)/2,o=(i=Math.floor(i)||1)+1,s=(n=Math.floor(n)||1)+1,l=t/i,c=e/n,h=[],u=[],d=[],p=[];for(t=0;t<s;t++){var f=t*c-a;for(e=0;e<o;e++)u.push(e*l-r,-f,0),d.push(0,0,1),p.push(e/i),p.push(1-t/n)}for(t=0;t<n;t++)for(e=0;e<i;e++)r=e+o*(t+1),a=e+1+o*(t+1),s=e+1+o*t,h.push(e+o*t,r,s),h.push(r,a,s);this.setIndex(h),this.addAttribute("position",new z(u,3)),this.addAttribute("normal",new z(d,3)),this.addAttribute("uv",new z(p,2))}function V(){Object.defineProperty(this,"id",{value:Ma++}),this.uuid=ua.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.vertexTangents=this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(t){V.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function q(t,e){this.origin=void 0!==t?t:new r,this.direction=void 0!==e?e:new r}function X(t,e,i){this.a=void 0!==t?t:new r,this.b=void 0!==e?e:new r,this.c=void 0!==i?i:new r}function Y(t){V.call(this),this.type="MeshBasicMaterial",this.color=new _(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(t)}function Z(t,e){T.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new Y({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function J(t,e,i,n){function r(t,i){e.buffers.color.setClear(t.r,t.g,t.b,i,n)}var a,o,s=new _(0),l=0,c=null,h=0;return{getClearColor:function(){return s},setClearColor:function(t,e){s.set(t),r(s,l=void 0!==e?e:1)},getClearAlpha:function(){return l},setClearAlpha:function(t){r(s,l=t)},render:function(e,n,u,d){n=n.background,(u=(u=t.vr).getSession&&u.getSession())&&"additive"===u.environmentBlendMode&&(n=null),null===n?(r(s,l),c=null,h=0):n&&n.isColor&&(r(n,1),d=!0,c=null,h=0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),n&&(n.isCubeTexture||n.isWebGLRenderTargetCube)?(void 0===o&&((o=new Z(new H(1,1,1),new W({type:"BackgroundCubeMaterial",uniforms:v(_a.cube.uniforms),vertexShader:_a.cube.vertexShader,fragmentShader:_a.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),i.update(o)),d=n.isWebGLRenderTargetCube?n.texture:n,o.material.uniforms.tCube.value=d,o.material.uniforms.tFlip.value=n.isWebGLRenderTargetCube?1:-1,c===n&&h===d.version||(o.material.needsUpdate=!0,c=n,h=d.version),e.unshift(o,o.geometry,o.material,0,0,null)):n&&n.isTexture&&(void 0===a&&((a=new Z(new j(2,2),new W({type:"BackgroundMaterial",uniforms:v(_a.background.uniforms),vertexShader:_a.background.vertexShader,fragmentShader:_a.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=n,!0===n.matrixAutoUpdate&&n.updateMatrix(),a.material.uniforms.uvTransform.value.copy(n.matrix),c===n&&h===n.version||(a.material.needsUpdate=!0,c=n,h=n.version),e.unshift(a,a.geometry,a.material,0,0,null))}}}function Q(t,e,i,n){var r;this.setMode=function(t){r=t},this.render=function(e,n){t.drawArrays(r,e,n),i.update(n,r)},this.renderInstances=function(a,o,s){if(n.isWebGL2)var l=t;else if(null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,o,s,a.maxInstancedCount),i.update(s,r,a.maxInstancedCount)}}function K(t,e,i){function n(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o=void 0!==i.precision?i.precision:"highp",s=n(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s),i=!0===i.logarithmicDepthBuffer,s=t.getParameter(34930);var l=t.getParameter(35660),c=t.getParameter(3379),h=t.getParameter(34076),u=t.getParameter(34921),d=t.getParameter(36347),p=t.getParameter(36348),f=t.getParameter(36349),m=0<l,g=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var i=e.get("EXT_texture_filter_anisotropic");return r=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:o,logarithmicDepthBuffer:i,maxTextures:s,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:h,maxAttributes:u,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:a?t.getParameter(36183):0}}function $(){function t(){h.value!==n&&(h.value=n,h.needsUpdate=0<r),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=h.value,!0!==r||null===o)for(r=n+4*a,e=e.matrixWorldInverse,c.getNormalMatrix(e),(null===o||o.length<r)&&(o=new Float32Array(r)),r=0;r!==a;++r,n+=4)l.copy(t[r]).applyMatrix4(e,c),l.normal.toArray(o,n),o[n+3]=l.constant;h.value=o,h.needsUpdate=!0}return i.numPlanes=a,o}var i=this,n=null,r=0,o=!1,s=!1,l=new f,c=new a,h={value:null,needsUpdate:!1};this.uniform=h,this.numIntersection=this.numPlanes=0,this.init=function(t,i,a){var s=0!==t.length||i||0!==r||o;return o=i,n=e(t,a,0),r=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(i,a,l,c,u,d){if(!o||null===i||0===i.length||s&&!l)s?e(null):t();else{var p=4*(l=s?0:r),f=u.clippingState||null;for(h.value=f,f=e(i,c,p,d),i=0;i!==p;++i)f[i]=n[i];u.clippingState=f,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=l}}}function tt(t){var e={};return{get:function(i){if(void 0!==e[i])return e[i];switch(i){case"WEBGL_depth_texture":var n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),e[i]=n}}}function et(t,e,i){function n(t){var o=t.target;for(var s in null!==(t=r[o.id]).index&&e.remove(t.index),t.attributes)e.remove(t.attributes[s]);o.removeEventListener("dispose",n),delete r[o.id],(s=a[t.id])&&(e.remove(s),delete a[t.id]),i.memory.geometries--}var r={},a={};return{get:function(t,e){var a=r[e.id];return a||(e.addEventListener("dispose",n),e.isBufferGeometry?a=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new B).setFromObject(t)),a=e._bufferGeometry),r[e.id]=a,i.memory.geometries++,a)},update:function(t){var i=t.index,n=t.attributes;for(var r in null!==i&&e.update(i,34963),n)e.update(n[r],34962);for(r in t=t.morphAttributes){n=0;for(var a=(i=t[r]).length;n<a;n++)e.update(i[n],34962)}},getWireframeAttribute:function(t){var i=a[t.id];if(i)return i;i=[];var n=t.index,r=t.attributes;if(null!==n){r=0;for(var o=(n=n.array).length;r<o;r+=3){var s=n[r+0],l=n[r+1],c=n[r+2];i.push(s,l,l,c,c,s)}}else for(n=r.position.array,r=0,o=n.length/3-1;r<o;r+=3)s=r+0,l=r+1,c=r+2,i.push(s,l,l,c,c,s);return i=new(65535<F(i)?I:R)(i,1),e.update(i,34963),a[t.id]=i}}}function it(t,e,i,n){var r,a,o;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,n){t.drawElements(r,n,a,e*o),i.update(n,r)},this.renderInstances=function(s,l,c){if(n.isWebGL2)var h=t;else if(null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,c,a,l*o,s.maxInstancedCount),i.update(c,r,s.maxInstancedCount)}}function nt(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,i,n){switch(n=n||1,e.calls++,i){case 4:e.triangles+=t/3*n;break;case 5:case 6:e.triangles+=n*(t-2);break;case 1:e.lines+=t/2*n;break;case 3:e.lines+=n*(t-1);break;case 2:e.lines+=n*t;break;case 0:e.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function rt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function at(t){var e={},i=new Float32Array(8);return{update:function(n,r,a,o){var s=n.morphTargetInfluences,l=s.length;if(void 0===(n=e[r.id])){n=[];for(var c=0;c<l;c++)n[c]=[c,0];e[r.id]=n}var h=a.morphTargets&&r.morphAttributes.position;for(a=a.morphNormals&&r.morphAttributes.normal,c=0;c<l;c++){var u=n[c];0!==u[1]&&(h&&r.removeAttribute("morphTarget"+c),a&&r.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++)(u=n[c])[0]=c,u[1]=s[c];for(n.sort(rt),c=0;8>c;c++)(u=n[c])&&(s=u[0],l=u[1])?(h&&r.addAttribute("morphTarget"+c,h[s]),a&&r.addAttribute("morphNormal"+c,a[s]),i[c]=l):i[c]=0;o.getUniforms().setValue(t,"morphTargetInfluences",i)}}}function ot(t,e){var i={};return{update:function(n){var r=e.render.frame,a=n.geometry,o=t.get(n,a);return i[o.id]!==r&&(a.isGeometry&&o.updateFromObject(n),t.update(o),i[o.id]=r),o},dispose:function(){i={}}}}function st(t,e,i,n,r,a,s,l,c,h){t=void 0!==t?t:[],o.call(this,t,void 0!==e?e:301,i,n,r,a,void 0!==s?s:1022,l,c,h),this.flipY=!1}function lt(t,e,i,n){o.call(this,null),this.image={data:t,width:e,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function ct(t,e,i,n){o.call(this,null),this.image={data:t,width:e,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function ht(t,e,i){var n=t[0];if(0>=n||0<n)return t;var r=e*i,a=Ca[r];if(void 0===a&&(a=new Float32Array(r),Ca[r]=a),0!==e)for(n.toArray(a,0),n=1,r=0;n!==e;++n)r+=i,t[n].toArray(a,r);return a}function ut(t,e){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function dt(t,e){for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}function pt(t,e){var i=La[e];void 0===i&&(i=new Int32Array(e),La[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function ft(t,e){var i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function mt(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y):ut(i,e)||(t.uniform2fv(this.addr,e),dt(i,e))}function gt(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z):void 0!==e.r?i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b):ut(i,e)||(t.uniform3fv(this.addr,e),dt(i,e))}function vt(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w):ut(i,e)||(t.uniform4fv(this.addr,e),dt(i,e))}function yt(t,e){var i=this.cache,n=e.elements;void 0===n?ut(i,e)||(t.uniformMatrix2fv(this.addr,!1,e),dt(i,e)):ut(i,n)||(Ra.set(n),t.uniformMatrix2fv(this.addr,!1,Ra),dt(i,n))}function _t(t,e){var i=this.cache,n=e.elements;void 0===n?ut(i,e)||(t.uniformMatrix3fv(this.addr,!1,e),dt(i,e)):ut(i,n)||(Pa.set(n),t.uniformMatrix3fv(this.addr,!1,Pa),dt(i,n))}function bt(t,e){var i=this.cache,n=e.elements;void 0===n?ut(i,e)||(t.uniformMatrix4fv(this.addr,!1,e),dt(i,e)):ut(i,n)||(Da.set(n),t.uniformMatrix4fv(this.addr,!1,Da),dt(i,n))}function xt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(e||Ea,r)}function wt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||Ta,r)}function Mt(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||Sa,r)}function Et(t,e,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(e||Aa,r)}function Tt(t,e){var i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function St(t,e){var i=this.cache;ut(i,e)||(t.uniform2iv(this.addr,e),dt(i,e))}function At(t,e){var i=this.cache;ut(i,e)||(t.uniform3iv(this.addr,e),dt(i,e))}function Ct(t,e){var i=this.cache;ut(i,e)||(t.uniform4iv(this.addr,e),dt(i,e))}function Lt(t,e){t.uniform1fv(this.addr,e)}function Dt(t,e){t.uniform1iv(this.addr,e)}function Pt(t,e){t.uniform2iv(this.addr,e)}function Rt(t,e){t.uniform3iv(this.addr,e)}function Ot(t,e){t.uniform4iv(this.addr,e)}function It(t,e){e=ht(e,this.size,2),t.uniform2fv(this.addr,e)}function zt(t,e){e=ht(e,this.size,3),t.uniform3fv(this.addr,e)}function Nt(t,e){e=ht(e,this.size,4),t.uniform4fv(this.addr,e)}function kt(t,e){e=ht(e,this.size,4),t.uniformMatrix2fv(this.addr,!1,e)}function Ft(t,e){e=ht(e,this.size,9),t.uniformMatrix3fv(this.addr,!1,e)}function Bt(t,e){e=ht(e,this.size,16),t.uniformMatrix4fv(this.addr,!1,e)}function Ut(t,e,i){var n=e.length,r=pt(i,n);for(t.uniform1iv(this.addr,r),t=0;t!==n;++t)i.safeSetTexture2D(e[t]||Ea,r[t])}function Ht(t,e,i){var n=e.length,r=pt(i,n);for(t.uniform1iv(this.addr,r),t=0;t!==n;++t)i.safeSetTextureCube(e[t]||Aa,r[t])}function Gt(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return ft;case 35664:return mt;case 35665:return gt;case 35666:return vt;case 35674:return yt;case 35675:return _t;case 35676:return bt;case 35678:case 36198:return xt;case 35679:return Mt;case 35680:return Et;case 36289:return wt;case 5124:case 35670:return Tt;case 35667:case 35671:return St;case 35668:case 35672:return At;case 35669:case 35673:return Ct}}(e.type)}function jt(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Lt;case 35664:return It;case 35665:return zt;case 35666:return Nt;case 35674:return kt;case 35675:return Ft;case 35676:return Bt;case 35678:return Ut;case 35680:return Ht;case 5124:case 35670:return Dt;case 35667:case 35671:return Pt;case 35668:case 35672:return Rt;case 35669:case 35673:return Ot}}(e.type)}function Vt(t){this.id=t,this.seq=[],this.map={}}function Wt(t,e){this.seq=[],this.map={};for(var i=t.getProgramParameter(e,35718),n=0;n<i;++n){var r=t.getActiveUniform(e,n),a=t.getUniformLocation(e,r.name),o=this,s=r.name,l=s.length;for(Oa.lastIndex=0;;){var c=Oa.exec(s),h=Oa.lastIndex,u=c[1],d=c[3];if("]"===c[2]&&(u|=0),void 0===d||"["===d&&h+2===l){s=o,r=void 0===d?new Gt(u,r,a):new jt(u,r,a),s.seq.push(r),s.map[r.id]=r;break}void 0===(d=o.map[u])&&(d=new Vt(u),u=o,o=d,u.seq.push(o),u.map[o.id]=o),o=d}}}function qt(t,e,i,n){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),!0===n&&(!1===t.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===e?"vertex":"fragment",t.getShaderInfoLog(r),function(t){t=t.split("\n");for(var e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(i))),r}function Xt(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+t)}}function Yt(t,e){return"vec4 "+t+"( vec4 value ) { return "+(e=Xt(e))[0]+"ToLinear"+e[1]+"; }"}function Zt(t,e){return"vec4 "+t+"( vec4 value ) { return LinearTo"+(e=Xt(e))[0]+e[1]+"; }"}function Jt(t,e){switch(e){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="Uncharted2";break;case 4:e="OptimizedCineon";break;case 5:e="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function Qt(t){return""!==t}function Kt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function $t(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function te(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,e){if(void 0===(t=ma[e]))throw Error("Can not resolve #include <"+e+">");return te(t)}))}function ee(t){return t.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(t,e,i,n){for(t="",e=parseInt(e);e<parseInt(i);e++)t+=n.replace(/\[ i \]/g,"[ "+e+" ]");return t}))}function ie(t,e,i,n,r,a,o,s){var l=t.context,c=n.defines,h=r.vertexShader,u=r.fragmentShader,d="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?d="SHADOWMAP_TYPE_PCF":2===a.shadowMapType&&(d="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case 301:case 302:p="ENVMAP_TYPE_CUBE";break;case 306:case 307:p="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:p="ENVMAP_TYPE_EQUIREC";break;case 305:p="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:f="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:m="ENVMAP_BLENDING_MULTIPLY";break;case 1:m="ENVMAP_BLENDING_MIX";break;case 2:m="ENVMAP_BLENDING_ADD"}}var g,v,y=0<t.gammaFactor?t.gammaFactor:1,_=o.isWebGL2?"":function(t,e,i){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qt).join("\n")}(n.extensions,a,e),b=function(t){var e,i=[];for(e in t){var n=t[e];!1!==n&&i.push("#define "+e+" "+n)}return i.join("\n")}(c),x=l.createProgram();return n.isRawShaderMaterial?(0<(c=[b].filter(Qt).join("\n")).length&&(c+="\n"),0<(e=[_,b].filter(Qt).join("\n")).length&&(e+="\n")):(c=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,b,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qt).join("\n"),e=[_,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,b,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+y,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.envMap?"#define "+f:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(o.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?ma.tonemapping_pars_fragment:"",0!==a.toneMapping?Jt("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?ma.encodings_pars_fragment:"",a.mapEncoding?Yt("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?Yt("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?Yt("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Yt("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?Zt("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Qt).join("\n")),h=$t(h=Kt(h=te(h),a),a),u=$t(u=Kt(u=te(u),a),a),h=ee(h),u=ee(u),o.isWebGL2&&!n.isRawShaderMaterial&&(o=!1,d=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==h.match(d)&&null!==u.match(d)&&(o=!0,h=h.replace(d,""),u=u.replace(d,"")),c="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+c,e=["#version 300 es\n\n#define varying in",o?"":"out highp vec4 pc_fragColor;",o?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+e),u=e+u,h=qt(l,35633,c+h,t.debug.checkShaderErrors),u=qt(l,35632,u,t.debug.checkShaderErrors),l.attachShader(x,h),l.attachShader(x,u),void 0!==n.index0AttributeName?l.bindAttribLocation(x,0,n.index0AttributeName):!0===a.morphTargets&&l.bindAttribLocation(x,0,"position"),l.linkProgram(x),t.debug.checkShaderErrors&&(t=l.getProgramInfoLog(x).trim(),a=l.getShaderInfoLog(h).trim(),o=l.getShaderInfoLog(u).trim(),p=d=!0,!1===l.getProgramParameter(x,35714)?(d=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(x,35715),"gl.getProgramInfoLog",t,a,o)):""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==a&&""!==o||(p=!1),p&&(this.diagnostics={runnable:d,material:n,programLog:t,vertexShader:{log:a,prefix:c},fragmentShader:{log:o,prefix:e}})),l.deleteShader(h),l.deleteShader(u),this.getUniforms=function(){return void 0===g&&(g=new Wt(l,x,s)),g},this.getAttributes=function(){if(void 0===v){for(var t={},e=l.getProgramParameter(x,35721),i=0;i<e;i++){var n=l.getActiveAttrib(x,i).name;t[n]=l.getAttribLocation(x,n)}v=t}return v},this.destroy=function(){l.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=Ia++,this.code=i,this.usedTimes=1,this.program=x,this.vertexShader=h,this.fragmentShader=u,this}function ne(t,e,i,n){function r(t,e){if(t)t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=t.texture.encoding);else var i=3e3;return 3e3===i&&e&&(i=3007),i}var a=[],o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s="precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(e,n,a,s,l,c,h){var u=o[e.type];if(h.isSkinnedMesh){var d=h.skeleton.bones;if(i.floatVertexTextures)d=1024;else{var p=Math.min(Math.floor((i.maxVertexUniforms-20)/4),d.length);p<d.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+d.length+" bones. This GPU supports "+p+"."),d=0):d=p}}else d=0;p=i.precision,null!==e.precision&&(p=i.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",p,"instead.");var f=t.getRenderTarget();return{shaderID:u,precision:p,supportsVertexTextures:i.vertexTextures,outputEncoding:r(f?f.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:r(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:r(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:r(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(306===e.envMap.mapping||307===e.envMap.mapping),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:r(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:1===e.normalMapType,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,fog:!!s,useFog:e.fog,fogExp:s&&s.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:e.skinning&&0<d,maxBones:d,useVertexTexture:i.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&0<a.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:2===e.side,flipSided:1===e.side,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(r=0;r<s.length;r++)n.push(i[s[r]]);return n.push(e.onBeforeCompile.toString()),n.push(t.gammaOutput),n.push(t.gammaFactor),n.join()},this.acquireProgram=function(r,o,s,l){for(var c,h=0,u=a.length;h<u;h++){var d=a[h];if(d.code===l){++(c=d).usedTimes;break}}return void 0===c&&(c=new ie(t,e,l,r,o,s,i,n),a.push(c)),c},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},this.programs=a}function re(){var t=new WeakMap;return{get:function(e){var i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,n){t.get(e)[i]=n},dispose:function(){t=new WeakMap}}}function ae(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function oe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function se(){function t(t,n,r,o,s,l){var c=e[i];return void 0===c?(c={id:t.id,object:t,geometry:n,material:r,program:r.program||a,groupOrder:o,renderOrder:t.renderOrder,z:s,group:l},e[i]=c):(c.id=t.id,c.object=t,c.geometry=n,c.material=r,c.program=r.program||a,c.groupOrder=o,c.renderOrder=t.renderOrder,c.z=s,c.group=l),i++,c}var e=[],i=0,n=[],r=[],a={id:-1};return{opaque:n,transparent:r,init:function(){i=0,n.length=0,r.length=0},push:function(e,i,a,o,s,l){e=t(e,i,a,o,s,l),(!0===a.transparent?r:n).push(e)},unshift:function(e,i,a,o,s,l){e=t(e,i,a,o,s,l),(!0===a.transparent?r:n).unshift(e)},sort:function(){1<n.length&&n.sort(ae),1<r.length&&r.sort(oe)}}}function le(){function t(i){(i=i.target).removeEventListener("dispose",t),delete e[i.id]}var e={};return{get:function(i,n){var r=e[i.id];if(void 0===r){var a=new se;e[i.id]={},e[i.id][n.id]=a,i.addEventListener("dispose",t)}else void 0===(a=r[n.id])&&(a=new se,r[n.id]=a);return a},dispose:function(){e={}}}}function ce(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":var n={direction:new r,color:new _,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new r,direction:new r,color:new _,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new r,color:new _,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new r,skyColor:new _,groundColor:new _};break;case"RectAreaLight":n={color:new _,position:new r,halfWidth:new r,halfHeight:new r}}return t[e.id]=n}}}function he(){for(var t=new ce,e={id:za++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;9>i;i++)e.probe.push(new r);var n=new r,a=new g,o=new g;return{setup:function(i,r,s){for(var l=0,c=0,h=0,u=0;9>u;u++)e.probe[u].set(0,0,0);var d=0,p=0,f=0,m=0,g=0;s=s.matrixWorldInverse,u=0;for(var v=i.length;u<v;u++){var y=i[u],_=y.color,b=y.intensity,x=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)l+=_.r*b,c+=_.g*b,h+=_.b*b;else if(y.isLightProbe)for(w=0;9>w;w++)e.probe[w].addScaledVector(y.sh.coefficients[w],b);else if(y.isDirectionalLight){var M=t.get(y);M.color.copy(y.color).multiplyScalar(y.intensity),M.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(n),M.direction.transformDirection(s),(M.shadow=y.castShadow)&&(b=y.shadow,M.shadowBias=b.bias,M.shadowRadius=b.radius,M.shadowMapSize=b.mapSize),e.directionalShadowMap[d]=w,e.directionalShadowMatrix[d]=y.shadow.matrix,e.directional[d]=M,d++}else y.isSpotLight?((M=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(s),M.color.copy(_).multiplyScalar(b),M.distance=x,M.direction.setFromMatrixPosition(y.matrixWorld),n.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(n),M.direction.transformDirection(s),M.coneCos=Math.cos(y.angle),M.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),M.decay=y.decay,(M.shadow=y.castShadow)&&(b=y.shadow,M.shadowBias=b.bias,M.shadowRadius=b.radius,M.shadowMapSize=b.mapSize),e.spotShadowMap[f]=w,e.spotShadowMatrix[f]=y.shadow.matrix,e.spot[f]=M,f++):y.isRectAreaLight?((M=t.get(y)).color.copy(_).multiplyScalar(b),M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(s),o.identity(),a.copy(y.matrixWorld),a.premultiply(s),o.extractRotation(a),M.halfWidth.set(.5*y.width,0,0),M.halfHeight.set(0,.5*y.height,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),e.rectArea[m]=M,m++):y.isPointLight?((M=t.get(y)).position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(s),M.color.copy(y.color).multiplyScalar(y.intensity),M.distance=y.distance,M.decay=y.decay,(M.shadow=y.castShadow)&&(b=y.shadow,M.shadowBias=b.bias,M.shadowRadius=b.radius,M.shadowMapSize=b.mapSize,M.shadowCameraNear=b.camera.near,M.shadowCameraFar=b.camera.far),e.pointShadowMap[p]=w,e.pointShadowMatrix[p]=y.shadow.matrix,e.point[p]=M,p++):y.isHemisphereLight&&((M=t.get(y)).direction.setFromMatrixPosition(y.matrixWorld),M.direction.transformDirection(s),M.direction.normalize(),M.skyColor.copy(y.color).multiplyScalar(b),M.groundColor.copy(y.groundColor).multiplyScalar(b),e.hemi[g]=M,g++)}e.ambient[0]=l,e.ambient[1]=c,e.ambient[2]=h,e.directional.length=d,e.spot.length=f,e.rectArea.length=m,e.point.length=p,e.hemi.length=g,e.hash.stateID=e.id,e.hash.directionalLength=d,e.hash.pointLength=p,e.hash.spotLength=f,e.hash.rectAreaLength=m,e.hash.hemiLength=g,e.hash.shadowsLength=r.length},state:e}}function ue(){var t=new he,e=[],i=[];return{init:function(){e.length=0,i.length=0},state:{lightsArray:e,shadowsArray:i,lights:t},setupLights:function(n){t.setup(e,i,n)},pushLight:function(t){e.push(t)},pushShadow:function(t){i.push(t)}}}function de(){function t(i){(i=i.target).removeEventListener("dispose",t),delete e[i.id]}var e={};return{get:function(i,n){if(void 0===e[i.id]){var r=new ue;e[i.id]={},e[i.id][n.id]=r,i.addEventListener("dispose",t)}else void 0===e[i.id][n.id]?(r=new ue,e[i.id][n.id]=r):r=e[i.id][n.id];return r},dispose:function(){e={}}}}function pe(t){V.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(t)}function fe(t){V.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new r,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(t)}function me(t,e,n){function a(e,i,n,r,a,o){var s=e.geometry,l=v,c=e.customDepthMaterial;return n&&(l=y,c=e.customDistanceMaterial),c?l=c:(c=!1,i.morphTargets&&(s&&s.isBufferGeometry?c=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(c=s.morphTargets&&0<s.morphTargets.length)),e.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e),s=0,c&&(s|=1),(e=e.isSkinnedMesh&&i.skinning)&&(s|=2),l=l[s]),t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(s=l.uuid,c=i.uuid,void 0===(e=_[s])&&(e={},_[s]=e),void 0===(s=e[c])&&(s=l.clone(),e[c]=s),l=s),l.visible=i.visible,l.wireframe=i.wireframe,l.side=null!=i.shadowSide?i.shadowSide:b[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,n&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=a,l.farDistance=o),l}function o(i,n,r,s){if(!1!==i.visible){if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||c.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,i.matrixWorld);var l=e.update(i),h=i.material;if(Array.isArray(h))for(var u=l.groups,d=0,p=u.length;d<p;d++){var m=u[d],g=h[m.materialIndex];g&&g.visible&&(g=a(i,g,s,f,r.near,r.far),t.renderBufferDirect(r,null,l,g,i,m))}else h.visible&&(g=a(i,h,s,f,r.near,r.far),t.renderBufferDirect(r,null,l,g,i,null))}for(l=0,h=(i=i.children).length;l<h;l++)o(i[l],n,r,s)}}var c=new m,h=new g,u=new i,d=new i(n,n),p=new r,f=new r,v=Array(4),y=Array(4),_={},b={0:1,1:0,2:2},x=[new r(1,0,0),new r(-1,0,0),new r(0,0,1),new r(0,0,-1),new r(0,1,0),new r(0,-1,0)],w=[new r(0,1,0),new r(0,1,0),new r(0,1,0),new r(0,1,0),new r(0,0,1),new r(0,0,-1)],M=[new s,new s,new s,new s,new s,new s];for(n=0;4!==n;++n){var E=0!=(1&n),T=0!=(2&n),S=new pe({depthPacking:3201,morphTargets:E,skinning:T});v[n]=S,E=new fe({morphTargets:E,skinning:T}),y[n]=E}var A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,i,n){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==e.length){var r=t.getRenderTarget(),a=t.getActiveCubeFace(),s=t.getActiveMipMapLevel(),m=t.state;m.setBlending(0),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(var g,v=0,y=e.length;v<y;v++){var _=e[v];g=_.shadow;var b=_&&_.isPointLight;if(void 0===g)console.warn("THREE.WebGLShadowMap:",_,"has no shadow.");else{var E=g.camera;if(u.copy(g.mapSize),u.min(d),b){var T=u.x,S=u.y;M[0].set(2*T,S,T,S),M[1].set(0,S,T,S),M[2].set(3*T,S,T,S),M[3].set(T,S,T,S),M[4].set(3*T,0,T,S),M[5].set(T,0,T,S),u.x*=4,u.y*=2}for(null===g.map&&(g.map=new l(u.x,u.y,{minFilter:1003,magFilter:1003,format:1023}),g.map.texture.name=_.name+".shadowMap",E.updateProjectionMatrix()),g.isSpotLightShadow&&g.update(_),T=g.map,S=g.matrix,f.setFromMatrixPosition(_.matrixWorld),E.position.copy(f),b?(g=6,S.makeTranslation(-f.x,-f.y,-f.z)):(g=1,p.setFromMatrixPosition(_.target.matrixWorld),E.lookAt(p),E.updateMatrixWorld(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(E.projectionMatrix),S.multiply(E.matrixWorldInverse)),t.setRenderTarget(T),t.clear(),_=0;_<g;_++)b&&(p.copy(E.position),p.add(x[_]),E.up.copy(w[_]),E.lookAt(p),E.updateMatrixWorld(),m.viewport(M[_])),h.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),c.setFromMatrix(h),o(i,n,E,b)}}A.needsUpdate=!1,t.setRenderTarget(r,a,s)}}}function ge(t,e,i,n){function r(e,i,n){var r=new Uint8Array(4),a=t.createTexture();for(t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728),e=0;e<n;e++)t.texImage2D(i+e,0,6408,1,1,0,6408,5121,r);return a}function a(i,r){y[i]=1,0===_[i]&&(t.enableVertexAttribArray(i),_[i]=1),b[i]!==r&&((n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),b[i]=r)}function o(e){!0!==x[e]&&(t.enable(e),x[e]=!0)}function l(e){!1!==x[e]&&(t.disable(e),x[e]=!1)}function c(e,n,r,a,s,c,h,u){if(0===e)E&&(l(3042),E=!1);else if(E||(o(3042),E=!0),5!==e){if(e!==T||u!==R){if(100===S&&100===L||(t.blendEquation(32774),L=S=100),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}P=D=C=A=null,T=e,R=u}}else s=s||n,c=c||r,h=h||a,n===S&&s===L||(t.blendEquationSeparate(i.convert(n),i.convert(s)),S=n,L=s),r===A&&a===C&&c===D&&h===P||(t.blendFuncSeparate(i.convert(r),i.convert(a),i.convert(c),i.convert(h)),A=r,C=a,D=c,P=h),T=e,R=null}function h(e){O!==e&&(e?t.frontFace(2304):t.frontFace(2305),O=e)}function u(e){0!==e?(o(2884),e!==I&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):l(2884),I=e}function d(e,i,n){e?(o(32823),(N!==i||k!==n)&&(t.polygonOffset(i,n),N=i,k=n)):l(32823)}function p(e){void 0===e&&(e=33984+F-1),U!==e&&(t.activeTexture(e),U=e)}var f=new function(){var e=!1,i=new s,n=null,r=new s(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,a,o,s){!0===s&&(e*=o,n*=o,a*=o),i.set(e,n,a,o),!1===r.equals(i)&&(t.clearColor(e,n,a,o),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},m=new function(){var e=!1,i=null,n=null,r=null;return{setTest:function(t){t?o(2929):l(2929)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,r=n=i=null}}},g=new function(){var e=!1,i=null,n=null,r=null,a=null,s=null,c=null,h=null,u=null;return{setTest:function(t){t?o(2960):l(2960)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){n===e&&r===i&&a===o||(t.stencilFunc(e,i,o),n=e,r=i,a=o)},setOp:function(e,i,n){s===e&&c===i&&h===n||(t.stencilOp(e,i,n),s=e,c=i,h=n)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,u=h=c=s=a=r=n=i=null}}},v=t.getParameter(34921),y=new Uint8Array(v),_=new Uint8Array(v),b=new Uint8Array(v),x={},w=null,M=null,E=null,T=null,S=null,A=null,C=null,L=null,D=null,P=null,R=!1,O=null,I=null,z=null,N=null,k=null,F=t.getParameter(35661),B=!1;v=0,-1!==(v=t.getParameter(7938)).indexOf("WebGL")?(v=parseFloat(/^WebGL ([0-9])/.exec(v)[1]),B=1<=v):-1!==v.indexOf("OpenGL ES")&&(v=parseFloat(/^OpenGL ES ([0-9])/.exec(v)[1]),B=2<=v);var U=null,H={},G=new s,j=new s,V={};return V[3553]=r(3553,3553,1),V[34067]=r(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),g.setClear(0),o(2929),m.setFunc(3),h(!1),u(1),o(2884),c(0),{buffers:{color:f,depth:m,stencil:g},initAttributes:function(){for(var t=0,e=y.length;t<e;t++)y[t]=0},enableAttribute:function(t){a(t,0)},enableAttributeAndDivisor:a,disableUnusedAttributes:function(){for(var e=0,i=_.length;e!==i;++e)_[e]!==y[e]&&(t.disableVertexAttribArray(e),_[e]=0)},enable:o,disable:l,getCompressedTextureFormats:function(){if(null===w&&(w=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var i=t.getParameter(34467),n=0;n<i.length;n++)w.push(i[n]);return w},useProgram:function(e){return M!==e&&(t.useProgram(e),M=e,!0)},setBlending:c,setMaterial:function(t,e){2===t.side?l(2884):o(2884);var i=1===t.side;e&&(i=!i),h(i),1===t.blending&&!1===t.transparent?c(0):c(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),m.setFunc(t.depthFunc),m.setTest(t.depthTest),m.setMask(t.depthWrite),f.setMask(t.colorWrite),d(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:h,setCullFace:u,setLineWidth:function(e){e!==z&&(B&&t.lineWidth(e),z=e)},setPolygonOffset:d,setScissorTest:function(t){t?o(3089):l(3089)},activeTexture:p,bindTexture:function(e,i){null===U&&p();var n=H[U];void 0===n&&(n={type:void 0,texture:void 0},H[U]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||V[e]),n.type=e,n.texture=i)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===G.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),G.copy(e))},viewport:function(e){!1===j.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),j.copy(e))},reset:function(){for(var e=0;e<_.length;e++)1===_[e]&&(t.disableVertexAttribArray(e),_[e]=0);x={},U=w=null,H={},I=O=T=M=null,f.reset(),m.reset(),g.reset()}}}function ve(t,e,i,n,r,a,o){function s(t,e){return A?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function l(t,e,i,n){var r=1;if((t.width>n||t.height>n)&&(r=n/Math.max(t.width,t.height)),1>r||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap)return e=(n=e?ua.floorPowerOfTwo:Math.floor)(r*t.width),r=n(r*t.height),void 0===T&&(T=s(e,r)),(i=i?s(e,r):T).width=e,i.height=r,i.getContext("2d").drawImage(t,0,0,e,r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+e+"x"+r+")."),i;"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+").")}return t}function c(t){return ua.isPowerOfTwo(t.width)&&ua.isPowerOfTwo(t.height)}function h(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function u(e,i,r,a){t.generateMipmap(e),n.get(i).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function d(t,i){if(!r.isWebGL2)return t;var n=t;return 6403===t&&(5126===i&&(n=33326),5131===i&&(n=33325),5121===i&&(n=33321)),6407===t&&(5126===i&&(n=34837),5131===i&&(n=34843),5121===i&&(n=32849)),6408===t&&(5126===i&&(n=34836),5131===i&&(n=34842),5121===i&&(n=32856)),33325===n||33326===n||34842===n||34836===n?e.get("EXT_color_buffer_float"):(34843===n||34837===n)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),n}function p(t){return 1003===t||1004===t||1005===t?9728:9729}function f(e){(e=e.target).removeEventListener("dispose",f);var i=n.get(e);void 0!==i.__webglInit&&(t.deleteTexture(i.__webglTexture),n.remove(e)),e.isVideoTexture&&delete S[e.id],o.memory.textures--}function m(e){(e=e.target).removeEventListener("dispose",m);var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(r=0;6>r;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(e.texture),n.remove(e)}o.memory.textures--}function g(t,e){var r=n.get(t);if(t.isVideoTexture){var a=t.id,s=o.render.frame;S[a]!==s&&(S[a]=s,t.update())}if(0<t.version&&r.__version!==t.version)if(void 0===(a=t.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void x(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}i.activeTexture(33984+e),i.bindTexture(3553,r.__webglTexture)}function v(e,o){var s=n.get(e);if(6===e.image.length)if(0<e.version&&s.__version!==e.version){b(s,e),i.activeTexture(33984+o),i.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY),o=e&&e.isCompressedTexture;for(var p=e.image[0]&&e.image[0].isDataTexture,f=[],m=0;6>m;m++)f[m]=o||p?p?e.image[m].image:e.image[m]:l(e.image[m],!1,!0,r.maxCubemapSize);var g=f[0],v=c(g)||r.isWebGL2,y=a.convert(e.format),x=a.convert(e.type),w=d(y,x);for(_(34067,e,v),m=0;6>m;m++)if(o)for(var M,E=f[m].mipmaps,T=0,S=E.length;T<S;T++)M=E[T],1023!==e.format&&1022!==e.format?-1<i.getCompressedTextureFormats().indexOf(y)?i.compressedTexImage2D(34069+m,T,w,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+m,T,w,M.width,M.height,0,y,x,M.data);else p?i.texImage2D(34069+m,0,w,f[m].width,f[m].height,0,y,x,f[m].data):i.texImage2D(34069+m,0,w,y,x,f[m]);s.__maxMipLevel=o?E.length-1:0,h(e,v)&&u(34067,e,g.width,g.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(33984+o),i.bindTexture(34067,s.__webglTexture)}function y(t,e){i.activeTexture(33984+e),i.bindTexture(34067,n.get(t).__webglTexture)}function _(i,o,s){s?(t.texParameteri(i,10242,a.convert(o.wrapS)),t.texParameteri(i,10243,a.convert(o.wrapT)),32879!==i&&35866!==i||t.texParameteri(i,32882,a.convert(o.wrapR)),t.texParameteri(i,10240,a.convert(o.magFilter)),t.texParameteri(i,10241,a.convert(o.minFilter))):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),32879!==i&&35866!==i||t.texParameteri(i,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,10240,p(o.magFilter)),t.texParameteri(i,10241,p(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(s=e.get("EXT_texture_filter_anisotropic"))||1015===o.type&&null===e.get("OES_texture_float_linear")||1016===o.type&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear"))||!(1<o.anisotropy||n.get(o).__currentAnisotropy)||(t.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}function b(e,i){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),o.memory.textures++)}function x(e,n,o){var s=3553;n.isDataTexture2DArray&&(s=35866),n.isDataTexture3D&&(s=32879),b(e,n),i.activeTexture(33984+o),i.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment),o=(o=!r.isWebGL2&&(1001!==n.wrapS||1001!==n.wrapT||1003!==n.minFilter&&1006!==n.minFilter))&&!1===c(n.image);var p=c(o=l(n.image,o,!1,r.maxTextureSize))||r.isWebGL2,f=a.convert(n.format),m=a.convert(n.type),g=d(f,m);_(s,n,p);var v=n.mipmaps;if(n.isDepthTexture){if(g=6402,1015===n.type){if(!r.isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");g=36012}else r.isWebGL2&&(g=33189);1026===n.format&&6402===g&&1012!==n.type&&1014!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=1012,m=a.convert(n.type)),1027===n.format&&(g=34041,1020!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=1020,m=a.convert(n.type))),i.texImage2D(3553,0,g,o.width,o.height,0,f,m,null)}else if(n.isDataTexture)if(0<v.length&&p){for(var y=0,x=v.length;y<x;y++)s=v[y],i.texImage2D(3553,y,g,s.width,s.height,0,f,m,s.data);n.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else i.texImage2D(3553,0,g,o.width,o.height,0,f,m,o.data),e.__maxMipLevel=0;else if(n.isCompressedTexture){for(y=0,x=v.length;y<x;y++)s=v[y],1023!==n.format&&1022!==n.format?-1<i.getCompressedTextureFormats().indexOf(f)?i.compressedTexImage2D(3553,y,g,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,y,g,s.width,s.height,0,f,m,s.data);e.__maxMipLevel=v.length-1}else if(n.isDataTexture2DArray)i.texImage3D(35866,0,g,o.width,o.height,o.depth,0,f,m,o.data),e.__maxMipLevel=0;else if(n.isDataTexture3D)i.texImage3D(32879,0,g,o.width,o.height,o.depth,0,f,m,o.data),e.__maxMipLevel=0;else if(0<v.length&&p){for(y=0,x=v.length;y<x;y++)s=v[y],i.texImage2D(3553,y,g,f,m,s);n.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else i.texImage2D(3553,0,g,f,m,o),e.__maxMipLevel=0;h(n,p)&&u(3553,n,o.width,o.height),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function w(e,r,o,s){var l=a.convert(r.texture.format),c=a.convert(r.texture.type),h=d(l,c);i.texImage2D(s,0,h,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function M(e,i,n){t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer?(n?(n=E(i),t.renderbufferStorageMultisample(36161,n,33189,i.width,i.height)):t.renderbufferStorage(36161,33189,i.width,i.height),t.framebufferRenderbuffer(36160,36096,36161,e)):i.depthBuffer&&i.stencilBuffer?(n?(n=E(i),t.renderbufferStorageMultisample(36161,n,34041,i.width,i.height)):t.renderbufferStorage(36161,34041,i.width,i.height),t.framebufferRenderbuffer(36160,33306,36161,e)):(e=d(e=a.convert(i.texture.format),a.convert(i.texture.type)),n?(n=E(i),t.renderbufferStorageMultisample(36161,n,e,i.width,i.height)):t.renderbufferStorage(36161,e,i.width,i.height)),t.bindRenderbuffer(36161,null)}function E(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}var T,S={},A="undefined"!=typeof OffscreenCanvas,C=0,L=!1,D=!1;this.allocateTextureUnit=function(){var t=C;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),C+=1,t},this.resetTextureUnits=function(){C=0},this.setTexture2D=g,this.setTexture2DArray=function(t,e){var r=n.get(t);0<t.version&&r.__version!==t.version?x(r,t,e):(i.activeTexture(33984+e),i.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=n.get(t);0<t.version&&r.__version!==t.version?x(r,t,e):(i.activeTexture(33984+e),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=v,this.setTextureCubeDynamic=y,this.setupRenderTarget=function(e){var s=n.get(e),l=n.get(e.texture);e.addEventListener("dispose",m),l.__webglTexture=t.createTexture(),o.memory.textures++;var p=!0===e.isWebGLRenderTargetCube,f=!0===e.isWebGLMultisampleRenderTarget,v=c(e)||r.isWebGL2;if(p)for(s.__webglFramebuffer=[],f=0;6>f;f++)s.__webglFramebuffer[f]=t.createFramebuffer();else if(s.__webglFramebuffer=t.createFramebuffer(),f)if(r.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer),f=a.convert(e.texture.format);var y=a.convert(e.texture.type);f=d(f,y),y=E(e),t.renderbufferStorageMultisample(36161,y,f,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),M(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(p){for(i.bindTexture(34067,l.__webglTexture),_(34067,e.texture,v),f=0;6>f;f++)w(s.__webglFramebuffer[f],e,36064,34069+f);h(e.texture,v)&&u(34067,e.texture,e.width,e.height),i.bindTexture(34067,null)}else i.bindTexture(3553,l.__webglTexture),_(3553,e.texture,v),w(s.__webglFramebuffer,e,36064,3553),h(e.texture,v)&&u(3553,e.texture,e.width,e.height),i.bindTexture(3553,null);if(e.depthBuffer){if(s=n.get(e),l=!0===e.isWebGLRenderTargetCube,e.depthTexture){if(l)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,s.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(n.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),g(e.depthTexture,0),s=n.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,s,0);else{if(1027!==e.depthTexture.format)throw Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,s,0)}}else if(l)for(s.__webglDepthbuffer=[],l=0;6>l;l++)t.bindFramebuffer(36160,s.__webglFramebuffer[l]),s.__webglDepthbuffer[l]=t.createRenderbuffer(),M(s.__webglDepthbuffer[l],e);else t.bindFramebuffer(36160,s.__webglFramebuffer),s.__webglDepthbuffer=t.createRenderbuffer(),M(s.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(t){var e=t.texture,a=c(t)||r.isWebGL2;if(h(e,a)){a=t.isWebGLRenderTargetCube?34067:3553;var o=n.get(e).__webglTexture;i.bindTexture(a,o),u(a,e,t.width,t.height),i.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var i=n.get(e);t.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,i.__webglFramebuffer),i=e.width;var a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),L=!0),t=t.texture),g(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),D=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?v(t,e):y(t,e)}}function ye(t,e,i){return{convert:function(t){if(1e3===t)return 10497;if(1001===t)return 33071;if(1002===t)return 33648;if(1003===t)return 9728;if(1004===t)return 9984;if(1005===t)return 9986;if(1006===t)return 9729;if(1007===t)return 9985;if(1008===t)return 9987;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t){if(i.isWebGL2)return 5131;var n=e.get("OES_texture_half_float");if(null!==n)return n.HALF_FLOAT_OES}if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(100===t)return 32774;if(101===t)return 32778;if(102===t)return 32779;if(200===t)return 0;if(201===t)return 1;if(202===t)return 768;if(203===t)return 769;if(204===t)return 770;if(205===t)return 771;if(206===t)return 772;if(207===t)return 773;if(208===t)return 774;if(209===t)return 775;if(210===t)return 776;if((33776===t||33777===t||33778===t||33779===t)&&null!==(n=e.get("WEBGL_compressed_texture_s3tc"))){if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===t||35841===t||35842===t||35843===t)&&null!==(n=e.get("WEBGL_compressed_texture_pvrtc"))){if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t&&null!==(n=e.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t)&&null!==(n=e.get("WEBGL_compressed_texture_astc")))return t;if(103===t||104===t){if(i.isWebGL2){if(103===t)return 32775;if(104===t)return 32776}if(null!==(n=e.get("EXT_blend_minmax"))){if(103===t)return n.MIN_EXT;if(104===t)return n.MAX_EXT}}if(1020===t){if(i.isWebGL2)return 34042;if(null!==(n=e.get("WEBGL_depth_texture")))return n.UNSIGNED_INT_24_8_WEBGL}return 0}}}function _e(){T.call(this),this.type="Group"}function be(){T.call(this),this.type="Camera",this.matrixWorldInverse=new g,this.projectionMatrix=new g,this.projectionMatrixInverse=new g}function xe(t,e,i,n){be.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function we(t){xe.call(this),this.cameras=t||[]}function Me(t,e,i){ka.setFromMatrixPosition(e.matrixWorld),Fa.setFromMatrixPosition(i.matrixWorld);var n=ka.distanceTo(Fa),r=e.projectionMatrix.elements,a=i.projectionMatrix.elements,o=r[14]/(r[10]-1);i=r[14]/(r[10]+1);var s=(r[9]+1)/r[5],l=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0];r=o*c,a=o*h,c=(h=n/(-c+h))*-c,e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(c),t.translateZ(h),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld),e=o+h,o=i+h,t.projectionMatrix.makePerspective(r-c,a+(n-c),s*i/o*e,l*i/o*e,e,o)}function Ee(t){function e(){return null!==u&&!0===u.isPresenting}function a(){if(e()){var i=u.getEyeParameters("left");l=2*i.renderWidth*y,c=i.renderHeight*y,A=t.getPixelRatio(),t.getSize(C),t.setDrawingBufferSize(l,c,1),E.viewport.set(0,0,l/2,c),T.viewport.set(l/2,0,l/2,c),D.start()}else h.enabled&&t.setDrawingBufferSize(C.width,C.height,A),D.stop()}function o(t,e){null!==e&&4===e.length&&t.set(e[0]*l,e[1]*c,e[2]*l,e[3]*c)}var l,c,h=this,u=null,d=null,p=null,f=[],m=new g,v=new g,y=1,_="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(d=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",a,!1));var x=new g,w=new n,M=new r,E=new xe;E.viewport=new s,E.layers.enable(1);var T=new xe;T.viewport=new s,T.layers.enable(2);var S=new we([E,T]);S.layers.enable(1),S.layers.enable(2);var A,C=new i,L=[];this.enabled=!1,this.getController=function(t){var e=f[t];return void 0===e&&((e=new _e).matrixAutoUpdate=!1,e.visible=!1,f[t]=e),e},this.getDevice=function(){return u},this.setDevice=function(t){void 0!==t&&(u=t),D.setContext(t)},this.setFramebufferScaleFactor=function(t){y=t},this.setReferenceSpaceType=function(t){_=t},this.setPoseTarget=function(t){void 0!==t&&(p=t)},this.getCamera=function(t){var i="local-floor"===_?1.6:0;if(!1===e())return t.position.set(0,i,0),t.rotation.set(0,0,0),t;if(u.depthNear=t.near,u.depthFar=t.far,u.getFrameData(d),"local-floor"===_){var n=u.stageParameters;n?m.fromArray(n.sittingToStandingTransform):m.makeTranslation(0,i,0)}i=d.pose,(n=null!==p?p:t).matrix.copy(m),n.matrix.decompose(n.position,n.quaternion,n.scale),null!==i.orientation&&(w.fromArray(i.orientation),n.quaternion.multiply(w)),null!==i.position&&(w.setFromRotationMatrix(m),M.fromArray(i.position),M.applyQuaternion(w),n.position.add(M)),n.updateMatrixWorld(),E.near=t.near,T.near=t.near,E.far=t.far,T.far=t.far,E.matrixWorldInverse.fromArray(d.leftViewMatrix),T.matrixWorldInverse.fromArray(d.rightViewMatrix),v.getInverse(m),"local-floor"===_&&(E.matrixWorldInverse.multiply(v),T.matrixWorldInverse.multiply(v)),null!==(t=n.parent)&&(x.getInverse(t.matrixWorld),E.matrixWorldInverse.multiply(x),T.matrixWorldInverse.multiply(x)),E.matrixWorld.getInverse(E.matrixWorldInverse),T.matrixWorld.getInverse(T.matrixWorldInverse),E.projectionMatrix.fromArray(d.leftProjectionMatrix),T.projectionMatrix.fromArray(d.rightProjectionMatrix),Me(S,E,T),(t=u.getLayers()).length&&(t=t[0],o(E.viewport,t.leftBounds),o(T.viewport,t.rightBounds));t:for(t=0;t<f.length;t++){i=f[t];e:{n=t;for(var r=navigator.getGamepads&&navigator.getGamepads(),a=0,s=0,l=r.length;a<l;a++){var c=r[a];if(c&&("Daydream Controller"===c.id||"Gear VR Controller"===c.id||"Oculus Go Controller"===c.id||"OpenVR Gamepad"===c.id||c.id.startsWith("Oculus Touch")||c.id.startsWith("Spatial Controller"))){if(s===n){n=c;break e}s++}}n=void 0}if(void 0!==n&&void 0!==n.pose){if(null===n.pose)break t;!1===(r=n.pose).hasPosition&&i.position.set(.2,-.6,-.05),null!==r.position&&i.position.fromArray(r.position),null!==r.orientation&&i.quaternion.fromArray(r.orientation),i.matrix.compose(i.position,i.quaternion,i.scale),i.matrix.premultiply(m),i.matrix.decompose(i.position,i.quaternion,i.scale),i.matrixWorldNeedsUpdate=!0,i.visible=!0,r="Daydream Controller"===n.id?0:1,void 0===L[t]&&(L[t]=!1),L[t]!==n.buttons[r].pressed&&(L[t]=n.buttons[r].pressed,!0===L[t]?i.dispatchEvent({type:"selectstart"}):(i.dispatchEvent({type:"selectend"}),i.dispatchEvent({type:"select"})))}else i.visible=!1}return S},this.getStandingMatrix=function(){return m},this.isPresenting=e;var D=new b;this.setAnimationLoop=function(t){D.setAnimationLoop(t),e()&&D.start()},this.submitFrame=function(){e()&&u.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",a)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Te(t){function e(){return null!==l&&null!==c}function i(t){for(var e=0;e<d.length;e++)p[e]===t.inputSource&&d[e].dispatchEvent({type:t.type})}function n(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),_.stop()}function r(t){c=t,_.setContext(l),_.start()}function a(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}var o=t.context,l=null,c=null,h="local-floor",u=null,d=[],p=[],f=new xe;f.layers.enable(1),f.viewport=new s;var m=new xe;m.layers.enable(2),m.viewport=new s;var v=new we([f,m]);v.layers.enable(1),v.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=d[t];return void 0===e&&((e=new _e).matrixAutoUpdate=!1,e.visible=!1,d[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){h=t},this.setSession=function(t){null!==(l=t)&&(l.addEventListener("select",i),l.addEventListener("selectstart",i),l.addEventListener("selectend",i),l.addEventListener("end",n),l.updateRenderState({baseLayer:new XRWebGLLayer(l,o)}),l.requestReferenceSpace(h).then(r),p=l.inputSources,l.addEventListener("inputsourceschange",(function(){p=l.inputSources,console.log(p);for(var t=0;t<d.length;t++)d[t].userData.inputSource=p[t]})))},this.getCamera=function(t){if(e()){var i=t.parent,n=v.cameras;a(v,i);for(var r=0;r<n.length;r++)a(n[r],i);for(t.matrixWorld.copy(v.matrixWorld),r=0,i=(t=t.children).length;r<i;r++)t[r].updateMatrixWorld(!0);return Me(v,f,m),v}return t},this.isPresenting=e;var y=null,_=new b;_.setAnimationLoop((function(e,i){if(null!==(u=i.getViewerPose(c))){var n=u.views,r=l.renderState.baseLayer;t.setFramebuffer(r.framebuffer);for(var a=0;a<n.length;a++){var o=n[a],s=r.getViewport(o),h=v.cameras[a];h.matrix.fromArray(o.transform.inverse.matrix).getInverse(h.matrix),h.projectionMatrix.fromArray(o.projectionMatrix),h.viewport.set(s.x,s.y,s.width,s.height),0===a&&v.matrix.copy(h.matrix)}}for(a=0;a<d.length;a++)n=d[a],(r=p[a])&&null!==(r=i.getPose(r.targetRaySpace,c))?(n.matrix.fromArray(r.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.visible=!0):n.visible=!1;y&&y(e)})),this.setAnimationLoop=function(t){y=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new g},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Se(t){var e;function n(){z=new tt(zt),(N=new K(zt,z,t)).isWebGL2||(z.get("WEBGL_depth_texture"),z.get("OES_texture_float"),z.get("OES_texture_half_float"),z.get("OES_texture_half_float_linear"),z.get("OES_standard_derivatives"),z.get("OES_element_index_uint"),z.get("ANGLE_instanced_arrays")),z.get("OES_texture_float_linear"),st=new ye(zt,z,N),(k=new ge(zt,z,st,N)).scissor(xt.copy(At).multiplyScalar(Tt)),k.viewport(bt.copy(St).multiplyScalar(Tt)),F=new nt(zt),B=new re,U=new ve(zt,z,k,B,N,st,F),H=new x(zt),G=new et(zt,H,F),j=new ot(G,F),Y=new at(zt),V=new ne(lt,z,N,U),W=new le,q=new de,X=new J(lt,k,j,L),Z=new Q(zt,z,F,N),rt=new it(zt,z,F,N),F.programs=V.programs,lt.context=zt,lt.capabilities=N,lt.extensions=z,lt.properties=B,lt.renderLists=W,lt.state=k,lt.info=F}function a(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ct=!0}function o(){console.log("THREE.WebGLRenderer: Context Restored."),ct=!1,n()}function l(t){(t=t.target).removeEventListener("dispose",l),c(t),B.remove(t)}function c(t){var e=B.get(t).program;t.program=void 0,void 0!==e&&V.releaseProgram(e)}function h(t,e,i,n){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,l=o.geometry,c=void 0===n?o.material:n;if(o=o.group,i.isArrayCamera){_t=i;for(var h=i.cameras,u=0,p=h.length;u<p;u++){var f=h[u];s.layers.test(f.layers)&&(k.viewport(bt.copy(f.viewport)),I.setupLights(f),d(s,e,f,l,c,o))}}else _t=null,d(s,e,i,l,c,o)}}function d(t,i,n,r,a,o){if(t.onBeforeRender(lt,i,n,r,a,o),I=q.get(i,_t||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){k.setMaterial(a);var s=f(n,i.fog,a,t);gt=e=null,vt=!1,function(t,e){t.render((function(t){lt.renderBufferImmediate(t,e)}))}(t,s)}else lt.renderBufferDirect(n,i.fog,r,a,t,o);t.onAfterRender(lt,i,n,r,a,o),I=q.get(i,_t||n)}function p(t,e,i){var n=B.get(t),r=I.state.lights,a=n.lightsHash,o=r.state.hash;i=V.getParameters(t,r.state,I.state.shadowsArray,e,Dt.numPlanes,Dt.numIntersection,i);var s=V.getProgramCode(t,i),h=n.program,u=!0;if(void 0===h)t.addEventListener("dispose",l);else if(h.code!==s)c(t);else{if(a.stateID!==o.stateID||a.directionalLength!==o.directionalLength||a.pointLength!==o.pointLength||a.spotLength!==o.spotLength||a.rectAreaLength!==o.rectAreaLength||a.hemiLength!==o.hemiLength||a.shadowsLength!==o.shadowsLength)a.stateID=o.stateID,a.directionalLength=o.directionalLength,a.pointLength=o.pointLength,a.spotLength=o.spotLength,a.rectAreaLength=o.rectAreaLength,a.hemiLength=o.hemiLength,a.shadowsLength=o.shadowsLength;else if(void 0!==i.shaderID)return;u=!1}if(u&&(i.shaderID?(s=_a[i.shaderID],n.shader={name:t.type,uniforms:v(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}):n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader},t.onBeforeCompile(n.shader,lt),s=V.getProgramCode(t,i),h=V.acquireProgram(t,n.shader,i,s),n.program=h,t.program=h),i=h.getAttributes(),t.morphTargets)for(s=t.numSupportedMorphTargets=0;s<lt.maxMorphTargets;s++)0<=i["morphTarget"+s]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(s=t.numSupportedMorphNormals=0;s<lt.maxMorphNormals;s++)0<=i["morphNormal"+s]&&t.numSupportedMorphNormals++;i=n.shader.uniforms,(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Dt.numPlanes,n.numIntersection=Dt.numIntersection,i.clippingPlanes=Dt.uniform),n.fog=e,void 0===a&&(n.lightsHash=a={}),a.stateID=o.stateID,a.directionalLength=o.directionalLength,a.pointLength=o.pointLength,a.spotLength=o.spotLength,a.rectAreaLength=o.rectAreaLength,a.hemiLength=o.hemiLength,a.shadowsLength=o.shadowsLength,t.lights&&(i.ambientLightColor.value=r.state.ambient,i.lightProbe.value=r.state.probe,i.directionalLights.value=r.state.directional,i.spotLights.value=r.state.spot,i.rectAreaLights.value=r.state.rectArea,i.pointLights.value=r.state.point,i.hemisphereLights.value=r.state.hemi,i.directionalShadowMap.value=r.state.directionalShadowMap,i.directionalShadowMatrix.value=r.state.directionalShadowMatrix,i.spotShadowMap.value=r.state.spotShadowMap,i.spotShadowMatrix.value=r.state.spotShadowMatrix,i.pointShadowMap.value=r.state.pointShadowMap,i.pointShadowMatrix.value=r.state.pointShadowMatrix),t=n.program.getUniforms(),t=Wt.seqWithValue(t.seq,i),n.uniformsList=t}function f(t,e,i,n){U.resetTextureUnits();var r=B.get(i),a=r.lightsHash,o=I.state.lights.state.hash;Pt&&(Rt||t!==yt)&&Dt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,t===yt&&i.id===mt),!1===i.needsUpdate&&(void 0===r.program||i.fog&&r.fog!==e?i.needsUpdate=!0:(!i.lights||a.stateID===o.stateID&&a.directionalLength===o.directionalLength&&a.pointLength===o.pointLength&&a.spotLength===o.spotLength&&a.rectAreaLength===o.rectAreaLength&&a.hemiLength===o.hemiLength&&a.shadowsLength===o.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===Dt.numPlanes&&r.numIntersection===Dt.numIntersection)||(i.needsUpdate=!0)),i.needsUpdate&&(p(i,e,n),i.needsUpdate=!1);var s=!1,l=!1,c=!1;o=(a=r.program).getUniforms();var h=r.shader.uniforms;if(k.useProgram(a.program)&&(c=l=s=!0),i.id!==mt&&(mt=i.id,l=!0),(s||yt!==t)&&(o.setValue(zt,"projectionMatrix",t.projectionMatrix),N.logarithmicDepthBuffer&&o.setValue(zt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),yt!==t&&(yt=t,c=l=!0),(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap)&&void 0!==(s=o.map.cameraPosition)&&s.setValue(zt,It.setFromMatrixPosition(t.matrixWorld)),(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&o.setValue(zt,"viewMatrix",t.matrixWorldInverse)),i.skinning&&(o.setOptional(zt,n,"bindMatrix"),o.setOptional(zt,n,"bindMatrixInverse"),t=n.skeleton))if(s=t.bones,N.floatVertexTextures){if(void 0===t.boneTexture){s=Math.sqrt(4*s.length),s=ua.ceilPowerOfTwo(s),s=Math.max(s,4);var d=new Float32Array(s*s*4);d.set(t.boneMatrices);var f=new u(d,s,s,1023,1015);f.needsUpdate=!0,t.boneMatrices=d,t.boneTexture=f,t.boneTextureSize=s}o.setValue(zt,"boneTexture",t.boneTexture,U),o.setValue(zt,"boneTextureSize",t.boneTextureSize)}else o.setOptional(zt,t,"boneMatrices");return l&&(o.setValue(zt,"toneMappingExposure",lt.toneMappingExposure),o.setValue(zt,"toneMappingWhitePoint",lt.toneMappingWhitePoint),i.lights&&(l=c,h.ambientLightColor.needsUpdate=l,h.lightProbe.needsUpdate=l,h.directionalLights.needsUpdate=l,h.pointLights.needsUpdate=l,h.spotLights.needsUpdate=l,h.rectAreaLights.needsUpdate=l,h.hemisphereLights.needsUpdate=l),e&&i.fog&&(h.fogColor.value.copy(e.color),e.isFog?(h.fogNear.value=e.near,h.fogFar.value=e.far):e.isFogExp2&&(h.fogDensity.value=e.density)),i.isMeshBasicMaterial?y(h,i):i.isMeshLambertMaterial?(y(h,i),i.emissiveMap&&(h.emissiveMap.value=i.emissiveMap)):i.isMeshPhongMaterial?(y(h,i),i.isMeshToonMaterial?(_(h,i),i.gradientMap&&(h.gradientMap.value=i.gradientMap)):_(h,i)):i.isMeshStandardMaterial?(y(h,i),i.isMeshPhysicalMaterial?(w(h,i),h.reflectivity.value=i.reflectivity,h.clearCoat.value=i.clearCoat,h.clearCoatRoughness.value=i.clearCoatRoughness):w(h,i)):i.isMeshMatcapMaterial?(y(h,i),i.matcap&&(h.matcap.value=i.matcap),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDepthMaterial?(y(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDistanceMaterial?(y(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias),h.referencePosition.value.copy(i.referencePosition),h.nearDistance.value=i.nearDistance,h.farDistance.value=i.farDistance):i.isMeshNormalMaterial?(y(h,i),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isLineBasicMaterial?(h.diffuse.value.copy(i.color),h.opacity.value=i.opacity,i.isLineDashedMaterial&&(h.dashSize.value=i.dashSize,h.totalSize.value=i.dashSize+i.gapSize,h.scale.value=i.scale)):i.isPointsMaterial?(h.diffuse.value.copy(i.color),h.opacity.value=i.opacity,h.size.value=i.size*Tt,h.scale.value=.5*Et,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isSpriteMaterial?(h.diffuse.value.copy(i.color),h.opacity.value=i.opacity,h.rotation.value=i.rotation,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isShadowMaterial&&(h.color.value.copy(i.color),h.opacity.value=i.opacity),void 0!==h.ltc_1&&(h.ltc_1.value=ya.LTC_1),void 0!==h.ltc_2&&(h.ltc_2.value=ya.LTC_2),Wt.upload(zt,r.uniformsList,h,U)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Wt.upload(zt,r.uniformsList,h,U),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&o.setValue(zt,"center",n.center),o.setValue(zt,"modelViewMatrix",n.modelViewMatrix),o.setValue(zt,"normalMatrix",n.normalMatrix),o.setValue(zt,"modelMatrix",n.matrixWorld),a}function y(t,e){if(t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=B.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map)var i=e.map;else e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap);void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}function _(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function w(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}console.log("THREE.WebGLRenderer","105");var M=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),E=void 0!==t.context?t.context:null,T=void 0!==t.alpha&&t.alpha,S=void 0===t.depth||t.depth,A=void 0===t.stencil||t.stencil,C=void 0!==t.antialias&&t.antialias,L=void 0===t.premultipliedAlpha||t.premultipliedAlpha,D=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,P=void 0!==t.powerPreference?t.powerPreference:"default",R=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,O=null,I=null;this.domElement=M,this.context=null,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var z,N,k,F,B,U,H,G,j,V,W,q,X,Y,Z,rt,st,lt=this,ct=!1,ht=null,ut=0,dt=0,pt=null,ft=null,mt=-1,gt=e=null,vt=!1,yt=null,_t=null,bt=new s,xt=new s,wt=null,Mt=M.width,Et=M.height,Tt=1,St=new s(0,0,Mt,Et),At=new s(0,0,Mt,Et),Ct=!1,Lt=new m,Dt=new $,Pt=!1,Rt=!1,Ot=new g,It=new r;try{T={alpha:T,depth:S,stencil:A,antialias:C,premultipliedAlpha:L,preserveDrawingBuffer:D,powerPreference:P,failIfMajorPerformanceCaveat:R,xrCompatible:!0},M.addEventListener("webglcontextlost",a,!1),M.addEventListener("webglcontextrestored",o,!1);var zt=E||M.getContext("webgl",T)||M.getContext("experimental-webgl",T);if(null===zt){if(null!==M.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===zt.getShaderPrecisionFormat&&(zt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}n();var Nt="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new Te(lt):new Ee(lt);this.vr=Nt;var kt=new me(lt,j,N.maxTextureSize);this.shadowMap=kt,this.getContext=function(){return zt},this.getContextAttributes=function(){return zt.getContextAttributes()},this.forceContextLoss=function(){var t=z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Tt},this.setPixelRatio=function(t){void 0!==t&&(Tt=t,this.setSize(Mt,Et,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new i),t.set(Mt,Et)},this.setSize=function(t,e,i){Nt.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Mt=t,Et=e,M.width=t*Tt,M.height=e*Tt,!1!==i&&(M.style.width=t+"px",M.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new i),t.set(Mt*Tt,Et*Tt)},this.setDrawingBufferSize=function(t,e,i){Mt=t,Et=e,Tt=i,M.width=t*i,M.height=e*i,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new s),t.copy(bt)},this.getViewport=function(t){return t.copy(St)},this.setViewport=function(t,e,i,n){t.isVector4?St.set(t.x,t.y,t.z,t.w):St.set(t,e,i,n),k.viewport(bt.copy(St).multiplyScalar(Tt))},this.getScissor=function(t){return t.copy(At)},this.setScissor=function(t,e,i,n){t.isVector4?At.set(t.x,t.y,t.z,t.w):At.set(t,e,i,n),k.scissor(xt.copy(At).multiplyScalar(Tt))},this.getScissorTest=function(){return Ct},this.setScissorTest=function(t){k.setScissorTest(Ct=t)},this.getClearColor=function(){return X.getClearColor()},this.setClearColor=function(){X.setClearColor.apply(X,arguments)},this.getClearAlpha=function(){return X.getClearAlpha()},this.setClearAlpha=function(){X.setClearAlpha.apply(X,arguments)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=16384),(void 0===e||e)&&(n|=256),(void 0===i||i)&&(n|=1024),zt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){M.removeEventListener("webglcontextlost",a,!1),M.removeEventListener("webglcontextrestored",o,!1),W.dispose(),q.dispose(),B.dispose(),j.dispose(),Nt.dispose(),Bt.stop()},this.renderBufferImmediate=function(t,e){k.initAttributes();var i=B.get(t);t.hasPositions&&!i.position&&(i.position=zt.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=zt.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=zt.createBuffer()),t.hasColors&&!i.color&&(i.color=zt.createBuffer()),e=e.getAttributes(),t.hasPositions&&(zt.bindBuffer(34962,i.position),zt.bufferData(34962,t.positionArray,35048),k.enableAttribute(e.position),zt.vertexAttribPointer(e.position,3,5126,!1,0,0)),t.hasNormals&&(zt.bindBuffer(34962,i.normal),zt.bufferData(34962,t.normalArray,35048),k.enableAttribute(e.normal),zt.vertexAttribPointer(e.normal,3,5126,!1,0,0)),t.hasUvs&&(zt.bindBuffer(34962,i.uv),zt.bufferData(34962,t.uvArray,35048),k.enableAttribute(e.uv),zt.vertexAttribPointer(e.uv,2,5126,!1,0,0)),t.hasColors&&(zt.bindBuffer(34962,i.color),zt.bufferData(34962,t.colorArray,35048),k.enableAttribute(e.color),zt.vertexAttribPointer(e.color,3,5126,!1,0,0)),k.disableUnusedAttributes(),zt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,i,n,r,a,o){var s=a.isMesh&&0>a.matrixWorld.determinant();k.setMaterial(r,s);var l=f(t,i,r,a),c=!1;e===n.id&&gt===l.id&&vt===(!0===r.wireframe)||(e=n.id,gt=l.id,vt=!0===r.wireframe,c=!0),a.morphTargetInfluences&&(Y.update(a,n,r,l),c=!0),s=n.index;var h=n.attributes.position;if(i=1,!0===r.wireframe&&(s=G.getWireframeAttribute(n),i=2),t=Z,null!==s){var u=H.get(s);(t=rt).setIndex(u)}if(c){if(n&&n.isInstancedBufferGeometry&&!N.isWebGL2&&null===z.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{k.initAttributes(),c=n.attributes,l=l.getAttributes();var d=r.defaultAttributeValues;for(M in l){var p=l[M];if(0<=p){var m=c[M];if(void 0!==m){var g=m.normalized,v=m.itemSize,y=H.get(m);if(void 0!==y){var _=y.buffer,b=y.type;if(y=y.bytesPerElement,m.isInterleavedBufferAttribute){var x=m.data,w=x.stride;m=m.offset,x&&x.isInstancedInterleavedBuffer?(k.enableAttributeAndDivisor(p,x.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=x.meshPerAttribute*x.count)):k.enableAttribute(p),zt.bindBuffer(34962,_),zt.vertexAttribPointer(p,v,b,g,w*y,m*y)}else m.isInstancedBufferAttribute?(k.enableAttributeAndDivisor(p,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):k.enableAttribute(p),zt.bindBuffer(34962,_),zt.vertexAttribPointer(p,v,b,g,0,0)}}else if(void 0!==d&&void 0!==(g=d[M]))switch(g.length){case 2:zt.vertexAttrib2fv(p,g);break;case 3:zt.vertexAttrib3fv(p,g);break;case 4:zt.vertexAttrib4fv(p,g);break;default:zt.vertexAttrib1fv(p,g)}}}k.disableUnusedAttributes()}null!==s&&zt.bindBuffer(34963,u.buffer)}u=1/0,null!==s?u=s.count:void 0!==h&&(u=h.count),s=n.drawRange.start*i,h=null!==o?o.start*i:0;var M=Math.max(s,h);if(0!==(o=Math.max(0,Math.min(u,s+n.drawRange.count*i,h+(null!==o?o.count*i:1/0))-1-M+1))){if(a.isMesh)if(!0===r.wireframe)k.setLineWidth(r.wireframeLinewidth*(null===pt?Tt:1)),t.setMode(1);else switch(a.drawMode){case 0:t.setMode(4);break;case 1:t.setMode(5);break;case 2:t.setMode(6)}else a.isLine?(void 0===(r=r.linewidth)&&(r=1),k.setLineWidth(r*(null===pt?Tt:1)),a.isLineSegments?t.setMode(1):a.isLineLoop?t.setMode(2):t.setMode(3)):a.isPoints?t.setMode(0):a.isSprite&&t.setMode(4);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&t.renderInstances(n,M,o):t.render(M,o)}},this.compile=function(t,e){(I=q.get(t,e)).init(),t.traverse((function(t){t.isLight&&(I.pushLight(t),t.castShadow&&I.pushShadow(t))})),I.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var i=0;i<e.material.length;i++)p(e.material[i],t.fog,e);else p(e.material,t.fog,e)}))};var Ft=null,Bt=new b;Bt.setAnimationLoop((function(t){Nt.isPresenting()||Ft&&Ft(t)})),"undefined"!=typeof window&&Bt.setContext(window),this.setAnimationLoop=function(t){Ft=t,Nt.setAnimationLoop(t),Bt.start()},this.render=function(t,i,n,r){if(void 0!==n){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var a=n}if(void 0!==r){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var o=r}i&&i.isCamera?ct||(gt=e=null,vt=!1,mt=-1,yt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===i.parent&&i.updateMatrixWorld(),Nt.enabled&&(i=Nt.getCamera(i)),(I=q.get(t,i)).init(),t.onBeforeRender(lt,t,i,a||pt),Ot.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Lt.setFromMatrix(Ot),Rt=this.localClippingEnabled,Pt=Dt.init(this.clippingPlanes,Rt,i),(O=W.get(t,i)).init(),function t(e,i,n,r){if(!1!==e.visible){if(e.layers.test(i.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLight)I.pushLight(e),e.castShadow&&I.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Lt.intersectsSprite(e)){r&&It.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ot);var a=j.update(e),o=e.material;o.visible&&O.push(e,a,o,n,It.z,null)}}else if(e.isImmediateRenderObject)r&&It.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ot),O.push(e,null,e.material,n,It.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||Lt.intersectsObject(e)))if(r&&It.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Ot),a=j.update(e),o=e.material,Array.isArray(o))for(var s=a.groups,l=0,c=s.length;l<c;l++){var h=s[l],u=o[h.materialIndex];u&&u.visible&&O.push(e,a,u,n,It.z,h)}else o.visible&&O.push(e,a,o,n,It.z,null);for(l=0,c=(e=e.children).length;l<c;l++)t(e[l],i,n,r)}}(t,i,0,lt.sortObjects),!0===lt.sortObjects&&O.sort(),Pt&&Dt.beginShadows(),kt.render(I.state.shadowsArray,t,i),I.setupLights(i),Pt&&Dt.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==a&&this.setRenderTarget(a),X.render(O,t,i,o),n=O.opaque,r=O.transparent,t.overrideMaterial?(a=t.overrideMaterial,n.length&&h(n,t,i,a),r.length&&h(r,t,i,a)):(n.length&&h(n,t,i),r.length&&h(r,t,i)),t.onAfterRender(lt,t,i),null!==pt&&(U.updateRenderTargetMipmap(pt),U.updateMultisampleRenderTarget(pt)),k.buffers.depth.setTest(!0),k.buffers.depth.setMask(!0),k.buffers.color.setMask(!0),k.setPolygonOffset(!1),Nt.enabled&&Nt.submitFrame(),I=O=null):console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){ht!==t&&zt.bindFramebuffer(36160,t),ht=t},this.getActiveCubeFace=function(){return ut},this.getActiveMipMapLevel=function(){return dt},this.getRenderTarget=function(){return pt},this.setRenderTarget=function(t,e,i){pt=t,ut=e,dt=i,t&&void 0===B.get(t).__webglFramebuffer&&U.setupRenderTarget(t);var n=ht,r=!1;t?(n=B.get(t).__webglFramebuffer,t.isWebGLRenderTargetCube?(n=n[e||0],r=!0):n=t.isWebGLMultisampleRenderTarget?B.get(t).__webglMultisampledFramebuffer:n,bt.copy(t.viewport),xt.copy(t.scissor),wt=t.scissorTest):(bt.copy(St).multiplyScalar(Tt),xt.copy(At).multiplyScalar(Tt),wt=Ct),ft!==n&&(zt.bindFramebuffer(36160,n),ft=n),k.viewport(bt),k.scissor(xt),k.setScissorTest(wt),r&&(t=B.get(t.texture),zt.framebufferTexture2D(36160,36064,34069+(e||0),t.__webglTexture,i||0))},this.readRenderTargetPixels=function(t,e,i,n,r,a,o){if(t&&t.isWebGLRenderTarget){var s=B.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){o=!1,s!==ft&&(zt.bindFramebuffer(36160,s),o=!0);try{var l=t.texture,c=l.format,h=l.type;1023!==c&&st.convert(c)!==zt.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===h||st.convert(h)===zt.getParameter(35738)||1015===h&&(N.isWebGL2||z.get("OES_texture_float")||z.get("WEBGL_color_buffer_float"))||1016===h&&(N.isWebGL2?z.get("EXT_color_buffer_float"):z.get("EXT_color_buffer_half_float"))?36053===zt.checkFramebufferStatus(36160)?0<=e&&e<=t.width-n&&0<=i&&i<=t.height-r&&zt.readPixels(e,i,n,r,st.convert(c),st.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&zt.bindFramebuffer(36160,ft)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,i){var n=e.image.width,r=e.image.height,a=st.convert(e.format);U.setTexture2D(e,0),zt.copyTexImage2D(3553,i||0,a,t.x,t.y,n,r,0)},this.copyTextureToTexture=function(t,e,i,n){var r=e.image.width,a=e.image.height,o=st.convert(i.format),s=st.convert(i.type);U.setTexture2D(i,0),e.isDataTexture?zt.texSubImage2D(3553,n||0,t.x,t.y,r,a,o,s,e.image.data):zt.texSubImage2D(3553,n||0,t.x,t.y,o,s,e.image)}}function Ae(t,e){this.name="",this.color=new _(t),this.density=void 0!==e?e:25e-5}function Ce(t,e,i){this.name="",this.color=new _(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}function Le(){T.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function De(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Pe(t,e,i,n){this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function Re(t){V.call(this),this.type="SpriteMaterial",this.color=new _(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function Oe(t){if(T.call(this),this.type="Sprite",void 0===Na){Na=new B;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);e=new De(e,5),Na.setIndex([0,1,2,0,2,3]),Na.addAttribute("position",new Pe(e,3,0,!1)),Na.addAttribute("uv",new Pe(e,2,3,!1))}this.geometry=Na,this.material=void 0!==t?t:new Re,this.center=new i(.5,.5)}function Ie(){T.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ze(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Z.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new g,this.bindMatrixInverse=new g}function Ne(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new g)}function ke(){T.call(this),this.type="Bone"}function Fe(t){V.call(this),this.type="LineBasicMaterial",this.color=new _(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(t)}function Be(t,e,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),T.call(this),this.type="Line",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new Fe({color:16777215*Math.random()})}function Ue(t,e){Be.call(this,t,e),this.type="LineSegments"}function He(t,e){Be.call(this,t,e),this.type="LineLoop"}function Ge(t){V.call(this),this.type="PointsMaterial",this.color=new _(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=this.morphTargets=!1,this.setValues(t)}function je(t,e){T.call(this),this.type="Points",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new Ge({color:16777215*Math.random()})}function Ve(t,e,i,n,r,a,s,l,c){o.call(this,t,e,i,n,r,a,s,l,c),this.format=void 0!==s?s:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1}function We(t,e,i,n,r,a,s,l,c,h,u,d){o.call(this,null,a,s,l,c,h,n,r,u,d),this.image={width:e,height:i},this.mipmaps=t,this.generateMipmaps=this.flipY=!1}function qe(t,e,i,n,r,a,s,l,c){o.call(this,t,e,i,n,r,a,s,l,c),this.needsUpdate=!0}function Xe(t,e,i,n,r,a,s,l,c,h){if(1026!==(h=void 0!==h?h:1026)&&1027!==h)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===h&&(i=1012),void 0===i&&1027===h&&(i=1020),o.call(this,null,n,r,a,s,l,h,i,c),this.image={width:t,height:e},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==l?l:1003,this.generateMipmaps=this.flipY=!1}function Ye(t){B.call(this),this.type="WireframeGeometry";var e,i,n,a=[],o=[0,0],s={},l=["a","b","c"];if(t&&t.isGeometry){var c=t.faces,h=0;for(i=c.length;h<i;h++){var u=c[h];for(e=0;3>e;e++){var d=u[l[e]],p=u[l[(e+1)%3]];o[0]=Math.min(d,p),o[1]=Math.max(d,p),void 0===s[d=o[0]+","+o[1]]&&(s[d]={index1:o[0],index2:o[1]})}}for(d in s)h=s[d],l=t.vertices[h.index1],a.push(l.x,l.y,l.z),l=t.vertices[h.index2],a.push(l.x,l.y,l.z)}else if(t&&t.isBufferGeometry)if(l=new r,null!==t.index){c=t.attributes.position,u=t.index;var f=t.groups;for(0===f.length&&(f=[{start:0,count:u.count,materialIndex:0}]),t=0,n=f.length;t<n;++t)for(e=(h=f[t]).start,i=h.count,h=e,i=e+i;h<i;h+=3)for(e=0;3>e;e++)d=u.getX(h+e),p=u.getX(h+(e+1)%3),o[0]=Math.min(d,p),o[1]=Math.max(d,p),void 0===s[d=o[0]+","+o[1]]&&(s[d]={index1:o[0],index2:o[1]});for(d in s)h=s[d],l.fromBufferAttribute(c,h.index1),a.push(l.x,l.y,l.z),l.fromBufferAttribute(c,h.index2),a.push(l.x,l.y,l.z)}else for(h=0,i=(c=t.attributes.position).count/3;h<i;h++)for(e=0;3>e;e++)s=3*h+e,l.fromBufferAttribute(c,s),a.push(l.x,l.y,l.z),s=3*h+(e+1)%3,l.fromBufferAttribute(c,s),a.push(l.x,l.y,l.z);this.addAttribute("position",new z(a,3))}function Ze(t,e,i){S.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new Je(t,e,i)),this.mergeVertices()}function Je(t,e,i){B.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var n,a,o=[],s=[],l=[],c=[],h=new r,u=new r,d=new r,p=new r,f=new r;3>t.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(n=0;n<=i;n++){var g=n/i;for(a=0;a<=e;a++){var v=a/e;t(v,g,u),s.push(u.x,u.y,u.z),0<=v-1e-5?(t(v-1e-5,g,d),p.subVectors(u,d)):(t(v+1e-5,g,d),p.subVectors(d,u)),0<=g-1e-5?(t(v,g-1e-5,d),f.subVectors(u,d)):(t(v,g+1e-5,d),f.subVectors(d,u)),h.crossVectors(p,f).normalize(),l.push(h.x,h.y,h.z),c.push(v,g)}}for(n=0;n<i;n++)for(a=0;a<e;a++)t=n*m+a+1,h=(n+1)*m+a+1,u=(n+1)*m+a,o.push(n*m+a,t,u),o.push(t,h,u);this.setIndex(o),this.addAttribute("position",new z(s,3)),this.addAttribute("normal",new z(l,3)),this.addAttribute("uv",new z(c,2))}function Qe(t,e,i,n){S.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new Ke(t,e,i,n)),this.mergeVertices()}function Ke(t,e,n,a){function o(t){c.push(t.x,t.y,t.z)}function s(e,i){e*=3,i.x=t[e+0],i.y=t[e+1],i.z=t[e+2]}function l(t,e,i,n){0>n&&1===t.x&&(h[e]=t.x-1),0===i.x&&0===i.z&&(h[e]=n/2/Math.PI+.5)}B.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:a},n=n||1;var c=[],h=[];!function(t){for(var i=new r,n=new r,a=new r,l=0;l<e.length;l+=3){s(e[l+0],i),s(e[l+1],n),s(e[l+2],a);var c,h,u=i,d=n,p=a,f=Math.pow(2,t),m=[];for(h=0;h<=f;h++){m[h]=[];var g=u.clone().lerp(p,h/f),v=d.clone().lerp(p,h/f),y=f-h;for(c=0;c<=y;c++)m[h][c]=0===c&&h===f?g:g.clone().lerp(v,c/y)}for(h=0;h<f;h++)for(c=0;c<2*(f-h)-1;c++)u=Math.floor(c/2),0==c%2?(o(m[h][u+1]),o(m[h+1][u]),o(m[h][u])):(o(m[h][u+1]),o(m[h+1][u+1]),o(m[h+1][u]))}}(a=a||0),function(t){for(var e=new r,i=0;i<c.length;i+=3)e.x=c[i+0],e.y=c[i+1],e.z=c[i+2],e.normalize().multiplyScalar(t),c[i+0]=e.x,c[i+1]=e.y,c[i+2]=e.z}(n),function(){for(var t=new r,e=0;e<c.length;e+=3)t.x=c[e+0],t.y=c[e+1],t.z=c[e+2],h.push(Math.atan2(t.z,-t.x)/2/Math.PI+.5,1-(Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5));t=new r,e=new r;for(var n=new r,a=new r,o=new i,s=new i,u=new i,d=0,p=0;d<c.length;d+=9,p+=6){t.set(c[d+0],c[d+1],c[d+2]),e.set(c[d+3],c[d+4],c[d+5]),n.set(c[d+6],c[d+7],c[d+8]),o.set(h[p+0],h[p+1]),s.set(h[p+2],h[p+3]),u.set(h[p+4],h[p+5]),a.copy(t).add(e).add(n).divideScalar(3);var f=Math.atan2(a.z,-a.x);l(o,p+0,t,f),l(s,p+2,e,f),l(u,p+4,n,f)}for(t=0;t<h.length;t+=6)e=h[t+0],n=h[t+2],a=h[t+4],o=Math.min(e,n,a),.9<Math.max(e,n,a)&&.1>o&&(.2>e&&(h[t+0]+=1),.2>n&&(h[t+2]+=1),.2>a&&(h[t+4]+=1))}(),this.addAttribute("position",new z(c,3)),this.addAttribute("normal",new z(c.slice(),3)),this.addAttribute("uv",new z(h,2)),0===a?this.computeVertexNormals():this.normalizeNormals()}function $e(t,e){S.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ti(t,e)),this.mergeVertices()}function ti(t,e){Ke.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ei(t,e){S.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ii(t,e)),this.mergeVertices()}function ii(t,e){Ke.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ni(t,e){S.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ri(t,e)),this.mergeVertices()}function ri(t,e){var i=(1+Math.sqrt(5))/2;Ke.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ai(t,e){S.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new oi(t,e)),this.mergeVertices()}function oi(t,e){var i=(1+Math.sqrt(5))/2,n=1/i;Ke.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function si(t,e,i,n,r,a){S.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed."),t=new li(t,e,i,n,r),this.tangents=t.tangents,this.normals=t.normals,this.binormals=t.binormals,this.fromBufferGeometry(t),this.mergeVertices()}function li(t,e,n,a,o){function s(i){f=t.getPointAt(i/e,f);var r=l.normals[i];for(i=l.binormals[i],h=0;h<=a;h++){var o=h/a*Math.PI*2,s=Math.sin(o);o=-Math.cos(o),d.x=o*r.x+s*i.x,d.y=o*r.y+s*i.y,d.z=o*r.z+s*i.z,d.normalize(),g.push(d.x,d.y,d.z),u.x=f.x+n*d.x,u.y=f.y+n*d.y,u.z=f.z+n*d.z,m.push(u.x,u.y,u.z)}}B.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:a,closed:o},e=e||64,n=n||1,a=a||8,o=o||!1;var l=t.computeFrenetFrames(e,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var c,h,u=new r,d=new r,p=new i,f=new r,m=[],g=[],v=[],y=[];for(c=0;c<e;c++)s(c);for(s(!1===o?e:0),c=0;c<=e;c++)for(h=0;h<=a;h++)p.x=c/e,p.y=h/a,v.push(p.x,p.y);!function(){for(h=1;h<=e;h++)for(c=1;c<=a;c++){var t=(a+1)*h+(c-1),i=(a+1)*h+c,n=(a+1)*(h-1)+c;y.push((a+1)*(h-1)+(c-1),t,n),y.push(t,i,n)}}(),this.setIndex(y),this.addAttribute("position",new z(m,3)),this.addAttribute("normal",new z(g,3)),this.addAttribute("uv",new z(v,2))}function ci(t,e,i,n,r,a,o){S.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new hi(t,e,i,n,r,a)),this.mergeVertices()}function hi(t,e,i,n,a,o){function s(t,e,i,n,r){var a=Math.sin(t);e=i/e*t,i=Math.cos(e),r.x=n*(2+i)*.5*Math.cos(t),r.y=n*(2+i)*a*.5,r.z=n*Math.sin(e)*.5}B.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:a,q:o},t=t||1,e=e||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,a=a||2,o=o||3;var l,c=[],h=[],u=[],d=[],p=new r,f=new r,m=new r,g=new r,v=new r,y=new r,_=new r;for(l=0;l<=i;++l){var b=l/i*a*Math.PI*2;for(s(b,a,o,t,m),s(b+.01,a,o,t,g),y.subVectors(g,m),_.addVectors(g,m),v.crossVectors(y,_),_.crossVectors(v,y),v.normalize(),_.normalize(),b=0;b<=n;++b){var x=b/n*Math.PI*2,w=-e*Math.cos(x);x=e*Math.sin(x),p.x=m.x+(w*_.x+x*v.x),p.y=m.y+(w*_.y+x*v.y),p.z=m.z+(w*_.z+x*v.z),h.push(p.x,p.y,p.z),f.subVectors(p,m).normalize(),u.push(f.x,f.y,f.z),d.push(l/i),d.push(b/n)}}for(b=1;b<=i;b++)for(l=1;l<=n;l++)t=(n+1)*b+(l-1),e=(n+1)*b+l,a=(n+1)*(b-1)+l,c.push((n+1)*(b-1)+(l-1),t,a),c.push(t,e,a);this.setIndex(c),this.addAttribute("position",new z(h,3)),this.addAttribute("normal",new z(u,3)),this.addAttribute("uv",new z(d,2))}function ui(t,e,i,n,r){S.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new di(t,e,i,n,r)),this.mergeVertices()}function di(t,e,i,n,a){B.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:a},t=t||1,e=e||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,a=a||2*Math.PI;var o,s,l=[],c=[],h=[],u=[],d=new r,p=new r,f=new r;for(o=0;o<=i;o++)for(s=0;s<=n;s++){var m=s/n*a,g=o/i*Math.PI*2;p.x=(t+e*Math.cos(g))*Math.cos(m),p.y=(t+e*Math.cos(g))*Math.sin(m),p.z=e*Math.sin(g),c.push(p.x,p.y,p.z),d.x=t*Math.cos(m),d.y=t*Math.sin(m),f.subVectors(p,d).normalize(),h.push(f.x,f.y,f.z),u.push(s/n),u.push(o/i)}for(o=1;o<=i;o++)for(s=1;s<=n;s++)t=(n+1)*(o-1)+s-1,e=(n+1)*(o-1)+s,a=(n+1)*o+s,l.push((n+1)*o+s-1,t,a),l.push(t,e,a);this.setIndex(l),this.addAttribute("position",new z(c,3)),this.addAttribute("normal",new z(h,3)),this.addAttribute("uv",new z(u,2))}function pi(t,e,i,n,r){for(var a,o=0,s=e,l=i-n;s<i;s+=n)o+=(t[l]-t[s])*(t[s+1]+t[l+1]),l=s;if(r===0<o)for(r=e;r<i;r+=n)a=Ti(r,t[r],t[r+1],a);else for(r=i-n;r>=e;r-=n)a=Ti(r,t[r],t[r+1],a);return a&&xi(a,a.next)&&(Si(a),a=a.next),a}function fi(t,e){if(!t)return t;e||(e=t);do{var i=!1;if(t.steiner||!xi(t,t.next)&&0!==bi(t.prev,t,t.next))t=t.next;else{if(Si(t),(t=e=t.prev)===t.next)break;i=!0}}while(i||t!==e);return e}function mi(t,e){return t.x-e.x}function gi(t,e){var i=e,n=t.x,r=t.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var o=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=n&&o>a){if(a=o,o===n){if(r===i.y)return i;if(r===i.next.y)return i.next}var s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!s)return null;if(n===a)return s.prev;e=s,o=s.x;var l=s.y,c=1/0;for(i=s.next;i!==e;){if(n>=i.x&&i.x>=o&&n!==i.x&&_i(r<l?n:a,r,o,l,r<l?a:n,r,i.x,i.y)){var h=Math.abs(r-i.y)/(n-i.x);(h<c||h===c&&i.x>s.x)&&Mi(i,t)&&(s=i,c=h)}i=i.next}return s}function vi(t,e,i,n,r){return 1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1)|(1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function yi(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function _i(t,e,i,n,r,a,o,s){return 0<=(r-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(n-s)-(i-o)*(e-s)&&0<=(i-o)*(a-s)-(r-o)*(n-s)}function bi(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function xi(t,e){return t.x===e.x&&t.y===e.y}function wi(t,e,i,n){return!!(xi(t,e)&&xi(i,n)||xi(t,n)&&xi(i,e))||0<bi(t,e,i)!=0<bi(t,e,n)&&0<bi(i,n,t)!=0<bi(i,n,e)}function Mi(t,e){return 0>bi(t.prev,t,t.next)?0<=bi(t,e,t.next)&&0<=bi(t,t.prev,e):0>bi(t,e,t.prev)||0>bi(t,t.next,e)}function Ei(t,e){var i=new Ai(t.i,t.x,t.y),n=new Ai(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function Ti(t,e,i,n){return t=new Ai(t,e,i),n?(t.next=n.next,t.prev=n,n.next.prev=t,n.next=t):(t.prev=t,t.next=t),t}function Si(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ai(t,e,i){this.i=t,this.x=e,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function Ci(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function Li(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}function Di(t,e){S.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Pi(t,e)),this.mergeVertices()}function Pi(t,e){function n(t){function n(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}function l(t,e,n){var r=t.x-e.x,a=t.y-e.y,o=n.x-t.x,s=n.y-t.y,l=r*r+a*a;if(Math.abs(r*s-a*o)>Number.EPSILON){var c=Math.sqrt(l),h=Math.sqrt(o*o+s*s);if(l=e.x-a/c,e=e.y+r/c,2>=(a=(o=l+r*(s=((n.x-s/h-l)*s-(n.y+o/h-e)*o)/(r*s-a*o))-t.x)*o+(r=e+a*s-t.y)*r))return new i(o,r);a=Math.sqrt(a/2)}else t=!1,r>Number.EPSILON?o>Number.EPSILON&&(t=!0):r<-Number.EPSILON?o<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(s)&&(t=!0),t?(o=-a,a=Math.sqrt(l)):(o=r,r=a,a=Math.sqrt(l/2));return new i(o/a,r/a)}function c(t,e){for(H=t.length;0<=--H;){var i=H,n=H-1;0>n&&(n=t.length-1);var r,s=g+2*w;for(r=0;r<s;r++){var l=B*r,c=B*(r+1),h=e+n+l,u=e+n+c;c=e+i+c,d(e+i+l),d(h),d(c),d(h),d(u),d(c),l=o.length/3,p((l=E.generateSideWallUV(a,o,l-6,l-3,l-2,l-1))[0]),p(l[1]),p(l[3]),p(l[1]),p(l[2]),p(l[3])}}}function h(t,e,i){f.push(t),f.push(e),f.push(i)}function u(t,e,i){d(t),d(e),d(i),t=o.length/3,p((t=E.generateTopUV(a,o,t-3,t-2,t-1))[0]),p(t[1]),p(t[2])}function d(t){o.push(f[3*t]),o.push(f[3*t+1]),o.push(f[3*t+2])}function p(t){s.push(t.x),s.push(t.y)}var f=[],m=void 0!==e.curveSegments?e.curveSegments:12,g=void 0!==e.steps?e.steps:1,v=void 0!==e.depth?e.depth:100,y=void 0===e.bevelEnabled||e.bevelEnabled,_=void 0!==e.bevelThickness?e.bevelThickness:6,b=void 0!==e.bevelSize?e.bevelSize:_-2,x=void 0!==e.bevelOffset?e.bevelOffset:0,w=void 0!==e.bevelSegments?e.bevelSegments:3,M=e.extrudePath,E=void 0!==e.UVGenerator?e.UVGenerator:Ua;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=e.amount);var T,S=!1;if(M){var A=M.getSpacedPoints(g);S=!0,y=!1;var C=M.computeFrenetFrames(g,!1),L=new r,D=new r,P=new r}y||(x=b=_=w=0),m=t.extractPoints(m),t=m.shape;var R=m.holes;if(!Ba.isClockWise(t)){t=t.reverse();var O=0;for(T=R.length;O<T;O++){var I=R[O];Ba.isClockWise(I)&&(R[O]=I.reverse())}}var z=Ba.triangulateShape(t,R),N=t;for(O=0,T=R.length;O<T;O++)I=R[O],t=t.concat(I);var k,F,B=t.length,U=z.length;m=[];var H=0,G=N.length,j=G-1;for(k=H+1;H<G;H++,j++,k++)j===G&&(j=0),k===G&&(k=0),m[H]=l(N[H],N[j],N[k]);M=[];var V=m.concat();for(O=0,T=R.length;O<T;O++){I=R[O];var W=[];for(H=0,j=(G=I.length)-1,k=H+1;H<G;H++,j++,k++)j===G&&(j=0),k===G&&(k=0),W[H]=l(I[H],I[j],I[k]);M.push(W),V=V.concat(W)}for(j=0;j<w;j++){G=j/w;var q=_*Math.cos(G*Math.PI/2);for(k=b*Math.sin(G*Math.PI/2)+x,H=0,G=N.length;H<G;H++){var X=n(N[H],m[H],k);h(X.x,X.y,-q)}for(O=0,T=R.length;O<T;O++)for(I=R[O],W=M[O],H=0,G=I.length;H<G;H++)h((X=n(I[H],W[H],k)).x,X.y,-q)}for(k=b+x,H=0;H<B;H++)X=y?n(t[H],V[H],k):t[H],S?(D.copy(C.normals[0]).multiplyScalar(X.x),L.copy(C.binormals[0]).multiplyScalar(X.y),P.copy(A[0]).add(D).add(L),h(P.x,P.y,P.z)):h(X.x,X.y,0);for(G=1;G<=g;G++)for(H=0;H<B;H++)X=y?n(t[H],V[H],k):t[H],S?(D.copy(C.normals[G]).multiplyScalar(X.x),L.copy(C.binormals[G]).multiplyScalar(X.y),P.copy(A[G]).add(D).add(L),h(P.x,P.y,P.z)):h(X.x,X.y,v/g*G);for(j=w-1;0<=j;j--){for(G=j/w,q=_*Math.cos(G*Math.PI/2),k=b*Math.sin(G*Math.PI/2)+x,H=0,G=N.length;H<G;H++)h((X=n(N[H],m[H],k)).x,X.y,v+q);for(O=0,T=R.length;O<T;O++)for(I=R[O],W=M[O],H=0,G=I.length;H<G;H++)X=n(I[H],W[H],k),S?h(X.x,X.y+A[g-1].y,A[g-1].x+q):h(X.x,X.y,v+q)}!function(){var t=o.length/3;if(y){var e=0*B;for(H=0;H<U;H++)u((F=z[H])[2]+e,F[1]+e,F[0]+e);for(e=B*(g+2*w),H=0;H<U;H++)u((F=z[H])[0]+e,F[1]+e,F[2]+e)}else{for(H=0;H<U;H++)u((F=z[H])[2],F[1],F[0]);for(H=0;H<U;H++)u((F=z[H])[0]+B*g,F[1]+B*g,F[2]+B*g)}a.addGroup(t,o.length/3-t,0)}(),function(){var t=o.length/3,e=0;for(c(N,e),e+=N.length,O=0,T=R.length;O<T;O++)c(I=R[O],e),e+=I.length;a.addGroup(t,o.length/3-t,1)}()}B.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var a=this,o=[],s=[],l=0,c=t.length;l<c;l++)n(t[l]);this.addAttribute("position",new z(o,3)),this.addAttribute("uv",new z(s,2)),this.computeVertexNormals()}function Ri(t,e,i){if(i.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i.shapes.push(t[n].uuid);else i.shapes.push(t.uuid);return void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}function Oi(t,e){S.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Ii(t,e)),this.mergeVertices()}function Ii(t,e){var i=(e=e||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S;t=i.generateShapes(t,e.size),e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Pi.call(this,t,e),this.type="TextBufferGeometry"}function zi(t,e,i,n,r,a,o){S.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Ni(t,e,i,n,r,a,o)),this.mergeVertices()}function Ni(t,e,i,n,a,o,s){B.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:a,thetaStart:o,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var l,c,h=Math.min(o+s,Math.PI),u=0,d=[],p=new r,f=new r,m=[],g=[],v=[],y=[];for(c=0;c<=i;c++){var _=[],b=c/i,x=0;for(0==c&&0==o?x=.5/e:c==i&&h==Math.PI&&(x=-.5/e),l=0;l<=e;l++){var w=l/e;p.x=-t*Math.cos(n+w*a)*Math.sin(o+b*s),p.y=t*Math.cos(o+b*s),p.z=t*Math.sin(n+w*a)*Math.sin(o+b*s),g.push(p.x,p.y,p.z),f.copy(p).normalize(),v.push(f.x,f.y,f.z),y.push(w+x,1-b),_.push(u++)}d.push(_)}for(c=0;c<i;c++)for(l=0;l<e;l++)t=d[c][l+1],n=d[c][l],a=d[c+1][l],s=d[c+1][l+1],(0!==c||0<o)&&m.push(t,n,s),(c!==i-1||h<Math.PI)&&m.push(n,a,s);this.setIndex(m),this.addAttribute("position",new z(g,3)),this.addAttribute("normal",new z(v,3)),this.addAttribute("uv",new z(y,2))}function ki(t,e,i,n,r,a){S.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Fi(t,e,i,n,r,a)),this.mergeVertices()}function Fi(t,e,n,a,o,s){B.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:a,thetaStart:o,thetaLength:s},t=t||.5,e=e||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var l,c,h=[],u=[],d=[],p=[],f=t,m=(e-t)/(a=void 0!==a?Math.max(1,a):1),g=new r,v=new i;for(l=0;l<=a;l++){for(c=0;c<=n;c++)t=o+c/n*s,g.x=f*Math.cos(t),g.y=f*Math.sin(t),u.push(g.x,g.y,g.z),d.push(0,0,1),v.x=(g.x/e+1)/2,v.y=(g.y/e+1)/2,p.push(v.x,v.y);f+=m}for(l=0;l<a;l++)for(e=l*(n+1),c=0;c<n;c++)o=(t=c+e)+n+1,s=t+n+2,f=t+1,h.push(t,o,f),h.push(o,s,f);this.setIndex(h),this.addAttribute("position",new z(u,3)),this.addAttribute("normal",new z(d,3)),this.addAttribute("uv",new z(p,2))}function Bi(t,e,i,n){S.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new Ui(t,e,i,n)),this.mergeVertices()}function Ui(t,e,n,a){B.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:a},e=Math.floor(e)||12,n=n||0,a=a||2*Math.PI,a=ua.clamp(a,0,2*Math.PI);var o,s=[],l=[],c=[],h=1/e,u=new r,d=new i;for(o=0;o<=e;o++){var p=n+o*h*a,f=Math.sin(p),m=Math.cos(p);for(p=0;p<=t.length-1;p++)u.x=t[p].x*f,u.y=t[p].y,u.z=t[p].x*m,l.push(u.x,u.y,u.z),d.x=o/e,d.y=p/(t.length-1),c.push(d.x,d.y)}for(o=0;o<e;o++)for(p=0;p<t.length-1;p++)h=(n=p+o*t.length)+t.length,u=n+t.length+1,d=n+1,s.push(n,h,d),s.push(h,u,d);if(this.setIndex(s),this.addAttribute("position",new z(l,3)),this.addAttribute("uv",new z(c,2)),this.computeVertexNormals(),a===2*Math.PI)for(a=this.attributes.normal.array,s=new r,l=new r,c=new r,n=e*t.length*3,p=o=0;o<t.length;o++,p+=3)s.x=a[p+0],s.y=a[p+1],s.z=a[p+2],l.x=a[n+p+0],l.y=a[n+p+1],l.z=a[n+p+2],c.addVectors(s,l).normalize(),a[p+0]=a[n+p+0]=c.x,a[p+1]=a[n+p+1]=c.y,a[p+2]=a[n+p+2]=c.z}function Hi(t,e){S.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Gi(t,e)),this.mergeVertices()}function Gi(t,e){function i(t){var i,s=r.length/3,c=(t=t.extractPoints(e)).shape,h=t.holes;for(!1===Ba.isClockWise(c)&&(c=c.reverse()),t=0,i=h.length;t<i;t++){var u=h[t];!0===Ba.isClockWise(u)&&(h[t]=u.reverse())}var d=Ba.triangulateShape(c,h);for(t=0,i=h.length;t<i;t++)u=h[t],c=c.concat(u);for(t=0,i=c.length;t<i;t++)u=c[t],r.push(u.x,u.y,0),a.push(0,0,1),o.push(u.x,u.y);for(t=0,i=d.length;t<i;t++)c=d[t],n.push(c[0]+s,c[1]+s,c[2]+s),l+=3}B.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],a=[],o=[],s=0,l=0;if(!1===Array.isArray(t))i(t);else for(var c=0;c<t.length;c++)i(t[c]),this.addGroup(s,l,c),s+=l,l=0;this.setIndex(n),this.addAttribute("position",new z(r,3)),this.addAttribute("normal",new z(a,3)),this.addAttribute("uv",new z(o,2))}function ji(t,e){if(e.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++)e.shapes.push(t[i].uuid);else e.shapes.push(t.uuid);return e}function Vi(t,e){B.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e};var i=[];e=Math.cos(ua.DEG2RAD*(void 0!==e?e:1));var n=[0,0],r={},a=["a","b","c"];if(t.isBufferGeometry){var o=new S;o.fromBufferGeometry(t)}else o=t.clone();o.mergeVertices(),o.computeFaceNormals(),t=o.vertices;for(var s=0,l=(o=o.faces).length;s<l;s++)for(var c=o[s],h=0;3>h;h++){var u=c[a[h]],d=c[a[(h+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d),void 0===r[u=n[0]+","+n[1]]?r[u]={index1:n[0],index2:n[1],face1:s,face2:void 0}:r[u].face2=s}for(u in r)(void 0===(n=r[u]).face2||o[n.face1].normal.dot(o[n.face2].normal)<=e)&&(a=t[n.index1],i.push(a.x,a.y,a.z),a=t[n.index2],i.push(a.x,a.y,a.z));this.addAttribute("position",new z(i,3))}function Wi(t,e,i,n,r,a,o,s){S.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new qi(t,e,i,n,r,a,o,s)),this.mergeVertices()}function qi(t,e,n,a,o,s,l,c){function h(n){var o,s=new i,h=new r,v=0,b=!0===n?t:e,x=!0===n?1:-1,w=g;for(o=1;o<=a;o++)p.push(0,y*x,0),f.push(0,x,0),m.push(.5,.5),g++;var M=g;for(o=0;o<=a;o++){var E=o/a*c+l,T=Math.cos(E);E=Math.sin(E),h.x=b*E,h.y=y*x,h.z=b*T,p.push(h.x,h.y,h.z),f.push(0,x,0),s.x=.5*T+.5,s.y=.5*E*x+.5,m.push(s.x,s.y),g++}for(o=0;o<a;o++)s=w+o,h=M+o,!0===n?d.push(h,h+1,s):d.push(h+1,h,s),v+=3;u.addGroup(_,v,!0===n?1:2),_+=v}B.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:c};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,a=Math.floor(a)||8,o=Math.floor(o)||1,s=void 0!==s&&s,l=void 0!==l?l:0,c=void 0!==c?c:2*Math.PI;var d=[],p=[],f=[],m=[],g=0,v=[],y=n/2,_=0;!function(){var i,s,h=new r,b=new r,x=0,w=(e-t)/n;for(s=0;s<=o;s++){var M=[],E=s/o,T=E*(e-t)+t;for(i=0;i<=a;i++){var S=i/a,A=S*c+l,C=Math.sin(A);A=Math.cos(A),b.x=T*C,b.y=-E*n+y,b.z=T*A,p.push(b.x,b.y,b.z),h.set(C,w,A).normalize(),f.push(h.x,h.y,h.z),m.push(S,1-E),M.push(g++)}v.push(M)}for(i=0;i<a;i++)for(s=0;s<o;s++)h=v[s+1][i],b=v[s+1][i+1],w=v[s][i+1],d.push(v[s][i],h,w),d.push(h,b,w),x+=6;u.addGroup(_,x,0),_+=x}(),!1===s&&(0<t&&h(!0),0<e&&h(!1)),this.setIndex(d),this.addAttribute("position",new z(p,3)),this.addAttribute("normal",new z(f,3)),this.addAttribute("uv",new z(m,2))}function Xi(t,e,i,n,r,a,o){Wi.call(this,0,t,e,i,n,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:o}}function Yi(t,e,i,n,r,a,o){qi.call(this,0,t,e,i,n,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:o}}function Zi(t,e,i,n){S.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new Ji(t,e,i,n)),this.mergeVertices()}function Ji(t,e,n,a){B.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:a},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI;var o,s=[],l=[],c=[],h=[],u=new r,d=new i;l.push(0,0,0),c.push(0,0,1),h.push(.5,.5);var p=0;for(o=3;p<=e;p++,o+=3){var f=n+p/e*a;u.x=t*Math.cos(f),u.y=t*Math.sin(f),l.push(u.x,u.y,u.z),c.push(0,0,1),d.x=(l[o]/t+1)/2,d.y=(l[o+1]/t+1)/2,h.push(d.x,d.y)}for(o=1;o<=e;o++)s.push(o,o+1,0);this.setIndex(s),this.addAttribute("position",new z(l,3)),this.addAttribute("normal",new z(c,3)),this.addAttribute("uv",new z(h,2))}function Qi(t){V.call(this),this.type="ShadowMaterial",this.color=new _(0),this.transparent=!0,this.setValues(t)}function Ki(t){W.call(this,t),this.type="RawShaderMaterial"}function $i(t){V.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function tn(t){$i.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(t)}function en(t){V.call(this),this.type="MeshPhongMaterial",this.color=new _(16777215),this.specular=new _(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function nn(t){en.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function rn(t){V.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(t)}function an(t){V.call(this),this.type="MeshLambertMaterial",this.color=new _(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function on(t){V.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.lights=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(t)}function sn(t){Fe.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function ln(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function cn(t,e,i,n){ln.call(this,t,e,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function hn(t,e,i,n){ln.call(this,t,e,i,n)}function un(t,e,i,n){ln.call(this,t,e,i,n)}function dn(t,e,i,n){if(void 0===t)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ja.convertArray(e,this.TimeBufferType),this.values=ja.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function pn(t,e,i){dn.call(this,t,e,i)}function fn(t,e,i,n){dn.call(this,t,e,i,n)}function mn(t,e,i,n){dn.call(this,t,e,i,n)}function gn(t,e,i,n){ln.call(this,t,e,i,n)}function vn(t,e,i,n){dn.call(this,t,e,i,n)}function yn(t,e,i,n){dn.call(this,t,e,i,n)}function _n(t,e,i,n){dn.call(this,t,e,i,n)}function bn(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=ua.generateUUID(),0>this.duration&&this.resetDuration()}function xn(t){if(void 0===t.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return mn;case"vector":case"vector2":case"vector3":case"vector4":return _n;case"color":return fn;case"quaternion":return vn;case"bool":case"boolean":return pn;case"string":return yn}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var i=[],n=[];ja.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function wn(t,e,i){var n=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===r&&void 0!==n.onStart&&n.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(r=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}function Mn(t){this.manager=void 0!==t?t:Wa}function En(t){this.manager=void 0!==t?t:Wa}function Tn(t){this.manager=void 0!==t?t:Wa,this._parser=null}function Sn(t){this.manager=void 0!==t?t:Wa,this._parser=null}function An(t){this.manager=void 0!==t?t:Wa}function Cn(t){this.manager=void 0!==t?t:Wa}function Ln(t){this.manager=void 0!==t?t:Wa}function Dn(){this.type="Curve",this.arcLengthDivisions=200}function Pn(t,e,i,n,r,a,o,s){Dn.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Rn(t,e,i,n,r,a){Pn.call(this,t,e,i,i,n,r,a),this.type="ArcCurve"}function On(){var t=0,e=0,i=0,n=0;return{initCatmullRom:function(r,a,o,s,l){t=a,e=r=l*(o-r),i=-3*a+3*o-2*r-(s=l*(s-a)),n=2*a-2*o+r+s},initNonuniformCatmullRom:function(r,a,o,s,l,c,h){t=a,e=r=((a-r)/l-(o-r)/(l+c)+(o-a)/c)*c,i=-3*a+3*o-2*r-(s=((o-a)/c-(s-a)/(c+h)+(s-o)/h)*c),n=2*a-2*o+r+s},calc:function(r){var a=r*r;return t+e*r+i*a+n*a*r}}}function In(t,e,i,n){Dn.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=n||.5}function zn(t,e,i,n,r){var a=t*t;return(2*i-2*n+(e=.5*(n-e))+(r=.5*(r-i)))*t*a+(-3*i+3*n-2*e-r)*a+e*t+i}function Nn(t,e,i,n){var r=1-t;return r*r*e+2*(1-t)*t*i+t*t*n}function kn(t,e,i,n,r){var a=1-t,o=1-t;return a*a*a*e+3*o*o*t*i+3*(1-t)*t*t*n+t*t*t*r}function Fn(t,e,n,r){Dn.call(this),this.type="CubicBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i,this.v3=r||new i}function Bn(t,e,i,n){Dn.call(this),this.type="CubicBezierCurve3",this.v0=t||new r,this.v1=e||new r,this.v2=i||new r,this.v3=n||new r}function Un(t,e){Dn.call(this),this.type="LineCurve",this.v1=t||new i,this.v2=e||new i}function Hn(t,e){Dn.call(this),this.type="LineCurve3",this.v1=t||new r,this.v2=e||new r}function Gn(t,e,n){Dn.call(this),this.type="QuadraticBezierCurve",this.v0=t||new i,this.v1=e||new i,this.v2=n||new i}function jn(t,e,i){Dn.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new r,this.v1=e||new r,this.v2=i||new r}function Vn(t){Dn.call(this),this.type="SplineCurve",this.points=t||[]}function Wn(){Dn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function qn(t){Wn.call(this),this.type="Path",this.currentPoint=new i,t&&this.setFromPoints(t)}function Xn(t){qn.call(this,t),this.uuid=ua.generateUUID(),this.type="Shape",this.holes=[]}function Yn(t,e){T.call(this),this.type="Light",this.color=new _(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Zn(t,e,i){Yn.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(T.DefaultUp),this.updateMatrix(),this.groundColor=new _(e)}function Jn(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new g}function Qn(){Jn.call(this,new xe(50,1,.5,500))}function Kn(t,e,i,n,r,a){Yn.call(this,t,e),this.type="SpotLight",this.position.copy(T.DefaultUp),this.updateMatrix(),this.target=new T,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Qn}function $n(t,e,i,n){Yn.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Jn(new xe(90,1,.5,500))}function tr(t,e,i,n,r,a){be.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function er(){Jn.call(this,new tr(-5,5,5,-5,.5,500))}function ir(t,e){Yn.call(this,t,e),this.type="DirectionalLight",this.position.copy(T.DefaultUp),this.updateMatrix(),this.target=new T,this.shadow=new er}function nr(t,e){Yn.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function rr(t,e,i,n){Yn.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function ar(t){this.manager=void 0!==t?t:Wa,this.textures={}}function or(){B.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function sr(t,e,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),A.call(this,t,e,i),this.meshPerAttribute=n||1}function lr(t){this.manager=void 0!==t?t:Wa}function cr(t){this.manager=void 0!==t?t:Wa,this.resourcePath=""}function hr(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:Wa,this.options=void 0}function ur(){this.type="ShapePath",this.color=new _,this.subPaths=[],this.currentPath=null}function dr(t){this.type="Font",this.data=t}function pr(t){this.manager=void 0!==t?t:Wa}function fr(){}function mr(t){this.manager=void 0!==t?t:Wa}function gr(){this.coefficients=[];for(var t=0;9>t;t++)this.coefficients.push(new r)}function vr(t,e){Yn.call(this,void 0,e),this.sh=void 0!==t?t:new gr}function yr(t,e,i){vr.call(this,void 0,i),t=(new _).set(t),i=(new _).set(e),e=new r(t.r,t.g,t.b),t=new r(i.r,i.g,i.b);var n=(i=Math.sqrt(Math.PI))*Math.sqrt(.75);this.sh.coefficients[0].copy(e).add(t).multiplyScalar(i),this.sh.coefficients[1].copy(e).sub(t).multiplyScalar(n)}function _r(t,e){vr.call(this,void 0,e),t=(new _).set(t),this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}function br(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function xr(t,e,i,n){T.call(this),this.type="CubeCamera";var a=new xe(90,1,t,e);a.up.set(0,-1,0),a.lookAt(new r(1,0,0)),this.add(a);var o=new xe(90,1,t,e);o.up.set(0,-1,0),o.lookAt(new r(-1,0,0)),this.add(o);var s=new xe(90,1,t,e);s.up.set(0,0,1),s.lookAt(new r(0,1,0)),this.add(s);var l=new xe(90,1,t,e);l.up.set(0,0,-1),l.lookAt(new r(0,-1,0)),this.add(l);var c=new xe(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new r(0,0,1)),this.add(c);var u=new xe(90,1,t,e);u.up.set(0,-1,0),u.lookAt(new r(0,0,-1)),this.add(u),n=n||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new h(i,i,n),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=t.getRenderTarget(),n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,a),t.setRenderTarget(n,1),t.render(e,o),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,c),n.texture.generateMipmaps=r,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(i)},this.clear=function(t,e,i,n){for(var r=t.getRenderTarget(),a=this.renderTarget,o=0;6>o;o++)t.setRenderTarget(a,o),t.clear(e,i,n);t.setRenderTarget(r)}}function wr(t){this.autoStart=void 0===t||t,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function Mr(){T.call(this),this.type="AudioListener",this.context=oo.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Er(t){T.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Tr(t){Er.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Sr(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Ar(t,e,i){switch(this.binding=t,this.valueSize=i,t=Float64Array,e){case"quaternion":e=this._slerp;break;case"string":case"bool":t=Array,e=this._select;break;default:e=this._lerp}this.buffer=new t(4*i),this._mixBufferRegion=e,this.referenceCount=this.useCount=this.cumulativeWeight=0}function Cr(t,e,i){i=i||Lr.parseTrackName(e),this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Lr(t,e,i){this.path=e,this.parsedPath=i||Lr.parseTrackName(e),this.node=Lr.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Dr(){this.uuid=ua.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Pr(t,e,i){this._mixer=t,this._clip=e,this._localRoot=i||null,e=(t=e.tracks).length,i=Array(e);for(var n={endingStart:2400,endingEnd:2400},r=0;r!==e;++r){var a=t[r].createInterpolant(null);i[r]=a,a.settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(e),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function Rr(t){this._root=t,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function Or(t,e){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=e),this.value=t}function Ir(t,e,i){De.call(this,t,e),this.meshPerAttribute=i||1}function zr(t,e,i,n){this.ray=new q(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Nr(t,e){return t.distance-e.distance}function kr(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n)){n=0;for(var r=(t=t.children).length;n<r;n++)kr(t[n],e,i,!0)}}function Fr(t,e,i){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==i?i:0,this}function Br(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}function Ur(t,e){this.min=void 0!==t?t:new i(1/0,1/0),this.max=void 0!==e?e:new i(-1/0,-1/0)}function Hr(t,e){this.start=void 0!==t?t:new r,this.end=void 0!==e?e:new r}function Gr(t){T.call(this),this.material=t,this.render=function(){}}function jr(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16711680,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=3*i.faces.length:i&&i.isBufferGeometry&&(e=i.attributes.normal.count),i=new B,e=new z(6*e,3),i.addAttribute("position",e),Ue.call(this,i,new Fe({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function Vr(t,e){T.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,t=new B,e=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,n=1;32>i;i++,n++){var r=i/32*Math.PI*2,a=n/32*Math.PI*2;e.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}t.addAttribute("position",new z(e,3)),e=new Fe({fog:!1}),this.cone=new Ue(t,e),this.add(this.cone),this.update()}function Wr(t){for(var e=function t(e){var i=[];e&&e.isBone&&i.push(e);for(var n=0;n<e.children.length;n++)i.push.apply(i,t(e.children[n]));return i}(t),i=new B,n=[],r=[],a=new _(0,0,1),o=new _(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}i.addAttribute("position",new z(n,3)),i.addAttribute("color",new z(r,3)),n=new Fe({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),Ue.call(this,i,n),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function qr(t,e,i){this.light=t,this.light.updateMatrixWorld(),this.color=i,t=new Ni(e,4,2),e=new Y({wireframe:!0,fog:!1}),Z.call(this,t,e),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Xr(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e,(t=new B).addAttribute("position",new z([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),t.computeBoundingSphere(),e=new Fe({fog:!1}),Be.call(this,t,e),(t=new B).addAttribute("position",new z([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),t.computeBoundingSphere(),this.add(new Z(t,new Y({side:1,fog:!1}))),this.update()}function Yr(t,e,i){T.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(t=new ii(e)).rotateY(.5*Math.PI),this.material=new Y({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),e=t.getAttribute("position"),e=new Float32Array(3*e.count),t.addAttribute("color",new A(e,3)),this.add(new Z(t,this.material)),this.update()}function Zr(t,e){this.lightProbe=t,this.size=e,t=new W({defines:{GAMMA_OUTPUT:""},uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:"varying vec3 vNormal;\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#define RECIPROCAL_PI 0.318309886\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n\t// matrix is assumed to be orthogonal\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 linearToOutput( in vec3 a ) {\n\t#ifdef GAMMA_OUTPUT\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n\t#else\n\t\treturn a;\n\t#endif\n}\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\t// normal is assumed to have unit length\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nuniform vec3 sh[ 9 ]; // sh coefficients\nuniform float intensity; // light probe intensity\nvarying vec3 vNormal;\nvoid main() {\n\tvec3 normal = normalize( vNormal );\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );\n\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;\n\toutgoingLight = linearToOutput( outgoingLight );\n\tgl_FragColor = vec4( outgoingLight, 1.0 );\n}"}),e=new Ni(1,32,16),Z.call(this,e,t),this.onBeforeRender()}function Jr(t,e,i,n){t=t||10,e=e||10,i=new _(void 0!==i?i:4473924),n=new _(void 0!==n?n:8947848);var r=e/2,a=t/e,o=t/2;t=[];for(var s=[],l=0,c=0,h=-o;l<=e;l++,h+=a){t.push(-o,0,h,o,0,h),t.push(h,0,-o,h,0,o);var u=l===r?i:n;u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3,u.toArray(s,c),c+=3}(e=new B).addAttribute("position",new z(t,3)),e.addAttribute("color",new z(s,3)),i=new Fe({vertexColors:2}),Ue.call(this,e,i)}function Qr(t,e,i,n,r,a){t=t||10,e=e||16,i=i||8,n=n||64,r=new _(void 0!==r?r:4473924),a=new _(void 0!==a?a:8947848);var o,s=[],l=[];for(o=0;o<=e;o++){var c=o/e*2*Math.PI,h=Math.sin(c)*t;c=Math.cos(c)*t,s.push(0,0,0),s.push(h,0,c);var u=1&o?r:a;l.push(u.r,u.g,u.b),l.push(u.r,u.g,u.b)}for(o=0;o<=i;o++){u=1&o?r:a;var d=t-t/i*o;for(e=0;e<n;e++)c=e/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,s.push(h,0,c),l.push(u.r,u.g,u.b),c=(e+1)/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,s.push(h,0,c),l.push(u.r,u.g,u.b)}(t=new B).addAttribute("position",new z(s,3)),t.addAttribute("color",new z(l,3)),s=new Fe({vertexColors:2}),Ue.call(this,t,s)}function Kr(t,e,i,n){this.audio=t,this.range=e||1,this.divisionsInnerAngle=i||16,this.divisionsOuterAngle=n||2,t=new B,e=new Float32Array(3*(3*(this.divisionsInnerAngle+2*this.divisionsOuterAngle)+3)),t.addAttribute("position",new A(e,3)),e=new Fe({color:65280}),i=new Fe({color:16776960}),Be.call(this,t,[i,e]),this.update()}function $r(t,e,i,n){this.object=t,this.size=void 0!==e?e:1,t=void 0!==i?i:16776960,n=void 0!==n?n:1,e=0,(i=this.object.geometry)&&i.isGeometry?e=i.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),i=new B,e=new z(6*e,3),i.addAttribute("position",e),Ue.call(this,i,new Fe({color:t,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function ta(t,e,i){T.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1),(t=new B).addAttribute("position",new z([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3)),e=new Fe({fog:!1}),this.lightPlane=new Be(t,e),this.add(this.lightPlane),(t=new B).addAttribute("position",new z([0,0,0,0,0,1],3)),this.targetLine=new Be(t,e),this.add(this.targetLine),this.update()}function ea(t){function e(t,e,n){i(t,n),i(e,n)}function i(t,e){a.push(0,0,0),o.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(a.length/3-1)}var n=new B,r=new Fe({color:16777215,vertexColors:1}),a=[],o=[],s={},l=new _(16755200),c=new _(16711680),h=new _(43775),u=new _(16777215),d=new _(3355443);e("n1","n2",l),e("n2","n4",l),e("n4","n3",l),e("n3","n1",l),e("f1","f2",l),e("f2","f4",l),e("f4","f3",l),e("f3","f1",l),e("n1","f1",l),e("n2","f2",l),e("n3","f3",l),e("n4","f4",l),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",h),e("u2","u3",h),e("u3","u1",h),e("c","t",u),e("p","c",d),e("cn1","cn2",d),e("cn3","cn4",d),e("cf1","cf2",d),e("cf3","cf4",d),n.addAttribute("position",new z(a,3)),n.addAttribute("color",new z(o,3)),Ue.call(this,n,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function ia(t,e){this.object=t,void 0===e&&(e=16776960),t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new B;n.setIndex(new A(t,1)),n.addAttribute("position",new A(i,3)),Ue.call(this,n,new Fe({color:e})),this.matrixAutoUpdate=!1,this.update()}function na(t,e){this.type="Box3Helper",this.box=t,t=void 0!==e?e:16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new B;i.setIndex(new A(e,1)),i.addAttribute("position",new z([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ue.call(this,i,new Fe({color:t})),this.geometry.computeBoundingSphere()}function ra(t,e,i){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e,t=void 0!==i?i:16776960,(e=new B).addAttribute("position",new z([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),e.computeBoundingSphere(),Be.call(this,e,new Fe({color:t})),(e=new B).addAttribute("position",new z([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),this.add(new Z(e,new Y({color:t,opacity:.2,transparent:!0,depthWrite:!1})))}function aa(t,e,i,n,a,o){T.call(this),void 0===t&&(t=new r(0,0,1)),void 0===e&&(e=new r(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===a&&(a=.2*i),void 0===o&&(o=.2*a),void 0===ro&&((ro=new B).addAttribute("position",new z([0,0,0,0,1,0],3)),(ao=new qi(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Be(ro,new Fe({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Z(ao,new Y({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,a,o)}function oa(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t];(t=new B).addAttribute("position",new z(e,3)),t.addAttribute("color",new z([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),e=new Fe({vertexColors:2}),Ue.call(this,t,e)}function sa(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),In.call(this,t),this.type="catmullrom",this.closed=!0}function la(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),In.call(this,t),this.type="catmullrom"}function ca(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),In.call(this,t),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return 0>t?-1:0<t?1:+t}),0=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&void 0!==(t=this._listeners[t])&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=0,n=(e=e.slice(0)).length;i<n;i++)e[i].call(this,t)}}}});var ha,ua={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;256>e;e++)t[e]=(16>e?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&n|128]+t[n>>8&255]+"-"+t[n>>16&255]+t[n>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ua.DEG2RAD},radToDeg:function(t){return t*ua.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(i.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,i=this.y;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return 0>t&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=this.x-t.x,r=this.y-t.y;return this.x=n*i-r*e+t.x,this.y=n*e+r*i+t.y,this}}),Object.assign(n,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,a,o){var s=i[n+0],l=i[n+1],c=i[n+2];i=i[n+3],n=r[a+0];var h=r[a+1],u=r[a+2];if(i!==(r=r[a+3])||s!==n||l!==h||c!==u){a=1-o;var d=s*n+l*h+c*u+i*r,p=0<=d?1:-1,f=1-d*d;f>Number.EPSILON&&(f=Math.sqrt(f),d=Math.atan2(f,d*p),a=Math.sin(a*d)/f,o=Math.sin(o*d)/f),s=s*a+n*(p*=o),l=l*a+h*p,c=c*a+u*p,i=i*a+r*p,a===1-o&&(s*=o=1/Math.sqrt(s*s+l*l+c*c+i*i),l*=o,c*=o,i*=o)}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=i}}),Object.defineProperties(n.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(n.prototype,{isQuaternion:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,n=t._y,r=t._z;t=t.order;var a=Math.cos,o=Math.sin,s=a(i/2),l=a(n/2);return a=a(r/2),i=o(i/2),n=o(n/2),r=o(r/2),"XYZ"===t?(this._x=i*l*a+s*n*r,this._y=s*n*a-i*l*r,this._z=s*l*r+i*n*a,this._w=s*l*a-i*n*r):"YXZ"===t?(this._x=i*l*a+s*n*r,this._y=s*n*a-i*l*r,this._z=s*l*r-i*n*a,this._w=s*l*a+i*n*r):"ZXY"===t?(this._x=i*l*a-s*n*r,this._y=s*n*a+i*l*r,this._z=s*l*r+i*n*a,this._w=s*l*a-i*n*r):"ZYX"===t?(this._x=i*l*a-s*n*r,this._y=s*n*a+i*l*r,this._z=s*l*r-i*n*a,this._w=s*l*a+i*n*r):"YZX"===t?(this._x=i*l*a+s*n*r,this._y=s*n*a+i*l*r,this._z=s*l*r-i*n*a,this._w=s*l*a-i*n*r):"XZY"===t&&(this._x=i*l*a-s*n*r,this._y=s*n*a-i*l*r,this._z=s*l*r+i*n*a,this._w=s*l*a+i*n*r),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){e/=2;var i=Math.sin(e);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(e),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,i=e[0];t=e[4];var n=e[8],r=e[1],a=e[5],o=e[9],s=e[2],l=e[6],c=i+a+(e=e[10]);return 0<c?(i=.5/Math.sqrt(c+1),this._w=.25/i,this._x=(l-o)*i,this._y=(n-s)*i,this._z=(r-t)*i):i>a&&i>e?(i=2*Math.sqrt(1+i-a-e),this._w=(l-o)/i,this._x=.25*i,this._y=(t+r)/i,this._z=(n+s)/i):a>e?(i=2*Math.sqrt(1+a-i-e),this._w=(n-s)/i,this._x=(t+r)/i,this._y=.25*i,this._z=(o+l)/i):(i=2*Math.sqrt(1+e-i-a),this._w=(r-t)/i,this._x=(n+s)/i,this._y=(o+l)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:function(t,e){var i=t.dot(e)+1;return 1e-6>i?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=i,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(ua.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var i=this.angleTo(t);return 0===i||this.slerp(t,Math.min(1,e/i)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._z=this._y=this._x=0,this._w=1):(t=1/t,this._x*=t,this._y*=t,this._z*=t,this._w*=t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z;t=t._w;var a=e._x,o=e._y,s=e._z;return e=e._w,this._x=i*e+t*a+n*s-r*o,this._y=n*e+t*o+r*a-i*s,this._z=r*e+t*s+i*o-n*a,this._w=t*e-i*a-n*o-r*s,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,a=this._w,o=a*t._w+i*t._x+n*t._y+r*t._z;if(0>o?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=i,this._y=n,this._z=r,this;if((t=1-o*o)<=Number.EPSILON)return o=1-e,this._w=o*a+e*this._w,this._x=o*i+e*this._x,this._y=o*n+e*this._y,this._z=o*r+e*this._z,this.normalize();t=Math.sqrt(t);var s=Math.atan2(t,o);return o=Math.sin((1-e)*s)/t,e=Math.sin(e*s)/t,this._w=a*o+this._w*e,this._x=i*o+this._x*e,this._y=n*o+this._y*e,this._z=r*o+this._z*e,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(r.prototype,{isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(ha=new n,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ha.setFromEuler(t))}),applyAxisAngle:function(){var t=new n;return function(e,i){return this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[3]*i+t[6]*n,this.y=t[1]*e+t[4]*i+t[7]*n,this.z=t[2]*e+t[5]*i+t[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=1/((t=t.elements)[3]*e+t[7]*i+t[11]*n+t[15]);return this.x=(t[0]*e+t[4]*i+t[8]*n+t[12])*r,this.y=(t[1]*e+t[5]*i+t[9]*n+t[13])*r,this.z=(t[2]*e+t[6]*i+t[10]*n+t[14])*r,this},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,a=t.y,o=t.z,s=(t=t.w)*e+a*n-o*i,l=t*i+o*e-r*n,c=t*n+r*i-a*e;return e=-r*e-a*i-o*n,this.x=s*t+e*-r+l*-o-c*-a,this.y=l*t+e*-a+c*-r-s*-o,this.z=c*t+e*-o+s*-a-l*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,i=this.y,n=this.z;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n,this.y=t[1]*e+t[5]*i+t[9]*n,this.z=t[2]*e+t[6]*i+t[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var i=t.x,n=t.y;t=t.z;var r=e.x,a=e.y;return e=e.z,this.x=n*e-t*a,this.y=t*r-i*e,this.z=i*a-n*r,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new r;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new r;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){return t=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq()),Math.acos(ua.clamp(t,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i+(t=this.z-t.z)*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,i){var n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){return t=t.elements,this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length();return t=this.setFromMatrixColumn(t,2).length(),this.x=e,this.y=i,this.z=t,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(a.prototype,{isMatrix3:!0,set:function(t,e,i,n,r,a,o,s,l){var c=this.elements;return c[0]=t,c[1]=n,c[2]=o,c[3]=e,c[4]=r,c[5]=s,c[6]=i,c[7]=a,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},setFromMatrix4:function(t){return t=t.elements,this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var t=new r;return function(e){for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix3(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[3],a=i[6],o=i[1],s=i[4],l=i[7],c=i[2],h=i[5];i=i[8];var u=n[0],d=n[3],p=n[6],f=n[1],m=n[4],g=n[7],v=n[2],y=n[5];return n=n[8],e[0]=t*u+r*f+a*v,e[3]=t*d+r*m+a*y,e[6]=t*p+r*g+a*n,e[1]=o*u+s*f+l*v,e[4]=o*d+s*m+l*y,e[7]=o*p+s*g+l*n,e[2]=c*u+h*f+i*v,e[5]=c*d+h*m+i*y,e[8]=c*p+h*g+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7];return e*a*(t=t[8])-e*o*l-i*r*t+i*o*s+n*r*l-n*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=t.elements;t=this.elements;var n=i[0],r=i[1],a=i[2],o=i[3],s=i[4],l=i[5],c=i[6],h=i[7],u=(i=i[8])*s-l*h,d=l*c-i*o,p=h*o-s*c,f=n*u+r*d+a*p;if(0===f){if(!0===e)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/f,t[0]=u*e,t[1]=(a*h-i*r)*e,t[2]=(l*r-a*s)*e,t[3]=d*e,t[4]=(i*n-a*c)*e,t[5]=(a*o-l*n)*e,t[6]=p*e,t[7]=(r*c-h*n)*e,t[8]=(s*n-r*o)*e,this},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,i,n,r,a,o){var s=Math.cos(r);r=Math.sin(r),this.set(i*s,i*r,-i*(s*a+r*o)+a+t,-n*r,n*s,-n*(-r*a+s*o)+o+e,0,0,1)},scale:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this},rotate:function(t){var e=Math.cos(t);t=Math.sin(t);var i=this.elements,n=i[0],r=i[3],a=i[6],o=i[1],s=i[4],l=i[7];return i[0]=e*n+t*o,i[3]=e*r+t*s,i[6]=e*a+t*l,i[1]=-t*n+e*o,i[4]=-t*r+e*s,i[7]=-t*a+e*l,this},translate:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;9>i;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;9>i;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}});var da,pa={getDataURL:function(t){if("undefined"==typeof HTMLCanvasElement)return t.src;if(!(t instanceof HTMLCanvasElement)){void 0===da&&(da=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),da.width=t.width,da.height=t.height;var e=da.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),t=da}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},fa=0;o.DEFAULT_IMAGE=void 0,o.DEFAULT_MAPPING=300,o.prototype=Object.assign(Object.create(e.prototype),{constructor:o,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=ua.generateUUID()),!e&&void 0===t.images[n.uuid]){if(Array.isArray(n))for(var r=[],a=0,o=n.length;a<o;a++)r.push(pa.getDataURL(n[a]));else r=pa.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),0>t.x||1<t.x)switch(this.wrapS){case 1e3:t.x-=Math.floor(t.x);break;case 1001:t.x=0>t.x?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(0>t.y||1<t.y)switch(this.wrapT){case 1e3:t.y-=Math.floor(t.y);break;case 1001:t.y=0>t.y?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(o.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(s.prototype,{isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.w=this.z=this.y=this.x=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w;return t=t.elements,this.x=t[0]*e+t[4]*i+t[8]*n+t[12]*r,this.y=t[1]*e+t[5]*i+t[9]*n+t[13]*r,this.z=t[2]*e+t[6]*i+t[10]*n+t[14]*r,this.w=t[3]*e+t[7]*i+t[11]*n+t[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return 1e-4>e?(this.x=1,this.z=this.y=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e=(t=t.elements)[0],i=t[4],n=t[8],r=t[1],a=t[5],o=t[9],s=t[2],l=t[6],c=t[10];return.01>Math.abs(i-r)&&.01>Math.abs(n-s)&&.01>Math.abs(o-l)?.1>Math.abs(i+r)&&.1>Math.abs(n+s)&&.1>Math.abs(o+l)&&.1>Math.abs(e+a+c-3)?(this.set(1,0,0,0),this):(t=Math.PI,c=(c+1)/2,i=(i+r)/4,n=(n+s)/4,o=(o+l)/4,(e=(e+1)/2)>(a=(a+1)/2)&&e>c?.01>e?(l=0,i=s=.707106781):(s=i/(l=Math.sqrt(e)),i=n/l):a>c?.01>a?(l=.707106781,s=0,i=.707106781):(l=i/(s=Math.sqrt(a)),i=o/s):.01>c?(s=l=.707106781,i=0):(l=n/(i=Math.sqrt(c)),s=o/i),this.set(l,s,i,t),this):(t=Math.sqrt((l-o)*(l-o)+(n-s)*(n-s)+(r-i)*(r-i)),.001>Math.abs(t)&&(t=1),this.x=(l-o)/t,this.y=(n-s)/t,this.z=(r-i)/t,this.w=Math.acos((e+a+c-1)/2),this)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new s,e=new s),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),l.prototype=Object.assign(Object.create(e.prototype),{constructor:l,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),c.prototype=Object.assign(Object.create(l.prototype),{constructor:c,isWebGLMultisampleRenderTarget:!0,copy:function(t){return l.prototype.copy.call(this,t),this.samples=t.samples,this}}),h.prototype=Object.create(l.prototype),h.prototype.constructor=h,h.prototype.isWebGLRenderTargetCube=!0,u.prototype=Object.create(o.prototype),u.prototype.constructor=u,u.prototype.isDataTexture=!0,Object.assign(d.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var c=t[s],h=t[s+1],u=t[s+2];c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),c>r&&(r=c),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,l=t.count;s<l;s++){var c=t.getX(s),h=t.getY(s),u=t.getZ(s);c<e&&(e=c),h<i&&(i=h),u<n&&(n=u),c>r&&(r=c),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new r;return function(e,i){return i=t.copy(i).multiplyScalar(.5),this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new r),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new r),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var r=t.geometry;if(void 0!==r)if(r.isGeometry)for(r=r.vertices,i=0,n=r.length;i<n;i++)a.copy(r[i]),a.applyMatrix4(t.matrixWorld),e.expandByPoint(a);else if(r.isBufferGeometry&&void 0!==(r=r.attributes.position))for(i=0,n=r.count;i<n;i++)a.fromBufferAttribute(r,i).applyMatrix4(t.matrixWorld),e.expandByPoint(a)}var e,i,n,a=new r;return function(i){return e=this,i.updateMatrixWorld(!0),i.traverse(t),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new r),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new r;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){if(0<t.normal.x)var e=t.normal.x*this.min.x,i=t.normal.x*this.max.x;else e=t.normal.x*this.max.x,i=t.normal.x*this.min.x;return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant},intersectsTriangle:function(){function t(t){var r,a=0;for(r=t.length-3;a<=r;a+=3){l.fromArray(t,a);var o=h.x*Math.abs(l.x)+h.y*Math.abs(l.y)+h.z*Math.abs(l.z),s=e.dot(l),c=i.dot(l),u=n.dot(l);if(Math.max(-Math.max(s,c,u),Math.min(s,c,u))>o)return!1}return!0}var e=new r,i=new r,n=new r,a=new r,o=new r,s=new r,l=new r,c=new r,h=new r,u=new r;return function(r){return!this.isEmpty()&&(this.getCenter(c),h.subVectors(this.max,c),e.subVectors(r.a,c),i.subVectors(r.b,c),n.subVectors(r.c,c),a.subVectors(i,e),o.subVectors(n,i),s.subVectors(e,n),!!t(r=[0,-a.z,a.y,0,-o.z,o.y,0,-s.z,s.y,a.z,0,-a.x,o.z,0,-o.x,s.z,0,-s.x,-a.y,a.x,0,-o.y,o.x,0,-s.y,s.x,0])&&!!t(r=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(a,o),t(r=[u.x,u.y,u.z])))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new r),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new r;return function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new r,new r,new r,new r,new r,new r,new r,new r];return function(e){return this.isEmpty()||(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t)),this}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(p.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new d;return function(e,i){var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).getCenter(n);for(var r=i=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new r),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new d),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius*=t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(f.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new r,e=new r;return function(i,n,r){return n=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize(),this.setFromNormalAndCoplanarPoint(n,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new r),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new r;return function(e,i){void 0===i&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new r);var n=e.delta(t),a=this.normal.dot(n);if(0===a){if(0===this.distanceToPoint(e.start))return i.copy(e.start)}else if(!(0>(a=-(e.start.dot(this.normal)+this.constant)/a)||1<a))return i.copy(n).multiplyScalar(a).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start);return t=this.distanceToPoint(t.end),0>e&&0<t||0>t&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new r),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new r,e=new a;return function(i,n){return n=n||e.getNormalMatrix(i),i=this.coplanarPoint(t).applyMatrix4(i),n=this.normal.applyMatrix3(n).normalize(),this.constant=-i.dot(n),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(m.prototype,{set:function(t,e,i,n,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;6>i;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements;t=i[0];var n=i[1],r=i[2],a=i[3],o=i[4],s=i[5],l=i[6],c=i[7],h=i[8],u=i[9],d=i[10],p=i[11],f=i[12],m=i[13],g=i[14];return i=i[15],e[0].setComponents(a-t,c-o,p-h,i-f).normalize(),e[1].setComponents(a+t,c+o,p+h,i+f).normalize(),e[2].setComponents(a+n,c+s,p+u,i+m).normalize(),e[3].setComponents(a-n,c-s,p-u,i-m).normalize(),e[4].setComponents(a-r,c-l,p-d,i-g).normalize(),e[5].setComponents(a+r,c+l,p+d,i+g).normalize(),this},intersectsObject:function(){var t=new p;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new p;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes,i=t.center;t=-t.radius;for(var n=0;6>n;n++)if(e[n].distanceToPoint(i)<t)return!1;return!0},intersectsBox:function(){var t=new r;return function(e){for(var i=this.planes,n=0;6>n;n++){var r=i[n];if(t.x=0<r.normal.x?e.max.x:e.min.x,t.y=0<r.normal.y?e.max.y:e.min.y,t.z=0<r.normal.z?e.max.z:e.min.z,0>r.distanceToPoint(t))return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;6>i;i++)if(0>e[i].distanceToPoint(t))return!1;return!0}}),Object.assign(g.prototype,{isMatrix4:!0,set:function(t,e,i,n,r,a,o,s,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new g).fromArray(this.elements)},copy:function(t){var e=this.elements;return t=t.elements,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this},copyPosition:function(t){var e=this.elements;return t=t.elements,e[12]=t[12],e[13]=t[13],e[14]=t[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t=new r;return function(e){var i=this.elements,n=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length();return e=1/t.setFromMatrixColumn(e,2).length(),i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[3]=0,i[4]=n[4]*a,i[5]=n[5]*a,i[6]=n[6]*a,i[7]=0,i[8]=n[8]*e,i[9]=n[9]*e,i[10]=n[10]*e,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i);i=Math.sin(i);var o=Math.cos(n);n=Math.sin(n);var s=Math.cos(r);if(r=Math.sin(r),"XYZ"===t.order){t=a*s;var l=a*r,c=i*s,h=i*r;e[0]=o*s,e[4]=-o*r,e[8]=n,e[1]=l+c*n,e[5]=t-h*n,e[9]=-i*o,e[2]=h-t*n,e[6]=c+l*n,e[10]=a*o}else"YXZ"===t.order?(t=o*s,l=o*r,c=n*s,h=n*r,e[0]=t+h*i,e[4]=c*i-l,e[8]=a*n,e[1]=a*r,e[5]=a*s,e[9]=-i,e[2]=l*i-c,e[6]=h+t*i,e[10]=a*o):"ZXY"===t.order?(t=o*s,l=o*r,c=n*s,h=n*r,e[0]=t-h*i,e[4]=-a*r,e[8]=c+l*i,e[1]=l+c*i,e[5]=a*s,e[9]=h-t*i,e[2]=-a*n,e[6]=i,e[10]=a*o):"ZYX"===t.order?(t=a*s,l=a*r,c=i*s,h=i*r,e[0]=o*s,e[4]=c*n-l,e[8]=t*n+h,e[1]=o*r,e[5]=h*n+t,e[9]=l*n-c,e[2]=-n,e[6]=i*o,e[10]=a*o):"YZX"===t.order?(t=a*o,l=a*n,c=i*o,h=i*n,e[0]=o*s,e[4]=h-t*r,e[8]=c*r+l,e[1]=r,e[5]=a*s,e[9]=-i*s,e[2]=-n*s,e[6]=l*r+c,e[10]=t-h*r):"XZY"===t.order&&(t=a*o,l=a*n,c=i*o,h=i*n,e[0]=o*s,e[4]=-r,e[8]=n*s,e[1]=t*r+h,e[5]=a*s,e[9]=l*r-c,e[2]=c*r-l,e[6]=i*s,e[10]=h*r+t);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var t=new r(0,0,0),e=new r(1,1,1);return function(i){return this.compose(t,i,e)}}(),lookAt:function(){var t=new r,e=new r,i=new r;return function(n,r,a){var o=this.elements;return i.subVectors(n,r),0===i.lengthSq()&&(i.z=1),i.normalize(),t.crossVectors(a,i),0===t.lengthSq()&&(1===Math.abs(a.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),t.crossVectors(a,i)),t.normalize(),e.crossVectors(i,t),o[0]=t.x,o[4]=e.x,o[8]=i.x,o[1]=t.y,o[5]=e.y,o[9]=i.y,o[2]=t.z,o[6]=e.z,o[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements;e=this.elements,t=i[0];var r=i[4],a=i[8],o=i[12],s=i[1],l=i[5],c=i[9],h=i[13],u=i[2],d=i[6],p=i[10],f=i[14],m=i[3],g=i[7],v=i[11];i=i[15];var y=n[0],_=n[4],b=n[8],x=n[12],w=n[1],M=n[5],E=n[9],T=n[13],S=n[2],A=n[6],C=n[10],L=n[14],D=n[3],P=n[7],R=n[11];return n=n[15],e[0]=t*y+r*w+a*S+o*D,e[4]=t*_+r*M+a*A+o*P,e[8]=t*b+r*E+a*C+o*R,e[12]=t*x+r*T+a*L+o*n,e[1]=s*y+l*w+c*S+h*D,e[5]=s*_+l*M+c*A+h*P,e[9]=s*b+l*E+c*C+h*R,e[13]=s*x+l*T+c*L+h*n,e[2]=u*y+d*w+p*S+f*D,e[6]=u*_+d*M+p*A+f*P,e[10]=u*b+d*E+p*C+f*R,e[14]=u*x+d*T+p*L+f*n,e[3]=m*y+g*w+v*S+i*D,e[7]=m*_+g*M+v*A+i*P,e[11]=m*b+g*E+v*C+i*R,e[15]=m*x+g*T+v*L+i*n,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new r;return function(e){for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix4(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],a=t[1],o=t[5],s=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*s*h-n*l*h-r*o*u+i*l*u+n*o*d-i*s*d)+t[7]*(+e*s*d-e*l*u+r*a*u-n*a*d+n*l*c-r*s*c)+t[11]*(+e*l*h-e*o*d-r*a*h+i*a*d+r*o*c-i*l*c)+t[15]*(-n*o*c-e*s*h+e*o*u+n*a*h-i*a*u+i*s*c)},transpose:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,i){var n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this},getInverse:function(t,e){var i=this.elements,n=t.elements;t=n[0];var r=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=d*v*h-g*p*h+g*c*f-l*v*f-d*c*(n=n[15])+l*p*n,_=m*p*h-u*v*h-m*c*f+s*v*f+u*c*n-s*p*n,b=u*g*h-m*d*h+m*l*f-s*g*f-u*l*n+s*d*n,x=m*d*c-u*g*c-m*l*p+s*g*p+u*l*v-s*d*v,w=t*y+r*_+a*b+o*x;if(0===w){if(!0===e)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return e=1/w,i[0]=y*e,i[1]=(g*p*o-d*v*o-g*a*f+r*v*f+d*a*n-r*p*n)*e,i[2]=(l*v*o-g*c*o+g*a*h-r*v*h-l*a*n+r*c*n)*e,i[3]=(d*c*o-l*p*o-d*a*h+r*p*h+l*a*f-r*c*f)*e,i[4]=_*e,i[5]=(u*v*o-m*p*o+m*a*f-t*v*f-u*a*n+t*p*n)*e,i[6]=(m*c*o-s*v*o-m*a*h+t*v*h+s*a*n-t*c*n)*e,i[7]=(s*p*o-u*c*o+u*a*h-t*p*h-s*a*f+t*c*f)*e,i[8]=b*e,i[9]=(m*d*o-u*g*o-m*r*f+t*g*f+u*r*n-t*d*n)*e,i[10]=(s*g*o-m*l*o+m*r*h-t*g*h-s*r*n+t*l*n)*e,i[11]=(u*l*o-s*d*o-u*r*h+t*d*h+s*r*f-t*l*f)*e,i[12]=x*e,i[13]=(u*g*a-m*d*a+m*r*p-t*g*p-u*r*v+t*d*v)*e,i[14]=(m*l*a-s*g*a-m*r*c+t*g*c+s*r*v-t*l*v)*e,i[15]=(s*d*a-u*l*a+u*r*c-t*d*c-s*r*p+t*l*p)*e,this},scale:function(t){var e=this.elements,i=t.x,n=t.y;return t=t.z,e[0]*=i,e[4]*=n,e[8]*=t,e[1]*=i,e[5]*=n,e[9]*=t,e[2]*=i,e[6]*=n,e[10]*=t,e[3]*=i,e[7]*=n,e[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t);return t=Math.sin(t),this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e);e=Math.sin(e);var n=1-i,r=t.x,a=t.y;t=t.z;var o=n*r,s=n*a;return this.set(o*r+i,o*a-e*t,o*t+e*a,0,o*a+e*t,s*a+i,s*t-e*r,0,o*t-e*a,s*t+e*r,n*t*t+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){var n=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,l=r+r,c=a+a,h=o+o;e=r*l;var u=r*c;r*=h;var d=a*c;a*=h,o*=h,l*=s,c*=s,s*=h,h=i.x;var p=i.y;return i=i.z,n[0]=(1-(d+o))*h,n[1]=(u+s)*h,n[2]=(r-c)*h,n[3]=0,n[4]=(u-s)*p,n[5]=(1-(e+o))*p,n[6]=(a+l)*p,n[7]=0,n[8]=(r+c)*i,n[9]=(a-l)*i,n[10]=(1-(e+d))*i,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this},decompose:function(){var t=new r,e=new g;return function(i,n,r){var a=this.elements,o=t.set(a[0],a[1],a[2]).length(),s=t.set(a[4],a[5],a[6]).length(),l=t.set(a[8],a[9],a[10]).length();0>this.determinant()&&(o=-o),i.x=a[12],i.y=a[13],i.z=a[14],e.copy(this),i=1/o,a=1/s;var c=1/l;return e.elements[0]*=i,e.elements[1]*=i,e.elements[2]*=i,e.elements[4]*=a,e.elements[5]*=a,e.elements[6]*=a,e.elements[8]*=c,e.elements[9]*=c,e.elements[10]*=c,n.setFromRotationMatrix(e),r.x=o,r.y=s,r.z=l,this}}(),makePerspective:function(t,e,i,n,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements;return o[0]=2*r/(e-t),o[4]=0,o[8]=(e+t)/(e-t),o[12]=0,o[1]=0,o[5]=2*r/(i-n),o[9]=(i+n)/(i-n),o[13]=0,o[2]=0,o[6]=0,o[10]=-(a+r)/(a-r),o[14]=-2*a*r/(a-r),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,i,n,r,a){var o=this.elements,s=1/(e-t),l=1/(i-n),c=1/(a-r);return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-(e+t)*s,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-(i+n)*l,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-(a+r)*c,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){var e=this.elements;t=t.elements;for(var i=0;16>i;i++)if(e[i]!==t[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;16>i;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}});var ma={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},ga={clone:v,merge:y},va={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(_.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.b=this.g=this.r=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return 0>i&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:.5>i?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){return e=ua.euclideanModulo(e,1),i=ua.clamp(i,0,1),n=ua.clamp(n,0,1),0===i?this.r=this.g=this.b=n:(n=2*n-(i=.5>=n?n*(1+i):n+i-n*i),this.r=t(n,i,e+1/3),this.g=t(n,i,e),this.b=t(n,i,e-1/3)),this}}(),setStyle:function(t){function e(e){void 0!==e&&1>parseFloat(e)&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(i[1])/360;var r=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(n,r,a)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(t)){if(3===(n=(i=i[1]).length))return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return t&&0<t.length&&(void 0!==(i=va[t])?this.setHex(i):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){return void 0===e&&(e=2),e=0<e?1/e:1,this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return.04045>t?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return.0031308>t?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,i=this.r,n=this.g,r=this.b,a=Math.max(i,n,r),o=Math.min(i,n,r),s=(o+a)/2;if(o===a)o=e=0;else{var l=a-o;switch(o=.5>=s?l/(a+o):l/(2-a-o),a){case i:e=(n-r)/l+(n<r?6:0);break;case n:e=(r-i)/l+2;break;case r:e=(i-n)/l+4}e/=6}return t.h=e,t.s=o,t.l=s,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,i,n){return this.getHSL(t),t.h+=e,t.s+=i,t.l+=n,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(){var t={h:0,s:0,l:0},e={h:0,s:0,l:0};return function(i,n){this.getHSL(t),i.getHSL(e),i=ua.lerp(t.h,e.h,n);var r=ua.lerp(t.s,e.s,n);return n=ua.lerp(t.l,e.l,n),this.setHSL(i,r,n),this}}(),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var ya={common:{diffuse:{value:new _(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new a},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new _(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new a}},sprite:{diffuse:{value:new _(15658734)},opacity:{value:1},center:{value:new i(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new a}}},_a={basic:{uniforms:y([ya.common,ya.specularmap,ya.envmap,ya.aomap,ya.lightmap,ya.fog]),vertexShader:ma.meshbasic_vert,fragmentShader:ma.meshbasic_frag},lambert:{uniforms:y([ya.common,ya.specularmap,ya.envmap,ya.aomap,ya.lightmap,ya.emissivemap,ya.fog,ya.lights,{emissive:{value:new _(0)}}]),vertexShader:ma.meshlambert_vert,fragmentShader:ma.meshlambert_frag},phong:{uniforms:y([ya.common,ya.specularmap,ya.envmap,ya.aomap,ya.lightmap,ya.emissivemap,ya.bumpmap,ya.normalmap,ya.displacementmap,ya.gradientmap,ya.fog,ya.lights,{emissive:{value:new _(0)},specular:{value:new _(1118481)},shininess:{value:30}}]),vertexShader:ma.meshphong_vert,fragmentShader:ma.meshphong_frag},standard:{uniforms:y([ya.common,ya.envmap,ya.aomap,ya.lightmap,ya.emissivemap,ya.bumpmap,ya.normalmap,ya.displacementmap,ya.roughnessmap,ya.metalnessmap,ya.fog,ya.lights,{emissive:{value:new _(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ma.meshphysical_vert,fragmentShader:ma.meshphysical_frag},matcap:{uniforms:y([ya.common,ya.bumpmap,ya.normalmap,ya.displacementmap,ya.fog,{matcap:{value:null}}]),vertexShader:ma.meshmatcap_vert,fragmentShader:ma.meshmatcap_frag},points:{uniforms:y([ya.points,ya.fog]),vertexShader:ma.points_vert,fragmentShader:ma.points_frag},dashed:{uniforms:y([ya.common,ya.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ma.linedashed_vert,fragmentShader:ma.linedashed_frag},depth:{uniforms:y([ya.common,ya.displacementmap]),vertexShader:ma.depth_vert,fragmentShader:ma.depth_frag},normal:{uniforms:y([ya.common,ya.bumpmap,ya.normalmap,ya.displacementmap,{opacity:{value:1}}]),vertexShader:ma.normal_vert,fragmentShader:ma.normal_frag},sprite:{uniforms:y([ya.sprite,ya.fog]),vertexShader:ma.sprite_vert,fragmentShader:ma.sprite_frag},background:{uniforms:{uvTransform:{value:new a},t2D:{value:null}},vertexShader:ma.background_vert,fragmentShader:ma.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ma.cube_vert,fragmentShader:ma.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ma.equirect_vert,fragmentShader:ma.equirect_frag},distanceRGBA:{uniforms:y([ya.common,ya.displacementmap,{referencePosition:{value:new r},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ma.distanceRGBA_vert,fragmentShader:ma.distanceRGBA_frag},shadow:{uniforms:y([ya.lights,ya.fog,{color:{value:new _(0)},opacity:{value:1}}]),vertexShader:ma.shadow_vert,fragmentShader:ma.shadow_frag}};_a.physical={uniforms:y([_a.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ma.meshphysical_vert,fragmentShader:ma.meshphysical_frag},Object.assign(w.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),M.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),M.DefaultOrder="XYZ",Object.defineProperties(M.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(M.prototype,{isEuler:!0,set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=ua.clamp,r=t.elements;t=r[0];var a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],h=r[2],u=r[6];return r=r[10],"XYZ"===(e=e||this._order)?(this._y=Math.asin(n(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(-c,r),this._z=Math.atan2(-a,t)):(this._x=Math.atan2(u,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(c,-1,1)),.99999>Math.abs(c)?(this._y=Math.atan2(o,r),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-h,t),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(-h,r),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,t))):"ZYX"===e?(this._y=Math.asin(-n(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(u,r),this._z=Math.atan2(s,t)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===e?(this._z=Math.asin(n(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,t)):(this._x=0,this._y=Math.atan2(o,r))):"XZY"===e?(this._z=Math.asin(-n(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(u,l),this._y=Math.atan2(o,t)):(this._x=Math.atan2(-c,r),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new g;return function(e,i,n){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new n;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new r(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(E.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask=this.mask|1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var ba=0;T.DefaultUp=new r(0,1,0),T.DefaultMatrixAutoUpdate=!0,T.prototype=Object.assign(Object.create(e.prototype),{constructor:T,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new n;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new n;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new r(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new r(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new r(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new r;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new r(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new r(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new r(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new g;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new n,e=new g,i=new r,a=new r;return function(n,r,o){n.isVector3?i.copy(n):i.set(n,r,o),n=this.parent,this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(a,i,this.up):e.lookAt(i,a,this.up),this.quaternion.setFromRotationMatrix(e),n&&(e.extractRotation(n.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}return-1!==(e=this.children.indexOf(t))&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(e,1)),this},attach:function(){var t=new g;return function(e){return this.updateWorldMatrix(!0,!1),t.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),t.multiply(e.parent.matrixWorld)),e.applyMatrix(t),e.updateWorldMatrix(!1,!1),this.add(e),this}}(),getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new r),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new r,e=new r;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),i=new n),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,i,e),i}}(),getWorldScale:function(){var t=new r,e=new n;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new r),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,i),i}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new r),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(e=0,i=(t=this.children).length;e<i;e++)t[e].updateWorldMatrix(!1,!0)},toJSON:function(t){function e(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}function i(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(a.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){a.geometry=e(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes)if(o=o.shapes,Array.isArray(o))for(var s=0,l=o.length;s<l;s++)e(t.shapes,o[s]);else e(t.shapes,o)}if(void 0!==this.material)if(Array.isArray(this.material)){for(o=[],s=0,l=this.material.length;s<l;s++)o.push(e(t.materials,this.material[s]));a.material=o}else a.material=e(t.materials,this.material);if(0<this.children.length)for(a.children=[],s=0;s<this.children.length;s++)a.children.push(this.children[s].toJSON(t).object);if(n){n=i(t.geometries),s=i(t.materials),l=i(t.textures);var c=i(t.images);o=i(t.shapes),0<n.length&&(r.geometries=n),0<s.length&&(r.materials=s),0<l.length&&(r.textures=l),0<c.length&&(r.images=c),0<o.length&&(r.shapes=o)}return r.object=a,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(e=0;e<t.children.length;e++)this.add(t.children[e].clone());return this}});var xa=0;S.prototype=Object.assign(Object.create(e.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(t){for(var e=(new a).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(t);for(i=0,n=this.faces.length;i<n;i++){(t=this.faces[i]).normal.applyMatrix3(e).normalize();for(var r=0,o=t.vertexNormals.length;r<o;r++)t.vertexNormals[r].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var t=new g;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new g;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new g;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new g;return function(e,i,n){return t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t=new g;return function(e,i,n){return t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new T;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,a,o){var s=void 0===c?[]:[n.colors[t].clone(),n.colors[e].clone(),n.colors[a].clone()];o=new w(t,e,a,void 0===l?[]:[(new r).fromArray(l,3*t),(new r).fromArray(l,3*e),(new r).fromArray(l,3*a)],s,o),n.faces.push(o),void 0!==h&&n.faceVertexUvs[0].push([(new i).fromArray(h,2*t),(new i).fromArray(h,2*e),(new i).fromArray(h,2*a)]),void 0!==u&&n.faceVertexUvs[1].push([(new i).fromArray(u,2*t),(new i).fromArray(u,2*e),(new i).fromArray(u,2*a)])}var n=this,a=null!==t.index?t.index.array:void 0,o=t.attributes,s=o.position.array,l=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,h=void 0!==o.uv?o.uv.array:void 0,u=void 0!==o.uv2?o.uv2.array:void 0;for(void 0!==u&&(this.faceVertexUvs[1]=[]),o=0;o<s.length;o+=3)n.vertices.push((new r).fromArray(s,o)),void 0!==c&&n.colors.push((new _).fromArray(c,o));var d=t.groups;if(0<d.length)for(o=0;o<d.length;o++){var p=(s=d[o]).start,f=p;for(p+=s.count;f<p;f+=3)void 0!==a?e(a[f],a[f+1],a[f+2],s.materialIndex):e(f,f+1,f+2,s.materialIndex)}else if(void 0!==a)for(o=0;o<a.length;o+=3)e(a[o],a[o+1],a[o+2]);else for(o=0;o<s.length/3;o+=3)e(o,o+1,o+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new r;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius;e=0===e?1:1/e;var i=new g;return i.set(e,0,0,-e*t.x,0,e,0,-e*t.y,0,0,e,-e*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new r,e=new r,i=0,n=this.faces.length;i<n;i++){var a=this.faces[i],o=this.vertices[a.a],s=this.vertices[a.b];t.subVectors(this.vertices[a.c],s),e.subVectors(o,s),t.cross(e),t.normalize(),a.normal.copy(t)}},computeVertexNormals:function(t){var e;void 0===t&&(t=!0);var i=Array(this.vertices.length),n=0;for(e=this.vertices.length;n<e;n++)i[n]=new r;if(t){var a=new r,o=new r;for(t=0,n=this.faces.length;t<n;t++){e=this.faces[t];var s=this.vertices[e.a],l=this.vertices[e.b],c=this.vertices[e.c];a.subVectors(c,l),o.subVectors(s,l),a.cross(o),i[e.a].add(a),i[e.b].add(a),i[e.c].add(a)}}else for(this.computeFaceNormals(),t=0,n=this.faces.length;t<n;t++)i[(e=this.faces[t]).a].add(e.normal),i[e.b].add(e.normal),i[e.c].add(e.normal);for(n=0,e=this.vertices.length;n<e;n++)i[n].normalize();for(t=0,n=this.faces.length;t<n;t++)3===(s=(e=this.faces[t]).vertexNormals).length?(s[0].copy(i[e.a]),s[1].copy(i[e.b]),s[2].copy(i[e.c])):(s[0]=i[e.a].clone(),s[1]=i[e.b].clone(),s[2]=i[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t;this.computeFaceNormals();var e=0;for(t=this.faces.length;e<t;e++){var i=this.faces[e],n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i=0;for(e=this.faces.length;i<e;i++){var n=this.faces[i];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var a=0;for(t=n.vertexNormals.length;a<t;a++)n.__originalVertexNormals[a]?n.__originalVertexNormals[a].copy(n.vertexNormals[a]):n.__originalVertexNormals[a]=n.vertexNormals[a].clone()}var o=new S;for(o.faces=this.faces,a=0,t=this.morphTargets.length;a<t;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[],n=this.morphNormals[a].faceNormals;var s=this.morphNormals[a].vertexNormals;for(i=0,e=this.faces.length;i<e;i++){var l=new r,c={a:new r,b:new r,c:new r};n.push(l),s.push(c)}}for(s=this.morphNormals[a],o.vertices=this.morphTargets[a].vertices,o.computeFaceNormals(),o.computeVertexNormals(),i=0,e=this.faces.length;i<e;i++)n=this.faces[i],l=s.faceNormals[i],c=s.vertexNormals[i],l.copy(n.normal),c.a.copy(n.vertexNormals[0]),c.b.copy(n.vertexNormals[1]),c.c.copy(n.vertexNormals[2])}for(i=0,e=this.faces.length;i<e;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new d),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new p),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var n,r=this.vertices.length,o=this.vertices,s=t.vertices,l=this.faces,c=t.faces,h=this.faceVertexUvs[0],u=t.faceVertexUvs[0],d=this.colors,p=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new a).getNormalMatrix(e)),t=0;for(var f=s.length;t<f;t++){var m=s[t].clone();void 0!==e&&m.applyMatrix4(e),o.push(m)}for(t=0,f=p.length;t<f;t++)d.push(p[t].clone());for(t=0,f=c.length;t<f;t++){var g=(s=c[t]).vertexNormals;for(p=s.vertexColors,(d=new w(s.a+r,s.b+r,s.c+r)).normal.copy(s.normal),void 0!==n&&d.normal.applyMatrix3(n).normalize(),e=0,o=g.length;e<o;e++)m=g[e].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),d.vertexNormals.push(m);for(d.color.copy(s.color),e=0,o=p.length;e<o;e++)m=p[e],d.vertexColors.push(m.clone());d.materialIndex=s.materialIndex+i,l.push(d)}for(t=0,f=u.length;t<f;t++)if(n=[],void 0!==(i=u[t])){for(e=0,o=i.length;e<o;e++)n.push(i[e].clone());h.push(n)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e={},i=[],n=[],r=Math.pow(10,4),a=0;for(t=this.vertices.length;a<t;a++){var o=this.vertices[a];void 0===e[o=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r)]?(e[o]=a,i.push(this.vertices[a]),n[a]=i.length-1):n[a]=n[e[o]]}for(e=[],a=0,t=this.faces.length;a<t;a++)for((r=this.faces[a]).a=n[r.a],r.b=n[r.b],r.c=n[r.c],r=[r.a,r.b,r.c],o=0;3>o;o++)if(r[o]===r[(o+1)%3]){e.push(a);break}for(a=e.length-1;0<=a;a--)for(r=e[a],this.faces.splice(r,1),n=0,t=this.faceVertexUvs.length;n<t;n++)this.faceVertexUvs[n].splice(r,1);return a=this.vertices.length-i.length,this.vertices=i,a},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var n=t[e];this.vertices.push(new r(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var n,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(a&&a.length===e&&(n=[]),o&&o.length===e&&(r=[]),i=0;i<e;i++){var s=t[i]._id;n&&n.push(a[s]),r&&r.push(o[s])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]||(c[e]=l.length/3,l.push(t.x,t.y,t.z)),c[e]}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]||(u[e]=h.length,h.push(t.getHex())),u[e]}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]||(p[e]=d.length/2,d.push(t.x,t.y)),p[e]}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a,o=this.parameters;for(a in o)void 0!==o[a]&&(r[a]=o[a]);return r}for(o=[],a=0;a<this.vertices.length;a++){var s=this.vertices[a];o.push(s.x,s.y,s.z)}s=[];var l=[],c={},h=[],u={},d=[],p={};for(a=0;a<this.faces.length;a++){var f=this.faces[a],m=void 0!==this.faceVertexUvs[0][a],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,_=0<f.vertexColors.length,b=0;b=t(b,0,0),b=t(b,1,!0),b=t(b,2,!1),b=t(b,3,m),b=t(b,4,g),b=t(b,5,v),b=t(b,6,y),b=t(b,7,_),s.push(b),s.push(f.a,f.b,f.c),s.push(f.materialIndex),m&&(m=this.faceVertexUvs[0][a],s.push(n(m[0]),n(m[1]),n(m[2]))),g&&s.push(e(f.normal)),v&&(g=f.vertexNormals,s.push(e(g[0]),e(g[1]),e(g[2]))),y&&s.push(i(f.color)),_&&(f=f.vertexColors,s.push(i(f[0]),i(f[1]),i(f[2])))}return r.data={},r.data.vertices=o,r.data.normals=l,0<h.length&&(r.data.colors=h),0<d.length&&(r.data.uvs=[d]),r.data.faces=s,r},clone:function(){return(new S).copy(this)},copy:function(t){var e,i,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var r=t.vertices,a=0;for(e=r.length;a<e;a++)this.vertices.push(r[a].clone());for(a=0,e=(r=t.colors).length;a<e;a++)this.colors.push(r[a].clone());for(a=0,e=(r=t.faces).length;a<e;a++)this.faces.push(r[a].clone());for(a=0,e=t.faceVertexUvs.length;a<e;a++){var o=t.faceVertexUvs[a];for(void 0===this.faceVertexUvs[a]&&(this.faceVertexUvs[a]=[]),r=0,i=o.length;r<i;r++){var s=o[r],l=[],c=0;for(n=s.length;c<n;c++)l.push(s[c].clone());this.faceVertexUvs[a].push(l)}}for(a=0,e=(c=t.morphTargets).length;a<e;a++){if((n={}).name=c[a].name,void 0!==c[a].vertices)for(n.vertices=[],r=0,i=c[a].vertices.length;r<i;r++)n.vertices.push(c[a].vertices[r].clone());if(void 0!==c[a].normals)for(n.normals=[],r=0,i=c[a].normals.length;r<i;r++)n.normals.push(c[a].normals[r].clone());this.morphTargets.push(n)}for(a=0,e=(c=t.morphNormals).length;a<e;a++){if(n={},void 0!==c[a].vertexNormals)for(n.vertexNormals=[],r=0,i=c[a].vertexNormals.length;r<i;r++)o=c[a].vertexNormals[r],(s={}).a=o.a.clone(),s.b=o.b.clone(),s.c=o.c.clone(),n.vertexNormals.push(s);if(void 0!==c[a].faceNormals)for(n.faceNormals=[],r=0,i=c[a].faceNormals.length;r<i;r++)n.faceNormals.push(c[a].faceNormals[r].clone());this.morphNormals.push(n)}for(a=0,e=(r=t.skinWeights).length;a<e;a++)this.skinWeights.push(r[a].clone());for(a=0,e=(r=t.skinIndices).length;a<e;a++)this.skinIndices.push(r[a].clone());for(a=0,e=(r=t.lineDistances).length;a<e;a++)this.lineDistances.push(r[a]);return null!==(a=t.boundingBox)&&(this.boundingBox=a.clone()),null!==(a=t.boundingSphere)&&(this.boundingSphere=a.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(A.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(A.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new _),e[i++]=a.r,e[i++]=a.g,e[i++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new i),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,a=t.length;n<a;n++){var o=t[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new r),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new s),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z,e[i++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),C.prototype=Object.create(A.prototype),C.prototype.constructor=C,L.prototype=Object.create(A.prototype),L.prototype.constructor=L,D.prototype=Object.create(A.prototype),D.prototype.constructor=D,P.prototype=Object.create(A.prototype),P.prototype.constructor=P,R.prototype=Object.create(A.prototype),R.prototype.constructor=R,O.prototype=Object.create(A.prototype),O.prototype.constructor=O,I.prototype=Object.create(A.prototype),I.prototype.constructor=I,z.prototype=Object.create(A.prototype),z.prototype.constructor=z,N.prototype=Object.create(A.prototype),N.prototype.constructor=N,Object.assign(k.prototype,{computeGroups:function(t){var e=[],i=void 0;t=t.faces;for(var n=0;n<t.length;n++){var r=t[n];if(r.materialIndex!==i){i=r.materialIndex,void 0!==a&&(a.count=3*n-a.start,e.push(a));var a={start:3*n,materialIndex:i}}}void 0!==a&&(a.count=3*n-a.start,e.push(a)),this.groups=e},fromGeometry:function(t){var e=t.faces,n=t.vertices,r=t.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=t.morphTargets,l=s.length;if(0<l){for(var c=[],h=0;h<l;h++)c[h]={name:s[h].name,data:[]};this.morphTargets.position=c}var u=t.morphNormals,d=u.length;if(0<d){var p=[];for(h=0;h<d;h++)p[h]={name:u[h].name,data:[]};this.morphTargets.normal=p}var f=t.skinIndices,m=t.skinWeights,g=f.length===n.length,v=m.length===n.length;for(0<n.length&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),h=0;h<e.length;h++){var y=e[h];this.vertices.push(n[y.a],n[y.b],n[y.c]);var _=y.vertexNormals;for(3===_.length?this.normals.push(_[0],_[1],_[2]):(_=y.normal,this.normals.push(_,_,_)),3===(_=y.vertexColors).length?this.colors.push(_[0],_[1],_[2]):(_=y.color,this.colors.push(_,_,_)),!0===a&&(void 0!==(_=r[0][h])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new i,new i,new i))),!0===o&&(void 0!==(_=r[1][h])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new i,new i,new i))),_=0;_<l;_++){var b=s[_].vertices;c[_].data.push(b[y.a],b[y.b],b[y.c])}for(_=0;_<d;_++)b=u[_].vertexNormals[h],p[_].data.push(b.a,b.b,b.c);g&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var wa=1;B.prototype=Object.assign(Object.create(e.prototype),{constructor:B,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<F(t)?I:R)(t,1):this.index=t},addAttribute:function(t,e,i){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new A(e,i)))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;return void 0!==i&&((e=(new a).getNormalMatrix(t)).applyToBufferAttribute(i),i.needsUpdate=!0),void 0!==(i=this.attributes.tangent)&&((e=(new a).getNormalMatrix(t)).applyToBufferAttribute(i),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new g;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new g;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new g;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new g;return function(e,i,n){return t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t=new g;return function(e,i,n){return t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t=new T;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new r;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){t=new z(3*e.vertices.length,3);var i=new z(3*e.colors.length,3);this.addAttribute("position",t.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length&&(t=new z(e.lineDistances.length,1),this.addAttribute("lineDistance",t.copyArray(e.lineDistances))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new z(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}return!0===e.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(void 0!==(i=this.attributes.normal)&&(i.copyVector3sArray(e.normals),i.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(e.colors),i.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(e.uvs),i.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(e.lineDistances),i.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new k).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);for(var i in this.addAttribute("position",new A(e,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.addAttribute("normal",new A(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.addAttribute("color",new A(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(e=new Float32Array(2*t.uvs.length),this.addAttribute("uv",new A(e,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(e=new Float32Array(2*t.uvs2.length),this.addAttribute("uv2",new A(e,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){e=[];for(var n=t.morphTargets[i],r=0,a=n.length;r<a;r++){var o=n[r],s=new z(3*o.data.length,3);s.name=o.name,e.push(s.copyVector3sArray(o.data))}this.morphAttributes[i]=e}return 0<t.skinIndices.length&&(i=new z(4*t.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(i=new z(4*t.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){var t=new d;return function(){null===this.boundingBox&&(this.boundingBox=new d);var e=this.attributes.position,i=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),i){e=0;for(var n=i.length;e<n;e++)t.setFromBufferAttribute(i[e]),this.boundingBox.expandByPoint(t.min),this.boundingBox.expandByPoint(t.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new d,e=new d,i=new r;return function(){null===this.boundingSphere&&(this.boundingSphere=new p);var n=this.attributes.position,r=this.morphAttributes.position;if(n){var a=this.boundingSphere.center;if(t.setFromBufferAttribute(n),r)for(var o=0,s=r.length;o<s;o++){var l=r[o];e.setFromBufferAttribute(l),t.expandByPoint(e.min),t.expandByPoint(e.max)}t.getCenter(a);var c=0;for(o=0,s=n.count;o<s;o++)i.fromBufferAttribute(n,o),c=Math.max(c,a.distanceToSquared(i));if(r)for(o=0,s=r.length;o<s;o++){n=0;for(var h=(l=r[o]).count;n<h;n++)i.fromBufferAttribute(l,n),c=Math.max(c,a.distanceToSquared(i))}this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new A(new Float32Array(i.length),3));else for(var n=e.normal.array,a=0,o=n.length;a<o;a++)n[a]=0;n=e.normal.array;var s=new r,l=new r,c=new r,h=new r,u=new r;if(t){var d=t.array;for(a=0,o=t.count;a<o;a+=3){t=3*d[a+0];var p=3*d[a+1],f=3*d[a+2];s.fromArray(i,t),l.fromArray(i,p),c.fromArray(i,f),h.subVectors(c,l),u.subVectors(s,l),h.cross(u),n[t]+=h.x,n[t+1]+=h.y,n[t+2]+=h.z,n[p]+=h.x,n[p+1]+=h.y,n[p+2]+=h.z,n[f]+=h.x,n[f+1]+=h.y,n[f+2]+=h.z}}else for(a=0,o=i.length;a<o;a+=9)s.fromArray(i,a),l.fromArray(i,a+3),c.fromArray(i,a+6),h.subVectors(c,l),u.subVectors(s,l),h.cross(u),n[a]=h.x,n[a+1]=h.y,n[a+2]=h.z,n[a+3]=h.x,n[a+4]=h.y,n[a+5]=h.z,n[a+6]=h.x,n[a+7]=h.y,n[a+8]=h.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i,n=this.attributes;for(i in n)if(void 0!==t.attributes[i]){var r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e;a=Math.min(o.length,r.length-s);for(var l=0;l<a;l++,s++)r[s]=o[l]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new r;return function(){for(var e=this.attributes.normal,i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.normalize(),e.setXYZ(i,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){var i=t.array;t=t.itemSize;for(var n,r=new i.constructor(e.length*t),a=0,o=0,s=e.length;o<s;o++){n=e[o]*t;for(var l=0;l<t;l++)r[a++]=i[n++]}return new A(r,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e,i=new B,n=this.index.array,r=this.attributes;for(e in r){var a=r[e];a=t(a,n),i.addAttribute(e,a)}var o=this.morphAttributes;for(e in o){var s=[],l=o[e];r=0;for(var c=l.length;r<c;r++)a=t(a=l[r],n),s.push(a);i.morphAttributes[e]=s}for(r=0,e=(n=this.groups).length;r<e;r++)a=n[r],i.addGroup(a.start,a.count,a.materialIndex);return i},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(c in e)void 0!==e[c]&&(t[c]=e[c]);return t}t.data={attributes:{}},null!==(e=this.index)&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});var i=this.attributes;for(c in i){var n=(e=i[c]).toJSON();""!==e.name&&(n.name=e.name),t.data.attributes[c]=n}i={};var r=!1;for(c in this.morphAttributes){for(var a=this.morphAttributes[c],o=[],s=0,l=a.length;s<l;s++)n=(e=a[s]).toJSON(),""!==e.name&&(n.name=e.name),o.push(n);0<o.length&&(i[c]=o,r=!0)}r&&(t.data.morphAttributes=i);var c=this.groups;return 0<c.length&&(t.data.groups=JSON.parse(JSON.stringify(c))),null!==(c=this.boundingSphere)&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new B).copy(this)},copy:function(t){var e;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=t.name;var i=t.index;for(o in null!==i&&this.setIndex(i.clone()),i=t.attributes)this.addAttribute(o,i[o].clone());var n=t.morphAttributes;for(o in n){var r=[],a=n[o];for(i=0,e=a.length;i<e;i++)r.push(a[i].clone());this.morphAttributes[o]=r}var o=t.groups;for(i=0,e=o.length;i<e;i++)n=o[i],this.addGroup(n.start,n.count,n.materialIndex);return null!==(o=t.boundingBox)&&(this.boundingBox=o.clone()),null!==(o=t.boundingSphere)&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),U.prototype=Object.create(S.prototype),U.prototype.constructor=U,H.prototype=Object.create(B.prototype),H.prototype.constructor=H,G.prototype=Object.create(S.prototype),G.prototype.constructor=G,j.prototype=Object.create(B.prototype),j.prototype.constructor=j;var Ma=0;V.prototype=Object.assign(Object.create(e.prototype),{constructor:V,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0===i)console.warn("THREE.Material: '"+e+"' parameter is undefined.");else if("shading"===e)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else{var n=this[e];void 0===n?console.warn("THREE."+this.type+": '"+e+"' is not a property of this material."):n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i}}},toJSON:function(t){function e(t){var e,i=[];for(e in t){var n=t[e];delete n.metadata,i.push(n)}return i}var i=void 0===t||"string"==typeof t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),i&&(i=e(t.textures),t=e(t.images),0<i.length&&(n.textures=i),0<t.length&&(n.images=t)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),W.prototype=Object.create(V.prototype),W.prototype.constructor=W,W.prototype.isShaderMaterial=!0,W.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=v(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},W.prototype.toJSON=function(t){var e=V.prototype.toJSON.call(this,t);for(var i in e.uniforms={},this.uniforms){var n=this.uniforms[i].value;e.uniforms[i]=n&&n.isTexture?{type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}for(var r in 0<Object.keys(this.defines).length&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,t={},this.extensions)!0===this.extensions[r]&&(t[r]=!0);return 0<Object.keys(t).length&&(e.extensions=t),e},Object.assign(q.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new r),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new r;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new r),e.subVectors(t,this.origin),0>(t=e.dot(this.direction))?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new r;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return 0>i?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new r,e=new r,i=new r;return function(n,r,a,o){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var s=.5*n.distanceTo(r),l=-this.direction.dot(e),c=i.dot(this.direction),h=-i.dot(e),u=i.lengthSq(),d=Math.abs(1-l*l);if(0<d){r=l*c-h;var p=s*d;0<=(n=l*h-c)?r>=-p?r<=p?l=(n*=s=1/d)*(n+l*(r*=s)+2*c)+r*(l*n+r+2*h)+u:(r=s,l=-(n=Math.max(0,-(l*r+c)))*n+r*(r+2*h)+u):(r=-s,l=-(n=Math.max(0,-(l*r+c)))*n+r*(r+2*h)+u):r<=-p?l=-(n=Math.max(0,-(-l*s+c)))*n+(r=0<n?-s:Math.min(Math.max(-s,-h),s))*(r+2*h)+u:r<=p?(n=0,l=(r=Math.min(Math.max(-s,-h),s))*(r+2*h)+u):l=-(n=Math.max(0,-(l*s+c)))*n+(r=0<n?s:Math.min(Math.max(-s,-h),s))*(r+2*h)+u}else r=0<l?-s:s,l=-(n=Math.max(0,-(l*r+c)))*n+r*(r+2*h)+u;return a&&a.copy(this.direction).multiplyScalar(n).add(this.origin),o&&o.copy(e).multiplyScalar(r).add(t),l}}(),intersectSphere:function(){var t=new r;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n;return r>(e=e.radius*e.radius)?null:(r=n-(e=Math.sqrt(e-r)),n+=e,0>r&&0>n?null:0>r?this.at(n,i):this.at(r,i))}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);return 0===e?0===t.distanceToPoint(this.origin)?0:null:0<=(t=-(this.origin.dot(t.normal)+t.constant)/e)?t:null},intersectPlane:function(t,e){return null===(t=this.distanceToPlane(t))?null:this.at(t,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||0>t.normal.dot(this.direction)*e},intersectBox:function(t,e){var i=1/this.direction.x,n=1/this.direction.y,r=1/this.direction.z,a=this.origin;if(0<=i){var o=(t.min.x-a.x)*i;i*=t.max.x-a.x}else o=(t.max.x-a.x)*i,i*=t.min.x-a.x;if(0<=n){var s=(t.min.y-a.y)*n;n*=t.max.y-a.y}else s=(t.max.y-a.y)*n,n*=t.min.y-a.y;return o>n||s>i?null:((s>o||o!=o)&&(o=s),(n<i||i!=i)&&(i=n),0<=r?(s=(t.min.z-a.z)*r,t=(t.max.z-a.z)*r):(s=(t.max.z-a.z)*r,t=(t.min.z-a.z)*r),o>t||s>i?null:((s>o||o!=o)&&(o=s),(t<i||i!=i)&&(i=t),0>i?null:this.at(0<=o?o:i,e)))},intersectsBox:function(){var t=new r;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new r,e=new r,i=new r,n=new r;return function(r,a,o,s,l){if(e.subVectors(a,r),i.subVectors(o,r),n.crossVectors(e,i),0<(a=this.direction.dot(n))){if(s)return null;s=1}else{if(!(0>a))return null;s=-1,a=-a}return t.subVectors(this.origin,r),0>(r=s*this.direction.dot(i.crossVectors(t,i)))||0>(o=s*this.direction.dot(e.cross(t)))||r+o>a||0>(r=-s*t.dot(n))?null:this.at(r/a,l)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(X,{getNormal:function(){var t=new r;return function(e,i,n,a){return void 0===a&&(console.warn("THREE.Triangle: .getNormal() target is now required"),a=new r),a.subVectors(n,i),t.subVectors(e,i),a.cross(t),0<(e=a.lengthSq())?a.multiplyScalar(1/Math.sqrt(e)):a.set(0,0,0)}}(),getBarycoord:function(){var t=new r,e=new r,i=new r;return function(n,a,o,s,l){t.subVectors(s,a),e.subVectors(o,a),i.subVectors(n,a),n=t.dot(t),a=t.dot(e),o=t.dot(i);var c=e.dot(e);s=e.dot(i);var h=n*c-a*a;return void 0===l&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),l=new r),0===h?l.set(-2,-1,-1):(c=(c*o-a*s)*(h=1/h),n=(n*s-a*o)*h,l.set(1-c-n,n,c))}}(),containsPoint:function(){var t=new r;return function(e,i,n,r){return X.getBarycoord(e,i,n,r,t),0<=t.x&&0<=t.y&&1>=t.x+t.y}}(),getUV:function(){var t=new r;return function(e,i,n,r,a,o,s,l){return this.getBarycoord(e,i,n,r,t),l.set(0,0),l.addScaledVector(a,t.x),l.addScaledVector(o,t.y),l.addScaledVector(s,t.z),l}}(),isFrontFacing:function(){var t=new r,e=new r;return function(i,n,r,a){return t.subVectors(r,n),e.subVectors(i,n),0>t.cross(e).dot(a)}}()}),Object.assign(X.prototype,{set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new r,e=new r;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new r),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return X.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new r),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return X.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,i,n,r){return X.getUV(t,this.a,this.b,this.c,e,i,n,r)},containsPoint:function(t){return X.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return X.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new r,e=new r,i=new r,n=new r,a=new r,o=new r;return function(s,l){void 0===l&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),l=new r);var c=this.a,h=this.b,u=this.c;t.subVectors(h,c),e.subVectors(u,c),n.subVectors(s,c);var d=t.dot(n),p=e.dot(n);if(0>=d&&0>=p)return l.copy(c);a.subVectors(s,h);var f=t.dot(a),m=e.dot(a);if(0<=f&&m<=f)return l.copy(h);var g=d*m-f*p;if(0>=g&&0<=d&&0>=f)return h=d/(d-f),l.copy(c).addScaledVector(t,h);o.subVectors(s,u),s=t.dot(o);var v=e.dot(o);return 0<=v&&s<=v?l.copy(u):0>=(d=s*p-d*v)&&0<=p&&0>=v?(g=p/(p-v),l.copy(c).addScaledVector(e,g)):0>=(p=f*v-s*m)&&0<=m-f&&0<=s-v?(i.subVectors(u,h),g=(m-f)/(m-f+(s-v)),l.copy(h).addScaledVector(i,g)):(h=d*(u=1/(p+d+g)),g*=u,l.copy(c).addScaledVector(t,h).addScaledVector(e,g))}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Y.prototype=Object.create(V.prototype),Y.prototype.constructor=Y,Y.prototype.isMeshBasicMaterial=!0,Y.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Z.prototype=Object.assign(Object.create(T.prototype),{constructor:Z,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return T.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){t=t.morphAttributes;var e=Object.keys(t);if(0<e.length){var i=t[e[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=i.length;t<e;t++){var n=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}else void 0!==(t=t.morphTargets)&&0<t.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(){function t(t,e,i,n,r,a,o,s){return null===(1===e.side?n.intersectTriangle(o,a,r,!0,s):n.intersectTriangle(r,a,o,2!==e.side,s))?null:(M.copy(s),M.applyMatrix4(t.matrixWorld),(e=i.ray.origin.distanceTo(M))<i.near||e>i.far?null:{distance:e,point:M.clone(),object:t})}function e(e,n,r,a,o,p,g,M,E,T){if(s.fromBufferAttribute(o,M),l.fromBufferAttribute(o,E),c.fromBufferAttribute(o,T),o=e.morphTargetInfluences,n.morphTargets&&p&&o){f.set(0,0,0),m.set(0,0,0),v.set(0,0,0);for(var S=0,A=p.length;S<A;S++){var C=o[S],L=p[S];0!==C&&(h.fromBufferAttribute(L,M),u.fromBufferAttribute(L,E),d.fromBufferAttribute(L,T),f.addScaledVector(h.sub(s),C),m.addScaledVector(u.sub(l),C),v.addScaledVector(d.sub(c),C))}s.add(f),l.add(m),c.add(v)}return(e=t(e,n,r,a,s,l,c,x))&&(g&&(y.fromBufferAttribute(g,M),_.fromBufferAttribute(g,E),b.fromBufferAttribute(g,T),e.uv=X.getUV(x,s,l,c,y,_,b,new i)),g=new w(M,E,T),X.getNormal(s,l,c,g.normal),e.face=g),e}var n=new g,a=new q,o=new p,s=new r,l=new r,c=new r,h=new r,u=new r,d=new r,f=new r,m=new r,v=new r,y=new i,_=new i,b=new i,x=new r,M=new r;return function(r,s){var l=this.geometry,c=this.material,h=this.matrixWorld;if(void 0!==c&&(null===l.boundingSphere&&l.computeBoundingSphere(),o.copy(l.boundingSphere),o.applyMatrix4(h),!1!==r.ray.intersectsSphere(o)&&(n.getInverse(h),a.copy(r.ray).applyMatrix4(n),null===l.boundingBox||!1!==a.intersectsBox(l.boundingBox))))if(l.isBufferGeometry){var u=l.index;h=l.attributes.position;var d,p,f=l.morphAttributes.position,m=l.attributes.uv,g=l.groups,v=l.drawRange;if(null!==u)if(Array.isArray(c)){var w=0;for(d=g.length;w<d;w++){var M=g[w],E=c[M.materialIndex],T=Math.max(M.start,v.start);for(p=l=Math.min(M.start+M.count,v.start+v.count);T<p;T+=3){l=u.getX(T);var S=u.getX(T+1),A=u.getX(T+2);(l=e(this,E,r,a,h,f,m,l,S,A))&&(l.faceIndex=Math.floor(T/3),l.face.materialIndex=M.materialIndex,s.push(l))}}}else for(w=T=Math.max(0,v.start),d=l=Math.min(u.count,v.start+v.count);w<d;w+=3)l=u.getX(w),S=u.getX(w+1),A=u.getX(w+2),(l=e(this,c,r,a,h,f,m,l,S,A))&&(l.faceIndex=Math.floor(w/3),s.push(l));else if(void 0!==h)if(Array.isArray(c))for(w=0,d=g.length;w<d;w++)for(E=c[(M=g[w]).materialIndex],T=Math.max(M.start,v.start),p=l=Math.min(M.start+M.count,v.start+v.count);T<p;T+=3)(l=e(this,E,r,a,h,f,m,l=T,S=T+1,A=T+2))&&(l.faceIndex=Math.floor(T/3),l.face.materialIndex=M.materialIndex,s.push(l));else for(w=T=Math.max(0,v.start),d=l=Math.min(h.count,v.start+v.count);w<d;w+=3)(l=e(this,c,r,a,h,f,m,l=w,S=w+1,A=w+2))&&(l.faceIndex=Math.floor(w/3),s.push(l))}else if(l.isGeometry)for(h=Array.isArray(c),f=l.vertices,m=l.faces,0<(l=l.faceVertexUvs[0]).length&&(u=l),d=0,M=m.length;d<M;d++)E=m[d],void 0!==(l=h?c[E.materialIndex]:c)&&(g=f[E.a],v=f[E.b],w=f[E.c],l=t(this,l,r,a,g,v,w,x))&&(u&&u[d]&&(T=u[d],y.copy(T[0]),_.copy(T[1]),b.copy(T[2]),l.uv=X.getUV(x,g,v,w,y,_,b,new i)),l.face=E,l.faceIndex=d,s.push(l))}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),st.prototype=Object.create(o.prototype),st.prototype.constructor=st,st.prototype.isCubeTexture=!0,Object.defineProperty(st.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),lt.prototype=Object.create(o.prototype),lt.prototype.constructor=lt,lt.prototype.isDataTexture2DArray=!0,ct.prototype=Object.create(o.prototype),ct.prototype.constructor=ct,ct.prototype.isDataTexture3D=!0;var Ea=new o,Ta=new lt,Sa=new ct,Aa=new st,Ca=[],La=[],Da=new Float32Array(16),Pa=new Float32Array(9),Ra=new Float32Array(4);jt.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),dt(e,t)},Vt.prototype.setValue=function(t,e,i){for(var n=this.seq,r=0,a=n.length;r!==a;++r){var o=n[r];o.setValue(t,e[o.id],i)}};var Oa=/([\w\d_]+)(\])?(\[|\.)?/g;Wt.prototype.setValue=function(t,e,i,n){void 0!==(e=this.map[e])&&e.setValue(t,i,n)},Wt.prototype.setOptional=function(t,e,i){void 0!==(e=e[i])&&this.setValue(t,i,e)},Wt.upload=function(t,e,i,n){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=i[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,n)}},Wt.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var a=t[n];a.id in e&&i.push(a)}return i};var Ia=0,za=0;pe.prototype=Object.create(V.prototype),pe.prototype.constructor=pe,pe.prototype.isMeshDepthMaterial=!0,pe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},fe.prototype=Object.create(V.prototype),fe.prototype.constructor=fe,fe.prototype.isMeshDistanceMaterial=!0,fe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},_e.prototype=Object.assign(Object.create(T.prototype),{constructor:_e,isGroup:!0}),be.prototype=Object.assign(Object.create(T.prototype),{constructor:be,isCamera:!0,copy:function(t,e){return T.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new r),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){T.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),xe.prototype=Object.assign(Object.create(be.prototype),{constructor:xe,isPerspectiveCamera:!0,copy:function(t,e){return be.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t,this.fov=2*ua.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*ua.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*ua.RAD2DEG*Math.atan(Math.tan(.5*ua.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*ua.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/o,e-=a.offsetY*i/s,n*=a.width/o,i*=a.height/s}0!==(a=this.filmOffset)&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=T.prototype.toJSON.call(this,t)).object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),we.prototype=Object.assign(Object.create(xe.prototype),{constructor:we,isArrayCamera:!0});var Na,ka=new r,Fa=new r;Object.assign(Ae.prototype,{isFogExp2:!0,clone:function(){return new Ae(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Ce.prototype,{isFog:!0,clone:function(){return new Ce(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Le.prototype=Object.assign(Object.create(T.prototype),{constructor:Le,isScene:!0,copy:function(t,e){return T.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=T.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(De.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(De.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(Pe.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Pe.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}}),Re.prototype=Object.create(V.prototype),Re.prototype.constructor=Re,Re.prototype.isSpriteMaterial=!0,Re.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},Oe.prototype=Object.assign(Object.create(T.prototype),{constructor:Oe,isSprite:!0,raycast:function(){function t(t,e,i,n,r,a){o.subVectors(t,i).addScalar(.5).multiply(n),void 0!==r?(s.x=a*o.x-r*o.y,s.y=r*o.x+a*o.y):s.copy(o),t.copy(e),t.x+=s.x,t.y+=s.y,t.applyMatrix4(l)}var e=new r,n=new r,a=new r,o=new i,s=new i,l=new g,c=new r,h=new r,u=new r,d=new i,p=new i,f=new i;return function(r,o){n.setFromMatrixScale(this.matrixWorld),l.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),a.setFromMatrixPosition(this.modelViewMatrix);var s=this.material.rotation;if(0!==s)var m=Math.cos(s),g=Math.sin(s);s=this.center,t(c.set(-.5,-.5,0),a,s,n,g,m),t(h.set(.5,-.5,0),a,s,n,g,m),t(u.set(.5,.5,0),a,s,n,g,m),d.set(0,0),p.set(1,0),f.set(1,1);var v=r.ray.intersectTriangle(c,h,u,!1,e);null===v&&(t(h.set(-.5,.5,0),a,s,n,g,m),p.set(0,1),null===(v=r.ray.intersectTriangle(c,u,h,!1,e)))||(g=r.ray.origin.distanceTo(e))<r.near||g>r.far||o.push({distance:g,point:e.clone(),uv:X.getUV(e,c,h,u,d,p,f,new i),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return T.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Ie.prototype=Object.assign(Object.create(T.prototype),{constructor:Ie,isLOD:!0,copy:function(t){T.prototype.copy.call(this,t,!1);for(var e=0,i=(t=t.levels).length;e<i;e++){var n=t[e];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object},raycast:function(){var t=new r;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(t);this.getObjectForDistance(n).raycast(e,i)}}(),update:function(){var t=new r,e=new r;return function(i){var n=this.levels;if(1<n.length){t.setFromMatrixPosition(i.matrixWorld),e.setFromMatrixPosition(this.matrixWorld),i=t.distanceTo(e),n[0].object.visible=!0;for(var r=1,a=n.length;r<a&&i>=n[r].distance;r++)n[r-1].object.visible=!1,n[r].object.visible=!0;for(;r<a;r++)n[r].object.visible=!1}}}(),toJSON:function(t){(t=T.prototype.toJSON.call(this,t)).object.levels=[];for(var e=this.levels,i=0,n=e.length;i<n;i++){var r=e[i];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}),ze.prototype=Object.assign(Object.create(Z.prototype),{constructor:ze,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new s,e=this.geometry.attributes.skinWeight,i=0,n=e.count;i<n;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);var r=1/t.manhattanLength();1/0!==r?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Z.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(Ne.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new g;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){var t,e,i=0;for(e=this.bones.length;i<e;i++)(t=this.bones[i])&&t.matrixWorld.getInverse(this.boneInverses[i]);for(i=0,e=this.bones.length;i<e;i++)(t=this.bones[i])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new g,e=new g;return function(){for(var i=this.bones,n=this.boneInverses,r=this.boneMatrices,a=this.boneTexture,o=0,s=i.length;o<s;o++)t.multiplyMatrices(i[o]?i[o].matrixWorld:e,n[o]),t.toArray(r,16*o);void 0!==a&&(a.needsUpdate=!0)}}(),clone:function(){return new Ne(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var n=this.bones[e];if(n.name===t)return n}}}),ke.prototype=Object.assign(Object.create(T.prototype),{constructor:ke,isBone:!0}),Fe.prototype=Object.create(V.prototype),Fe.prototype.constructor=Fe,Fe.prototype.isLineBasicMaterial=!0,Fe.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Be.prototype=Object.assign(Object.create(T.prototype),{constructor:Be,isLine:!0,computeLineDistances:function(){var t=new r,e=new r;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[0],a=1,o=n.count;a<o;a++)t.fromBufferAttribute(n,a-1),e.fromBufferAttribute(n,a),r[a]=r[a-1],r[a]+=t.distanceTo(e);i.addAttribute("lineDistance",new z(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry)for(n=i.vertices,(r=i.lineDistances)[0]=0,a=1,o=n.length;a<o;a++)r[a]=r[a-1],r[a]+=n[a-1].distanceTo(n[a]);return this}}(),raycast:function(){var t=new g,e=new q,i=new p;return function(n,a){var o=n.linePrecision,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),i.copy(s.boundingSphere),i.applyMatrix4(l),i.radius+=o,!1!==n.ray.intersectsSphere(i)){t.getInverse(l),e.copy(n.ray).applyMatrix4(t),o/=(this.scale.x+this.scale.y+this.scale.z)/3,o*=o;var c=new r,h=new r;l=new r;var u=new r,d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,f=s.attributes.position.array;if(null!==p){s=0;for(var m=(p=p.array).length-1;s<m;s+=d){var g=p[s+1];c.fromArray(f,3*p[s]),h.fromArray(f,3*g),(g=e.distanceSqToSegment(c,h,u,l))>o||(u.applyMatrix4(this.matrixWorld),(g=n.ray.origin.distanceTo(u))<n.near||g>n.far||a.push({distance:g,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}else for(s=0,m=f.length/3-1;s<m;s+=d)c.fromArray(f,3*s),h.fromArray(f,3*s+3),(g=e.distanceSqToSegment(c,h,u,l))>o||(u.applyMatrix4(this.matrixWorld),(g=n.ray.origin.distanceTo(u))<n.near||g>n.far||a.push({distance:g,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}else if(s.isGeometry)for(h=(c=s.vertices).length,s=0;s<h-1;s+=d)(g=e.distanceSqToSegment(c[s],c[s+1],u,l))>o||(u.applyMatrix4(this.matrixWorld),(g=n.ray.origin.distanceTo(u))<n.near||g>n.far||a.push({distance:g,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ue.prototype=Object.assign(Object.create(Be.prototype),{constructor:Ue,isLineSegments:!0,computeLineDistances:function(){var t=new r,e=new r;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[],a=0,o=n.count;a<o;a+=2)t.fromBufferAttribute(n,a),e.fromBufferAttribute(n,a+1),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+t.distanceTo(e);i.addAttribute("lineDistance",new z(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry)for(n=i.vertices,r=i.lineDistances,a=0,o=n.length;a<o;a+=2)t.copy(n[a]),e.copy(n[a+1]),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+t.distanceTo(e);return this}}()}),He.prototype=Object.assign(Object.create(Be.prototype),{constructor:He,isLineLoop:!0}),Ge.prototype=Object.create(V.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isPointsMaterial=!0,Ge.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},je.prototype=Object.assign(Object.create(T.prototype),{constructor:je,isPoints:!0,raycast:function(){var t=new g,e=new q,i=new p;return function(n,a){function o(t,i){var r=e.distanceSqToPoint(t);r<u&&(e.closestPointToPoint(t,d),d.applyMatrix4(c),(t=n.ray.origin.distanceTo(d))<n.near||t>n.far||a.push({distance:t,distanceToRay:Math.sqrt(r),point:d.clone(),index:i,face:null,object:s}))}var s=this,l=this.geometry,c=this.matrixWorld,h=n.params.Points.threshold;if(null===l.boundingSphere&&l.computeBoundingSphere(),i.copy(l.boundingSphere),i.applyMatrix4(c),i.radius+=h,!1!==n.ray.intersectsSphere(i)){t.getInverse(c),e.copy(n.ray).applyMatrix4(t);var u=(h/=(this.scale.x+this.scale.y+this.scale.z)/3)*h;h=new r;var d=new r;if(l.isBufferGeometry){var p=l.index;if(l=l.attributes.position.array,null!==p){var f=p.array;p=0;for(var m=f.length;p<m;p++){var g=f[p];h.fromArray(l,3*g),o(h,g)}}else for(p=0,f=l.length/3;p<f;p++)h.fromArray(l,3*p),o(h,p)}else for(p=0,f=(h=l.vertices).length;p<f;p++)o(h[p],p)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ve.prototype=Object.assign(Object.create(o.prototype),{constructor:Ve,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),We.prototype=Object.create(o.prototype),We.prototype.constructor=We,We.prototype.isCompressedTexture=!0,qe.prototype=Object.create(o.prototype),qe.prototype.constructor=qe,qe.prototype.isCanvasTexture=!0,Xe.prototype=Object.create(o.prototype),Xe.prototype.constructor=Xe,Xe.prototype.isDepthTexture=!0,Ye.prototype=Object.create(B.prototype),Ye.prototype.constructor=Ye,Ze.prototype=Object.create(S.prototype),Ze.prototype.constructor=Ze,Je.prototype=Object.create(B.prototype),Je.prototype.constructor=Je,Qe.prototype=Object.create(S.prototype),Qe.prototype.constructor=Qe,Ke.prototype=Object.create(B.prototype),Ke.prototype.constructor=Ke,$e.prototype=Object.create(S.prototype),$e.prototype.constructor=$e,ti.prototype=Object.create(Ke.prototype),ti.prototype.constructor=ti,ei.prototype=Object.create(S.prototype),ei.prototype.constructor=ei,ii.prototype=Object.create(Ke.prototype),ii.prototype.constructor=ii,ni.prototype=Object.create(S.prototype),ni.prototype.constructor=ni,ri.prototype=Object.create(Ke.prototype),ri.prototype.constructor=ri,ai.prototype=Object.create(S.prototype),ai.prototype.constructor=ai,oi.prototype=Object.create(Ke.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(S.prototype),si.prototype.constructor=si,li.prototype=Object.create(B.prototype),li.prototype.constructor=li,li.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},ci.prototype=Object.create(S.prototype),ci.prototype.constructor=ci,hi.prototype=Object.create(B.prototype),hi.prototype.constructor=hi,ui.prototype=Object.create(S.prototype),ui.prototype.constructor=ui,di.prototype=Object.create(B.prototype),di.prototype.constructor=di;var Ba={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},isClockWise:function(t){return 0>Ba.area(t)},triangulateShape:function(t,e){var i=[],n=[],r=[];Ci(t),Li(i,t);var a=t.length;for(e.forEach(Ci),t=0;t<e.length;t++)n.push(a),a+=e[t].length,Li(i,e[t]);for(e=function(t,e,i){i=i||2;var n,r=e&&e.length,a=r?e[0]*i:t.length,o=pi(t,0,a,i,!0),s=[];if(!o)return s;if(r){var l,c=i;r=[];var h=0;for(l=e.length;h<l;h++){var u=e[h]*c;(u=pi(t,u,h<l-1?e[h+1]*c:t.length,c,!1))===u.next&&(u.steiner=!0),r.push(yi(u))}for(r.sort(mi),h=0;h<r.length;h++)(c=gi(e=r[h],c=o))&&fi(e=Ei(c,e),e.next),o=fi(o,o.next)}if(t.length>80*i){var d=n=t[0],p=r=t[1];for(c=i;c<a;c+=i)(h=t[c])<d&&(d=h),(e=t[c+1])<p&&(p=e),h>n&&(n=h),e>r&&(r=e);n=0!==(n=Math.max(n-d,r-p))?1/n:0}return function t(e,i,n,r,a,o,s){if(e){if(!s&&o){var l=e,c=l;do{null===c.z&&(c.z=vi(c.x,c.y,r,a,o)),c.prevZ=c.prev,c=c.nextZ=c.next}while(c!==l);c.prevZ.nextZ=null,c.prevZ=null,l=c;var h,u,d,p,f=1;do{c=l;var m=l=null;for(u=0;c;){u++;var g=c;for(h=d=0;h<f&&(d++,g=g.nextZ);h++);for(p=f;0<d||0<p&&g;)0!==d&&(0===p||!g||c.z<=g.z)?(h=c,c=c.nextZ,d--):(h=g,g=g.nextZ,p--),m?m.nextZ=h:l=h,h.prevZ=m,m=h;c=g}m.nextZ=null,f*=2}while(1<u)}for(l=e;e.prev!==e.next;){if(c=e.prev,g=e.next,o)t:{p=r;var v=a,y=o;if(0<=bi(u=(m=e).prev,d=m,f=m.next))m=!1;else{var _=u.x>d.x?u.x>f.x?u.x:f.x:d.x>f.x?d.x:f.x,b=u.y>d.y?u.y>f.y?u.y:f.y:d.y>f.y?d.y:f.y;for(h=vi(u.x<d.x?u.x<f.x?u.x:f.x:d.x<f.x?d.x:f.x,u.y<d.y?u.y<f.y?u.y:f.y:d.y<f.y?d.y:f.y,p,v,y),p=vi(_,b,p,v,y),v=m.nextZ;v&&v.z<=p;){if(v!==m.prev&&v!==m.next&&_i(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=bi(v.prev,v,v.next)){m=!1;break t}v=v.nextZ}for(v=m.prevZ;v&&v.z>=h;){if(v!==m.prev&&v!==m.next&&_i(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=bi(v.prev,v,v.next)){m=!1;break t}v=v.prevZ}m=!0}}else t:if(m=e,u=m.prev,d=m,f=m.next,0<=bi(u,d,f))m=!1;else{for(h=m.next.next;h!==m.prev;){if(_i(u.x,u.y,d.x,d.y,f.x,f.y,h.x,h.y)&&0<=bi(h.prev,h,h.next)){m=!1;break t}h=h.next}m=!0}if(m)i.push(c.i/n),i.push(e.i/n),i.push(g.i/n),Si(e),l=e=g.next;else if((e=g)===l){if(s){if(1===s){s=i,l=n,c=e;do{!xi(g=c.prev,m=c.next.next)&&wi(g,c,c.next,m)&&Mi(g,m)&&Mi(m,g)&&(s.push(g.i/l),s.push(c.i/l),s.push(m.i/l),Si(c),Si(c.next),c=e=m),c=c.next}while(c!==e);t(e=c,i,n,r,a,o,2)}else if(2===s)t:{s=e;do{for(l=s.next.next;l!==s.prev;){if(c=s.i!==l.i){if(g=l,m=(c=s).next.i!==g.i&&c.prev.i!==g.i){e:{m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==g.i&&m.next.i!==g.i&&wi(m,m.next,c,g)){m=!0;break e}m=m.next}while(m!==c);m=!1}m=!m}if(m=m&&Mi(c,g)&&Mi(g,c)){m=c,u=!1,d=(c.x+g.x)/2,g=(c.y+g.y)/2;do{m.y>g!=m.next.y>g&&m.next.y!==m.y&&d<(m.next.x-m.x)*(g-m.y)/(m.next.y-m.y)+m.x&&(u=!u),m=m.next}while(m!==c);m=u}c=m}if(c){e=Ei(s,l),s=fi(s,s.next),e=fi(e,e.next),t(s,i,n,r,a,o),t(e,i,n,r,a,o);break t}l=l.next}s=s.next}while(s!==e)}}else t(fi(e),i,n,r,a,o,1);break}}}}(o,s,i,d,p,n),s}(i,n),t=0;t<e.length;t+=3)r.push(e.slice(t,t+3));return r}};Di.prototype=Object.create(S.prototype),Di.prototype.constructor=Di,Di.prototype.toJSON=function(){var t=S.prototype.toJSON.call(this);return Ri(this.parameters.shapes,this.parameters.options,t)},Pi.prototype=Object.create(B.prototype),Pi.prototype.constructor=Pi,Pi.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return Ri(this.parameters.shapes,this.parameters.options,t)};var Ua={generateTopUV:function(t,e,n,r,a){t=e[3*r],r=e[3*r+1];var o=e[3*a];return a=e[3*a+1],[new i(e[3*n],e[3*n+1]),new i(t,r),new i(o,a)]},generateSideWallUV:function(t,e,n,r,a,o){t=e[3*n];var s=e[3*n+1];n=e[3*n+2];var l=e[3*r],c=e[3*r+1];r=e[3*r+2];var h=e[3*a],u=e[3*a+1];a=e[3*a+2];var d=e[3*o],p=e[3*o+1];return e=e[3*o+2],.01>Math.abs(s-c)?[new i(t,1-n),new i(l,1-r),new i(h,1-a),new i(d,1-e)]:[new i(s,1-n),new i(c,1-r),new i(u,1-a),new i(p,1-e)]}};Oi.prototype=Object.create(S.prototype),Oi.prototype.constructor=Oi,Ii.prototype=Object.create(Pi.prototype),Ii.prototype.constructor=Ii,zi.prototype=Object.create(S.prototype),zi.prototype.constructor=zi,Ni.prototype=Object.create(B.prototype),Ni.prototype.constructor=Ni,ki.prototype=Object.create(S.prototype),ki.prototype.constructor=ki,Fi.prototype=Object.create(B.prototype),Fi.prototype.constructor=Fi,Bi.prototype=Object.create(S.prototype),Bi.prototype.constructor=Bi,Ui.prototype=Object.create(B.prototype),Ui.prototype.constructor=Ui,Hi.prototype=Object.create(S.prototype),Hi.prototype.constructor=Hi,Hi.prototype.toJSON=function(){var t=S.prototype.toJSON.call(this);return ji(this.parameters.shapes,t)},Gi.prototype=Object.create(B.prototype),Gi.prototype.constructor=Gi,Gi.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return ji(this.parameters.shapes,t)},Vi.prototype=Object.create(B.prototype),Vi.prototype.constructor=Vi,Wi.prototype=Object.create(S.prototype),Wi.prototype.constructor=Wi,qi.prototype=Object.create(B.prototype),qi.prototype.constructor=qi,Xi.prototype=Object.create(Wi.prototype),Xi.prototype.constructor=Xi,Yi.prototype=Object.create(qi.prototype),Yi.prototype.constructor=Yi,Zi.prototype=Object.create(S.prototype),Zi.prototype.constructor=Zi,Ji.prototype=Object.create(B.prototype),Ji.prototype.constructor=Ji;var Ha=Object.freeze({WireframeGeometry:Ye,ParametricGeometry:Ze,ParametricBufferGeometry:Je,TetrahedronGeometry:$e,TetrahedronBufferGeometry:ti,OctahedronGeometry:ei,OctahedronBufferGeometry:ii,IcosahedronGeometry:ni,IcosahedronBufferGeometry:ri,DodecahedronGeometry:ai,DodecahedronBufferGeometry:oi,PolyhedronGeometry:Qe,PolyhedronBufferGeometry:Ke,TubeGeometry:si,TubeBufferGeometry:li,TorusKnotGeometry:ci,TorusKnotBufferGeometry:hi,TorusGeometry:ui,TorusBufferGeometry:di,TextGeometry:Oi,TextBufferGeometry:Ii,SphereGeometry:zi,SphereBufferGeometry:Ni,RingGeometry:ki,RingBufferGeometry:Fi,PlaneGeometry:G,PlaneBufferGeometry:j,LatheGeometry:Bi,LatheBufferGeometry:Ui,ShapeGeometry:Hi,ShapeBufferGeometry:Gi,ExtrudeGeometry:Di,ExtrudeBufferGeometry:Pi,EdgesGeometry:Vi,ConeGeometry:Xi,ConeBufferGeometry:Yi,CylinderGeometry:Wi,CylinderBufferGeometry:qi,CircleGeometry:Zi,CircleBufferGeometry:Ji,BoxGeometry:U,BoxBufferGeometry:H});Qi.prototype=Object.create(V.prototype),Qi.prototype.constructor=Qi,Qi.prototype.isShadowMaterial=!0,Qi.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this},Ki.prototype=Object.create(W.prototype),Ki.prototype.constructor=Ki,Ki.prototype.isRawShaderMaterial=!0,$i.prototype=Object.create(V.prototype),$i.prototype.constructor=$i,$i.prototype.isMeshStandardMaterial=!0,$i.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},tn.prototype=Object.create($i.prototype),tn.prototype.constructor=tn,tn.prototype.isMeshPhysicalMaterial=!0,tn.prototype.copy=function(t){return $i.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},en.prototype=Object.create(V.prototype),en.prototype.constructor=en,en.prototype.isMeshPhongMaterial=!0,en.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},nn.prototype=Object.create(en.prototype),nn.prototype.constructor=nn,nn.prototype.isMeshToonMaterial=!0,nn.prototype.copy=function(t){return en.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},rn.prototype=Object.create(V.prototype),rn.prototype.constructor=rn,rn.prototype.isMeshNormalMaterial=!0,rn.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},an.prototype=Object.create(V.prototype),an.prototype.constructor=an,an.prototype.isMeshLambertMaterial=!0,an.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},on.prototype=Object.create(V.prototype),on.prototype.constructor=on,on.prototype.isMeshMatcapMaterial=!0,on.prototype.copy=function(t){return V.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},sn.prototype=Object.create(Fe.prototype),sn.prototype.constructor=sn,sn.prototype.isLineDashedMaterial=!0,sn.prototype.copy=function(t){return Fe.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Ga=Object.freeze({ShadowMaterial:Qi,SpriteMaterial:Re,RawShaderMaterial:Ki,ShaderMaterial:W,PointsMaterial:Ge,MeshPhysicalMaterial:tn,MeshStandardMaterial:$i,MeshPhongMaterial:en,MeshToonMaterial:nn,MeshNormalMaterial:rn,MeshLambertMaterial:an,MeshDepthMaterial:pe,MeshDistanceMaterial:fe,MeshBasicMaterial:Y,MeshMatcapMaterial:on,LineDashedMaterial:sn,LineBasicMaterial:Fe,Material:V}),ja={arraySlice:function(t,e,i){return ja.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,i=Array(e),n=0;n!==e;++n)i[n]=n;return i.sort((function(e,i){return t[e]-t[i]})),i},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),a=0,o=0;o!==n;++a)for(var s=i[a]*e,l=0;l!==e;++l)r[o++]=t[s+l];return r},flattenJSON:function(t,e,i,n){for(var r=1,a=t[0];void 0!==a&&void 0===a[n];)a=t[r++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[n])&&(e.push(a.time),i.push.apply(i,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[n])&&(e.push(a.time),o.toArray(i,i.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(o=a[n])&&(e.push(a.time),i.push(o)),a=t[r++]}while(void 0!==a)}}};Object.assign(ln.prototype,{evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{i:{n:if(!(t<n)){for(var a=i+2;;){if(void 0===n){if(t<r)break n;return this._cachedIndex=i=e.length,this.afterEnd_(i-1,t,r)}if(i===a)break;if(r=n,t<(n=e[++i]))break e}n=e.length;break i}if(t>=r)break t;for(t<(a=e[1])&&(i=2,r=a),a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===a)break;if(n=r,t>=(r=e[--i-1]))break e}n=i,i=0}for(;i<n;)t<e[r=i+n>>>1]?n=r:i=r+1;if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return this._cachedIndex=i=e.length,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize;t*=n;for(var r=0;r!==n;++r)e[r]=i[t+r];return e},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ln.prototype,{beforeStart_:ln.prototype.copySampleValue_,afterEnd_:ln.prototype.copySampleValue_}),cn.prototype=Object.assign(Object.create(ln.prototype),{constructor:cn,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,a=t+1,o=n[r],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-i;break;case 2402:o=e+n[r=n.length-2]-n[r+1];break;default:r=t,o=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*i-e;break;case 2402:a=1,s=i+n[1]-n[0];break;default:a=t-1,s=e}t=.5*(i-e),n=this.valueSize,this._weightPrev=t/(e-o),this._weightNext=t/(s-i),this._offsetPrev=r*n,this._offsetNext=a*n},interpolate_:function(t,e,i,n){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,u=this._weightNext,d=(i-e)/(n-e);for(e=-h*(n=(i=d*d)*d)+2*h*i-h*d,h=(1+h)*n+(-1.5-2*h)*i+(-.5+h)*d+1,d=(-1-u)*n+(1.5+u)*i+.5*d,u=u*n-u*i,i=0;i!==o;++i)r[i]=e*a[l+i]+h*a[s+i]+d*a[t+i]+u*a[c+i];return r}}),hn.prototype=Object.assign(Object.create(ln.prototype),{constructor:hn,interpolate_:function(t,e,i,n){var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(t*=o)-o;for(i=1-(e=(i-e)/(n-e)),n=0;n!==o;++n)r[n]=a[s+n]*i+a[t+n]*e;return r}}),un.prototype=Object.assign(Object.create(ln.prototype),{constructor:un,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(dn,{toJSON:function(t){var e=t.constructor;if(void 0!==e.toJSON)e=e.toJSON(t);else{e={name:t.name,times:ja.convertArray(t.times,Array),values:ja.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(dn.prototype,{constructor:dn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new un(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new hn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new cn(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){switch(t){case 2300:var e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){if(e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,a=n-1;r!==n&&i[r]<t;)++r;for(;-1!==a&&i[a]>e;)--a;return++a,0===r&&a===n||(r>=a&&(r=(a=Math.max(a,1))-1),t=this.getValueSize(),this.times=ja.arraySlice(i,r,a),this.values=ja.arraySlice(this.values,r*t,a*t)),this},validate:function(){var t=!0,e=this.getValueSize();0!=e-Math.floor(e)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var i=this.times;e=this.values;var n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var r=null,a=0;a!==n;a++){var o=i[a];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),t=!1;break}if(null!==r&&r>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,r),t=!1;break}r=o}if(void 0!==e&&ja.isTypedArray(e))for(a=0,i=e.length;a!==i;++a)if(n=e[a],isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,n),t=!1;break}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,a=t.length-1,o=1;o<a;++o){var s=!1,l=t[o];if(l!==t[o+1]&&(1!==o||l!==l[0]))if(n)s=!0;else{var c=o*i,h=c-i,u=c+i;for(l=0;l!==i;++l){var d=e[c+l];if(d!==e[h+l]||d!==e[u+l]){s=!0;break}}}if(s){if(o!==r)for(t[r]=t[o],s=o*i,c=r*i,l=0;l!==i;++l)e[c+l]=e[s+l];++r}}if(0<a){for(t[r]=t[a],s=a*i,c=r*i,l=0;l!==i;++l)e[c+l]=e[s+l];++r}return r!==t.length&&(this.times=ja.arraySlice(t,0,r),this.values=ja.arraySlice(e,0,r*i)),this},clone:function(){var t=ja.arraySlice(this.times,0),e=ja.arraySlice(this.values,0);return(t=new this.constructor(this.name,t,e)).createInterpolant=this.createInterpolant,t}}),pn.prototype=Object.assign(Object.create(dn.prototype),{constructor:pn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fn.prototype=Object.assign(Object.create(dn.prototype),{constructor:fn,ValueTypeName:"color"}),mn.prototype=Object.assign(Object.create(dn.prototype),{constructor:mn,ValueTypeName:"number"}),gn.prototype=Object.assign(Object.create(ln.prototype),{constructor:gn,interpolate_:function(t,e,i,r){var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize;for(e=(i-e)/(r-e),i=(t*=s)+s;t!==i;t+=4)n.slerpFlat(a,0,o,t-s,o,t,e);return a}}),vn.prototype=Object.assign(Object.create(dn.prototype),{constructor:vn,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new gn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),yn.prototype=Object.assign(Object.create(dn.prototype),{constructor:yn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),_n.prototype=Object.assign(Object.create(dn.prototype),{constructor:_n,ValueTypeName:"vector"}),Object.assign(bn,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,a=i.length;r!==a;++r)e.push(xn(i[r]).scale(n));return new bn(t.name,t.duration,e)},toJSON:function(t){var e=[],i=t.tracks;t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid};for(var n=0,r=i.length;n!==r;++n)e.push(dn.toJSON(i[n]));return t},CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],l=[];s.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);var c=ja.getKeyframeOrder(s);s=ja.sortedArray(s,1,c),l=ja.sortedArray(l,1,c),n||0!==s[0]||(s.push(r),l.push(l[0])),a.push(new mn(".morphTargetInfluences["+e[o].name+"]",s,l).scale(1/i))}return new bn(t,-1,a)},findByName:function(t,e){var i=t;for(Array.isArray(t)||(i=t.geometry&&t.geometry.animations||t.animations),t=0;t<i.length;t++)if(i[t].name===e)return i[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],l=s.name.match(r);if(l&&1<l.length){var c=l[1];(l=n[c])||(n[c]=l=[]),l.push(s)}}for(c in t=[],n)t.push(bn.CreateFromMorphTargetSequence(c,n[c],e,i));return t},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var i=function(t,e,i,n,r){if(0!==i.length){var a=[],o=[];ja.flattenJSON(i,a,o,n),0!==a.length&&r.push(new t(e,a,o))}},n=[],r=t.name||"default",a=t.length||-1,o=t.fps||30;t=t.hierarchy||[];for(var s=0;s<t.length;s++){var l=t[s].keys;if(l&&0!==l.length)if(l[0].morphTargets){a={};for(var c=0;c<l.length;c++)if(l[c].morphTargets)for(var h=0;h<l[c].morphTargets.length;h++)a[l[c].morphTargets[h]]=-1;for(var u in a){var d=[],p=[];for(h=0;h!==l[c].morphTargets.length;++h){var f=l[c];d.push(f.time),p.push(f.morphTarget===u?1:0)}n.push(new mn(".morphTargetInfluence["+u+"]",d,p))}a=a.length*(o||1)}else i(_n,(c=".bones["+e[s].name+"]")+".position",l,"pos",n),i(vn,c+".quaternion",l,"rot",n),i(_n,c+".scale",l,"scl",n)}return 0===n.length?null:new bn(r,a,n)}}),Object.assign(bn.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e){var n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new bn(this.name,this.duration,t)}});var Va={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Wa=new wn,qa={};Object.assign(Mn.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Va.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;if(void 0===qa[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){i=o[1];var s=!!o[2];o=o[3],o=decodeURIComponent(o),s&&(o=atob(o));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":var c=new Uint8Array(o.length);for(s=0;s<o.length;s++)c[s]=o.charCodeAt(s);var h="blob"===l?new Blob([c.buffer],{type:i}):c.buffer;break;case"document":h=(new DOMParser).parseFromString(o,i);break;case"json":h=JSON.parse(o);break;default:h=o}setTimeout((function(){e&&e(h),r.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}),0)}}else{qa[t]=[],qa[t].push({onLoad:e,onProgress:i,onError:n});var u=new XMLHttpRequest;for(s in u.open("GET",t,!0),u.addEventListener("load",(function(e){var i=this.response;Va.add(t,i);var n=qa[t];if(delete qa[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=n.length;a<o;a++){var s=n[a];s.onLoad&&s.onLoad(i)}}else{for(a=0,o=n.length;a<o;a++)(s=n[a]).onError&&s.onError(e);r.manager.itemError(t)}r.manager.itemEnd(t)}),!1),u.addEventListener("progress",(function(e){for(var i=qa[t],n=0,r=i.length;n<r;n++){var a=i[n];a.onProgress&&a.onProgress(e)}}),!1),u.addEventListener("error",(function(e){var i=qa[t];delete qa[t];for(var n=0,a=i.length;n<a;n++){var o=i[n];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),u.addEventListener("abort",(function(e){var i=qa[t];delete qa[t];for(var n=0,a=i.length;n<a;n++){var o=i[n];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(u.responseType=this.responseType),void 0!==this.withCredentials&&(u.withCredentials=this.withCredentials),u.overrideMimeType&&u.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)u.setRequestHeader(s,this.requestHeader[s]);u.send(null)}return r.manager.itemStart(t),u}qa[t].push({onLoad:e,onProgress:i,onError:n})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(En.prototype,{load:function(t,e,i,n){var r=this,a=new Mn(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),i,n)},parse:function(t){for(var e=[],i=0;i<t.length;i++){var n=bn.parse(t[i]);e.push(n)}return e},setPath:function(t){return this.path=t,this}}),Object.assign(Tn.prototype,{load:function(t,e,i,n){function r(r){l.load(t[r],(function(t){t=a._parser(t,!0),o[r]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(c+=1)&&(1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s))}),i,n)}var a=this,o=[],s=new We;s.image=o;var l=new Mn(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,h=0,u=t.length;h<u;++h)r(h);else l.load(t,(function(t){if((t=a._parser(t,!0)).isCubemap)for(var i=t.mipmaps.length/t.mipmapCount,n=0;n<i;n++){o[n]={mipmaps:[]};for(var r=0;r<t.mipmapCount;r++)o[n].mipmaps.push(t.mipmaps[n*t.mipmapCount+r]),o[n].format=t.format,o[n].width=t.width,o[n].height=t.height}else s.image.width=t.width,s.image.height=t.height,s.mipmaps=t.mipmaps;1===t.mipmapCount&&(s.minFilter=1006),s.format=t.format,s.needsUpdate=!0,e&&e(s)}),i,n);return s},setPath:function(t){return this.path=t,this}}),Object.assign(Sn.prototype,{load:function(t,e,i,n){var r=this,a=new u,o=new Mn(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,(function(t){(t=r._parser(t))&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:1001,a.wrapT=void 0!==t.wrapT?t.wrapT:1001,a.magFilter=void 0!==t.magFilter?t.magFilter:1006,a.minFilter=void 0!==t.minFilter?t.minFilter:1008,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps),1===t.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,e&&e(a,t))}),i,n),a},setPath:function(t){return this.path=t,this}}),Object.assign(An.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){function r(){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),Va.add(t,this),e&&e(this),o.manager.itemEnd(t)}function a(e){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),n&&n(e),o.manager.itemError(t),o.manager.itemEnd(t)}void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=Va.get(t);if(void 0!==s)return o.manager.itemStart(t),setTimeout((function(){e&&e(s),o.manager.itemEnd(t)}),0),s;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");return l.addEventListener("load",r,!1),l.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin),o.manager.itemStart(t),l.src=t,l},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Cn.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){function r(i){o.load(t[i],(function(t){a.images[i]=t,6==++s&&(a.needsUpdate=!0,e&&e(a))}),void 0,n)}var a=new st,o=new An(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var s=0;for(i=0;i<t.length;++i)r(i);return a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ln.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){var r=new o,a=new An(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(i){r.image=i,i=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data:image\/jpeg/),r.format=i?1022:1023,r.needsUpdate=!0,void 0!==e&&e(r)}),i,n),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Dn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){return t=this.getUtoTmapping(t),this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],n=this.getPoint(0),r=0;for(i.push(0),e=1;e<=t;e++){var a=this.getPoint(e/t);r+=a.distanceTo(n),i.push(r),n=a}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i=this.getLengths(),n=i.length;e=e||t*i[n-1];for(var r,a=0,o=n-1;a<=o;)if(0>(r=i[t=Math.floor(a+(o-a)/2)]-e))a=t+1;else{if(!(0<r)){o=t;break}o=t-1}return i[t=o]===e?t/(n-1):(t+(e-(a=i[t]))/(i[t+1]-a))/(n-1)},getTangent:function(t){var e=t-1e-4;return 0>e&&(e=0),1<(t+=1e-4)&&(t=1),e=this.getPoint(e),this.getPoint(t).clone().sub(e).normalize()},getTangentAt:function(t){return t=this.getUtoTmapping(t),this.getTangent(t)},computeFrenetFrames:function(t,e){var i,n=new r,a=[],o=[],s=[],l=new r,c=new g;for(i=0;i<=t;i++){var h=i/t;a[i]=this.getTangentAt(h),a[i].normalize()}o[0]=new r,s[0]=new r,i=Number.MAX_VALUE,h=Math.abs(a[0].x);var u=Math.abs(a[0].y),d=Math.abs(a[0].z);for(h<=i&&(i=h,n.set(1,0,0)),u<=i&&(i=u,n.set(0,1,0)),d<=i&&n.set(0,0,1),l.crossVectors(a[0],n).normalize(),o[0].crossVectors(a[0],l),s[0].crossVectors(a[0],o[0]),i=1;i<=t;i++)o[i]=o[i-1].clone(),s[i]=s[i-1].clone(),l.crossVectors(a[i-1],a[i]),l.length()>Number.EPSILON&&(l.normalize(),n=Math.acos(ua.clamp(a[i-1].dot(a[i]),-1,1)),o[i].applyMatrix4(c.makeRotationAxis(l,n))),s[i].crossVectors(a[i],o[i]);if(!0===e)for(n=Math.acos(ua.clamp(o[0].dot(o[t]),-1,1)),n/=t,0<a[0].dot(l.crossVectors(o[0],o[t]))&&(n=-n),i=1;i<=t;i++)o[i].applyMatrix4(c.makeRotationAxis(a[i],n*i)),s[i].crossVectors(a[i],o[i]);return{tangents:a,normals:o,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Pn.prototype=Object.create(Dn.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isEllipseCurve=!0,Pn.prototype.getPoint=function(t,e){e=e||new i;for(var n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;0>r;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=a?0:n),!0!==this.aClockwise||a||(r=r===n?-n:r-n),n=this.aStartAngle+t*r,t=this.aX+this.xRadius*Math.cos(n);var o=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(n=Math.cos(this.aRotation),r=Math.sin(this.aRotation),t=(a=t-this.aX)*n-(o-=this.aY)*r+this.aX,o=a*r+o*n+this.aY),e.set(t,o)},Pn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Pn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Pn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Rn.prototype=Object.create(Pn.prototype),Rn.prototype.constructor=Rn,Rn.prototype.isArcCurve=!0;var Xa=new r,Ya=new On,Za=new On,Ja=new On;In.prototype=Object.create(Dn.prototype),In.prototype.constructor=In,In.prototype.isCatmullRomCurve3=!0,In.prototype.getPoint=function(t,e){e=e||new r;var i=this.points,n=i.length;t*=n-(this.closed?0:1);var a=Math.floor(t);if(t-=a,this.closed?a+=0<a?0:(Math.floor(Math.abs(a)/n)+1)*n:0===t&&a===n-1&&(a=n-2,t=1),this.closed||0<a)var o=i[(a-1)%n];else Xa.subVectors(i[0],i[1]).add(i[0]),o=Xa;var s=i[a%n],l=i[(a+1)%n];if(this.closed||a+2<n?i=i[(a+2)%n]:(Xa.subVectors(i[n-1],i[n-2]).add(i[n-1]),i=Xa),"centripetal"===this.curveType||"chordal"===this.curveType){var c="chordal"===this.curveType?.5:.25;n=Math.pow(o.distanceToSquared(s),c),1e-4>(a=Math.pow(s.distanceToSquared(l),c))&&(a=1),1e-4>n&&(n=a),1e-4>(c=Math.pow(l.distanceToSquared(i),c))&&(c=a),Ya.initNonuniformCatmullRom(o.x,s.x,l.x,i.x,n,a,c),Za.initNonuniformCatmullRom(o.y,s.y,l.y,i.y,n,a,c),Ja.initNonuniformCatmullRom(o.z,s.z,l.z,i.z,n,a,c)}else"catmullrom"===this.curveType&&(Ya.initCatmullRom(o.x,s.x,l.x,i.x,this.tension),Za.initCatmullRom(o.y,s.y,l.y,i.y,this.tension),Ja.initCatmullRom(o.z,s.z,l.z,i.z,this.tension));return e.set(Ya.calc(t),Za.calc(t),Ja.calc(t)),e},In.prototype.copy=function(t){Dn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},In.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},In.prototype.fromJSON=function(t){Dn.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var n=t.points[e];this.points.push((new r).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Fn.prototype=Object.create(Dn.prototype),Fn.prototype.constructor=Fn,Fn.prototype.isCubicBezierCurve=!0,Fn.prototype.getPoint=function(t,e){e=e||new i;var n=this.v0,r=this.v1,a=this.v2,o=this.v3;return e.set(kn(t,n.x,r.x,a.x,o.x),kn(t,n.y,r.y,a.y,o.y)),e},Fn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Fn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Fn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Bn.prototype=Object.create(Dn.prototype),Bn.prototype.constructor=Bn,Bn.prototype.isCubicBezierCurve3=!0,Bn.prototype.getPoint=function(t,e){e=e||new r;var i=this.v0,n=this.v1,a=this.v2,o=this.v3;return e.set(kn(t,i.x,n.x,a.x,o.x),kn(t,i.y,n.y,a.y,o.y),kn(t,i.z,n.z,a.z,o.z)),e},Bn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Bn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Bn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Un.prototype=Object.create(Dn.prototype),Un.prototype.constructor=Un,Un.prototype.isLineCurve=!0,Un.prototype.getPoint=function(t,e){return e=e||new i,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Un.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Un.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Un.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Un.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Un.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Hn.prototype=Object.create(Dn.prototype),Hn.prototype.constructor=Hn,Hn.prototype.isLineCurve3=!0,Hn.prototype.getPoint=function(t,e){return e=e||new r,1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},Hn.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Hn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Hn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Hn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Gn.prototype=Object.create(Dn.prototype),Gn.prototype.constructor=Gn,Gn.prototype.isQuadraticBezierCurve=!0,Gn.prototype.getPoint=function(t,e){e=e||new i;var n=this.v0,r=this.v1,a=this.v2;return e.set(Nn(t,n.x,r.x,a.x),Nn(t,n.y,r.y,a.y)),e},Gn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Gn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Gn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},jn.prototype=Object.create(Dn.prototype),jn.prototype.constructor=jn,jn.prototype.isQuadraticBezierCurve3=!0,jn.prototype.getPoint=function(t,e){e=e||new r;var i=this.v0,n=this.v1,a=this.v2;return e.set(Nn(t,i.x,n.x,a.x),Nn(t,i.y,n.y,a.y),Nn(t,i.z,n.z,a.z)),e},jn.prototype.copy=function(t){return Dn.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},jn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},jn.prototype.fromJSON=function(t){return Dn.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Vn.prototype=Object.create(Dn.prototype),Vn.prototype.constructor=Vn,Vn.prototype.isSplineCurve=!0,Vn.prototype.getPoint=function(t,e){e=e||new i;var n=this.points,r=(n.length-1)*t;r-=t=Math.floor(r);var a=n[0===t?t:t-1],o=n[t],s=n[t>n.length-2?n.length-1:t+1];return n=n[t>n.length-3?n.length-1:t+2],e.set(zn(r,a.x,o.x,s.x,n.x),zn(r,a.y,o.y,s.y,n.y)),e},Vn.prototype.copy=function(t){Dn.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++)this.points.push(t.points[e].clone());return this},Vn.prototype.toJSON=function(){var t=Dn.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++)t.points.push(this.points[e].toArray());return t},Vn.prototype.fromJSON=function(t){Dn.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new i).fromArray(r))}return this};var Qa=Object.freeze({ArcCurve:Rn,CatmullRomCurve3:In,CubicBezierCurve:Fn,CubicBezierCurve3:Bn,EllipseCurve:Pn,LineCurve:Un,LineCurve3:Hn,QuadraticBezierCurve:Gn,QuadraticBezierCurve3:jn,SplineCurve:Vn});Wn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Wn,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Un(e,t))},getPoint:function(t){var e=t*this.getLength(),i=this.getCurveLengths();for(t=0;t<i.length;){if(i[t]>=e)return e=i[t]-e,i=(t=this.curves[t]).getLength(),t.getPointAt(0===i?0:1-e/i);t++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++){var a=r[n];a=a.getPoints(a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t);for(var o=0;o<a.length;o++){var s=a[o];e&&e.equals(s)||(i.push(s),e=s)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){Dn.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Dn.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){Dn.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var n=t.curves[e];this.curves.push((new Qa[n.type]).fromJSON(n))}return this}}),qn.prototype=Object.assign(Object.create(Wn.prototype),{constructor:qn,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Un(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){t=new Gn(this.currentPoint.clone(),new i(t,e),new i(n,r)),this.curves.push(t),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,a,o){t=new Fn(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(a,o)),this.curves.push(t),this.currentPoint.set(a,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t);e=new Vn(e),this.curves.push(e),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,a){this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,a)},absarc:function(t,e,i,n,r,a){this.absellipse(t,e,i,i,n,r,a)},ellipse:function(t,e,i,n,r,a,o,s){this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,i,n,r,a,o,s)},absellipse:function(t,e,i,n,r,a,o,s){t=new Pn(t,e,i,n,r,a,o,s),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),t=t.getPoint(1),this.currentPoint.copy(t)},copy:function(t){return Wn.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Wn.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Wn.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Xn.prototype=Object.assign(Object.create(qn.prototype),{constructor:Xn,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){qn.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=qn.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){qn.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var n=t.holes[e];this.holes.push((new qn).fromJSON(n))}return this}}),Yn.prototype=Object.assign(Object.create(T.prototype),{constructor:Yn,isLight:!0,copy:function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){return(t=T.prototype.toJSON.call(this,t)).object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Zn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Zn,isHemisphereLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Jn.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Qn.prototype=Object.assign(Object.create(Jn.prototype),{constructor:Qn,isSpotLightShadow:!0,update:function(t){var e=this.camera,i=2*ua.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height;t=t.distance||e.far,i===e.fov&&n===e.aspect&&t===e.far||(e.fov=i,e.aspect=n,e.far=t,e.updateProjectionMatrix())}}),Kn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Kn,isSpotLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),$n.prototype=Object.assign(Object.create(Yn.prototype),{constructor:$n,isPointLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),tr.prototype=Object.assign(Object.create(be.prototype),{constructor:tr,isOrthographicCamera:!0,copy:function(t,e){return be.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t;if(i+=t,t=n+e,e=n-e,null!==this.view&&this.view.enabled){i=this.zoom/(this.view.width/this.view.fullWidth),e=this.zoom/(this.view.height/this.view.fullHeight);var a=(this.right-this.left)/this.view.width;n=(this.top-this.bottom)/this.view.height,i=(r+=this.view.offsetX/i*a)+this.view.width/i*a,e=(t-=this.view.offsetY/e*n)-this.view.height/e*n}this.projectionMatrix.makeOrthographic(r,i,t,e,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){return(t=T.prototype.toJSON.call(this,t)).object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),er.prototype=Object.assign(Object.create(Jn.prototype),{constructor:er}),ir.prototype=Object.assign(Object.create(Yn.prototype),{constructor:ir,isDirectionalLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),nr.prototype=Object.assign(Object.create(Yn.prototype),{constructor:nr,isAmbientLight:!0}),rr.prototype=Object.assign(Object.create(Yn.prototype),{constructor:rr,isRectAreaLight:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){return(t=Yn.prototype.toJSON.call(this,t)).object.width=this.width,t.object.height=this.height,t}}),Object.assign(ar.prototype,{load:function(t,e,i,n){var r=this,a=new Mn(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),i,n)},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,o=new Ga[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearCoat&&(o.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(o.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(o.vertexColors=t.vertexColors),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.uniforms)for(var l in t.uniforms){var c=t.uniforms[l];switch(o.uniforms[l]={},c.type){case"t":o.uniforms[l].value=e(c.value);break;case"c":o.uniforms[l].value=(new _).setHex(c.value);break;case"v2":o.uniforms[l].value=(new i).fromArray(c.value);break;case"v3":o.uniforms[l].value=(new r).fromArray(c.value);break;case"v4":o.uniforms[l].value=(new s).fromArray(c.value);break;case"m3":o.uniforms[l].value=(new a).fromArray(c.value);case"m4":o.uniforms[l].value=(new g).fromArray(c.value);break;default:o.uniforms[l].value=c.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var h in t.extensions)o.extensions[h]=t.extensions[h];return void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=e(t.map)),void 0!==t.matcap&&(o.matcap=e(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=e(t.alphaMap),o.transparent=!0),void 0!==t.bumpMap&&(o.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale&&(l=t.normalScale,!1===Array.isArray(l)&&(l=[l,l]),o.normalScale=(new i).fromArray(l)),void 0!==t.displacementMap&&(o.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=e(t.specularMap)),void 0!==t.envMap&&(o.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.lightMap&&(o.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=e(t.gradientMap)),o},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var Ka={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};or.prototype=Object.assign(Object.create(B.prototype),{constructor:or,isInstancedBufferGeometry:!0,copy:function(t){return B.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=B.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),sr.prototype=Object.assign(Object.create(A.prototype),{constructor:sr,isInstancedBufferAttribute:!0,copy:function(t){return A.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=A.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Object.assign(lr.prototype,{load:function(t,e,i,n){var r=this,a=new Mn(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),i,n)},parse:function(t){var e=t.isInstancedBufferGeometry?new or:new B,i=t.data.index;if(void 0!==i){var n=new $a[i.type](i.array);e.setIndex(new A(n,1))}for(var a in i=t.data.attributes){var o=i[a];n=new $a[o.type](o.array),n=new(o.isInstancedBufferAttribute?sr:A)(n,o.itemSize,o.normalized),void 0!==o.name&&(n.name=o.name),e.addAttribute(a,n)}var s=t.data.morphAttributes;if(s)for(a in s){var l=s[a],c=[];i=0;for(var h=l.length;i<h;i++)o=l[i],n=new A(n=new $a[o.type](o.array),o.itemSize,o.normalized),void 0!==o.name&&(n.name=o.name),c.push(n);e.morphAttributes[a]=c}if(void 0!==(a=t.data.groups||t.data.drawcalls||t.data.offsets))for(i=0,o=a.length;i!==o;++i)n=a[i],e.addGroup(n.start,n.count,n.materialIndex);return void 0!==(i=t.data.boundingSphere)&&(a=new r,void 0!==i.center&&a.fromArray(i.center),e.boundingSphere=new p(a,i.radius)),t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e},setPath:function(t){return this.path=t,this}});var $a={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(cr.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){var r=this,a=void 0===this.path?Ka.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a,(a=new Mn(r.manager)).setPath(this.path),a.load(t,(function(i){var a=null;try{a=JSON.parse(i)}catch(e){return void 0!==n&&n(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}void 0===(i=a.metadata)||void 0===i.type||"geometry"===i.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+t):r.parse(a,e)}),i,n)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var i=this.parseShape(t.shapes);i=this.parseGeometries(t.geometries,i);var n=this.parseImages(t.images,(function(){void 0!==e&&e(r)}));n=this.parseTextures(t.textures,n),n=this.parseMaterials(t.materials,n);var r=this.parseObject(t.object,i,n);return t.animations&&(r.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0===e||e(r),r},parseShape:function(t){var e={};if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var r=(new Xn).fromJSON(t[i]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var i={};if(void 0!==t)for(var n=new lr,r=0,a=t.length;r<a;r++){var o=t[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":var s=new Ha[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ha[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ha[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ha[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ha[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ha[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Ha[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ha[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ha[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ha[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Ha[o.type]((new Qa[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ha[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Ha[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":s=[];for(var l=0,c=o.shapes.length;l<c;l++){var h=e[o.shapes[l]];s.push(h)}s=new Ha[o.type](s,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(s=[],l=0,c=o.shapes.length;l<c;l++)h=e[o.shapes[l]],s.push(h);void 0!==(l=o.options.extrudePath)&&(o.options.extrudePath=(new Qa[l.type]).fromJSON(l)),s=new Ha[o.type](s,o.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=n.parse(o);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?s=(new THREE.LegacyJSONLoader).parse(o,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}return i},parseMaterials:function(t,e){var i={},n={};if(void 0!==t){var r=new ar;r.setTextures(e),e=0;for(var a=t.length;e<a;e++){var o=t[e];if("MultiMaterial"===o.type){for(var s=[],l=0;l<o.materials.length;l++){var c=o.materials[l];void 0===i[c.uuid]&&(i[c.uuid]=r.parse(c)),s.push(i[c.uuid])}n[o.uuid]=s}else void 0===i[o.uuid]&&(i[o.uuid]=r.parse(o)),n[o.uuid]=i[o.uuid]}}return n},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=bn.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),e.push(r)}return e},parseImages:function(t,e){function i(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}var n=this,r={};if(void 0!==t&&0<t.length){var a=new An(e=new wn(e));a.setCrossOrigin(this.crossOrigin),e=0;for(var o=t.length;e<o;e++){var s=t[e],l=s.url;if(Array.isArray(l)){r[s.uuid]=[];for(var c=0,h=l.length;c<h;c++){var u=l[c];u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u,r[s.uuid].push(i(u))}}else u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:n.resourcePath+s.url,r[s.uuid]=i(u)}}return r},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var n={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var l=Array.isArray(e[s.image])?new st(e[s.image]):new o(e[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=i(s.mapping,to)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=i(s.wrap[0],eo),l.wrapT=i(s.wrap[1],eo)),void 0!==s.format&&(l.format=s.format),void 0!==s.type&&(l.type=s.type),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=i(s.minFilter,io)),void 0!==s.magFilter&&(l.magFilter=i(s.magFilter,io)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),n[s.uuid]=l}return n},parseObject:function(t,e,i){function n(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++){var a=t[n];void 0===i[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(i[a])}return e}return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}}switch(t.type){case"Scene":var a=new Le;void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new _(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new Ce(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new Ae(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new xe(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new tr(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new nr(t.color,t.intensity);break;case"DirectionalLight":a=new ir(t.color,t.intensity);break;case"PointLight":a=new $n(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new rr(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new Kn(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new Zn(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":a=n(t.geometry);var o=r(t.material);a=a.bones&&0<a.bones.length?new ze(a,o):new Z(a,o),void 0!==t.drawMode&&a.setDrawMode(t.drawMode);break;case"LOD":a=new Ie;break;case"Line":a=new Be(n(t.geometry),r(t.material),t.mode);break;case"LineLoop":a=new He(n(t.geometry),r(t.material));break;case"LineSegments":a=new Ue(n(t.geometry),r(t.material));break;case"PointCloud":case"Points":a=new je(n(t.geometry),r(t.material));break;case"Sprite":a=new Oe(r(t.material));break;case"Group":a=new _e;break;default:a=new T}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children){o=t.children;for(var s=0;s<o.length;s++)a.add(this.parseObject(o[s],e,i))}if("LOD"===t.type)for(t=t.levels,o=0;o<t.length;o++){s=t[o];var l=a.getObjectByProperty("uuid",s.object);void 0!==l&&a.addLevel(l,s.distance)}return a}});var to={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},eo={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},io={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};hr.prototype={constructor:hr,setOptions:function(t){return this.options=t,this},load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Va.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)})).then((function(i){Va.add(t,i),e&&e(i),r.manager.itemEnd(t)})).catch((function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(ur.prototype,{moveTo:function(t,e){this.currentPath=new qn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,i,n){this.currentPath.quadraticCurveTo(t,e,i,n)},bezierCurveTo:function(t,e,i,n,r,a){this.currentPath.bezierCurveTo(t,e,i,n,r,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function i(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],a=new Xn;a.curves=r.curves,e.push(a)}return e}function n(t,e){for(var i=e.length,n=!1,r=i-1,a=0;a<i;r=a++){var o=e[r],s=e[a],l=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(0>c&&(o=e[a],l=-l,s=e[r],c=-c),!(t.y<o.y||t.y>s.y))if(t.y===o.y){if(t.x===o.x)return!0}else{if(0==(r=c*(t.x-o.x)-l*(t.y-o.y)))return!0;0>r||(n=!n)}}else if(t.y===o.y&&(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x))return!0}return n}var r=Ba.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return i(a);if(e=[],1===a.length){var o=a[0],s=new Xn;return s.curves=o.curves,e.push(s),e}var l=!r(a[0].getPoints());l=t?!l:l,s=[];var c=[],h=[],u=0;c[u]=void 0,h[u]=[];for(var d=0,p=a.length;d<p;d++){var f=(o=a[d]).getPoints(),m=r(f);(m=t?!m:m)?(!l&&c[u]&&u++,c[u]={s:new Xn,p:f},c[u].s.curves=o.curves,l&&u++,h[u]=[]):h[u].push({h:o,p:f[0]})}if(!c[0])return i(a);if(1<c.length){for(d=!1,t=[],r=0,a=c.length;r<a;r++)s[r]=[];for(r=0,a=c.length;r<a;r++)for(o=h[r],m=0;m<o.length;m++){for(l=o[m],u=!0,f=0;f<c.length;f++)n(l.p,c[f].p)&&(r!==f&&t.push({froms:r,tos:f,hole:m}),u?(u=!1,s[f].push(l)):d=!0);u&&s[r].push(l)}0<t.length&&(d||(h=s))}for(d=0,r=c.length;d<r;d++)for(s=c[d].s,e.push(s),a=0,o=(t=h[d]).length;a<o;a++)s.holes.push(t[a].h);return e}}),Object.assign(dr.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);var i=[],n=e;e=this.data;var r=Array.from?Array.from(t):String(t).split("");n/=e.resolution;var a=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*n;t=[];for(var o=0,s=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)o=0,s-=a;else{var h=n,u=o,d=s;if(c=e.glyphs[c]||e.glyphs["?"]){var p=new ur;if(c.o)for(var f=c._cachedOutline||(c._cachedOutline=c.o.split(" ")),m=0,g=f.length;m<g;)switch(f[m++]){case"m":var v=f[m++]*h+u,y=f[m++]*h+d;p.moveTo(v,y);break;case"l":v=f[m++]*h+u,y=f[m++]*h+d,p.lineTo(v,y);break;case"q":var _=f[m++]*h+u,b=f[m++]*h+d,x=f[m++]*h+u,w=f[m++]*h+d;p.quadraticCurveTo(x,w,_,b);break;case"b":_=f[m++]*h+u,b=f[m++]*h+d,x=f[m++]*h+u,w=f[m++]*h+d,v=f[m++]*h+u,y=f[m++]*h+d,p.bezierCurveTo(x,w,v,y,_,b)}h={offsetX:c.ha*h,path:p}}else h=void 0;o+=h.offsetX,t.push(h.path)}}for(e=0,r=t.length;e<r;e++)Array.prototype.push.apply(i,t[e].toShapes());return i}}),Object.assign(pr.prototype,{load:function(t,e,i,n){var r=this,a=new Mn(this.manager);a.setPath(this.path),a.load(t,(function(t){try{var i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}t=r.parse(i),e&&e(t)}),i,n)},parse:function(t){return new dr(t)},setPath:function(t){return this.path=t,this}}),fr.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i+1];if(e[i].test(t))return r}return null}},Object.assign(fr.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:function(){var t={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},e=new _,i=new Ln,n=new ar;return function(r,a,o){function s(t,e,n,r,s){t=a+t;var l=fr.Handlers.get(t);return null!==l?t=l.load(t):(i.setCrossOrigin(o),t=i.load(t)),void 0!==e&&(t.repeat.fromArray(e),1!==e[0]&&(t.wrapS=1e3),1!==e[1]&&(t.wrapT=1e3)),void 0!==n&&t.offset.fromArray(n),void 0!==r&&("repeat"===r[0]&&(t.wrapS=1e3),"mirror"===r[0]&&(t.wrapS=1002),"repeat"===r[1]&&(t.wrapT=1e3),"mirror"===r[1]&&(t.wrapT=1002)),void 0!==s&&(t.anisotropy=s),e=ua.generateUUID(),c[e]=t,e}var l,c={},h={uuid:ua.generateUUID(),type:"MeshLambertMaterial"};for(l in r){var u=r[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":h.name=u;break;case"blending":h.blending=t[u];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":h.color=e.fromArray(u).getHex();break;case"colorSpecular":h.specular=e.fromArray(u).getHex();break;case"colorEmissive":h.emissive=e.fromArray(u).getHex();break;case"specularCoef":h.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(h.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(h.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(h.type="MeshStandardMaterial");break;case"mapDiffuse":h.map=s(u,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":h.emissiveMap=s(u,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":h.lightMap=s(u,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":h.aoMap=s(u,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":h.bumpMap=s(u,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":h.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":h.normalMap=s(u,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":h.normalScale=u;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":h.specularMap=s(u,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":h.metalnessMap=s(u,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":h.roughnessMap=s(u,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":h.alphaMap=s(u,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":h.side=1;break;case"doubleSided":h.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),h.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":h[l]=u;break;case"vertexColors":!0===u&&(h.vertexColors=2),"face"===u&&(h.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,u)}}return"MeshBasicMaterial"===h.type&&delete h.emissive,"MeshPhongMaterial"!==h.type&&delete h.specular,1>h.opacity&&(h.transparent=!0),n.setTextures(c),n.parse(h)}}()});var no,ro,ao,oo={getContext:function(){return void 0===no&&(no=new(window.AudioContext||window.webkitAudioContext)),no},setContext:function(t){no=t}};Object.assign(mr.prototype,{load:function(t,e,i,n){var r=new Mn(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,(function(t){t=t.slice(0),oo.getContext().decodeAudioData(t,(function(t){e(t)}))}),i,n)},setPath:function(t){return this.path=t,this}}),Object.assign(gr.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;9>e;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;9>t;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e=.282095*r[0],e+=.488603*r[1]*n,e+=.488603*r[2]*t,e+=.488603*r[3]*i,e+=1.092548*r[4]*i*n,e+=1.092548*r[5]*n*t,e+=.315392*r[6]*(3*t*t-1),(e+=1.092548*r[7]*i*t)+.546274*r[8]*(i*i-n*n)},getIrradianceAt:function(t,e){var i=t.x,n=t.y;t=t.z;var r=this.coefficients;return e=.886227*r[0],e+=1.023328*r[1]*n,e+=1.023328*r[2]*t,e+=1.023328*r[3]*i,e+=.858086*r[4]*i*n,e+=.858086*r[5]*n*t,e+=r[6]*(.743125*t*t-.247708),(e+=.858086*r[7]*i*t)+.429043*r[8]*(i*i-n*n)},add:function(t){for(var e=0;9>e;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;9>e;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var i=0;9>i;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this},equals:function(t){for(var e=0;9>e;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t){for(var e=this.coefficients,i=0;9>i;i++)e[i].fromArray(t,3*i);return this},toArray:function(){for(var t=[],e=this.coefficients,i=0;9>i;i++)e[i].toArray(t,3*i);return t}}),Object.assign(gr,{getBasisAt:function(t,e){var i=t.x,n=t.y;t=t.z,e[0]=.282095,e[1]=.488603*n,e[2]=.488603*t,e[3]=.488603*i,e[4]=1.092548*i*n,e[5]=1.092548*n*t,e[6]=.315392*(3*t*t-1),e[7]=1.092548*i*t,e[8]=.546274*(i*i-n*n)}}),vr.prototype=Object.assign(Object.create(Yn.prototype),{constructor:vr,isLightProbe:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return Yn.prototype.toJSON.call(this,t)}}),yr.prototype=Object.assign(Object.create(vr.prototype),{constructor:yr,isHemisphereLightProbe:!0,copy:function(t){return vr.prototype.copy.call(this,t),this},toJSON:function(t){return vr.prototype.toJSON.call(this,t)}}),_r.prototype=Object.assign(Object.create(vr.prototype),{constructor:_r,isAmbientLightProbe:!0,copy:function(t){return vr.prototype.copy.call(this,t),this},toJSON:function(t){return vr.prototype.toJSON.call(this,t)}}),Object.assign(br.prototype,{update:function(){var t,e,i,n,r,a,o,s,l=new g,c=new g;return function(h){if(t!==this||e!==h.focus||i!==h.fov||n!==h.aspect*this.aspect||r!==h.near||a!==h.far||o!==h.zoom||s!==this.eyeSep){t=this,e=h.focus,i=h.fov,n=h.aspect*this.aspect,r=h.near,a=h.far,o=h.zoom;var u=h.projectionMatrix.clone(),d=(s=this.eyeSep/2)*r/e,p=r*Math.tan(ua.DEG2RAD*i*.5)/o;c.elements[12]=-s,l.elements[12]=s;var f=-p*n+d,m=p*n+d;u.elements[0]=2*r/(m-f),u.elements[8]=(m+f)/(m-f),this.cameraL.projectionMatrix.copy(u),f=-p*n-d,m=p*n-d,u.elements[0]=2*r/(m-f),u.elements[8]=(m+f)/(m-f),this.cameraR.projectionMatrix.copy(u)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(l)}}()}),xr.prototype=Object.create(T.prototype),xr.prototype.constructor=xr,Object.assign(wr.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),Mr.prototype=Object.assign(Object.create(T.prototype),{constructor:Mr,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new r,e=new n,i=new r,a=new r,o=new wr;return function(n){T.prototype.updateMatrixWorld.call(this,n),n=this.context.listener;var r=this.up;if(this.timeDelta=o.getDelta(),this.matrixWorld.decompose(t,e,i),a.set(0,0,-1).applyQuaternion(e),n.positionX){var s=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(t.x,s),n.positionY.linearRampToValueAtTime(t.y,s),n.positionZ.linearRampToValueAtTime(t.z,s),n.forwardX.linearRampToValueAtTime(a.x,s),n.forwardY.linearRampToValueAtTime(a.y,s),n.forwardZ.linearRampToValueAtTime(a.z,s),n.upX.linearRampToValueAtTime(r.x,s),n.upY.linearRampToValueAtTime(r.y,s),n.upZ.linearRampToValueAtTime(r.z,s)}else n.setPosition(t.x,t.y,t.z),n.setOrientation(a.x,a.y,a.z,r.x,r.y,r.z)}}()}),Er.prototype=Object.assign(Object.create(T.prototype),{constructor:Er,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Tr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Tr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this},updateMatrixWorld:function(){var t=new r,e=new n,i=new r,a=new r;return function(n){if(T.prototype.updateMatrixWorld.call(this,n),!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(t,e,i),a.set(0,0,1).applyQuaternion(e),(n=this.panner).positionX){var r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(t.x,r),n.positionY.linearRampToValueAtTime(t.y,r),n.positionZ.linearRampToValueAtTime(t.z,r),n.orientationX.linearRampToValueAtTime(a.x,r),n.orientationY.linearRampToValueAtTime(a.y,r),n.orientationZ.linearRampToValueAtTime(a.z,r)}else n.setPosition(t.x,t.y,t.z),n.setOrientation(a.x,a.y,a.z)}}()}),Object.assign(Sr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}),Object.assign(Ar.prototype,{accumulate:function(t,e){var i=this.buffer,n=this.valueSize;t=t*n+n;var r=this.cumulativeWeight;if(0===r){for(r=0;r!==n;++r)i[t+r]=i[r];r=e}else r+=e,this._mixBufferRegion(i,t,0,e/r,n);this.cumulativeWeight=r},apply:function(t){var e=this.valueSize,i=this.buffer;t=t*e+e;var n=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,1>n&&this._mixBufferRegion(i,t,3*e,1-n,e),n=e;for(var a=e+e;n!==a;++n)if(i[n]!==i[n+e]){r.setValue(i,t);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,i=3*e;this.binding.getValue(t,i);for(var n=e;n!==i;++n)t[n]=t[i+n%e];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(t,e,i,n,r){if(.5<=n)for(n=0;n!==r;++n)t[e+n]=t[i+n]},_slerp:function(t,e,i,r){n.slerpFlat(t,e,t,e,t,i,r)},_lerp:function(t,e,i,n,r){for(var a=1-n,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[i+o]*n}}}),Object.assign(Cr.prototype,{getValue:function(t,e){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(Lr,{Composite:Cr,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new Lr.Composite(t,e,i):new Lr(t,e,i)},sanitizeNodeName:function(){var t=/[\[\]\.:\/]/g;return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",e=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");t=/(WCOD+)?/.source.replace("WCOD",t);var i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),n=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),r=new RegExp("^"+e+t+i+n+"$"),a=["material","materials","bones"];return function(t){var e=r.exec(t);if(!e)throw Error("PropertyBinding: Cannot parse trackName: "+t);var i=(e={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]}).nodeName&&e.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=e.nodeName.substring(i+1);-1!==a.indexOf(n)&&(e.nodeName=e.nodeName.substring(0,i),e.objectName=n)}if(null===e.propertyName||0===e.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+t);return e}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){var n=function(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.name===e||r.uuid===e||(r=n(r.children)))return r}return null};if(t=n(t.children))return t}return null}}),Object.assign(Lr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,n=e.propertyName,r=e.propertyIndex;if(t||(this.node=t=Lr.findNode(this.rootNode,e.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var a=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(t=t.skeleton.bones,i=0;i<t.length;i++)if(t[i].name===a){a=i;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}if(void 0===(a=t[n]))console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+n+" but it wasn't found.",t);else{if(e=this.Versioning.None,this.targetObject=t,void 0!==t.needsUpdate?e=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(e=this.Versioning.MatrixWorldNeedsUpdate),i=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(i=0;i<this.node.geometry.morphAttributes.position.length;i++)if(t.geometry.morphAttributes.position[i].name===r){r=i;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(i=0;i<this.node.geometry.morphTargets.length;i++)if(t.geometry.morphTargets[i].name===r){r=i;break}}}i=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(i=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][e]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Lr.prototype,{_getValue_unbound:Lr.prototype.getValue,_setValue_unbound:Lr.prototype.setValue}),Object.assign(Dr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid,p=n[d];if(void 0===p){p=e++,n[d]=p,t.push(u),d=0;for(var f=s;d!==f;++d)o[d].push(new Lr(u,r[d],a[d]))}else if(p<i){l=t[p];var m=--i;for(n[(f=t[m]).uuid]=p,t[p]=f,n[d]=m,t[m]=u,d=0,f=s;d!==f;++d){var g=o[d],v=g[p];g[p]=g[m],void 0===v&&(v=new Lr(u,r[d],a[d])),g[m]=v}}else t[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,c=i[l];if(void 0!==c&&c>=e){var h=e++,u=t[h];for(i[u.uuid]=c,t[c]=u,i[l]=h,t[h]=s,s=0,l=r;s!==l;++s){var d=(u=n[s])[c];u[c]=u[h],u[h]=d}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o].uuid,c=n[l];if(void 0!==c)if(delete n[l],c<i){var h=t[l=--i],u=--e,d=t[u];for(n[h.uuid]=c,t[c]=h,n[d.uuid]=l,t[l]=d,t.pop(),h=0,d=a;h!==d;++h){var p=r[h],f=p[u];p[c]=p[l],p[l]=f,p.pop()}}else for(n[(d=t[u=--e]).uuid]=c,t[c]=d,t.pop(),h=0,d=a;h!==d;++h)(p=r[h])[c]=p[u],p.pop()}this.nCachedObjects_=i},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,n=i[t],r=this._bindings;if(void 0!==n)return r[n];var a=this._paths,o=this._parsedPaths,s=this._objects,l=this.nCachedObjects_,c=Array(s.length);for(n=r.length,i[t]=n,a.push(t),o.push(e),r.push(c),i=l,n=s.length;i!==n;++i)c[i]=new Lr(s[i],t,e);return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){var n=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=i,a[i]=s,a.pop(),r[i]=r[o],r.pop(),n[i]=n[o],n.pop()}}}),Object.assign(Pr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){i=this._clip.duration;var n=t._clip.duration,r=i/n;t.warp(1,n/i,e),this.warp(r,1,e)}return this},crossFadeTo:function(t,e,i){return t.crossFadeFrom(this,e,i)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,i){var n=this._mixer,r=n.time,a=this._timeScaleInterpolant,o=this.timeScale;return null===a&&(this._timeScaleInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,n[1]=r+i,a[0]=t/o,a[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,i,n){if(this.enabled){var r=this._startTime;if(null!==r){if(0>(e=(t-r)*i)||0===i)return;this._startTime=null,e*=i}if(e*=this._updateTimeScale(t),i=this._updateTime(e),0<(t=this._updateWeight(t))){e=this._interpolants,r=this._propertyBindings;for(var a=0,o=e.length;a!==o;++a)e[a].evaluate(i),r[a].accumulate(n,t)}}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var i=this._timeScaleInterpolant;null!==i&&(e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e},_updateTime:function(t){var e=this.time+t,i=this._clip.duration,n=this.loop,r=this._loopCount,a=2202===n;if(0===t)return-1===r?e:a&&1==(1&r)?i-e:e;if(2200===n)t:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=i)e=i;else{if(!(0>e)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>t?-1:1})}else{if(-1===r&&(0<=t?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=i||0>e){e-=i*(n=Math.floor(e/i)),r+=Math.abs(n);var o=this.repetitions-r;0>=o?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e=0<t?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(1===o?(t=0>t,this._setEndings(t,!t,a)):this._setEndings(!1,!1,a),this._loopCount=r,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n}))}else this.time=e;if(a&&1==(1&r))return i-e}return e},_setEndings:function(t,e,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,i){var n=this._mixer,r=n.time,a=this._weightInterpolant;return null===a&&(this._weightInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,a[0]=e,n[1]=r+t,a[1]=i,this}}),Rr.prototype=Object.assign(Object.create(e.prototype),{constructor:Rr,_bindAction:function(t,e){var i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,a=t._propertyBindings;t=t._interpolants;var o=i.uuid,s=this._bindingsByRootAndName,l=s[o];for(void 0===l&&(l={},s[o]=l),s=0;s!==r;++s){var c=n[s],h=c.name,u=l[h];if(void 0===u){if(void 0!==(u=a[s])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,h));continue}++(u=new Ar(Lr.create(i,h,e&&e._propertyBindings[s].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(u,o,h)}a[s]=u,t[s].resultBuffer=u.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}for(i=0,n=(e=t._propertyBindings).length;i!==n;++i){var r=e[i];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){return null!==(t=t._cacheIndex)&&t<this._nActiveActions},_addInactiveAction:function(t,e,i){var n=this._actions,r=this._actionsByClip,a=r[e];void 0===a?(a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a):(e=a.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=n.length,n.push(t),a.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null,e=t._clip.uuid;var r=(n=(i=this._actionsByClip)[e]).knownActions,a=r[r.length-1],o=t._byClipCacheIndex;a._byClipCacheIndex=o,r[o]=a,r.pop(),t._byClipCacheIndex=null,delete n.actionByRoot[(t._localRoot||this._root).uuid],0===r.length&&delete i[e],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=0,i=(t=t._propertyBindings).length;e!==i;++e){var n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){var n=this._bindingsByRootAndName,r=n[e],a=this._bindings;void 0===r&&(r={},n[e]=r),r[i]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,n=i.rootNode.uuid;i=i.path;var r=this._bindingsByRootAndName,a=r[n],o=e[e.length-1];t=t._cacheIndex,o._cacheIndex=t,e[t]=o,e.pop(),delete a[i];t:{for(var s in a)break t;delete r[n]}},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&((i=new hn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var i=e||this._root,n=i.uuid;t=null!==(i="string"==typeof t?bn.findByName(i,t):t)?i.uuid:t;var r=this._actionsByClip[t],a=null;if(void 0!==r){if(void 0!==(a=r.actionByRoot[n]))return a;a=r.knownActions[0],null===i&&(i=a._clip)}return null===i?null:(e=new Pr(this,i,e),this._bindAction(e,a),this._addInactiveAction(e,t,n),e)},existingAction:function(t,e){var i=e||this._root;return e=i.uuid,i="string"==typeof t?bn.findByName(i,t):t,void 0!==(t=this._actionsByClip[i?i.uuid:t])&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==e;++r)t[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==i;++o)e[o]._update(n,t,r,a);for(t=this._bindings,e=this._nActiveBindings,o=0;o!==e;++o)t[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions;t=t.uuid;var i=this._actionsByClip,n=i[t];if(void 0!==n){for(var r=0,a=(n=n.knownActions).length;r!==a;++r){var o=n[r];this._deactivateAction(o);var s=o._cacheIndex,l=e[e.length-1];o._cacheIndex=null,o._byClipCacheIndex=null,l._cacheIndex=s,e[s]=l,e.pop(),this._removeInactiveBindingsForAction(o)}delete i[t]}},uncacheRoot:function(t){t=t.uuid;var e=this._actionsByClip;for(n in e){var i=e[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[t];if(void 0!==n)for(var r in n)(t=n[r]).restoreOriginalState(),this._removeInactiveBinding(t)},uncacheAction:function(t,e){null!==(t=this.existingAction(t,e))&&(this._deactivateAction(t),this._removeInactiveAction(t))}}),Or.prototype.clone=function(){return new Or(void 0===this.value.clone?this.value:this.value.clone())},Ir.prototype=Object.assign(Object.create(De.prototype),{constructor:Ir,isInstancedInterleavedBuffer:!0,copy:function(t){return De.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(zr.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){return kr(t,this,i=i||[],e),i.sort(Nr),i},intersectObjects:function(t,e,i){if(i=i||[],!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=t.length;n<r;n++)kr(t[n],this,i,e);return i.sort(Nr),i}}),Object.assign(Fr.prototype,{set:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(t,i),this.phi=Math.acos(ua.clamp(e/this.radius,-1,1))),this}}),Object.assign(Br.prototype,{set:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}}),Object.assign(Ur.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i;return function(e,i){return i=t.copy(i).multiplyScalar(.5),this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new i),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new i),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new i),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(Hr.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new r),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new r),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new r),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new r,e=new r;return function(i,n){return t.subVectors(i,this.start),e.subVectors(this.end,this.start),i=e.dot(e),i=e.dot(t)/i,n&&(i=ua.clamp(i,0,1)),i}}(),closestPointToPoint:function(t,e,i){return t=this.closestPointToPointParameter(t,e),void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new r),this.delta(i).multiplyScalar(t).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Gr.prototype=Object.create(T.prototype),Gr.prototype.constructor=Gr,Gr.prototype.isImmediateRenderObject=!0,jr.prototype=Object.create(Ue.prototype),jr.prototype.constructor=jr,jr.prototype.update=function(){var t=new r,e=new r,i=new a;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,l=o.faces,c=o=0,h=l.length;c<h;c++)for(var u=l[c],d=0,p=u.vertexNormals.length;d<p;d++){var f=u.vertexNormals[d];t.copy(s[u[n[d]]]).applyMatrix4(r),e.copy(f).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),a.setXYZ(o,t.x,t.y,t.z),o+=1,a.setXYZ(o,e.x,e.y,e.z),o+=1}else if(o&&o.isBufferGeometry)for(n=o.attributes.position,s=o.attributes.normal,d=o=0,p=n.count;d<p;d++)t.set(n.getX(d),n.getY(d),n.getZ(d)).applyMatrix4(r),e.set(s.getX(d),s.getY(d),s.getZ(d)),e.applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),a.setXYZ(o,t.x,t.y,t.z),o+=1,a.setXYZ(o,e.x,e.y,e.z),o+=1;a.needsUpdate=!0}}(),Vr.prototype=Object.create(T.prototype),Vr.prototype.constructor=Vr,Vr.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Vr.prototype.update=function(){var t=new r;return function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,i=e*Math.tan(this.light.angle);this.cone.scale.set(i,i,e),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Wr.prototype=Object.create(Ue.prototype),Wr.prototype.constructor=Wr,Wr.prototype.updateMatrixWorld=function(){var t=new r,e=new g,i=new g;return function(n){var r=this.bones,a=this.geometry,o=a.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var c=r[s];c.parent&&c.parent.isBone&&(e.multiplyMatrices(i,c.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(l,t.x,t.y,t.z),e.multiplyMatrices(i,c.parent.matrixWorld),t.setFromMatrixPosition(e),o.setXYZ(l+1,t.x,t.y,t.z),l+=2)}a.getAttribute("position").needsUpdate=!0,T.prototype.updateMatrixWorld.call(this,n)}}(),qr.prototype=Object.create(Z.prototype),qr.prototype.constructor=qr,qr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},qr.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Xr.prototype=Object.create(Be.prototype),Xr.prototype.constructor=Xr,Xr.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);1<e&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},Xr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yr.prototype=Object.create(T.prototype),Yr.prototype.constructor=Yr,Yr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yr.prototype.update=function(){var t=new r,e=new _,i=new _;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=n.geometry.getAttribute("color");e.copy(this.light.color),i.copy(this.light.groundColor);for(var a=0,o=r.count;a<o;a++){var s=a<o/2?e:i;r.setXYZ(a,s.r,s.g,s.b)}r.needsUpdate=!0}n.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Zr.prototype=Object.create(Z.prototype),Zr.prototype.constructor=Zr,Zr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Zr.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},Jr.prototype=Object.assign(Object.create(Ue.prototype),{constructor:Jr,copy:function(t){return Ue.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),Qr.prototype=Object.create(Ue.prototype),Qr.prototype.constructor=Qr,Kr.prototype=Object.create(Be.prototype),Kr.prototype.constructor=Kr,Kr.prototype.update=function(){function t(t,n,a,o){for(a=(n-t)/a,p.setXYZ(h,0,0,0),u++,e=t;e<n;e+=a)i=h+u,p.setXYZ(i,Math.sin(e)*r,0,Math.cos(e)*r),p.setXYZ(i+1,Math.sin(Math.min(e+a,n))*r,0,Math.cos(Math.min(e+a,n))*r),p.setXYZ(i+2,0,0,0),u+=3;d.addGroup(h,u,o),h+=u,u=0}var e,i,n=this.audio,r=this.range,a=this.divisionsInnerAngle,o=this.divisionsOuterAngle,s=ua.degToRad(n.panner.coneInnerAngle),l=s/2,c=(n=ua.degToRad(n.panner.coneOuterAngle))/2,h=0,u=0,d=this.geometry,p=d.attributes.position;d.clearGroups(),t(-c,-l,o,0),t(-l,l,a,1),t(l,c,o,0),p.needsUpdate=!0,s===n&&(this.material[0].visible=!1)},Kr.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},$r.prototype=Object.create(Ue.prototype),$r.prototype.constructor=$r,$r.prototype.update=function(){var t=new r,e=new r,i=new a;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,r=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=0,l=0,c=(a=a.faces).length;l<c;l++){var h=a[l],u=h.normal;t.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(n),e.copy(u).applyMatrix3(i).normalize().multiplyScalar(this.size).add(t),r.setXYZ(s,t.x,t.y,t.z),s+=1,r.setXYZ(s,e.x,e.y,e.z),s+=1}r.needsUpdate=!0}}(),ta.prototype=Object.create(T.prototype),ta.prototype.constructor=ta,ta.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},ta.prototype.update=function(){var t=new r,e=new r,i=new r;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(e,t),this.lightPlane.lookAt(e),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=i.length()}}(),ea.prototype=Object.create(Ue.prototype),ea.prototype.constructor=ea,ea.prototype.update=function(){function t(t,r,o,s){if(n.set(r,o,s).unproject(a),void 0!==(t=i[t]))for(r=e.getAttribute("position"),o=0,s=t.length;o<s;o++)r.setXYZ(t[o],n.x,n.y,n.z)}var e,i,n=new r,a=new be;return function(){e=this.geometry,i=this.pointMap,a.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),ia.prototype=Object.create(Ue.prototype),ia.prototype.constructor=ia,ia.prototype.update=function(){var t=new d;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){e=t.min;var i=t.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=e.x,r[4]=i.y,r[5]=i.z,r[6]=e.x,r[7]=e.y,r[8]=i.z,r[9]=i.x,r[10]=e.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=e.z,r[15]=e.x,r[16]=i.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=i.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ia.prototype.setFromObject=function(t){return this.object=t,this.update(),this},ia.prototype.copy=function(t){return Ue.prototype.copy.call(this,t),this.object=t.object,this},ia.prototype.clone=function(){return(new this.constructor).copy(this)},na.prototype=Object.create(Ue.prototype),na.prototype.constructor=na,na.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),T.prototype.updateMatrixWorld.call(this,t))},ra.prototype=Object.create(Be.prototype),ra.prototype.constructor=ra,ra.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;1e-8>Math.abs(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=0>e?1:0,this.lookAt(this.plane.normal),T.prototype.updateMatrixWorld.call(this,t)},aa.prototype=Object.create(T.prototype),aa.prototype.constructor=aa,aa.prototype.setDirection=function(){var t,e=new r;return function(i){.99999<i.y?this.quaternion.set(0,0,0,1):-.99999>i.y?this.quaternion.set(1,0,0,0):(e.set(i.z,0,-i.x).normalize(),t=Math.acos(i.y),this.quaternion.setFromAxisAngle(e,t))}}(),aa.prototype.setLength=function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()},aa.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},aa.prototype.copy=function(t){return T.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},aa.prototype.clone=function(){return(new this.constructor).copy(this)},oa.prototype=Object.create(Ue.prototype),oa.prototype.constructor=oa,Dn.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Dn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Wn.prototype,{createPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getPoints(t),this.createGeometry(t)},createSpacedPointsGeometry:function(t){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),t=this.getSpacedPoints(t),this.createGeometry(t)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new S,i=0,n=t.length;i<n;i++){var a=t[i];e.vertices.push(new r(a.x,a.y,a.z||0))}return e}}),Object.assign(qn.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),sa.prototype=Object.create(In.prototype),la.prototype=Object.create(In.prototype),ca.prototype=Object.create(In.prototype),Object.assign(ca.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Jr.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Wr.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(fr.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ka.extractUrlBase(t)}}),Object.assign(cr.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(Ur.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(d.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Hr.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(ua,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ua.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ua.ceilPowerOfTwo(t)}}),Object.assign(a.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(g.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new r),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,a)}}),f.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},n.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(q.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(X.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(X,{barycoordFromPoint:function(t,e,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),X.getBarycoord(t,e,i,n,r)},normal:function(t,e,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),X.getNormal(t,e,i,n)}}),Object.assign(Xn.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Di(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Hi(this,t)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(r.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(s.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(T.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(T.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ie.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ne.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ze.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Dn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),xe.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Yn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(A.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(B.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(B.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Pi.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Or.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(V.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(en.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(W.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Se.prototype,{clearTarget:function(t,e,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,i,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(Se.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(me.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(h.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(l.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Ee.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Er.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new mr).load(t,(function(t){e.setBuffer(t)})),this},Sr.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},xr.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},pa.crossOrigin=void 0,pa.loadTexture=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Ln;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},pa.loadTextureCube=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Cn;return r.setCrossOrigin(this.crossOrigin),t=r.load(t,i,void 0,n),e&&(t.mapping=e),t},pa.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},pa.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},t.ACESFilmicToneMapping=5,t.AddEquation=100,t.AddOperation=2,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AmbientLight=nr,t.AmbientLightProbe=_r,t.AnimationClip=bn,t.AnimationLoader=En,t.AnimationMixer=Rr,t.AnimationObjectGroup=Dr,t.AnimationUtils=ja,t.ArcCurve=Rn,t.ArrayCamera=we,t.ArrowHelper=aa,t.Audio=Er,t.AudioAnalyser=Sr,t.AudioContext=oo,t.AudioListener=Mr,t.AudioLoader=mr,t.AxesHelper=oa,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new oa(t)},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Sn(t)},t.Bone=ke,t.BooleanKeyframeTrack=pn,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ia(t,e)},t.Box2=Ur,t.Box3=d,t.Box3Helper=na,t.BoxBufferGeometry=H,t.BoxGeometry=U,t.BoxHelper=ia,t.BufferAttribute=A,t.BufferGeometry=B,t.BufferGeometryLoader=lr,t.ByteType=1010,t.Cache=Va,t.Camera=be,t.CameraHelper=ea,t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.CanvasTexture=qe,t.CatmullRomCurve3=In,t.CineonToneMapping=4,t.CircleBufferGeometry=Ji,t.CircleGeometry=Zi,t.ClampToEdgeWrapping=1001,t.Clock=wr,t.ClosedSplineCurve3=sa,t.Color=_,t.ColorKeyframeTrack=fn,t.CompressedTexture=We,t.CompressedTextureLoader=Tn,t.ConeBufferGeometry=Yi,t.ConeGeometry=Xi,t.CubeCamera=xr,t.CubeGeometry=U,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.CubeTexture=st,t.CubeTextureLoader=Cn,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.CubicBezierCurve=Fn,t.CubicBezierCurve3=Bn,t.CubicInterpolant=cn,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=Dn,t.CurvePath=Wn,t.CustomBlending=5,t.CylinderBufferGeometry=qi,t.CylinderGeometry=Wi,t.Cylindrical=Br,t.DataTexture=u,t.DataTexture2DArray=lt,t.DataTexture3D=ct,t.DataTextureLoader=Sn,t.DefaultLoadingManager=Wa,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.DepthTexture=Xe,t.DirectionalLight=ir,t.DirectionalLightHelper=ta,t.DirectionalLightShadow=er,t.DiscreteInterpolant=un,t.DodecahedronBufferGeometry=oi,t.DodecahedronGeometry=ai,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new A(t,e).setDynamic(!0)},t.EdgesGeometry=Vi,t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ue(new Vi(t.geometry),new Fe({color:void 0!==e?e:16777215}))},t.EllipseCurve=Pn,t.EqualDepth=4,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.Euler=M,t.EventDispatcher=e,t.ExtrudeBufferGeometry=Pi,t.ExtrudeGeometry=Di,t.Face3=w,t.Face4=function(t,e,i,n,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new w(t,e,i,r,a,o)},t.FaceColors=1,t.FaceNormalsHelper=$r,t.FileLoader=Mn,t.FlatShading=1,t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new z(t,e)},t.Float32BufferAttribute=z,t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new N(t,e)},t.Float64BufferAttribute=N,t.FloatType=1015,t.Fog=Ce,t.FogExp2=Ae,t.Font=dr,t.FontLoader=pr,t.FrontFaceDirectionCCW=1,t.FrontFaceDirectionCW=0,t.FrontSide=0,t.Frustum=m,t.GammaEncoding=3007,t.Geometry=S,t.GeometryUtils={merge:function(t,e,i){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();var n=e.matrix;e=e.geometry}t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GridHelper=Jr,t.Group=_e,t.HalfFloatType=1016,t.HemisphereLight=Zn,t.HemisphereLightHelper=Yr,t.HemisphereLightProbe=yr,t.IcosahedronBufferGeometry=ri,t.IcosahedronGeometry=ni,t.ImageBitmapLoader=hr,t.ImageLoader=An,t.ImageUtils=pa,t.ImmediateRenderObject=Gr,t.InstancedBufferAttribute=sr,t.InstancedBufferGeometry=or,t.InstancedInterleavedBuffer=Ir,t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new P(t,e)},t.Int16BufferAttribute=P,t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new O(t,e)},t.Int32BufferAttribute=O,t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new C(t,e)},t.Int8BufferAttribute=C,t.IntType=1013,t.InterleavedBuffer=De,t.InterleavedBufferAttribute=Pe,t.Interpolant=ln,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.KeyframeTrack=dn,t.LOD=Ie,t.LatheBufferGeometry=Ui,t.LatheGeometry=Bi,t.Layers=E,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},t.LessDepth=2,t.LessEqualDepth=3,t.Light=Yn,t.LightProbe=vr,t.LightProbeHelper=Zr,t.LightShadow=Jn,t.Line=Be,t.Line3=Hr,t.LineBasicMaterial=Fe,t.LineCurve=Un,t.LineCurve3=Hn,t.LineDashedMaterial=sn,t.LineLoop=He,t.LinePieces=1,t.LineSegments=Ue,t.LineStrip=0,t.LinearEncoding=3e3,t.LinearFilter=1006,t.LinearInterpolant=hn,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearToneMapping=1,t.Loader=fr,t.LoaderUtils=Ka,t.LoadingManager=wn,t.LogLuvEncoding=3003,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.Material=V,t.MaterialLoader=ar,t.Math=ua,t.Matrix3=a,t.Matrix4=g,t.MaxEquation=104,t.Mesh=Z,t.MeshBasicMaterial=Y,t.MeshDepthMaterial=pe,t.MeshDistanceMaterial=fe,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MeshLambertMaterial=an,t.MeshMatcapMaterial=on,t.MeshNormalMaterial=rn,t.MeshPhongMaterial=en,t.MeshPhysicalMaterial=tn,t.MeshStandardMaterial=$i,t.MeshToonMaterial=nn,t.MinEquation=103,t.MirroredRepeatWrapping=1002,t.MixOperation=1,t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=1003,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NeverDepth=0,t.NoBlending=0,t.NoColors=0,t.NoToneMapping=0,t.NormalBlending=1,t.NotEqualDepth=7,t.NumberKeyframeTrack=mn,t.Object3D=T,t.ObjectLoader=cr,t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=ii,t.OctahedronGeometry=ei,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=tr,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.ParametricBufferGeometry=Je,t.ParametricGeometry=Ze,t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Oe(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ge(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new je(t,e)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ge(t)},t.Path=qn,t.PerspectiveCamera=xe,t.Plane=f,t.PlaneBufferGeometry=j,t.PlaneGeometry=G,t.PlaneHelper=ra,t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new je(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ge(t)},t.PointLight=$n,t.PointLightHelper=qr,t.Points=je,t.PointsMaterial=Ge,t.PolarGridHelper=Qr,t.PolyhedronBufferGeometry=Ke,t.PolyhedronGeometry=Qe,t.PositionalAudio=Tr,t.PositionalAudioHelper=Kr,t.PropertyBinding=Lr,t.PropertyMixer=Ar,t.QuadraticBezierCurve=Gn,t.QuadraticBezierCurve3=jn,t.Quaternion=n,t.QuaternionKeyframeTrack=vn,t.QuaternionLinearInterpolant=gn,t.REVISION="105",t.RGBADepthPacking=3201,t.RGBAFormat=1023,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGBDEncoding=3006,t.RGBEEncoding=3002,t.RGBEFormat=1023,t.RGBFormat=1022,t.RGBM16Encoding=3005,t.RGBM7Encoding=3004,t.RGB_ETC1_Format=36196,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_S3TC_DXT1_Format=33776,t.RawShaderMaterial=Ki,t.Ray=q,t.Raycaster=zr,t.RectAreaLight=rr,t.RectAreaLightHelper=Xr,t.RedFormat=1028,t.ReinhardToneMapping=2,t.RepeatWrapping=1e3,t.ReverseSubtractEquation=102,t.RingBufferGeometry=Fi,t.RingGeometry=ki,t.Scene=Le,t.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},t.ShaderChunk=ma,t.ShaderLib=_a,t.ShaderMaterial=W,t.ShadowMaterial=Qi,t.Shape=Xn,t.ShapeBufferGeometry=Gi,t.ShapeGeometry=Hi,t.ShapePath=ur,t.ShapeUtils=Ba,t.ShortType=1011,t.Skeleton=Ne,t.SkeletonHelper=Wr,t.SkinnedMesh=ze,t.SmoothShading=2,t.Sphere=p,t.SphereBufferGeometry=Ni,t.SphereGeometry=zi,t.Spherical=Fr,t.SphericalHarmonics3=gr,t.SphericalReflectionMapping=305,t.Spline=ca,t.SplineCurve=Vn,t.SplineCurve3=la,t.SpotLight=Kn,t.SpotLightHelper=Vr,t.SpotLightShadow=Qn,t.Sprite=Oe,t.SpriteMaterial=Re,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StereoCamera=br,t.StringKeyframeTrack=yn,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=ti,t.TetrahedronGeometry=$e,t.TextBufferGeometry=Ii,t.TextGeometry=Oi,t.Texture=o,t.TextureLoader=Ln,t.TorusBufferGeometry=di,t.TorusGeometry=ui,t.TorusKnotBufferGeometry=hi,t.TorusKnotGeometry=ci,t.Triangle=X,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=li,t.TubeGeometry=si,t.UVMapping=300,t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new R(t,e)},t.Uint16BufferAttribute=R,t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new I(t,e)},t.Uint32BufferAttribute=I,t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new L(t,e)},t.Uint8BufferAttribute=L,t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new D(t,e)},t.Uint8ClampedBufferAttribute=D,t.Uncharted2ToneMapping=3,t.Uniform=Or,t.UniformsLib=ya,t.UniformsUtils=ga,t.UnsignedByteType=1009,t.UnsignedInt248Type=1020,t.UnsignedIntType=1014,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedShortType=1012,t.Vector2=i,t.Vector3=r,t.Vector4=s,t.VectorKeyframeTrack=_n,t.Vertex=function(t,e,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new r(t,e,i)},t.VertexColors=2,t.VertexNormalsHelper=jr,t.VideoTexture=Ve,t.WebGLMultisampleRenderTarget=c,t.WebGLRenderTarget=l,t.WebGLRenderTargetCube=h,t.WebGLRenderer=Se,t.WebGLUtils=ye,t.WireframeGeometry=Ye,t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ue(new Ye(t.geometry),new Fe({color:void 0!==e?e:16777215}))},t.WrapAroundEnding=2402,t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Mn(t)},t.ZeroCurvatureEnding=2400,t.ZeroFactor=200,t.ZeroSlopeEnding=2401,t.sRGBEncoding=3001,Object.defineProperty(t,"__esModule",{value:!0})}));
/*!
 * VERSION: 2.0.2
 * DATE: 2018-08-27
 * UPDATES AND DOCS AT: http://greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2018, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push((function(){"use strict";var t,e,i,n,r,a,o,s,l,c,h,u,d,p,f,m;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],(function(t,e,i){var n=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},r=function(t,e,i){var n,r,a=t.cycle;for(n in a)r=a[n],t[n]="function"==typeof r?r(i,e[i]):r[i%r.length];delete t.cycle},a=function(t,e,n){i.call(this,t,e,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=a.prototype.render},o=1e-10,s=i._internals,l=s.isSelector,c=s.isArray,h=a.prototype=i.to({},.1,{}),u=[];a.version="2.0.2",h.constructor=a,h.kill()._gc=!1,a.killTweensOf=a.killDelayedCallsTo=i.killTweensOf,a.getTweensOf=i.getTweensOf,a.lagSmoothing=i.lagSmoothing,a.ticker=i.ticker,a.render=i.render,h.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),i.prototype.invalidate.call(this)},h.updateTo=function(t,e){var n,r=this.ratio,a=this.vars.immediateRender||t.immediateRender;for(n in e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),t)this.vars[n]=t[n];if(this._initted||a)if(e)this._initted=!1,a&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||a)for(var s,l=1/(1-r),c=this._firstPT;c;)s=c.s+c.c,c.c*=l,c.s=s-c.c,c=c._next;return this},h.render=function(t,e,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,a,l,c,h,u,d,p,f,m=this._dirty?this.totalDuration():this._totalDuration,g=this._time,v=this._totalTime,y=this._cycle,_=this._duration,b=this._rawPrevTime;if(t>=m-1e-7&&t>=0?(this._totalTime=m,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=_,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,a="onComplete",n=n||this._timeline.autoRemoveChildren),0===_&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(0>b||0>=t&&t>=-1e-7||b===o&&"isPause"!==this.data)&&b!==t&&(n=!0,b>o&&(a="onReverseComplete")),this._rawPrevTime=p=!e||t||b===t?t:o)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==v||0===_&&b>0)&&(a="onReverseComplete",r=this._reversed),0>t&&(this._active=!1,0===_&&(this._initted||!this.vars.lazy||n)&&(b>=0&&(n=!0),this._rawPrevTime=p=!e||t||b===t?t:o)),this._initted||(n=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(c=_+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&t>=v&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!=(1&this._cycle)&&(this._time=_-this._time,(f=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(!0!==f||this._initted?this._yoyoEase=f=!0===f?this._ease:f instanceof Ease?f:Ease.map[f]:(f=this.vars.ease,this._yoyoEase=f=f?f instanceof Ease?f:"function"==typeof f?new Ease(f,this.vars.easeParams):Ease.map[f]||i.defaultEase:i.defaultEase)),this.ratio=f?1-f.getRatio((_-this._time)/_):0)),this._time>_?this._time=_:this._time<0&&(this._time=0)),this._easeType&&!f?(h=this._time/_,(1===(u=this._easeType)||3===u&&h>=.5)&&(h=1-h),3===u&&(h*=2),1===(d=this._easePower)?h*=h:2===d?h*=h*h:3===d?h*=h*h*h:4===d&&(h*=h*h*h*h),1===u?this.ratio=1-h:2===u?this.ratio=h:this._time/_<.5?this.ratio=h/2:this.ratio=1-h/2):f||(this.ratio=this._ease.getRatio(this._time/_))),g!==this._time||n||y!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=g,this._totalTime=v,this._rawPrevTime=b,this._cycle=y,s.lazyTweens.push(this),void(this._lazy=[t,e]);!this._time||r||f?r&&this._ease._calcEnd&&!f&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/_)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==g&&t>=0&&(this._active=!0),0===v&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,!0,n):a||(a="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===_)&&(e||this._callback("onStart"))),l=this._firstPT;l;)l.f?l.t[l.p](l.c*this.ratio+l.s):l.t[l.p]=l.c*this.ratio+l.s,l=l._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,!0,n),e||(this._totalTime!==v||a)&&this._callback("onUpdate")),this._cycle!==y&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),a&&(!this._gc||n)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,!0,n),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a),0===_&&this._rawPrevTime===o&&p!==o&&(this._rawPrevTime=0))}else v!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},a.to=function(t,e,i){return new a(t,e,i)},a.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new a(t,e,i)},a.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new a(t,e,n)},a.staggerTo=a.allTo=function(t,e,o,s,h,d,p){s=s||0;var f,m,g,v,y=0,_=[],b=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),h.apply(p||o.callbackScope||this,d||u)},x=o.cycle,w=o.startAt&&o.startAt.cycle;for(c(t)||("string"==typeof t&&(t=i.selector(t)||t),l(t)&&(t=n(t))),t=t||[],0>s&&((t=n(t)).reverse(),s*=-1),f=t.length-1,g=0;f>=g;g++){for(v in m={},o)m[v]=o[v];if(x&&(r(m,t,g),null!=m.duration&&(e=m.duration,delete m.duration)),w){for(v in w=m.startAt={},o.startAt)w[v]=o.startAt[v];r(m.startAt,t,g)}m.delay=y+(m.delay||0),g===f&&h&&(m.onComplete=b),_[g]=new a(t[g],e,m),y+=s}return _},a.staggerFrom=a.allFrom=function(t,e,i,n,r,o,s){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,a.staggerTo(t,e,i,n,r,o,s)},a.staggerFromTo=a.allFromTo=function(t,e,i,n,r,o,s,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,a.staggerTo(t,e,n,r,o,s,l)},a.delayedCall=function(t,e,i,n,r){return new a(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},a.set=function(t,e){return new a(t,0,e)},a.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var d=function(t,e){for(var n=[],r=0,a=t._first;a;)a instanceof i?n[r++]=a:(e&&(n[r++]=a),r=(n=n.concat(d(a,e))).length),a=a._next;return n},p=a.getAllTweens=function(e){return d(t._rootTimeline,e).concat(d(t._rootFramesTimeline,e))};a.killAll=function(t,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var a,o,s,l=p(0!=r),c=l.length,h=i&&n&&r;for(s=0;c>s;s++)o=l[s],(h||o instanceof e||(a=o.target===o.vars.onComplete)&&n||i&&!a)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},a.killChildTweensOf=function(t,e){if(null!=t){var r,o,h,u,d,p=s.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),l(t)&&(t=n(t)),c(t))for(u=t.length;--u>-1;)a.killChildTweensOf(t[u],e);else{for(h in r=[],p)for(o=p[h].target.parentNode;o;)o===t&&(r=r.concat(p[h].tweens)),o=o.parentNode;for(d=r.length,u=0;d>u;u++)e&&r[u].totalTime(r[u].totalDuration()),r[u]._enabled(!1,!1)}}};var f=function(t,i,n,r){i=!1!==i,n=!1!==n;for(var a,o,s=p(r=!1!==r),l=i&&n&&r,c=s.length;--c>-1;)o=s[c],(l||o instanceof e||(a=o.target===o.vars.onComplete)&&n||i&&!a)&&o.paused(t)};return a.pauseAll=function(t,e,i){f(!0,t,e,i)},a.resumeAll=function(t,e,i){f(!1,t,e,i)},a.globalTimeScale=function(e){var n=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||o,n._startTime=r-(r-n._startTime)*n._timeScale/e,n=t._rootFramesTimeline,r=i.ticker.frame,n._startTime=r-(r-n._startTime)*n._timeScale/e,n._timeScale=t._rootTimeline._timeScale=e,e):n._timeScale},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},h.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},a}),!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],(function(t,e,i){var n=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,n,r=this.vars;for(n in r)i=r[n],l(i)&&-1!==i.join("").indexOf("{self}")&&(r[n]=this._swapSelfInParams(i));l(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=1e-10,a=i._internals,o=n._internals={},s=a.isSelector,l=a.isArray,c=a.lazyTweens,h=a.lazyRender,u=_gsScope._gsDefine.globals,d=function(t){var e,i={};for(e in t)i[e]=t[e];return i},p=function(t,e,i){var n,r,a=t.cycle;for(n in a)r=a[n],t[n]="function"==typeof r?r(i,e[i]):r[i%r.length];delete t.cycle},f=o.pauseCallback=function(){},m=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},g=n.prototype=new e;return n.version="2.0.2",g.constructor=n,g.kill()._gc=g._forcingPlayhead=g._hasPause=!1,g.to=function(t,e,n,r){var a=n.repeat&&u.TweenMax||i;return e?this.add(new a(t,e,n),r):this.set(t,n,r)},g.from=function(t,e,n,r){return this.add((n.repeat&&u.TweenMax||i).from(t,e,n),r)},g.fromTo=function(t,e,n,r,a){var o=r.repeat&&u.TweenMax||i;return e?this.add(o.fromTo(t,e,n,r),a):this.set(t,r,a)},g.staggerTo=function(t,e,r,a,o,l,c,h){var u,f,g=new n({onComplete:l,onCompleteParams:c,callbackScope:h,smoothChildTiming:this.smoothChildTiming}),v=r.cycle;for("string"==typeof t&&(t=i.selector(t)||t),s(t=t||[])&&(t=m(t)),0>(a=a||0)&&((t=m(t)).reverse(),a*=-1),f=0;f<t.length;f++)(u=d(r)).startAt&&(u.startAt=d(u.startAt),u.startAt.cycle&&p(u.startAt,t,f)),v&&(p(u,t,f),null!=u.duration&&(e=u.duration,delete u.duration)),g.to(t[f],e,u,f*a);return this.add(g,o)},g.staggerFrom=function(t,e,i,n,r,a,o,s){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,r,a,o,s)},g.staggerFromTo=function(t,e,i,n,r,a,o,s,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,r,a,o,s,l)},g.call=function(t,e,n,r){return this.add(i.delayedCall(0,t,e,n),r)},g.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new i(t,0,e),n)},n.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var r,a,o,s,l=new n(t),c=l._timeline;for(null==e&&(e=!0),c._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=c._time,o=c._first;o;)s=o._next,e&&o instanceof i&&o.target===o.vars.onComplete||(0>(a=o._startTime-o._delay)&&(r=1),l.add(o,a)),o=s;return c.add(l,0),r&&l.totalDuration(),l},g.add=function(r,a,o,s){var c,h,u,d,p,f;if("number"!=typeof a&&(a=this._parseTimeOrLabel(a,0,!0,r)),!(r instanceof t)){if(r instanceof Array||r&&r.push&&l(r)){for(o=o||"normal",s=s||0,c=a,h=r.length,u=0;h>u;u++)l(d=r[u])&&(d=new n({tweens:d})),this.add(d,c),"string"!=typeof d&&"function"!=typeof d&&("sequence"===o?c=d._startTime+d.totalDuration()/d._timeScale:"start"===o&&(d._startTime-=d.delay())),c+=s;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,a);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,a),r._time&&(c=Math.max(0,Math.min(r.totalDuration(),(this.rawTime()-r._startTime)*r._timeScale)),Math.abs(c-r._totalTime)>1e-5&&r.render(c,!1,!1)),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=(p=this).rawTime()>r._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&l(e)){for(var n=e.length;--n>-1;)this.remove(e[n]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){return e.prototype._remove.call(this,t,i),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},g.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,n,r){var a=i.delayedCall(0,f,n,r||this);return a.vars.onComplete=a.vars.onReverseComplete=e,a.data="isPause",this._hasPause=!0,this.add(a,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,n,r){var a,o;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&l(r)))for(o=r.length;--o>-1;)r[o]instanceof t&&r[o].timeline===this&&this.remove(r[o]);if(a="number"!=typeof e||i?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof e&&null==this._labels[i]?e-a:0,n);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=a);else{if(-1===(o=e.indexOf("=")))return null==this._labels[e]?n?this._labels[e]=a+i:i:this._labels[e]+i;i=parseInt(e.charAt(o-1)+"1",10)*Number(e.substr(o+1)),e=o>1?this._parseTimeOrLabel(e.substr(0,o-1),0,n):a}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,a,o,s,l,u,d,p=this._time,f=this._dirty?this.totalDuration():this._totalDuration,m=this._startTime,g=this._timeScale,v=this._paused;if(p!==this._time&&(t+=this._time-p),t>=f-1e-7&&t>=0)this._totalTime=this._time=f,this._reversed||this._hasPausedChild()||(a=!0,s="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=t&&t>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===r)&&this._rawPrevTime!==t&&this._first&&(l=!0,this._rawPrevTime>r&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,t=f+1e-4;else if(1e-7>t)if(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==r&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(s="onReverseComplete",a=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=a=!0,s="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,0===t&&a)for(n=this._first;n&&0===n._startTime;)n._duration||(a=!1),n=n._next;t=0,this._initted||(l=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=p)for(n=this._first;n&&n._startTime<=t&&!u;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(u=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!u;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(u=n),n=n._prev;u&&(this._time=t=u._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==p&&this._first||i||l||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),(d=this._time)>=p)for(n=this._first;n&&(o=n._next,d===this._time&&(!this._paused||v));)(n._active||n._startTime<=d&&!n._paused&&!n._gc)&&(u===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;else for(n=this._last;n&&(o=n._prev,d===this._time&&(!this._paused||v));){if(n._active||n._startTime<=p&&!n._paused&&!n._gc){if(u===n){for(u=n._prev;u&&u.endTime()>this._time;)u.render(u._reversed?u.totalDuration()-(t-u._startTime)*u._timeScale:(t-u._startTime)*u._timeScale,e,i),u=u._prev;u=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=o}this._onUpdate&&(e||(c.length&&h(),this._callback("onUpdate"))),s&&(this._gc||(m===this._startTime||g!==this._timeScale)&&(0===this._time||f>=this.totalDuration())&&(a&&(c.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this._callback(s)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof n&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,n,r){r=r||-9999999999;for(var a=[],o=this._first,s=0;o;)o._startTime<r||(o instanceof i?!1!==e&&(a[s++]=o):(!1!==n&&(a[s++]=o),!1!==t&&(s=(a=a.concat(o.getChildren(!0,e,n))).length))),o=o._next;return a},g.getTweensOf=function(t,e){var n,r,a=this._gc,o=[],s=0;for(a&&this._enabled(!0,!0),r=(n=i.getTweensOf(t)).length;--r>-1;)(n[r].timeline===this||e&&this._contains(n[r]))&&(o[s++]=n[r]);return a&&this._enabled(!1,!0),o},g.recent=function(){return this._recent},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,a=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in a)a[n]>=i&&(a[n]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},g._enabled=function(t,i){if(t===this._gc)for(var n=this._first;n;)n._enabled(t,!0),n=n._next;return e.prototype._enabled.call(this,t,i)},g.totalTime=function(e,i,n){this._forcingPlayhead=!0;var r=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._last,a=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>a&&this._sortChildren&&!r._paused&&!this._calculatingDuration?(this._calculatingDuration=1,this.add(r,r._startTime-r._delay),this._calculatingDuration=0):a=r._startTime,r._startTime<0&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale,this._time-=r._startTime,this._totalTime-=r._startTime,this._rawPrevTime-=r._startTime),this.shiftChildren(-r._startTime,!1,-9999999999),a=0),(i=r._startTime+r._totalDuration/r._timeScale)>n&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},g.paused=function(e){if(!e)for(var i=this._first,n=this._time;i;)i._startTime===n&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},n}),!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],(function(t,e,i){var n=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},r=1e-10,a=e._internals,o=a.lazyTweens,s=a.lazyRender,l=_gsScope._gsDefine.globals,c=new i(null,null,1,0),h=n.prototype=new t;return h.constructor=n,h.kill()._gc=!1,n.version="2.0.2",h.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},h.addCallback=function(t,i,n,r){return this.add(e.delayedCall(0,t,n,r),i)},h.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},h.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},h.tweenTo=function(t,i){i=i||{};var n,r,a,o={ease:c,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},s=i.repeat&&l.TweenMax||e;for(r in i)o[r]=i[r];return o.time=this._parseTimeOrLabel(t),n=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,a=new s(this,n,o),o.onStart=function(){a.target.paused(!0),a.vars.time===a.target.time()||n!==a.duration()||a.isFromTo||a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale).render(a.time(),!0,!0),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||a,i.onStartParams||[])},a},h.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(e,i);return n.isFromTo=1,n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},h.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,a,l,c,h,u,d,p,f=this._time,m=this._dirty?this.totalDuration():this._totalDuration,g=this._duration,v=this._totalTime,y=this._startTime,_=this._timeScale,b=this._rawPrevTime,x=this._paused,w=this._cycle;if(f!==this._time&&(t+=this._time-f),t>=m-1e-7&&t>=0)this._locked||(this._totalTime=m,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(a=!0,c="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=t&&t>=-1e-7||0>b||b===r)&&b!==t&&this._first&&(h=!0,b>r&&(c="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:r,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=g,t=g+1e-4);else if(1e-7>t)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==f||0===g&&b!==r&&(b>0||0>t&&b>=0)&&!this._locked)&&(c="onReverseComplete",a=this._reversed),0>t)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=a=!0,c="onReverseComplete"):b>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=g||!e||t||this._rawPrevTime===t?t:r,0===t&&a)for(n=this._first;n&&0===n._startTime;)n._duration||(a=!1),n=n._next;t=0,this._initted||(h=!0)}else if(0===g&&0>b&&(h=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=g+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&t>=v&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time),this._time>g?(this._time=g,t=g+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e){if((t=this._time)>=f||this._repeat&&w!==this._cycle)for(n=this._first;n&&n._startTime<=t&&!d;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(d=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!d;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(d=n),n=n._prev;d&&d._startTime<g&&(this._time=t=d._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==w&&!this._locked){var M=this._yoyo&&0!=(1&w),E=M===(this._yoyo&&0!=(1&this._cycle)),T=this._totalTime,S=this._cycle,A=this._rawPrevTime,C=this._time;if(this._totalTime=w*g,this._cycle<w?M=!M:this._totalTime+=g,this._time=f,this._rawPrevTime=0===g?b-1e-4:b,this._cycle=w,this._locked=!0,f=M?0:g,this.render(f,e,0===g),e||this._gc||this.vars.onRepeat&&(this._cycle=S,this._locked=!1,this._callback("onRepeat")),f!==this._time)return;if(E&&(this._cycle=w,this._locked=!0,f=M?g+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!x)return;this._time=C,this._totalTime=T,this._cycle=S,this._rawPrevTime=A}if(this._time!==f&&this._first||i||h||d){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==v&&t>0&&(this._active=!0),0===v&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),(p=this._time)>=f)for(n=this._first;n&&(l=n._next,p===this._time&&(!this._paused||x));)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(d===n&&this.pause(),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=l;else for(n=this._last;n&&(l=n._prev,p===this._time&&(!this._paused||x));){if(n._active||n._startTime<=f&&!n._paused&&!n._gc){if(d===n){for(d=n._prev;d&&d.endTime()>this._time;)d.render(d._reversed?d.totalDuration()-(t-d._startTime)*d._timeScale:(t-d._startTime)*d._timeScale,e,i),d=d._prev;d=null,this.pause()}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=l}this._onUpdate&&(e||(o.length&&s(),this._callback("onUpdate"))),c&&(this._locked||this._gc||(y===this._startTime||_!==this._timeScale)&&(0===this._time||m>=this.totalDuration())&&(a&&(o.length&&s(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[c]&&this._callback(c)))}else v!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},h.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,r,a=[],o=this.getChildren(t,e,i),s=0,l=o.length;for(n=0;l>n;n++)(r=o[n]).isActive()&&(a[s++]=r);return a},h.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;n>e;e++)if(i[e].time>t)return i[e].name;return null},h.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},h.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort((function(t,e){return t.time-e.time})),e},h.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},h.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},h.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},n}),!0),t=180/Math.PI,e=[],i=[],n=[],r={},a=_gsScope._gsDefine.globals,o=function(t,e,i,n){i===n&&(i=n-(n-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},s=function(t,e,i,n){var r={a:t},a={},o={},s={c:n},l=(t+e)/2,c=(e+i)/2,h=(i+n)/2,u=(l+c)/2,d=(c+h)/2,p=(d-u)/8;return r.b=l+(t-l)/4,a.b=u+p,r.c=a.a=(r.b+a.b)/2,a.c=o.a=(u+d)/2,o.b=d-p,s.b=h+(n-h)/4,o.c=s.a=(o.b+s.b)/2,[r,a,o,s]},l=function(t,r,a,o,l){var c,h,u,d,p,f,m,g,v,y,_,b,x,w=t.length-1,M=0,E=t[0].a;for(c=0;w>c;c++)h=(p=t[M]).a,u=p.d,d=t[M+1].d,l?(_=e[c],x=((b=i[c])+_)*r*.25/(o?.5:n[c]||.5),g=u-((f=u-(u-h)*(o?.5*r:0!==_?x/_:0))+(((m=u+(d-u)*(o?.5*r:0!==b?x/b:0))-f)*(3*_/(_+b)+.5)/4||0))):g=u-((f=u-(u-h)*r*.5)+(m=u+(d-u)*r*.5))/2,f+=g,m+=g,p.c=v=f,p.b=0!==c?E:E=p.a+.6*(p.c-p.a),p.da=u-h,p.ca=v-h,p.ba=E-h,a?(y=s(h,E,v,u),t.splice(M,1,y[0],y[1],y[2],y[3]),M+=4):M++,E=m;(p=t[M]).b=E,p.c=E+.4*(p.d-E),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=E-p.a,a&&(y=s(p.a,E,p.c,p.d),t.splice(M,1,y[0],y[1],y[2],y[3]))},c=function(t,n,r,a){var s,l,c,h,u,d,p=[];if(a)for(l=(t=[a].concat(t)).length;--l>-1;)"string"==typeof(d=t[l][n])&&"="===d.charAt(1)&&(t[l][n]=a[n]+Number(d.charAt(0)+d.substr(2)));if(0>(s=t.length-2))return p[0]=new o(t[0][n],0,0,t[0][n]),p;for(l=0;s>l;l++)c=t[l][n],h=t[l+1][n],p[l]=new o(c,0,0,h),r&&(u=t[l+2][n],e[l]=(e[l]||0)+(h-c)*(h-c),i[l]=(i[l]||0)+(u-h)*(u-h));return p[l]=new o(t[l][n],0,0,t[l+1][n]),p},h=function(t,a,o,s,h,u){var d,p,f,m,g,v,y,_,b={},x=[],w=u||t[0];for(p in h="string"==typeof h?","+h+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==a&&(a=1),t[0])x.push(p);if(t.length>1){for(_=t[t.length-1],y=!0,d=x.length;--d>-1;)if(p=x[d],Math.abs(w[p]-_[p])>.05){y=!1;break}y&&(t=t.concat(),u&&t.unshift(u),t.push(t[1]),u=t[t.length-3])}for(e.length=i.length=n.length=0,d=x.length;--d>-1;)p=x[d],r[p]=-1!==h.indexOf(","+p+","),b[p]=c(t,p,r[p],u);for(d=e.length;--d>-1;)e[d]=Math.sqrt(e[d]),i[d]=Math.sqrt(i[d]);if(!s){for(d=x.length;--d>-1;)if(r[p])for(v=(f=b[x[d]]).length-1,m=0;v>m;m++)g=f[m+1].da/i[m]+f[m].da/e[m]||0,n[m]=(n[m]||0)+g*g;for(d=n.length;--d>-1;)n[d]=Math.sqrt(n[d])}for(d=x.length,m=o?4:1;--d>-1;)f=b[p=x[d]],l(f,a,o,s,r[p]),y&&(f.splice(0,m),f.splice(f.length-m,m));return b},u=function(t,e,i){var n,r,a,s,l,c,h,u,d,p,f,m={},g="cubic"===(e=e||"soft")?3:2,v="soft"===e,y=[];if(v&&i&&(t=[i].concat(t)),null==t||t.length<g+1)throw"invalid Bezier data";for(d in t[0])y.push(d);for(c=y.length;--c>-1;){for(m[d=y[c]]=l=[],p=0,u=t.length,h=0;u>h;h++)n=null==i?t[h][d]:"string"==typeof(f=t[h][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&h>1&&u-1>h&&(l[p++]=(n+l[p-2])/2),l[p++]=n;for(u=p-g+1,p=0,h=0;u>h;h+=g)n=l[h],r=l[h+1],a=l[h+2],s=2===g?0:l[h+3],l[p++]=f=3===g?new o(n,r,a,s):new o(n,(2*r+n)/3,(2*r+a)/3,a);l.length=p}return m},d=function(t,e,i){for(var n,r,a,o,s,l,c,h,u,d,p,f=1/i,m=t.length;--m>-1;)for(a=(d=t[m]).a,o=d.d-a,s=d.c-a,l=d.b-a,n=r=0,h=1;i>=h;h++)n=r-(r=((c=f*h)*c*o+3*(u=1-c)*(c*s+u*l))*c),e[p=m*i+h-1]=(e[p]||0)+n*n},p=function(t,e){var i,n,r,a,o=[],s=[],l=0,c=0,h=(e=e>>0||6)-1,u=[],p=[];for(i in t)d(t[i],o,e);for(r=o.length,n=0;r>n;n++)l+=Math.sqrt(o[n]),p[a=n%e]=l,a===h&&(c+=l,u[a=n/e>>0]=p,s[a]=c,l=0,p=[]);return{length:c,lengths:s,segments:u}},f=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,a,o,s,l=e.values||[],c={},d=l[0],f=e.autoRotate||i.vars.orientToBezier;for(n in this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",!0===f?0:Number(f)||0]]:null,d)this._props.push(n);for(a=this._props.length;--a>-1;)n=this._props[a],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],c[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),s||c[n]!==l[0][n]&&(s=c);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?h(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,s):u(l,e.type,c),this._segCount=this._beziers[n].length,this._timeRes){var m=p(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),a=f.length;--a>-1;){for(o=0;3>o;o++)n=f[a][o],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=f[a][2],this._initialRotations[a]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,n,r,a,o,s,l,c,h,u,d=this._segCount,p=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(h=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&d-1>r){for(c=d-1;c>r&&(this._l2=h[++r])<=e;);this._l1=h[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(e<this._l1&&r>0){for(;r>0&&(this._l1=h[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=h[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&r<u.length-1){for(c=u.length-1;c>r&&(this._s2=u[++r])<=e;);this._s1=u[r-1],this._si=r}else if(e<this._s1&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=u[r],this._si=r}s=(r+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else s=(e-(i=0>e?0:e>=1?d-1:d*e>>0)*(1/d))*d;for(n=1-s,r=this._props.length;--r>-1;)a=this._props[r],l=(s*s*(o=this._beziers[a][i]).da+3*n*(s*o.ca+n*o.ba))*s+o.a,this._mod[a]&&(l=this._mod[a](l,f)),p[a]?f[a](l):f[a]=l;if(this._autoRotate){var g,v,y,_,b,x,w,M=this._autoRotate;for(r=M.length;--r>-1;)a=M[r][2],x=M[r][3]||0,w=!0===M[r][4]?1:t,o=this._beziers[M[r][0]],g=this._beziers[M[r][1]],o&&g&&(o=o[i],g=g[i],v=o.a+(o.b-o.a)*s,v+=((_=o.b+(o.c-o.b)*s)-v)*s,_+=(o.c+(o.d-o.c)*s-_)*s,y=g.a+(g.b-g.a)*s,y+=((b=g.b+(g.c-g.b)*s)-y)*s,b+=(g.c+(g.d-g.c)*s-b)*s,l=m?Math.atan2(b-y,_-v)*w+x:this._initialRotations[r],this._mod[a]&&(l=this._mod[a](l,f)),p[a]?f[a](l):f[a]=l)}}}),m=f.prototype,f.bezierThrough=h,f.cubicToQuadratic=s,f._autoCSS=!0,f.quadraticToCubic=function(t,e,i){return new o(t,(2*e+t)/3,(2*e+i)/3,i)},f._cssRegister=function(){var t=a.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,a,o,s,l){e instanceof Array&&(e={values:e}),l=new f;var c,h,u,d=e.values,p=d.length-1,m=[],g={};if(0>p)return s;for(c=0;p>=c;c++)u=i(t,d[c],o,s,l,p!==c),m[c]=u.end;for(h in e)g[h]=e[h];return g.values=m,(s=new r(t,"bezier",0,0,u.pt,2)).data=u,s.plugin=l,s.setRatio=n,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(c=!0===g.autoRotate?0:Number(g.autoRotate),g.autoRotate=null!=u.end.left?[["left","top","rotation",c,!1]]:null!=u.end.x&&[["x","y","rotation",c,!1]]),g.autoRotate&&(o._transform||o._enableTransforms(!1),u.autoRotate=o._target._gsTransform,u.proxy.rotation=u.autoRotate.rotation||0,o._overwriteProps.push("rotation")),l._onInitTween(u.proxy,g,o._tween),s}})}},m._mod=function(t){for(var e,i=this._overwriteProps,n=i.length;--n>-1;)(e=t[i[n]])&&"function"==typeof e&&(this._mod[i[n]]=e)},m._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;--i>-1;)t[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,t)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],(function(t,e){var i,n,r,a,o=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=o.prototype.setRatio},s=_gsScope._gsDefine.globals,l={},c=o.prototype=new t("css");c.constructor=o,o.version="2.0.2",o.API=2,o.defaultTransformPerspective=0,o.defaultSkewType="compensated",o.defaultSmoothOrigin=!0,c="px",o.suffixMap={top:c,right:c,bottom:c,left:c,width:c,height:c,fontSize:c,padding:c,margin:c,perspective:c,lineHeight:""};var h,u,d,p,f,m,g,v,y=/(?:\-|\.|\b)(\d|\.|e\-)+/g,_=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,b=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,x=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,M=/opacity *= *([^)]*)/i,E=/opacity:([^;]*)/i,T=/alpha\(opacity *=.+?\)/i,S=/^(rgb|hsl)/,A=/([A-Z])/g,C=/-([a-z])/gi,L=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,D=function(t,e){return e.toUpperCase()},P=/(?:Left|Right|Width)/i,R=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,O=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,I=/,(?=[^\)]*(?:\(|$))/gi,z=/[\s,\(]/i,N=Math.PI/180,k=180/Math.PI,F={},B={style:{}},U=_gsScope.document||{createElement:function(){return B}},H=function(t,e){return U.createElementNS?U.createElementNS(e||"http://www.w3.org/1999/xhtml",t):U.createElement(t)},G=H("div"),j=H("img"),V=o._internals={_specialProps:l},W=(_gsScope.navigator||{}).userAgent||"",q=function(){var t=W.indexOf("Android"),e=H("a");return d=-1!==W.indexOf("Safari")&&-1===W.indexOf("Chrome")&&(-1===t||parseFloat(W.substr(t+8,2))>3),f=d&&parseFloat(W.substr(W.indexOf("Version/")+8,2))<6,p=-1!==W.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(W)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(W))&&(m=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),X=function(t){return M.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Y=function(t){_gsScope.console&&console.log(t)},Z="",J="",Q=function(t,e){var i,n,r=(e=e||G).style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===r[i[n]+t];);return n>=0?(Z="-"+(J=3===n?"ms":i[n]).toLowerCase()+"-",J+t):null},K=("undefined"!=typeof window?window:U.defaultView||{getComputedStyle:function(){}}).getComputedStyle,$=o.getStyle=function(t,e,i,n,r){var a;return q||"opacity"!==e?(!n&&t.style[e]?a=t.style[e]:(i=i||K(t))?a=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(A,"-$1").toLowerCase()):t.currentStyle&&(a=t.currentStyle[e]),null==r||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:r):X(t)},tt=V.convertToPixels=function(t,i,n,r,a){if("px"===r||!r&&"lineHeight"!==i)return n;if("auto"===r||!n)return 0;var s,l,c,h=P.test(i),u=t,d=G.style,p=0>n,f=1===n;if(p&&(n=-n),f&&(n*=100),"lineHeight"!==i||r)if("%"===r&&-1!==i.indexOf("border"))s=n/100*(h?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+$(t,"position")+";line-height:0;","%"!==r&&u.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)d[h?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(u=t.parentNode||U.body,-1!==$(u,"display").indexOf("flex")&&(d.position="absolute"),l=u._gsCache,c=e.ticker.frame,l&&h&&l.time===c)return l.width*n/100;d[h?"width":"height"]=n+r}u.appendChild(G),s=parseFloat(G[h?"offsetWidth":"offsetHeight"]),u.removeChild(G),h&&"%"===r&&!1!==o.cacheWidths&&((l=u._gsCache=u._gsCache||{}).time=c,l.width=s/n*100),0!==s||a||(s=tt(t,i,n,r,!0))}else l=K(t).lineHeight,t.style.lineHeight=n,s=parseFloat(K(t).lineHeight),t.style.lineHeight=l;return f&&(s/=100),p?-s:s},et=V.calculateOffset=function(t,e,i){if("absolute"!==$(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=$(t,"margin"+n,i);return t["offset"+n]-(tt(t,e,parseFloat(r),r.replace(w,""))||0)},it=function(t,e){var i,n,r,a={};if(e=e||K(t,null))if(i=e.length)for(;--i>-1;)(-1===(r=e[i]).indexOf("-transform")||Lt===r)&&(a[r.replace(C,D)]=e.getPropertyValue(r));else for(i in e)(-1===i.indexOf("Transform")||Ct===i)&&(a[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===a[i]&&(a[i.replace(C,D)]=e[i]);return q||(a.opacity=X(t)),n=Gt(t,e,!1),a.rotation=n.rotation,a.skewX=n.skewX,a.scaleX=n.scaleX,a.scaleY=n.scaleY,a.x=n.x,a.y=n.y,Pt&&(a.z=n.z,a.rotationX=n.rotationX,a.rotationY=n.rotationY,a.scaleZ=n.scaleZ),a.filters&&delete a.filters,a},nt=function(t,e,i,n,r){var a,o,s,l={},c=t.style;for(o in i)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(a=i[o])||r&&r[o])&&-1===o.indexOf("Origin")&&("number"==typeof a||"string"==typeof a)&&(l[o]="auto"!==a||"left"!==o&&"top"!==o?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof e[o]||""===e[o].replace(x,"")?a:0:et(t,o),void 0!==c[o]&&(s=new yt(c,o,c[o],s)));if(n)for(o in n)"className"!==o&&(l[o]=n[o]);return{difs:l,firstMPT:s}},rt={width:["Left","Right"],height:["Top","Bottom"]},at=["marginLeft","marginRight","marginTop","marginBottom"],ot=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||K(t))[e]||0;if(t.getCTM&&Bt(t))return t.getBBox()[e]||0;var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=rt[e],a=r.length;for(i=i||K(t,null);--a>-1;)n-=parseFloat($(t,"padding"+r[a],i,!0))||0,n-=parseFloat($(t,"border"+r[a]+"Width",i,!0))||0;return n},st=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";(null==t||""===t)&&(t="0 0");var i,n=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":n[0],a=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":n[1];if(n.length>3&&!e){for(n=t.split(", ").join(",").split(","),t=[],i=0;i<n.length;i++)t.push(st(n[i]));return t.join(",")}return null==a?a="center"===r?"50%":"0":"center"===a&&(a="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),t=r+" "+a+(n.length>2?" "+n[2]:""),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==a.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===a.charAt(1),e.ox=parseFloat(r.replace(x,"")),e.oy=parseFloat(a.replace(x,"")),e.v=t),e||t},lt=function(t,e){return"function"==typeof t&&(t=t(v,g)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ct=function(t,e){"function"==typeof t&&(t=t(v,g));var i="string"==typeof t&&"="===t.charAt(1);return"string"==typeof t&&"v"===t.charAt(t.length-2)&&(t=(i?t.substr(0,2):0)+window["inner"+("vh"===t.substr(-2)?"Height":"Width")]*(parseFloat(i?t.substr(2):t)/100)),null==t?e:i?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ht=function(t,e,i,n){var r,a,o,s,l,c=1e-6;return"function"==typeof t&&(t=t(v,g)),null==t?s=e:"number"==typeof t?s=t:(r=360,a=t.split("_"),o=((l="="===t.charAt(1))?parseInt(t.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===t.indexOf("rad")?1:k)-(l?0:e),a.length&&(n&&(n[i]=e+o),-1!==t.indexOf("short")&&((o%=r)!==o%180&&(o=0>o?o+r:o-r)),-1!==t.indexOf("_cw")&&0>o?o=(o+3599999999640)%r-(o/r|0)*r:-1!==t.indexOf("ccw")&&o>0&&(o=(o-3599999999640)%r-(o/r|0)*r)),s=e+o),c>s&&s>-c&&(s=0),s},ut={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},dt=function(t,e,i){return 255*(1>6*(t=0>t?t+1:t>1?t-1:t)?e+(i-e)*t*6:.5>t?i:2>3*t?e+(i-e)*(2/3-t)*6:e)+.5|0},pt=o.parseColor=function(t,e){var i,n,r,a,o,s,l,c,h,u,d;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ut[t])i=ut[t];else if("#"===t.charAt(0))4===t.length&&(n=t.charAt(1),r=t.charAt(2),a=t.charAt(3),t="#"+n+n+r+r+a+a),i=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=d=t.match(y),e){if(-1!==t.indexOf("="))return t.match(_)}else o=Number(i[0])%360/360,s=Number(i[1])/100,n=2*(l=Number(i[2])/100)-(r=.5>=l?l*(s+1):l+s-l*s),i.length>3&&(i[3]=Number(i[3])),i[0]=dt(o+1/3,n,r),i[1]=dt(o,n,r),i[2]=dt(o-1/3,n,r);else i=t.match(y)||ut.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=ut.black;return e&&!d&&(n=i[0]/255,r=i[1]/255,a=i[2]/255,l=((c=Math.max(n,r,a))+(h=Math.min(n,r,a)))/2,c===h?o=s=0:(u=c-h,s=l>.5?u/(2-c-h):u/(c+h),o=c===n?(r-a)/u+(a>r?6:0):c===r?(a-n)/u+2:(n-r)/u+4,o*=60),i[0]=o+.5|0,i[1]=100*s+.5|0,i[2]=100*l+.5|0),i},ft=function(t,e){var i,n,r,a=t.match(mt)||[],o=0,s="";if(!a.length)return t;for(i=0;i<a.length;i++)n=a[i],o+=(r=t.substr(o,t.indexOf(n,o)-o)).length+n.length,3===(n=pt(n,e)).length&&n.push(1),s+=r+(e?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return s+t.substr(o)},mt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(c in ut)mt+="|"+c+"\\b";mt=new RegExp(mt+")","gi"),o.colorStringFilter=function(t){var e,i=t[0]+" "+t[1];mt.test(i)&&(e=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),t[0]=ft(t[0],e),t[1]=ft(t[1],e)),mt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=o.colorStringFilter);var gt=function(t,e,i,n){if(null==t)return function(t){return t};var r,a=e?(t.match(mt)||[""])[0]:"",o=t.split(a).join("").match(b)||[],s=t.substr(0,t.indexOf(o[0])),l=")"===t.charAt(t.length-1)?")":"",c=-1!==t.indexOf(" ")?" ":",",h=o.length,u=h>0?o[0].replace(y,""):"";return h?r=e?function(t){var e,d,p,f;if("number"==typeof t)t+=u;else if(n&&I.test(t)){for(f=t.replace(I,"|").split("|"),p=0;p<f.length;p++)f[p]=r(f[p]);return f.join(",")}if(e=(t.match(mt)||[a])[0],p=(d=t.split(e).join("").match(b)||[]).length,h>p--)for(;++p<h;)d[p]=i?d[(p-1)/2|0]:o[p];return s+d.join(c)+c+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,a,d;if("number"==typeof t)t+=u;else if(n&&I.test(t)){for(a=t.replace(I,"|").split("|"),d=0;d<a.length;d++)a[d]=r(a[d]);return a.join(",")}if(d=(e=t.match(b)||[]).length,h>d--)for(;++d<h;)e[d]=i?e[(d-1)/2|0]:o[d];return s+e.join(c)+l}:function(t){return t}},vt=function(t){return t=t.split(","),function(e,i,n,r,a,o,s){var l,c=(i+"").split(" ");for(s={},l=0;4>l;l++)s[t[l]]=c[l]=c[l]||c[(l-1)/2>>0];return r.parse(e,s,a,o)}},yt=(V._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,a,o=this.data,s=o.proxy,l=o.firstMPT,c=1e-6;l;)e=s[l.v],l.r?e=l.r(e):c>e&&e>-c&&(e=0),l.t[l.p]=e,l=l._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod.call(this._tween,s.rotation,this.t,this._tween):s.rotation),1===t||0===t)for(l=o.firstMPT,a=1===t?"e":"b";l;){if((i=l.t).type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)r+=i["xn"+n]+i["xs"+(n+1)];i[a]=r}}else i[a]=i.s+i.xs0;l=l._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&(n._prev=this,this._next=n)}),_t=(V._parseToProxy=function(t,e,i,n,r,a){var o,s,l,c,h,u=n,d={},p={},f=i._transform,m=F;for(i._transform=null,F=e,n=h=i.parse(t,e,n,r),F=m,a&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));n&&n!==u;){if(n.type<=1&&(p[s=n.p]=n.s+n.c,d[s]=n.s,a||(c=new yt(n,"s",s,c,n.r),n.c=0),1===n.type))for(o=n.l;--o>0;)l="xn"+o,p[s=n.p+"_"+l]=n.data[l],d[s]=n[l],a||(c=new yt(n,l,s,c,n.rxp[l]));n=n._next}return{proxy:d,end:p,firstMPT:c,pt:h}},V.CSSPropTween=function(t,e,n,r,o,s,l,c,h,u,d){this.t=t,this.p=e,this.s=n,this.c=r,this.n=l||e,t instanceof _t||a.push(this.n),this.r=c?"function"==typeof c?c:Math.round:c,this.type=s||0,h&&(this.pr=h,i=!0),this.b=void 0===u?n:u,this.e=void 0===d?n+r:d,o&&(this._next=o,o._prev=this)}),bt=function(t,e,i,n,r,a){var o=new _t(t,e,i,n-i,r,-1,a);return o.b=i,o.e=o.xs0=n,o},xt=o.parseComplex=function(t,e,i,n,r,a,s,l,c,u){i=i||a||"","function"==typeof n&&(n=n(v,g)),s=new _t(t,e,0,0,s,u?2:1,null,!1,l,i,n),n+="",r&&mt.test(n+i)&&(n=[i,n],o.colorStringFilter(n),i=n[0],n=n[1]);var d,p,f,m,b,x,w,M,E,T,S,A,C,L=i.split(", ").join(",").split(" "),D=n.split(", ").join(",").split(" "),P=L.length,R=!1!==h;for((-1!==n.indexOf(",")||-1!==i.indexOf(","))&&(-1!==(n+i).indexOf("rgb")||-1!==(n+i).indexOf("hsl")?(L=L.join(" ").replace(I,", ").split(" "),D=D.join(" ").replace(I,", ").split(" ")):(L=L.join(" ").split(",").join(", ").split(" "),D=D.join(" ").split(",").join(", ").split(" ")),P=L.length),P!==D.length&&(P=(L=(a||"").split(" ")).length),s.plugin=c,s.setRatio=u,mt.lastIndex=0,d=0;P>d;d++)if(m=L[d],b=D[d]+"",(M=parseFloat(m))||0===M)s.appendXtra("",M,lt(b,M),b.replace(_,""),!(!R||-1===b.indexOf("px"))&&Math.round,!0);else if(r&&mt.test(m))A=")"+((A=b.indexOf(")")+1)?b.substr(A):""),C=-1!==b.indexOf("hsl")&&q,T=b,m=pt(m,C),b=pt(b,C),(E=m.length+b.length>6)&&!q&&0===b[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(D[d]).join("transparent")):(q||(E=!1),C?s.appendXtra(T.substr(0,T.indexOf("hsl"))+(E?"hsla(":"hsl("),m[0],lt(b[0],m[0]),",",!1,!0).appendXtra("",m[1],lt(b[1],m[1]),"%,",!1).appendXtra("",m[2],lt(b[2],m[2]),E?"%,":"%"+A,!1):s.appendXtra(T.substr(0,T.indexOf("rgb"))+(E?"rgba(":"rgb("),m[0],b[0]-m[0],",",Math.round,!0).appendXtra("",m[1],b[1]-m[1],",",Math.round).appendXtra("",m[2],b[2]-m[2],E?",":A,Math.round),E&&(m=m.length<4?1:m[3],s.appendXtra("",m,(b.length<4?1:b[3])-m,A,!1))),mt.lastIndex=0;else if(x=m.match(y)){if(!(w=b.match(_))||w.length!==x.length)return s;for(f=0,p=0;p<x.length;p++)S=x[p],T=m.indexOf(S,f),s.appendXtra(m.substr(f,T-f),Number(S),lt(w[p],S),"",!(!R||"px"!==m.substr(T+S.length,2))&&Math.round,0===p),f=T+S.length;s["xs"+s.l]+=m.substr(f)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+b:b;if(-1!==n.indexOf("=")&&s.data){for(A=s.xs0+s.data.s,d=1;d<s.l;d++)A+=s["xs"+d]+s.data["xn"+d];s.e=A+s["xs"+d]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},wt=9;for((c=_t.prototype).l=c.pr=0;--wt>0;)c["xn"+wt]=0,c["xs"+wt]="";c.xs0="",c._next=c._prev=c.xfirst=c.data=c.plugin=c.setRatio=c.rxp=null,c.appendXtra=function(t,e,i,n,r,a){var o=this,s=o.l;return o["xs"+s]+=a&&(s||o["xs"+s])?" "+t:t||"",i||0===s||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=n||"",s>0?(o.data["xn"+s]=e+i,o.rxp["xn"+s]=r,o["xn"+s]=e,o.plugin||(o.xfirst=new _t(o,"xn"+s,e,i,o.xfirst||o,0,o.n,r,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+i},o.rxp={},o.s=e,o.c=i,o.r=r,o)):(o["xs"+s]+=e+(n||""),o)};var Mt=function(t,e){e=e||{},this.p=e.prefix&&Q(t)||t,l[t]=l[this.p]=this,this.format=e.formatter||gt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},Et=V._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r=t.split(","),a=e.defaultValue;for(i=i||[a],n=0;n<r.length;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||a,new Mt(r[n],e)},Tt=V._registerPluginProp=function(t){if(!l[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";Et(t,{parser:function(t,i,n,r,a,o,c){var h=s.com.greensock.plugins[e];return h?(h._cssRegister(),l[n].parse(t,i,n,r,a,o,c)):(Y("Error: "+e+" js file not loaded."),a)}})}};(c=Mt.prototype).parseComplex=function(t,e,i,n,r,a){var o,s,l,c,h,u,d=this.keyword;if(this.multi&&(I.test(i)||I.test(e)?(s=e.replace(I,"|").split("|"),l=i.replace(I,"|").split("|")):d&&(s=[e],l=[i])),l){for(c=l.length>s.length?l.length:s.length,o=0;c>o;o++)e=s[o]=s[o]||this.dflt,i=l[o]=l[o]||this.dflt,d&&((h=e.indexOf(d))!==(u=i.indexOf(d))&&(-1===u?s[o]=s[o].split(d).join(""):-1===h&&(s[o]+=" "+d)));e=s.join(", "),i=l.join(", ")}return xt(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,a)},c.parse=function(t,e,i,n,a,o,s){return this.parseComplex(t.style,this.format($(t,this.p,r,!1,this.dflt)),this.format(e),a,o)},o.registerSpecialProp=function(t,e,i){Et(t,{parser:function(t,n,r,a,o,s,l){var c=new _t(t,r,0,0,o,2,r,!1,i);return c.plugin=s,c.setRatio=e(t,n,a._tween,r),c},priority:i})},o.useSVGTransformAttr=!0;var St,At="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ct=Q("transform"),Lt=Z+"transform",Dt=Q("transformOrigin"),Pt=null!==Q("perspective"),Rt=V.Transform=function(){this.perspective=parseFloat(o.defaultTransformPerspective)||0,this.force3D=!(!1===o.defaultForce3D||!Pt)&&(o.defaultForce3D||"auto")},Ot=_gsScope.SVGElement,It=function(t,e,i){var n,r=U.createElementNS("http://www.w3.org/2000/svg",t),a=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(a,"$1-$2").toLowerCase(),i[n]);return e.appendChild(r),r},zt=U.documentElement||{},Nt=function(){var t,e,i,n=m||/Android/i.test(W)&&!_gsScope.chrome;return U.createElementNS&&!n&&(t=It("svg",zt),i=(e=It("rect",t,{width:100,height:50,x:100})).getBoundingClientRect().width,e.style[Dt]="50% 50%",e.style[Ct]="scaleX(0.5)",n=i===e.getBoundingClientRect().width&&!(p&&Pt),zt.removeChild(t)),n}(),kt=function(t,e,i,n,r,a){var s,l,c,h,u,d,p,f,m,g,v,y,_,b,x=t._gsTransform,w=Ht(t,!0);x&&(_=x.xOrigin,b=x.yOrigin),(!n||(s=n.split(" ")).length<2)&&(0===(p=t.getBBox()).x&&0===p.y&&p.width+p.height===0&&(p={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),s=[(-1!==(e=st(e).split(" "))[0].indexOf("%")?parseFloat(e[0])/100*p.width:parseFloat(e[0]))+p.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*p.height:parseFloat(e[1]))+p.y]),i.xOrigin=h=parseFloat(s[0]),i.yOrigin=u=parseFloat(s[1]),n&&w!==Ut&&(d=w[0],p=w[1],f=w[2],m=w[3],g=w[4],v=w[5],(y=d*m-p*f)&&(l=h*(m/y)+u*(-f/y)+(f*v-m*g)/y,c=h*(-p/y)+u*(d/y)-(d*v-p*g)/y,h=i.xOrigin=s[0]=l,u=i.yOrigin=s[1]=c)),x&&(a&&(i.xOffset=x.xOffset,i.yOffset=x.yOffset,x=i),r||!1!==r&&!1!==o.defaultSmoothOrigin?(l=h-_,c=u-b,x.xOffset+=l*w[0]+c*w[2]-l,x.yOffset+=l*w[1]+c*w[3]-c):x.xOffset=x.yOffset=0),a||t.setAttribute("data-svg-origin",s.join(" "))},Ft=function(t){var e,i=H("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(zt.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Ft}catch(t){}else this._originalGetBBox&&(e=this._originalGetBBox());return r?n.insertBefore(this,r):n.appendChild(this),zt.removeChild(i),this.style.cssText=a,e},Bt=function(t){return!(!Ot||!t.getCTM||t.parentNode&&!t.ownerSVGElement||!function(t){try{return t.getBBox()}catch(e){return Ft.call(t,!0)}}(t))},Ut=[1,0,0,1,0,0],Ht=function(t,e){var i,n,r,a,o,s,l=t._gsTransform||new Rt,c=1e5,h=t.style;if(Ct?n=$(t,Lt,null,!0):t.currentStyle&&(n=(n=t.currentStyle.filter.match(R))&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),l.x||0,l.y||0].join(","):""),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,!Ct||!(s=!K(t)||"none"===K(t).display)&&t.parentNode||(s&&(a=h.display,h.display="block"),t.parentNode||(o=1,zt.appendChild(t)),i=!(n=$(t,Lt,null,!0))||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,a?h.display=a:s&&qt(h,"display"),o&&zt.removeChild(t)),(l.svg||t.getCTM&&Bt(t))&&(i&&-1!==(h[Ct]+"").indexOf("matrix")&&(n=h[Ct],i=0),r=t.getAttribute("transform"),i&&r&&(n="matrix("+(r=t.transform.baseVal.consolidate().matrix).a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")",i=0)),i)return Ut;for(r=(n||"").match(y)||[],wt=r.length;--wt>-1;)a=Number(r[wt]),r[wt]=(o=a-(a|=0))?(o*c+(0>o?-.5:.5)|0)/c+a:a;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Gt=V.getTransform=function(t,i,n,r){if(t._gsTransform&&n&&!r)return t._gsTransform;var a,s,l,c,h,u,d=n&&t._gsTransform||new Rt,p=d.scaleX<0,f=2e-5,m=1e5,g=Pt&&(parseFloat($(t,Dt,i,!1,"0 0 0").split(" ")[2])||d.zOrigin)||0,v=parseFloat(o.defaultTransformPerspective)||0;if(d.svg=!(!t.getCTM||!Bt(t)),d.svg&&(kt(t,$(t,Dt,i,!1,"50% 50%")+"",d,t.getAttribute("data-svg-origin")),St=o.useSVGTransformAttr||Nt),(a=Ht(t))!==Ut){if(16===a.length){var y,_,b,x,w,M=a[0],E=a[1],T=a[2],S=a[3],A=a[4],C=a[5],L=a[6],D=a[7],P=a[8],R=a[9],O=a[10],I=a[12],z=a[13],N=a[14],F=a[11],B=Math.atan2(L,O);d.zOrigin&&(I=P*(N=-d.zOrigin)-a[12],z=R*N-a[13],N=O*N+d.zOrigin-a[14]),d.rotationX=B*k,B&&(y=A*(x=Math.cos(-B))+P*(w=Math.sin(-B)),_=C*x+R*w,b=L*x+O*w,P=A*-w+P*x,R=C*-w+R*x,O=L*-w+O*x,F=D*-w+F*x,A=y,C=_,L=b),B=Math.atan2(-T,O),d.rotationY=B*k,B&&(_=E*(x=Math.cos(-B))-R*(w=Math.sin(-B)),b=T*x-O*w,R=E*w+R*x,O=T*w+O*x,F=S*w+F*x,M=y=M*x-P*w,E=_,T=b),B=Math.atan2(E,M),d.rotation=B*k,B&&(y=M*(x=Math.cos(B))+E*(w=Math.sin(B)),_=A*x+C*w,b=P*x+R*w,E=E*x-M*w,C=C*x-A*w,R=R*x-P*w,M=y,A=_,P=b),d.rotationX&&Math.abs(d.rotationX)+Math.abs(d.rotation)>359.9&&(d.rotationX=d.rotation=0,d.rotationY=180-d.rotationY),B=Math.atan2(A,C),d.scaleX=(Math.sqrt(M*M+E*E+T*T)*m+.5|0)/m,d.scaleY=(Math.sqrt(C*C+L*L)*m+.5|0)/m,d.scaleZ=(Math.sqrt(P*P+R*R+O*O)*m+.5|0)/m,M/=d.scaleX,A/=d.scaleY,E/=d.scaleX,C/=d.scaleY,Math.abs(B)>f?(d.skewX=B*k,A=0,"simple"!==d.skewType&&(d.scaleY*=1/Math.cos(B))):d.skewX=0,d.perspective=F?1/(0>F?-F:F):0,d.x=I,d.y=z,d.z=N,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*M-d.yOrigin*A),d.y-=d.yOrigin-(d.yOrigin*E-d.xOrigin*C))}else if(!Pt||r||!a.length||d.x!==a[4]||d.y!==a[5]||!d.rotationX&&!d.rotationY){var U=a.length>=6,H=U?a[0]:1,G=a[1]||0,j=a[2]||0,V=U?a[3]:1;d.x=a[4]||0,d.y=a[5]||0,l=Math.sqrt(H*H+G*G),c=Math.sqrt(V*V+j*j),h=H||G?Math.atan2(G,H)*k:d.rotation||0,u=j||V?Math.atan2(j,V)*k+h:d.skewX||0,d.scaleX=l,d.scaleY=c,d.rotation=h,d.skewX=u,Pt&&(d.rotationX=d.rotationY=d.z=0,d.perspective=v,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*H+d.yOrigin*j),d.y-=d.yOrigin-(d.xOrigin*G+d.yOrigin*V))}for(s in Math.abs(d.skewX)>90&&Math.abs(d.skewX)<270&&(p?(d.scaleX*=-1,d.skewX+=d.rotation<=0?180:-180,d.rotation+=d.rotation<=0?180:-180):(d.scaleY*=-1,d.skewX+=d.skewX<=0?180:-180)),d.zOrigin=g,d)d[s]<f&&d[s]>-f&&(d[s]=0)}return n&&(t._gsTransform=d,d.svg&&(St&&t.style[Ct]?e.delayedCall(.001,(function(){qt(t.style,Ct)})):!St&&t.getAttribute("transform")&&e.delayedCall(.001,(function(){t.removeAttribute("transform")})))),d},jt=function(t){var e,i,n=this.data,r=-n.rotation*N,a=r+n.skewX*N,o=1e5,s=(Math.cos(r)*n.scaleX*o|0)/o,l=(Math.sin(r)*n.scaleX*o|0)/o,c=(Math.sin(a)*-n.scaleY*o|0)/o,h=(Math.cos(a)*n.scaleY*o|0)/o,u=this.t.style,d=this.t.currentStyle;if(d){i=l,l=-c,c=-i,e=d.filter,u.filter="";var p,f,g=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==d.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+l+", M21="+c+", M22="+h,b=n.x+g*n.xPercent/100,x=n.y+v*n.yPercent/100;if(null!=n.ox&&(b+=(p=(n.oxp?g*n.ox*.01:n.ox)-g/2)-(p*s+(f=(n.oyp?v*n.oy*.01:n.oy)-v/2)*l),x+=f-(p*c+f*h)),y?_+=", Dx="+((p=g/2)-(p*s+(f=v/2)*l)+b)+", Dy="+(f-(p*c+f*h)+x)+")":_+=", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?u.filter=e.replace(O,_):u.filter=_+" "+e,(0===t||1===t)&&1===s&&0===l&&0===c&&1===h&&(y&&-1===_.indexOf("Dx=0, Dy=0")||M.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&u.removeAttribute("filter")),!y){var E,T,S,A=8>m?1:-1;for(p=n.ieOffsetX||0,f=n.ieOffsetY||0,n.ieOffsetX=Math.round((g-((0>s?-s:s)*g+(0>l?-l:l)*v))/2+b),n.ieOffsetY=Math.round((v-((0>h?-h:h)*v+(0>c?-c:c)*g))/2+x),wt=0;4>wt;wt++)S=(i=-1!==(E=d[T=at[wt]]).indexOf("px")?parseFloat(E):tt(this.t,T,parseFloat(E),E.replace(w,""))||0)!==n[T]?2>wt?-n.ieOffsetX:-n.ieOffsetY:2>wt?p-n.ieOffsetX:f-n.ieOffsetY,u[T]=(n[T]=Math.round(i-S*(0===wt||2===wt?1:A)))+"px"}}},Vt=V.set3DTransformRatio=V.setTransformRatio=function(t){var e,i,n,r,a,o,s,l,c,h,u,d,f,m,g,v,y,_,b,x,w,M,E,T=this.data,S=this.t.style,A=T.rotation,C=T.rotationX,L=T.rotationY,D=T.scaleX,P=T.scaleY,R=T.scaleZ,O=T.x,I=T.y,z=T.z,k=T.svg,F=T.perspective,B=T.force3D,U=T.skewY,H=T.skewX;if(U&&(H+=U,A+=U),!((1!==t&&0!==t||"auto"!==B||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&B||z||F||L||C||1!==R)||St&&k||!Pt)A||H||k?(A*=N,M=H*N,E=1e5,i=Math.cos(A)*D,a=Math.sin(A)*D,n=Math.sin(A-M)*-P,o=Math.cos(A-M)*P,M&&"simple"===T.skewType&&(e=Math.tan(M-U*N),n*=e=Math.sqrt(1+e*e),o*=e,U&&(e=Math.tan(U*N),i*=e=Math.sqrt(1+e*e),a*=e)),k&&(O+=T.xOrigin-(T.xOrigin*i+T.yOrigin*n)+T.xOffset,I+=T.yOrigin-(T.xOrigin*a+T.yOrigin*o)+T.yOffset,St&&(T.xPercent||T.yPercent)&&(g=this.t.getBBox(),O+=.01*T.xPercent*g.width,I+=.01*T.yPercent*g.height),(g=1e-6)>O&&O>-g&&(O=0),g>I&&I>-g&&(I=0)),b=(i*E|0)/E+","+(a*E|0)/E+","+(n*E|0)/E+","+(o*E|0)/E+","+O+","+I+")",k&&St?this.t.setAttribute("transform","matrix("+b):S[Ct]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix(":"matrix(")+b):S[Ct]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix(":"matrix(")+D+",0,0,"+P+","+O+","+I+")";else{if(p&&((g=1e-4)>D&&D>-g&&(D=R=2e-5),g>P&&P>-g&&(P=R=2e-5),!F||T.z||T.rotationX||T.rotationY||(F=0)),A||H)A*=N,v=i=Math.cos(A),y=a=Math.sin(A),H&&(A-=H*N,v=Math.cos(A),y=Math.sin(A),"simple"===T.skewType&&(e=Math.tan((H-U)*N),v*=e=Math.sqrt(1+e*e),y*=e,T.skewY&&(e=Math.tan(U*N),i*=e=Math.sqrt(1+e*e),a*=e))),n=-y,o=v;else{if(!(L||C||1!==R||F||k))return void(S[Ct]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) translate3d(":"translate3d(")+O+"px,"+I+"px,"+z+"px)"+(1!==D||1!==P?" scale("+D+","+P+")":""));i=o=1,n=a=0}h=1,r=s=l=c=u=d=0,f=F?-1/F:0,m=T.zOrigin,g=1e-6,x=",",w="0",(A=L*N)&&(v=Math.cos(A),l=-(y=Math.sin(A)),u=f*-y,r=i*y,s=a*y,h=v,f*=v,i*=v,a*=v),(A=C*N)&&(e=n*(v=Math.cos(A))+r*(y=Math.sin(A)),_=o*v+s*y,c=h*y,d=f*y,r=n*-y+r*v,s=o*-y+s*v,h*=v,f*=v,n=e,o=_),1!==R&&(r*=R,s*=R,h*=R,f*=R),1!==P&&(n*=P,o*=P,c*=P,d*=P),1!==D&&(i*=D,a*=D,l*=D,u*=D),(m||k)&&(m&&(O+=r*-m,I+=s*-m,z+=h*-m+m),k&&(O+=T.xOrigin-(T.xOrigin*i+T.yOrigin*n)+T.xOffset,I+=T.yOrigin-(T.xOrigin*a+T.yOrigin*o)+T.yOffset),g>O&&O>-g&&(O=w),g>I&&I>-g&&(I=w),g>z&&z>-g&&(z=0)),b=T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix3d(":"matrix3d(",b+=(g>i&&i>-g?w:i)+x+(g>a&&a>-g?w:a)+x+(g>l&&l>-g?w:l),b+=x+(g>u&&u>-g?w:u)+x+(g>n&&n>-g?w:n)+x+(g>o&&o>-g?w:o),C||L||1!==R?(b+=x+(g>c&&c>-g?w:c)+x+(g>d&&d>-g?w:d)+x+(g>r&&r>-g?w:r),b+=x+(g>s&&s>-g?w:s)+x+(g>h&&h>-g?w:h)+x+(g>f&&f>-g?w:f)+x):b+=",0,0,0,0,1,0,",b+=O+x+I+x+z+x+(F?1+-z/F:1)+")",S[Ct]=b}};(c=Rt.prototype).x=c.y=c.z=c.skewX=c.skewY=c.rotation=c.rotationX=c.rotationY=c.zOrigin=c.xPercent=c.yPercent=c.xOffset=c.yOffset=0,c.scaleX=c.scaleY=c.scaleZ=1,Et("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,n,a,s,l){if(n._lastParsedTransform===l)return a;n._lastParsedTransform=l;var c,h=l.scale&&"function"==typeof l.scale?l.scale:0;"function"==typeof l[i]&&(c=l[i],l[i]=e),h&&(l.scale=h(v,t));var u,d,p,f,m,y,_,b,x,w=t._gsTransform,M=t.style,E=1e-6,T=At.length,S=l,A={},C="transformOrigin",L=Gt(t,r,!0,S.parseTransform),D=S.transform&&("function"==typeof S.transform?S.transform(v,g):S.transform);if(L.skewType=S.skewType||L.skewType||o.defaultSkewType,n._transform=L,"rotationZ"in S&&(S.rotation=S.rotationZ),D&&"string"==typeof D&&Ct)(d=G.style)[Ct]=D,d.display="block",d.position="absolute",-1!==D.indexOf("%")&&(d.width=$(t,"width"),d.height=$(t,"height")),U.body.appendChild(G),u=Gt(G,null,!1),"simple"===L.skewType&&(u.scaleY*=Math.cos(u.skewX*N)),L.svg&&(y=L.xOrigin,_=L.yOrigin,u.x-=L.xOffset,u.y-=L.yOffset,(S.transformOrigin||S.svgOrigin)&&(D={},kt(t,st(S.transformOrigin),D,S.svgOrigin,S.smoothOrigin,!0),y=D.xOrigin,_=D.yOrigin,u.x-=D.xOffset-L.xOffset,u.y-=D.yOffset-L.yOffset),(y||_)&&(b=Ht(G,!0),u.x-=y-(y*b[0]+_*b[2]),u.y-=_-(y*b[1]+_*b[3]))),U.body.removeChild(G),u.perspective||(u.perspective=L.perspective),null!=S.xPercent&&(u.xPercent=ct(S.xPercent,L.xPercent)),null!=S.yPercent&&(u.yPercent=ct(S.yPercent,L.yPercent));else if("object"==typeof S){if(u={scaleX:ct(null!=S.scaleX?S.scaleX:S.scale,L.scaleX),scaleY:ct(null!=S.scaleY?S.scaleY:S.scale,L.scaleY),scaleZ:ct(S.scaleZ,L.scaleZ),x:ct(S.x,L.x),y:ct(S.y,L.y),z:ct(S.z,L.z),xPercent:ct(S.xPercent,L.xPercent),yPercent:ct(S.yPercent,L.yPercent),perspective:ct(S.transformPerspective,L.perspective)},null!=(m=S.directionalRotation))if("object"==typeof m)for(d in m)S[d]=m[d];else S.rotation=m;"string"==typeof S.x&&-1!==S.x.indexOf("%")&&(u.x=0,u.xPercent=ct(S.x,L.xPercent)),"string"==typeof S.y&&-1!==S.y.indexOf("%")&&(u.y=0,u.yPercent=ct(S.y,L.yPercent)),u.rotation=ht("rotation"in S?S.rotation:"shortRotation"in S?S.shortRotation+"_short":L.rotation,L.rotation,"rotation",A),Pt&&(u.rotationX=ht("rotationX"in S?S.rotationX:"shortRotationX"in S?S.shortRotationX+"_short":L.rotationX||0,L.rotationX,"rotationX",A),u.rotationY=ht("rotationY"in S?S.rotationY:"shortRotationY"in S?S.shortRotationY+"_short":L.rotationY||0,L.rotationY,"rotationY",A)),u.skewX=ht(S.skewX,L.skewX),u.skewY=ht(S.skewY,L.skewY)}for(Pt&&null!=S.force3D&&(L.force3D=S.force3D,f=!0),(p=L.force3D||L.z||L.rotationX||L.rotationY||u.z||u.rotationX||u.rotationY||u.perspective)||null==S.scale||(u.scaleZ=1);--T>-1;)((D=u[x=At[T]]-L[x])>E||-E>D||null!=S[x]||null!=F[x])&&(f=!0,a=new _t(L,x,L[x],D,a),x in A&&(a.e=A[x]),a.xs0=0,a.plugin=s,n._overwriteProps.push(a.n));return D=S.transformOrigin,L.svg&&(D||S.svgOrigin)&&(y=L.xOffset,_=L.yOffset,kt(t,st(D),u,S.svgOrigin,S.smoothOrigin),a=bt(L,"xOrigin",(w?L:u).xOrigin,u.xOrigin,a,C),a=bt(L,"yOrigin",(w?L:u).yOrigin,u.yOrigin,a,C),(y!==L.xOffset||_!==L.yOffset)&&(a=bt(L,"xOffset",w?y:L.xOffset,L.xOffset,a,C),a=bt(L,"yOffset",w?_:L.yOffset,L.yOffset,a,C)),D="0px 0px"),(D||Pt&&p&&L.zOrigin)&&(Ct?(f=!0,x=Dt,D=(D||$(t,x,r,!1,"50% 50%"))+"",(a=new _t(M,x,0,0,a,-1,C)).b=M[x],a.plugin=s,Pt?(d=L.zOrigin,D=D.split(" "),L.zOrigin=(D.length>2&&(0===d||"0px"!==D[2])?parseFloat(D[2]):d)||0,a.xs0=a.e=D[0]+" "+(D[1]||"50%")+" 0px",(a=new _t(L,"zOrigin",0,0,a,-1,a.n)).b=d,a.xs0=a.e=L.zOrigin):a.xs0=a.e=D):st(D+"",L)),f&&(n._transformType=L.svg&&St||!p&&3!==this._transformType?2:3),c&&(l[i]=c),h&&(l.scale=h),a},prefix:!0}),Et("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Et("borderRadius",{defaultValue:"0px",parser:function(t,e,i,a,o,s){e=this.format(e);var l,c,h,u,d,p,f,m,g,v,y,_,b,x,w,M,E=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],T=t.style;for(g=parseFloat(t.offsetWidth),v=parseFloat(t.offsetHeight),l=e.split(" "),c=0;c<E.length;c++)this.p.indexOf("border")&&(E[c]=Q(E[c])),-1!==(d=u=$(t,E[c],r,!1,"0px")).indexOf(" ")&&(u=d.split(" "),d=u[0],u=u[1]),p=h=l[c],f=parseFloat(d),_=d.substr((f+"").length),(b="="===p.charAt(1))?(m=parseInt(p.charAt(0)+"1",10),p=p.substr(2),m*=parseFloat(p),y=p.substr((m+"").length-(0>m?1:0))||""):(m=parseFloat(p),y=p.substr((m+"").length)),""===y&&(y=n[i]||_),y!==_&&(x=tt(t,"borderLeft",f,_),w=tt(t,"borderTop",f,_),"%"===y?(d=x/g*100+"%",u=w/v*100+"%"):"em"===y?(d=x/(M=tt(t,"borderLeft",1,"em"))+"em",u=w/M+"em"):(d=x+"px",u=w+"px"),b&&(p=parseFloat(d)+m+y,h=parseFloat(u)+m+y)),o=xt(T,E[c],d+" "+u,p+" "+h,!1,"0px",o);return o},prefix:!0,formatter:gt("0px 0px 0px 0px",!1,!0)}),Et("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,n,a,o){return xt(t.style,i,this.format($(t,i,r,!1,"0px 0px")),this.format(e),!1,"0px",a)},prefix:!0,formatter:gt("0px 0px",!1,!0)}),Et("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,a,o){var s,l,c,h,u,d,p="background-position",f=r||K(t,null),g=this.format((f?m?f.getPropertyValue(p+"-x")+" "+f.getPropertyValue(p+"-y"):f.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&v.split(",").length<2&&((d=$(t,"backgroundImage").replace(L,""))&&"none"!==d)){for(s=g.split(" "),l=v.split(" "),j.setAttribute("src",d),c=2;--c>-1;)(h=-1!==(g=s[c]).indexOf("%"))!==(-1!==l[c].indexOf("%"))&&(u=0===c?t.offsetWidth-j.width:t.offsetHeight-j.height,s[c]=h?parseFloat(g)/100*u+"px":parseFloat(g)/u*100+"%");g=s.join(" ")}return this.parseComplex(t.style,g,v,a,o)},formatter:st}),Et("backgroundSize",{defaultValue:"0 0",formatter:function(t){return"co"===(t+="").substr(0,2)?t:st(-1===t.indexOf(" ")?t+" "+t:t)}}),Et("perspective",{defaultValue:"0px",prefix:!0}),Et("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Et("transformStyle",{prefix:!0}),Et("backfaceVisibility",{prefix:!0}),Et("userSelect",{prefix:!0}),Et("margin",{parser:vt("marginTop,marginRight,marginBottom,marginLeft")}),Et("padding",{parser:vt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Et("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,a,o){var s,l,c;return 9>m?(l=t.currentStyle,c=8>m?" ":",",s="rect("+l.clipTop+c+l.clipRight+c+l.clipBottom+c+l.clipLeft+")",e=this.format(e).split(",").join(c)):(s=this.format($(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,s,e,a,o)}}),Et("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Et("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),Et("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,a,o){var s=$(t,"borderTopWidth",r,!1,"0px"),l=this.format(e).split(" "),c=l[0].replace(w,"");return"px"!==c&&(s=parseFloat(s)/tt(t,"borderTopWidth",1,c)+c),this.parseComplex(t.style,this.format(s+" "+$(t,"borderTopStyle",r,!1,"solid")+" "+$(t,"borderTopColor",r,!1,"#000")),l.join(" "),a,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(mt)||["#000"])[0]}}),Et("borderWidth",{parser:vt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Et("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r,a){var o=t.style,s="cssFloat"in o?"cssFloat":"styleFloat";return new _t(o,s,0,0,r,-1,i,!1,0,o[s],e)}});var Wt=function(t){var e,i=this.t,n=i.filter||$(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),e=!$(this.data,"filter")):(i.filter=n.replace(T,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(M,"opacity="+r))};Et("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,a,o){var s=parseFloat($(t,"opacity",r,!1,"1")),l=t.style,c="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+s),c&&1===s&&"hidden"===$(t,"visibility",r)&&0!==e&&(s=0),q?a=new _t(l,"opacity",s,e-s,a):((a=new _t(l,"opacity",100*s,100*(e-s),a)).xn1=c?1:0,l.zoom=1,a.type=2,a.b="alpha(opacity="+a.s+")",a.e="alpha(opacity="+(a.s+a.c)+")",a.data=t,a.plugin=o,a.setRatio=Wt),c&&((a=new _t(l,"visibility",0,0,a,-1,null,!1,0,0!==s?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",n._overwriteProps.push(a.n),n._overwriteProps.push(i)),a}});var qt=function(t,e){e&&(t.removeProperty?(("ms"===e.substr(0,2)||"webkit"===e.substr(0,6))&&(e="-"+e),t.removeProperty(e.replace(A,"-$1").toLowerCase())):t.removeAttribute(e))},Xt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:qt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Et("className",{parser:function(t,e,n,a,o,s,l){var c,h,u,d,p,f=t.getAttribute("class")||"",m=t.style.cssText;if((o=a._classNamePT=new _t(t,n,0,0,o,2)).setRatio=Xt,o.pr=-11,i=!0,o.b=f,h=it(t,r),u=t._gsClassPT){for(d={},p=u.data;p;)d[p.p]=1,p=p._next;u.setRatio(1)}return t._gsClassPT=o,o.e="="!==e.charAt(1)?e:f.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",o.e),c=nt(t,h,it(t),l,d),t.setAttribute("class",f),o.data=c.firstMPT,t.style.cssText=m,o.xfirst=a.parse(t,c.difs,o,s)}});var Yt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,r,a,o=this.t.style,s=l.transform.parse;if("all"===this.e)o.cssText="",r=!0;else for(n=(e=this.e.split(" ").join("").split(",")).length;--n>-1;)i=e[n],l[i]&&(l[i].parse===s?r=!0:i="transformOrigin"===i?Dt:l[i].p),qt(o,i);r&&(qt(o,Ct),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Et("clearProps",{parser:function(t,e,n,r,a){return(a=new _t(t,n,0,0,a,2)).setRatio=Yt,a.e=e,a.pr=-10,a.data=r._tween,i=!0,a}}),c="bezier,throwProps,physicsProps,physics2D".split(","),wt=c.length;wt--;)Tt(c[wt]);(c=o.prototype)._firstPT=c._lastParsedTransform=c._transform=null,c._onInitTween=function(t,e,s,c){if(!t.nodeType)return!1;this._target=g=t,this._tween=s,this._vars=e,v=c,h=e.autoRound,i=!1,n=e.suffixMap||o.suffixMap,r=K(t,""),a=this._overwriteProps;var p,m,y,_,b,x,w,M,T,S=t.style;if(u&&""===S.zIndex&&(("auto"===(p=$(t,"zIndex",r))||""===p)&&this._addLazySet(S,"zIndex",0)),"string"==typeof e&&(_=S.cssText,p=it(t,r),S.cssText=_+";"+e,p=nt(t,p,it(t)).difs,!q&&E.test(e)&&(p.opacity=parseFloat(RegExp.$1)),e=p,S.cssText=_),e.className?this._firstPT=m=l.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=m=this.parse(t,e,null),this._transformType){for(T=3===this._transformType,Ct?d&&(u=!0,""===S.zIndex&&(("auto"===(w=$(t,"zIndex",r))||""===w)&&this._addLazySet(S,"zIndex",0)),f&&this._addLazySet(S,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(T?"visible":"hidden"))):S.zoom=1,y=m;y&&y._next;)y=y._next;M=new _t(t,"transform",0,0,null,2),this._linkCSSP(M,null,y),M.setRatio=Ct?Vt:jt,M.data=this._transform||Gt(t,r,!0),M.tween=s,M.pr=-1,a.pop()}if(i){for(;m;){for(x=m._next,y=_;y&&y.pr>m.pr;)y=y._next;(m._prev=y?y._prev:b)?m._prev._next=m:_=m,(m._next=y)?y._prev=m:b=m,m=x}this._firstPT=_}return!0},c.parse=function(t,e,i,a){var o,s,c,u,d,p,f,m,y,_,b=t.style;for(o in e){if("function"==typeof(p=e[o])&&(p=p(v,g)),s=l[o])i=s.parse(t,p,o,this,i,a,e);else{if("--"===o.substr(0,2)){this._tween._propLookup[o]=this._addTween.call(this._tween,t.style,"setProperty",K(t).getPropertyValue(o)+"",p+"",o,!1,o);continue}d=$(t,o,r)+"",y="string"==typeof p,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||y&&S.test(p)?(y||(p=((p=pt(p)).length>3?"rgba(":"rgb(")+p.join(",")+")"),i=xt(b,o,d,p,!0,"transparent",i,0,a)):y&&z.test(p)?i=xt(b,o,d,p,!0,null,i,0,a):(f=(c=parseFloat(d))||0===c?d.substr((c+"").length):"",(""===d||"auto"===d)&&("width"===o||"height"===o?(c=ot(t,o,r),f="px"):"left"===o||"top"===o?(c=et(t,o,r),f="px"):(c="opacity"!==o?0:1,f="")),(_=y&&"="===p.charAt(1))?(u=parseInt(p.charAt(0)+"1",10),p=p.substr(2),u*=parseFloat(p),m=p.replace(w,"")):(u=parseFloat(p),m=y?p.replace(w,""):""),""===m&&(m=o in n?n[o]:f),p=u||0===u?(_?u+c:u)+m:e[o],f!==m&&(""!==m||"lineHeight"===o)&&(u||0===u)&&c&&(c=tt(t,o,c,f),"%"===m?(c/=tt(t,o,100,"%")/100,!0!==e.strictUnits&&(d=c+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?c/=tt(t,o,1,m):"px"!==m&&(u=tt(t,o,u,m),m="px"),_&&(u||0===u)&&(p=u+c+m)),_&&(u+=c),!c&&0!==c||!u&&0!==u?void 0!==b[o]&&(p||p+""!="NaN"&&null!=p)?(i=new _t(b,o,u||c||0,0,i,-1,o,!1,0,d,p)).xs0="none"!==p||"display"!==o&&-1===o.indexOf("Style")?p:d:Y("invalid "+o+" tween value: "+e[o]):(i=new _t(b,o,c,u-c,i,0,o,!1!==h&&("px"===m||"zIndex"===o),0,d,p)).xs0=m)}a&&i&&!i.plugin&&(i.plugin=a)}return i},c.setRatio=function(t){var e,i,n,r=this._firstPT,a=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(e=r.c*t+r.s,r.r?e=r.r(e):a>e&&e>-a&&(e=0),r.type)if(1===r.type)if(2===(n=r.l))r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(e=r.r(r.s+r.c),r.type){if(1===r.type){for(n=r.l,i=r.xs0+e+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},c._enableTransforms=function(t){this._transform=this._transform||Gt(this._target,r,!0),this._transformType=this._transform.svg&&St||!t&&3!==this._transformType?2:3};var Zt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};c._addLazySet=function(t,e,i){var n=this._firstPT=new _t(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=Zt,n.data=this},c._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},c._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&(e.r=t[e.p]),e=e._next},c._kill=function(e){var i,n,r,a=e;if(e.autoAlpha||e.alpha){for(n in a={},e)a[n]=e[n];a.opacity=1,a.autoAlpha&&(a.visibility=1)}for(e.className&&(i=this._classNamePT)&&((r=i.xfirst)&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==n&&i.plugin._kill&&(i.plugin._kill(e),n=i.plugin),i=i._next;return t.prototype._kill.call(this,a)};var Jt=function(t,e,i){var n,r,a,o;if(t.slice)for(r=t.length;--r>-1;)Jt(t[r],e,i);else for(r=(n=t.childNodes).length;--r>-1;)o=(a=n[r]).type,a.style&&(e.push(it(a)),i&&i.push(a)),1!==o&&9!==o&&11!==o||!a.childNodes.length||Jt(a,e,i)};return o.cascadeTo=function(t,i,n){var r,a,o,s,l=e.to(t,i,n),c=[l],h=[],u=[],d=[],p=e._internals.reservedProps;for(t=l._targets||l.target,Jt(t,h,d),l.render(i,!0,!0),Jt(t,u),l.render(0,!0,!0),l._enabled(!0),r=d.length;--r>-1;)if((a=nt(d[r],h[r],u[r])).firstMPT){for(o in a=a.difs,n)p[o]&&(a[o]=n[o]);for(o in s={},a)s[o]=h[r][o];c.push(e.fromTo(d[r],i,s,a))}return c},t.activate([o]),o}),!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=function(t){var e=1>t?Math.pow(10,(t+"").length-2):1;return function(i){return(Math.round(i/t)*t*e|0)/e}},i=function(t,e){for(;t;)t.f||t.blob||(t.m=e||Math.round),t=t._next},n=t.prototype;n._onInitAllProps=function(){var t,n,r,a,o=this._tween,s=o.vars.roundProps,l={},c=o._propLookup.roundProps;if("object"!=typeof s||s.push)for("string"==typeof s&&(s=s.split(",")),r=s.length;--r>-1;)l[s[r]]=Math.round;else for(a in s)l[a]=e(s[a]);for(a in l)for(t=o._firstPT;t;)n=t._next,t.pg?t.t._mod(l):t.n===a&&(2===t.f&&t.t?i(t.t._firstPT,l[a]):(this._add(t.t,a,t.s,t.c,l[a]),n&&(n._prev=t._prev),t._prev?t._prev._next=n:o._firstPT===t&&(o._firstPT=n),t._next=t._prev=null,o._propLookup[a]=c)),t=n;return!1},n._add=function(t,e,i,n,r){this._addTween(t,e,i,i+n,e,r||Math.round),this._overwriteProps.push(e)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,i,n){var r,a;if("function"!=typeof t.setAttribute)return!1;for(r in e)"function"==typeof(a=e[r])&&(a=a(n,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",a+"",r,!1,r),this._overwriteProps.push(r);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,i,n){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,a,o,s,l,c,h=!0===e.useRadians?2*Math.PI:360,u=1e-6;for(r in e)"useRadians"!==r&&("function"==typeof(s=e[r])&&(s=s(n,t)),a=(c=(s+"").split("_"))[0],o=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),l=(s=this.finals[r]="string"==typeof a&&"="===a.charAt(1)?o+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-o,c.length&&(-1!==(a=c.join("_")).indexOf("short")&&((l%=h)!==l%(h/2)&&(l=0>l?l+h:l-h)),-1!==a.indexOf("_cw")&&0>l?l=(l+9999999999*h)%h-(l/h|0)*h:-1!==a.indexOf("ccw")&&l>0&&(l=(l-9999999999*h)%h-(l/h|0)*h)),(l>u||-u>l)&&(this._addTween(t,r,o,o+l,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],(function(t){var e,i,n,r,a=_gsScope.GreenSockGlobals||_gsScope,o=a.com.greensock,s=2*Math.PI,l=Math.PI/2,c=o._class,h=function(e,i){var n=c("easing."+e,(function(){}),!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,n},u=t.register||function(){},d=function(t,e,i,n,r){var a=c("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return u(a,t),a},p=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},f=function(e,i){var n=c("easing."+e,(function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1}),!0),r=n.prototype=new t;return r.constructor=n,r.getRatio=i,r.config=function(t){return new n(t)},n},m=d("Back",f("BackOut",(function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1})),f("BackIn",(function(t){return t*t*((this._p1+1)*t-this._p1)})),f("BackInOut",(function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)}))),g=c("easing.SlowMo",(function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i}),!0),v=g.prototype=new t;return v.constructor=g,v.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},g.ease=new g(.7,.7),v.config=g.config=function(t,e,i){return new g(t,e,i)},(v=(e=c("easing.SteppedEase",(function(t,e){t=t||1,this._p1=1/t,this._p2=t+(e?0:1),this._p3=e?1:0}),!0)).prototype=new t).constructor=e,v.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},v.config=e.config=function(t,i){return new e(t,i)},(v=(i=c("easing.ExpoScaleEase",(function(t,e,i){this._p1=Math.log(e/t),this._p2=e-t,this._p3=t,this._ease=i}),!0)).prototype=new t).constructor=i,v.getRatio=function(t){return this._ease&&(t=this._ease.getRatio(t)),(this._p3*Math.exp(this._p1*t)-this._p3)/this._p2},v.config=i.config=function(t,e,n){return new i(t,e,n)},(v=(n=c("easing.RoughEase",(function(e){for(var i,n,r,a,o,s,l=(e=e||{}).taper||"none",c=[],h=0,u=0|(e.points||20),d=u,f=!1!==e.randomize,m=!0===e.clamp,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--d>-1;)i=f?Math.random():1/u*d,n=g?g.getRatio(i):i,"none"===l?r=v:"out"===l?r=(a=1-i)*a*v:"in"===l?r=i*i*v:.5>i?r=(a=2*i)*a*.5*v:r=(a=2*(1-i))*a*.5*v,f?n+=Math.random()*r-.5*r:d%2?n+=.5*r:n-=.5*r,m&&(n>1?n=1:0>n&&(n=0)),c[h++]={x:i,y:n};for(c.sort((function(t,e){return t.x-e.x})),s=new p(1,1,null),d=u;--d>-1;)o=c[d],s=new p(o.x,o.y,s);this._prev=new p(0,0,0!==s.t?s:s.next)}),!0)).prototype=new t).constructor=n,v.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},v.config=function(t){return new n(t)},n.ease=new n,d("Bounce",h("BounceOut",(function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375})),h("BounceIn",(function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)})),h("BounceInOut",(function(t){var e=.5>t;return t=1/2.75>(t=e?1-2*t:2*t-1)?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}))),d("Circ",h("CircOut",(function(t){return Math.sqrt(1-(t-=1)*t)})),h("CircIn",(function(t){return-(Math.sqrt(1-t*t)-1)})),h("CircInOut",(function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}))),d("Elastic",(r=function(e,i,n){var r=c("easing."+e,(function(t,e){this._p1=t>=1?t:1,this._p2=(e||n)/(1>t?t:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2}),!0),a=r.prototype=new t;return a.constructor=r,a.getRatio=i,a.config=function(t,e){return new r(t,e)},r})("ElasticOut",(function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1}),.3),r("ElasticIn",(function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)}),.3),r("ElasticInOut",(function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1}),.45)),d("Expo",h("ExpoOut",(function(t){return 1-Math.pow(2,-10*t)})),h("ExpoIn",(function(t){return Math.pow(2,10*(t-1))-.001})),h("ExpoInOut",(function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}))),d("Sine",h("SineOut",(function(t){return Math.sin(t*l)})),h("SineIn",(function(t){return 1-Math.cos(t*l)})),h("SineInOut",(function(t){return-.5*(Math.cos(Math.PI*t)-1)}))),c("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),u(a.SlowMo,"SlowMo","ease,"),u(n,"RoughEase","ease,"),u(e,"SteppedEase","ease,"),m}),!0)})),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i={},n=t.document,r=t.GreenSockGlobals=t.GreenSockGlobals||t,a=r[e];if(a)return"undefined"!=typeof module&&module.exports&&(module.exports=a),a;var o,s,l,c,h,u=function(t){var e,i=t.split("."),n=r;for(e=0;e<i.length;e++)n[i[e]]=n=n[i[e]]||{};return n},d=u("com.greensock"),p=1e-10,f=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},m=function(){},g=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),v={},y=function(n,a,o,s){this.sc=v[n]?v[n].sc:[],v[n]=this,this.gsClass=null,this.func=o;var l=[];this.check=function(c){for(var h,d,p,f,m=a.length,g=m;--m>-1;)(h=v[a[m]]||new y(a[m],[])).gsClass?(l[m]=h.gsClass,g--):c&&h.sc.push(this);if(0===g&&o){if(p=(d=("com.greensock."+n).split(".")).pop(),f=u(d.join("."))[p]=this.gsClass=o.apply(o,l),s)if(r[p]=i[p]=f,"undefined"!=typeof module&&module.exports)if(n===e)for(m in module.exports=i[e]=f,i)f[m]=i[m];else i[e]&&(i[e][p]=f);else"function"==typeof define&&define.amd&&define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+n.split(".").pop(),[],(function(){return f}));for(m=0;m<this.sc.length;m++)this.sc[m].check()}},this.check(!0)},_=t._gsDefine=function(t,e,i,n){return new y(t,e,i,n)},b=d._class=function(t,e,i){return e=e||function(){},_(t,[],(function(){return e}),i),e};_.globals=r;var x=[0,0,1,1],w=b("easing.Ease",(function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?x.concat(e):x}),!0),M=w.map={},E=w.register=function(t,e,i,n){for(var r,a,o,s,l=e.split(","),c=l.length,h=(i||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(a=l[c],r=n?b("easing."+a,null,!0):d.easing[a]||{},o=h.length;--o>-1;)s=h[o],M[a+"."+s]=M[s+a]=r[s]=t.getRatio?t:t[s]||new t};for((l=w.prototype)._calcEnd=!1,l.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:.5>t?n/2:1-n/2},s=(o=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--s>-1;)l=o[s]+",Power"+s,E(new w(null,null,1,s),l,"easeOut",!0),E(new w(null,null,2,s),l,"easeIn"+(0===s?",easeNone":"")),E(new w(null,null,3,s),l,"easeInOut");M.linear=d.easing.Linear.easeIn,M.swing=d.easing.Quad.easeInOut;var T=b("events.EventDispatcher",(function(t){this._listeners={},this._eventTarget=t||this}));(l=T.prototype).addEventListener=function(t,e,i,n,r){r=r||0;var a,o,s=this._listeners[t],l=0;for(this!==c||h||c.wake(),null==s&&(this._listeners[t]=s=[]),o=s.length;--o>-1;)(a=s[o]).c===e&&a.s===i?s.splice(o,1):0===l&&a.pr<r&&(l=o+1);s.splice(l,0,{c:e,s:i,up:n,pr:r})},l.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},l.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for((e=r.length)>1&&(r=r.slice(0)),i=this._eventTarget;--e>-1;)(n=r[e])&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var S=t.requestAnimationFrame,A=t.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},L=C();for(s=(o=["ms","moz","webkit","o"]).length;--s>-1&&!S;)S=t[o[s]+"RequestAnimationFrame"],A=t[o[s]+"CancelAnimationFrame"]||t[o[s]+"CancelRequestAnimationFrame"];b("Ticker",(function(t,e){var i,r,a,o,s,l=this,u=C(),d=!(!1===e||!S)&&"auto",f=500,g=33,v=function(t){var e,n,c=C()-L;c>f&&(u+=c-g),L+=c,l.time=(L-u)/1e3,e=l.time-s,(!i||e>0||!0===t)&&(l.frame++,s+=e+(e>=o?.004:o-e),n=!0),!0!==t&&(a=r(v)),n&&l.dispatchEvent("tick")};T.call(l),l.time=l.frame=0,l.tick=function(){v(!0)},l.lagSmoothing=function(t,e){return arguments.length?(f=t||1/p,void(g=Math.min(e,f,0))):1/p>f},l.sleep=function(){null!=a&&(d&&A?A(a):clearTimeout(a),r=m,a=null,l===c&&(h=!1))},l.wake=function(t){null!==a?l.sleep():t?u+=-L+(L=C()):l.frame>10&&(L=C()-f+5),r=0===i?m:d&&S?S:function(t){return setTimeout(t,1e3*(s-l.time)+1|0)},l===c&&(h=!0),v(2)},l.fps=function(t){return arguments.length?(o=1/((i=t)||60),s=this.time+o,void l.wake()):i},l.useRAF=function(t){return arguments.length?(l.sleep(),d=t,void l.fps(i)):d},l.fps(t),setTimeout((function(){"auto"===d&&l.frame<5&&"hidden"!==(n||{}).visibilityState&&l.useRAF(!1)}),1500)})),(l=d.Ticker.prototype=new d.events.EventDispatcher).constructor=d.Ticker;var D=b("core.Animation",(function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,Z){h||c.wake();var i=this.vars.useFrames?Y:Z;i.add(this,i._time),this.vars.paused&&this.paused(!0)}}));c=D.ticker=new d.Ticker,(l=D.prototype)._dirty=l._gc=l._initted=l._paused=!1,l._totalTime=l._time=0,l._rawPrevTime=-1,l._next=l._last=l._onUpdate=l._timeline=l.timeline=null,l._paused=!1;var P=function(){h&&C()-L>2e3&&("hidden"!==(n||{}).visibilityState||!c.lagSmoothing())&&c.wake();var t=setTimeout(P,2e3);t.unref&&t.unref()};P(),l.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},l.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},l.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},l.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},l.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},l.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},l.render=function(t,e,i){},l.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},l.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale-1e-7},l._enabled=function(t,e){return h||c.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},l._kill=function(t,e){return this._enabled(!1,!1)},l.kill=function(t,e){return this._kill(t,e),this},l._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},l._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},l._callback=function(t){var e=this.vars,i=e[t],n=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this;switch(n?n.length:0){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},l.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=g(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},l.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},l.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},l.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},l.totalTime=function(t,e,i){if(h||c.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(z.length&&Q(),this.render(t,e,!1),z.length&&Q())}return this},l.progress=l.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},l.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},l.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},l.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,i;for(t=t||p,this._timeline&&this._timeline.smoothChildTiming&&(i=(e=this._pauseTime)||0===e?e:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/t),this._timeScale=t,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},l.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},l.paused=function(t){if(!arguments.length)return this._paused;var e,i,n=this._timeline;return t!=this._paused&&n&&(h||t||c.wake(),i=(e=n.rawTime())-this._pauseTime,!t&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=n.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var R=b("core.SimpleTimeline",(function(t){D.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0}));(l=R.prototype=new D).constructor=R,l.kill()._gc=!1,l._first=l._last=l._recent=null,l._sortChildren=!1,l.add=l.insert=function(t,e,i,n){var r,a;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=this.rawTime()-(t._timeline.rawTime()-t._pauseTime)),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(a=t._startTime;r&&r._startTime>a;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},l._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},l.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},l.rawTime=function(){return h||c.wake(),this._totalTime};var O=b("TweenLite",(function(e,i,n){if(D.call(this,i,n),this.render=O.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:O.selector(e)||e;var r,a,o,s=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?X[O.defaultOverwrite]:"number"==typeof l?l>>0:X[l],(s||e instanceof Array||e.push&&g(e))&&"number"!=typeof e[0])for(this._targets=o=f(e),this._propLookup=[],this._siblings=[],r=0;r<o.length;r++)(a=o[r])?"string"!=typeof a?a.length&&a!==t&&a[0]&&(a[0]===t||a[0].nodeType&&a[0].style&&!a.nodeType)?(o.splice(r--,1),this._targets=o=o.concat(f(a))):(this._siblings[r]=K(a,this,!1),1===l&&this._siblings[r].length>1&&tt(a,this,null,1,this._siblings[r])):"string"==typeof(a=o[r--]=O.selector(a))&&o.splice(r+1,1):o.splice(r--,1);else this._propLookup={},this._siblings=K(e,this,!1),1===l&&this._siblings.length>1&&tt(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-p,this.render(Math.min(0,-this._delay)))}),!0),I=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)};(l=O.prototype=new D).constructor=O,l.kill()._gc=!1,l.ratio=0,l._firstPT=l._targets=l._overwrittenProps=l._startAt=null,l._notifyPluginsOfEnabled=l._lazy=!1,O.version="2.0.2",O.defaultEase=l._ease=new w(null,null,1,1),O.defaultOverwrite="auto",O.ticker=c,O.autoSleep=120,O.lagSmoothing=function(t,e){c.lagSmoothing(t,e)},O.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(O.selector=i,i(e)):(n||(n=t.document),n?n.querySelectorAll?n.querySelectorAll(e):n.getElementById("#"===e.charAt(0)?e.substr(1):e):e)};var z=[],N={},k=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,F=/[\+-]=-?[\.\d]/,B=function(t){for(var e,i=this._firstPT,n=1e-6;i;)e=i.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m.call(this._tween,e,this._target||i.t,this._tween):n>e&&e>-n&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},U=function(t,e,i,n){var r,a,o,s,l,c,h,u=[],d=0,p="",f=0;for(u.start=t,u.end=e,t=u[0]=t+"",e=u[1]=e+"",i&&(i(u),t=u[0],e=u[1]),u.length=0,r=t.match(k)||[],a=e.match(k)||[],n&&(n._next=null,n.blob=1,u._firstPT=u._applyPT=n),l=a.length,s=0;l>s;s++)h=a[s],p+=(c=e.substr(d,e.indexOf(h,d)-d))||!s?c:",",d+=c.length,f?f=(f+1)%5:"rgba("===c.substr(-5)&&(f=1),h===r[s]||r.length<=s?p+=h:(p&&(u.push(p),p=""),o=parseFloat(r[s]),u.push(o),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:o,c:("="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*parseFloat(h.substr(2)):parseFloat(h)-o)||0,f:0,m:f&&4>f?Math.round:0}),d+=h.length;return(p+=e.substr(d))&&u.push(p),u.setRatio=B,F.test(e)&&(u.end=null),u},H=function(t,e,i,n,r,a,o,s,l){"function"==typeof n&&(n=n(l||0,t));var c=typeof t[e],h="function"!==c?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),u="get"!==i?i:h?o?t[h](o):t[h]():t[e],d="string"==typeof n&&"="===n.charAt(1),p={t:t,p:e,s:u,f:"function"===c,pg:0,n:r||e,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:d?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-u||0};return("number"!=typeof u||"number"!=typeof n&&!d)&&(o||isNaN(u)||!d&&isNaN(n)||"boolean"==typeof u||"boolean"==typeof n?(p.fp=o,p={t:U(u,d?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):n,s||O.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(p.s=parseFloat(u),d||(p.c=parseFloat(n)-p.s||0))),p.c?((p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p):void 0},G=O._internals={isArray:g,isSelector:I,lazyTweens:z,blobDif:U},j=O._plugins={},V=G.tweenLookup={},W=0,q=G.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},X={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Y=D._rootFramesTimeline=new R,Z=D._rootTimeline=new R,J=30,Q=G.lazyRender=function(){var t,e=z.length;for(N={};--e>-1;)(t=z[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);z.length=0};Z._startTime=c.time,Y._startTime=c.frame,Z._active=Y._active=!0,setTimeout(Q,1),D._updateRoot=O.render=function(){var t,e,i;if(z.length&&Q(),Z.render((c.time-Z._startTime)*Z._timeScale,!1,!1),Y.render((c.frame-Y._startTime)*Y._timeScale,!1,!1),z.length&&Q(),c.frame>=J){for(i in J=c.frame+(parseInt(O.autoSleep,10)||120),V){for(t=(e=V[i].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete V[i]}if((!(i=Z._first)||i._paused)&&O.autoSleep&&!Y._first&&1===c._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||c.sleep()}}},c.addEventListener("tick",D._updateRoot);var K=function(t,e,i){var n,r,a=t._gsTweenID;if(V[a||(t._gsTweenID=a="t"+W++)]||(V[a]={target:t,tweens:[]}),e&&((n=V[a].tweens)[r=n.length]=e,i))for(;--r>-1;)n[r]===e&&n.splice(r,1);return V[a].tweens},$=function(t,e,i,n){var r,a,o=t.vars.onOverwrite;return o&&(r=o(t,e,i,n)),(o=O.onOverwrite)&&(a=o(t,e,i,n)),!1!==r&&!1!==a},tt=function(t,e,i,n,r){var a,o,s,l;if(1===n||n>=4){for(l=r.length,a=0;l>a;a++)if((s=r[a])!==e)s._gc||s._kill(null,t,e)&&(o=!0);else if(5===n)break;return o}var c,h=e._startTime+p,u=[],d=0,f=0===e._duration;for(a=r.length;--a>-1;)(s=r[a])===e||s._gc||s._paused||(s._timeline!==e._timeline?(c=c||et(e,0,f),0===et(s,c,f)&&(u[d++]=s)):s._startTime<=h&&s._startTime+s.totalDuration()/s._timeScale>h&&((f||!s._initted)&&h-s._startTime<=2e-10||(u[d++]=s)));for(a=d;--a>-1;)if(l=(s=u[a])._firstPT,2===n&&s._kill(i,t,e)&&(o=!0),2!==n||!s._firstPT&&s._initted&&l){if(2!==n&&!$(s,e))continue;s._enabled(!1,!1)&&(o=!0)}return o},et=function(t,e,i){for(var n=t._timeline,r=n._timeScale,a=t._startTime;n._timeline;){if(a+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return(a/=r)>e?a-e:i&&a===e||!t._initted&&2*p>a-e?p:(a+=t.totalDuration()/t._timeScale/r)>e+p?0:a-e-p};l._init=function(){var t,e,i,n,r,a,o=this.vars,s=this._overwrittenProps,l=this._duration,c=!!o.immediateRender,h=o.ease;if(o.startAt){for(n in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={},o.startAt)r[n]=o.startAt[n];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=c&&!1!==o.lazy,r.startAt=r.delay=null,r.onUpdate=o.onUpdate,r.onUpdateParams=o.onUpdateParams,r.onUpdateScope=o.onUpdateScope||o.callbackScope||this,this._startAt=O.to(this.target||{},0,r),c)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(o.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(n in 0!==this._time&&(c=!1),i={},o)q[n]&&"autoCSS"!==n||(i[n]=o[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=c&&!1!==o.lazy,i.immediateRender=c,this._startAt=O.to(this.target,0,i),c){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=h=h?h instanceof w?h:"function"==typeof h?new w(h,o.easeParams):M[h]||O.defaultEase:O.defaultEase,o.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,t=0;a>t;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],s?s[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(e&&O._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=o.onUpdate,this._initted=!0},l._initProps=function(e,i,n,r,a){var o,s,l,c,h,u;if(null==e)return!1;for(o in N[e._gsTweenID]&&Q(),this.vars.css||e.style&&e!==t&&e.nodeType&&j.css&&!1!==this.vars.autoCSS&&function(t,e){var i,n={};for(i in t)q[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!j[i]||j[i]&&j[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n}(this.vars,e),this.vars)if(u=this.vars[o],q[o])u&&(u instanceof Array||u.push&&g(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[o]=u=this._swapSelfInParams(u,this));else if(j[o]&&(c=new j[o])._onInitTween(e,this.vars[o],this,a)){for(this._firstPT=h={_next:this._firstPT,t:c,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:c._priority,m:0},s=c._overwriteProps.length;--s>-1;)i[c._overwriteProps[s]]=this._firstPT;(c._priority||c._onInitAllProps)&&(l=!0),(c._onDisable||c._onEnable)&&(this._notifyPluginsOfEnabled=!0),h._next&&(h._next._prev=h)}else i[o]=H.call(this,e,o,"get",u,o,0,null,this.vars.stringFilter,a);return r&&this._kill(r,e)?this._initProps(e,i,n,r,a):this._overwrite>1&&this._firstPT&&n.length>1&&tt(e,this,i,this._overwrite,n)?(this._kill(i,e),this._initProps(e,i,n,r,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(N[e._gsTweenID]=!0),l)},l.render=function(t,e,i){var n,r,a,o,s=this._time,l=this._duration,c=this._rawPrevTime;if(t>=l-1e-7&&t>=0)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0>c||0>=t&&t>=-1e-7||c===p&&"isPause"!==this.data)&&c!==t&&(i=!0,c>p&&(r="onReverseComplete")),this._rawPrevTime=o=!e||t||c===t?t:p);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===l&&c>0)&&(r="onReverseComplete",n=this._reversed),0>t&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(c>=0&&(c!==p||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=o=!e||t||c===t?t:p)),(!this._initted||this._startAt&&this._startAt.progress())&&(i=!0);else if(this._totalTime=this._time=t,this._easeType){var h=t/l,u=this._easeType,d=this._easePower;(1===u||3===u&&h>=.5)&&(h=1-h),3===u&&(h*=2),1===d?h*=h:2===d?h*=h*h:3===d?h*=h*h*h:4===d&&(h*=h*h*h*h),this.ratio=1===u?1-h:2===u?h:.5>t/l?h/2:1-h/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==s||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=c,z.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/l):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&t>=0&&(this._active=!0),0===s&&(this._startAt&&(t>=0?this._startAt.render(t,!0,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(e||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>t&&this._startAt&&-1e-4!==t&&this._startAt.render(t,!0,i),e||(this._time!==s||n||i)&&this._callback("onUpdate")),r&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,!0,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===l&&this._rawPrevTime===p&&o!==p&&(this._rawPrevTime=0))}},l._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:O.selector(e)||e;var n,r,a,o,s,l,c,h,u,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,p=this._firstPT;if((g(e)||I(e))&&"number"!=typeof e[0])for(n=e.length;--n>-1;)this._kill(t,e[n],i)&&(l=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(e===this._targets[n]){s=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;s=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(s){if(c=t||s,h=t!==r&&"all"!==r&&t!==s&&("object"!=typeof t||!t._tempKill),i&&(O.onOverwrite||this.vars.onOverwrite)){for(a in c)s[a]&&(u||(u=[]),u.push(a));if((u||!t)&&!$(this,i,e,u))return!1}for(a in c)(o=s[a])&&(d&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,l=!0),o.pg&&o.t._kill(c)&&(l=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete s[a]),h&&(r[a]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return l},l.invalidate=function(){return this._notifyPluginsOfEnabled&&O._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],D.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-p,this.render(Math.min(0,-this._delay))),this},l._enabled=function(t,e){if(h||c.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=K(n[i],this,!0);else this._siblings=K(this.target,this,!0)}return D.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&O._onPluginEvent(t?"_onEnable":"_onDisable",this)},O.to=function(t,e,i){return new O(t,e,i)},O.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new O(t,e,i)},O.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new O(t,e,n)},O.delayedCall=function(t,e,i,n,r){return new O(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},O.set=function(t,e){return new O(t,0,e)},O.getTweensOf=function(t,e){if(null==t)return[];var i,n,r,a;if(t="string"!=typeof t?t:O.selector(t)||t,(g(t)||I(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(O.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(a=n[i],r=i;--r>-1;)a===n[r]&&n.splice(i,1)}else if(t._gsTweenID)for(i=(n=K(t).concat()).length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n||[]},O.killTweensOf=O.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=O.getTweensOf(t,e),r=n.length;--r>-1;)n[r]._kill(i,t)};var it=b("plugins.TweenPlugin",(function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=it.prototype}),!0);if(l=it.prototype,it.version="1.19.0",it.API=2,l._firstPT=null,l._addTween=H,l.setRatio=B,l._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},l._mod=l._roundProps=function(t){for(var e,i=this._firstPT;i;)(e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},O._onPluginEvent=function(t,e){var i,n,r,a,o,s=e._firstPT;if("_onInitAllProps"===t){for(;s;){for(o=s._next,n=r;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:a)?s._prev._next=s:r=s,(s._next=n)?n._prev=s:a=s,s=o}s=e._firstPT=r}for(;s;)s.pg&&"function"==typeof s.t[t]&&s.t[t]()&&(i=!0),s=s._next;return i},it.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===it.API&&(j[(new t[e])._propName]=t[e]);return!0},_.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=b("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",(function(){it.call(this,i,n),this._overwriteProps=r||[]}),!0===t.global),s=o.prototype=new it(i);for(e in s.constructor=o,o.API=t.API,a)"function"==typeof t[e]&&(s[a[e]]=t[e]);return o.version=t.version,it.activate([o]),o},o=t._gsQueue){for(s=0;s<o.length;s++)o[s]();for(l in v)v[l].func||t.console.log("GSAP encountered missing dependency: "+l)}h=!1}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");